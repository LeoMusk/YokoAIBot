{"version":3,"file":"js/app.1dde3517.js","mappings":"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","sources":["webpack://webot/./src/api/contact.ts","webpack://webot/./src/store/index.ts","webpack://webot/./src/store/config.ts","webpack://webot/./src/utils/websocket.ts","webpack://webot/./src/components/sop/CreateTaskDialog.vue?ef34","webpack://webot/./src/components/sop/CreateTaskDialog.vue","webpack://webot/./src/components/sop/CreateTaskDialog.vue?0f3b","webpack://webot/./src/api/config.ts","webpack://webot/./src/api/init.ts","webpack://webot/./src/config/brand.ts","webpack://webot/./src/components/NavBar.vue?9bec","webpack://webot/./src/components/NavBar.vue","webpack://webot/./src/components/NavBar.vue?01fd","webpack://webot/./src/components/ReconnectDialog.vue?b614","webpack://webot/./src/components/ReconnectDialog.vue","webpack://webot/./src/components/ReconnectDialog.vue?2f96","webpack://webot/./src/App.vue?2a5e","webpack://webot/./src/App.vue","webpack://webot/./src/App.vue?7ccd","webpack://webot/./src/store/theme.ts","webpack://webot/./src/api/autosop.ts","webpack://webot/./src/api/agent.ts","webpack://webot/./src/views/StartupPage.vue?094a","webpack://webot/./src/views/StartupPage.vue","webpack://webot/./src/views/StartupPage.vue?1921","webpack://webot/./src/store/user.ts","webpack://webot/./src/utils/SvgLoader.ts","webpack://webot/./src/composables/useSvgLoader.ts","webpack://webot/./src/views/MultiWelcomePage.vue?1cf3","webpack://webot/./src/views/MultiWelcomePage.vue","webpack://webot/./src/views/MultiWelcomePage.vue?f96e","webpack://webot/./src/api/chat.ts","webpack://webot/./src/components/chat/StaffDialog.vue?836d","webpack://webot/./src/components/chat/StaffDialog.vue","webpack://webot/./src/components/chat/StaffDialog.vue?70c2","webpack://webot/./src/components/chat/AIStaffConfig.vue?35c4","webpack://webot/./src/components/chat/AIStaffConfig.vue","webpack://webot/./src/components/chat/AIStaffConfig.vue?6fa3","webpack://webot/./src/components/CommonErrorDialog.vue?d0da","webpack://webot/./src/components/CommonErrorDialog.vue","webpack://webot/./src/components/CommonErrorDialog.vue?537b","webpack://webot/./src/utils/TaskQueue.ts","webpack://webot/./src/components/chat/ReplyLogDialog.vue?bfdf","webpack://webot/./src/components/chat/ReplyLogDialog.vue","webpack://webot/./src/components/chat/ReplyLogDialog.vue?cc4d","webpack://webot/./src/components/chat/StatsPanel.vue?5d56","webpack://webot/./src/components/chat/StatsPanel.vue","webpack://webot/./src/components/chat/StatsPanel.vue?6301","webpack://webot/./src/components/chat/AccountStatusDialog.vue?bddc","webpack://webot/./src/components/chat/AccountStatusDialog.vue","webpack://webot/./src/components/chat/AccountStatusDialog.vue?6c4a","webpack://webot/./src/views/AiChatNew.vue?9383","webpack://webot/./src/views/AiChatNew.vue","webpack://webot/./src/views/AiChatNew.vue?558d","webpack://webot/./src/components/settings/CozeAgentConfig.vue?c5bc","webpack://webot/./src/components/settings/CozeAgentConfig.vue","webpack://webot/./src/components/settings/CozeAgentConfig.vue?178f","webpack://webot/./src/api/external-api.ts","webpack://webot/./src/api/coze.ts","webpack://webot/./src/components/settings/GreetingConfig.vue?6e51","webpack://webot/./src/components/settings/GreetingConfig.vue","webpack://webot/./src/components/settings/GreetingConfig.vue?b0b1","webpack://webot/./src/views/SettingsPage.vue?0f3f","webpack://webot/./src/views/SettingsPage.vue","webpack://webot/./src/views/SettingsPage.vue?3715","webpack://webot/./src/components/sop/FriendListDialog.vue?2aab","webpack://webot/./src/components/sop/FriendListDialog.vue","webpack://webot/./src/components/sop/FriendListDialog.vue?a331","webpack://webot/./src/components/sop/ImportFriendListDialog.vue?f89e","webpack://webot/./src/components/sop/ImportFriendListDialog.vue","webpack://webot/./src/components/sop/ImportFriendListDialog.vue?bbd7","webpack://webot/./src/components/sop/MassSendingPanel.vue?f93f","webpack://webot/./src/components/sop/MassSendingPanel.vue","webpack://webot/./src/components/sop/MassSendingPanel.vue?e2b2","webpack://webot/./src/components/AutoFollowTaskList.vue?42c5","webpack://webot/./src/components/AutoFollowTaskList.vue","webpack://webot/./src/components/AutoFollowTaskList.vue?d897","webpack://webot/./src/components/AutoFollowLogs.vue?2ef4","webpack://webot/./src/components/AutoFollowLogs.vue","webpack://webot/./src/components/AutoFollowLogs.vue?344f","webpack://webot/./src/components/ui/CosmicSwitch.vue","webpack://webot/./src/components/ui/CosmicSwitch.vue?4a23","webpack://webot/./src/api/request.ts","webpack://webot/./src/api/moments.ts","webpack://webot/./src/views/AutoSOP.vue?f78d","webpack://webot/./src/views/AutoSOP.vue","webpack://webot/./src/views/AutoSOP.vue?c23d","webpack://webot/./src/api/license.ts","webpack://webot/./src/store/license.ts","webpack://webot/./src/views/LicenseView.vue?a774","webpack://webot/./src/views/LicenseView.vue","webpack://webot/./src/views/LicenseView.vue?e7ec","webpack://webot/./src/components/moments/TaskList.vue?7814","webpack://webot/./src/components/moments/TaskList.vue","webpack://webot/./src/components/moments/TaskList.vue?f43b","webpack://webot/./src/components/moments/CreateTaskWizard.vue?7166","webpack://webot/./src/components/moments/CreateTaskWizard.vue","webpack://webot/./src/components/moments/CreateTaskWizard.vue?7554","webpack://webot/./src/components/moments/MomentLogsDialog.vue?e4d9","webpack://webot/./src/components/moments/MomentLogsDialog.vue","webpack://webot/./src/components/moments/MomentLogsDialog.vue?7f0d","webpack://webot/./src/views/MomentsView.vue?7f09","webpack://webot/./src/views/MomentsView.vue","webpack://webot/./src/views/MomentsView.vue?b843","webpack://webot/./src/router/index.ts","webpack://webot/./src/main.ts","webpack://webot/webpack/bootstrap","webpack://webot/webpack/runtime/async module","webpack://webot/webpack/runtime/chunk loaded","webpack://webot/webpack/runtime/compat get default export","webpack://webot/webpack/runtime/define property getters","webpack://webot/webpack/runtime/ensure chunk","webpack://webot/webpack/runtime/get javascript chunk filename","webpack://webot/webpack/runtime/get mini-css chunk filename","webpack://webot/webpack/runtime/global","webpack://webot/webpack/runtime/hasOwnProperty shorthand","webpack://webot/webpack/runtime/load script","webpack://webot/webpack/runtime/make namespace object","webpack://webot/webpack/runtime/node module decorator","webpack://webot/webpack/runtime/publicPath","webpack://webot/webpack/runtime/css loading","webpack://webot/webpack/runtime/jsonp chunk loading","webpack://webot/webpack/startup"],"sourcesContent":["import { API_BASE_URL, headers } from './config'\r\n\r\nexport interface Contact {\r\n  id: string      //  name  id\r\n  name: string\r\n  tag?: string //\r\n  tags: string[]\r\n  avatar?: string // \r\n  wxid?: string   // ID\r\n  is_new?: number | boolean // \r\n  last_updated?: string     // \r\n  member_count?: number     // \r\n}\r\n\r\nexport interface Tag {\r\n  id: string\r\n  name: string\r\n  count: number\r\n}\r\n\r\n// \r\nexport const getContacts = async (tag?: string, keyword?: string, accountId?: string): Promise<Contact[]> => {\r\n  try {\r\n    const params = new URLSearchParams()\r\n    if (tag) params.append('tag', tag)\r\n    if (keyword) params.append('keyword', keyword)\r\n    if (accountId) params.append('account_id', accountId)\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contacts?${params.toString()}`,\r\n      { headers }\r\n    )\r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    \r\n    const data = await response.json()\r\n    // console.log(':', data)\r\n    const result = Array.isArray(data) ? data.map(contact => ({\r\n      id: String(contact.name || ''),\r\n      name: String(contact.name || ''),\r\n      wxid: String(contact.wxid || ''),\r\n      tags: Array.isArray(contact.tags) ? \r\n        contact.tags.map((tag: string | null) => String(tag || '')) : [],\r\n      avatar: contact.avatar || undefined,\r\n      is_new: contact.is_new === true,\r\n    })).filter(contact => contact.name.length > 0) : [];\r\n    return result;\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n// \r\nexport const inviteFriendsToGroup = async (params: { friends: string[], targetGroup: string, account_id: string }) => {\r\n  try {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contacts/invite-to-group`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          ...headers,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(params)\r\n      }\r\n    )\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      console.debug(':', error)\r\n      const msg = (error && (error.error || error.message)) || ''\r\n      throw new Error(msg)\r\n    }\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n// \r\nexport const getGroupMembers = async (groupName: string): Promise<any[]> => {\r\n  try {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contacts/group/${encodeURIComponent(groupName)}/members`,\r\n      { headers }\r\n    )\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('')\r\n    }\r\n    \r\n    const data = await response.json()\r\n    return data.members || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// \r\nexport const syncGroupMembers = async (groupName: string): Promise<any[]> => {\r\n  try {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contacts/group/${encodeURIComponent(groupName)}/sync`,\r\n      {\r\n        method: 'POST',\r\n        headers\r\n      }\r\n    )\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('')\r\n    }\r\n    \r\n    const data = await response.json()\r\n    return data.members || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n// \r\nexport const getGroups = async (keyword?: string, accountId?: string): Promise<Contact[]> => {\r\n  try {\r\n    const params = new URLSearchParams()\r\n    if (keyword) params.append('keyword', keyword)\r\n    if (accountId) params.append('account_id', accountId)\r\n    \r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contacts/groups?${params.toString()}`,\r\n      { headers }\r\n    )\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    \r\n    const data = await response.json()\r\n    return data.groups || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const setGroupTagBatch = async (params: { groups: string[], tag: string, account_id: string }): Promise<any> => {\r\n  try {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contacts/groups/set-tag`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          ...headers,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(params)\r\n      }\r\n    )\r\n    if (!response.ok) {\r\n      const error = await response.json().catch(() => ({}))\r\n      throw new Error(error.detail || error.error || '')\r\n    }\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// \r\nexport const getContactTags = async (accountId?: string): Promise<Tag[]> => {\r\n  try {\r\n    const params = new URLSearchParams()\r\n    if (accountId) params.append('account_id', accountId)\r\n    \r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contacts/tags?${params.toString()}`,\r\n      { headers }\r\n    )\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// \r\nexport const getGroupTags = async (accountId?: string): Promise<Tag[]> => {\r\n  try {\r\n    const params = new URLSearchParams()\r\n    if (accountId) params.append('account_id', accountId)\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contacts/group_tags?${params.toString()}`,\r\n      { headers }\r\n    )\r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n// \r\nexport const syncGroups = async (accountId?: string): Promise<void> => {\r\n  try {\r\n    const requestBody: any = { type: 'group' }\r\n    if (accountId) {\r\n      requestBody.account_id = accountId\r\n    }\r\n    \r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contact/sync`,\r\n      {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(requestBody)\r\n      }\r\n    )\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    const data = await response.json()\r\n    console.debug(\"syncContacts-group\",data)\r\n    return data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n// \r\nexport const syncContacts = async (accountId?: string): Promise<void> => {\r\n  try {\r\n    const requestBody: any = { type: 'friend' }\r\n    if (accountId) {\r\n      requestBody.account_id = accountId\r\n    }\r\n    \r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/contact/sync`,\r\n      {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(requestBody)\r\n      }\r\n    )\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    const data = await response.json()\r\n    console.debug(\"syncContacts-friend\",data)\r\n    return data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// /\r\nexport const getAutoFollowTasksByStartDate = async (date?: string, agentId?: string): Promise<any> => {\r\n  try {\r\n    const params = new URLSearchParams()\r\n    if (date) params.append('date', date)\r\n    if (agentId) params.append('agent_id', agentId)\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/tasks/auto-follow/by-start-date?${params.toString()}`,\r\n      { headers }\r\n    )\r\n    const result = await response.json()\r\n    if (!response.ok) {\r\n      throw new Error(result.detail || result.error || '')\r\n    }\r\n    //  { success, tasks }\r\n    if (Array.isArray(result)) {\r\n      return result\r\n    }\r\n    return result.tasks || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// \r\nexport const batchCancelAutoFollowTasks = async (taskIds: string[]): Promise<any> => {\r\n  try {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/tasks/auto-follow/batch-cancel`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          ...headers,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ task_ids: taskIds })\r\n      }\r\n    )\r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const batchUpdateAutoFollowAgent = async (taskIds: string[], agentId: string): Promise<any> => {\r\n  try {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/tasks/auto-follow/batch-update-agent`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          ...headers,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ task_ids: taskIds, agent_id: agentId })\r\n      }\r\n    )\r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}","import { createStore } from 'vuex'\r\n\r\ninterface UserInfo {\r\n  nickname: string;\r\n  account_id: string;\r\n}\r\n\r\ninterface State {\r\n  userInfo: UserInfo | null;\r\n  isLoggedIn: boolean;\r\n}\r\n\r\nexport default createStore({\r\n  state: {\r\n    userInfo: null,\r\n    isLoggedIn: false\r\n  },\r\n  getters: {\r\n    getUserInfo: (state: State) => state.userInfo,\r\n    isLoggedIn: (state: State) => state.isLoggedIn\r\n  },\r\n  mutations: {\r\n    SET_USER_INFO(state: State, userInfo: UserInfo) {\r\n      state.userInfo = userInfo;\r\n      state.isLoggedIn = true;\r\n    },\r\n    CLEAR_USER_INFO(state: State) {\r\n      state.userInfo = null;\r\n      state.isLoggedIn = false;\r\n    }\r\n  },\r\n  actions: {\r\n    setUserInfo({ commit }, userInfo: UserInfo) {\r\n      commit('SET_USER_INFO', userInfo);\r\n    },\r\n    logout({ commit }) {\r\n      commit('CLEAR_USER_INFO');\r\n    }\r\n  },\r\n  modules: {\r\n  }\r\n})","import { defineStore } from 'pinia'\r\nimport type { Config } from '@/types/config'\r\n\r\nconst defaultConfig: Config = {\r\n  theme: {\r\n    primary: '#2c3e50',\r\n    menuBackground: '#2c3e50',\r\n    menuTextColor: '#ffffff',\r\n    menuActiveTextColor: '#ffd04b',\r\n    menuHoverBackground: '#34495e',\r\n    gradientStart: '#2c3e50',\r\n    gradientEnd: '#4c5b6a'\r\n  },\r\n  navbar: {\r\n    items: [\r\n      { index: 'welcome', text: '' },\r\n      { index: 'ai-chat', text: 'AI' },\r\n      { index: 'customer-management', text: '' },\r\n      { index: 'auto-add', text: 'SOP' },\r\n      { index: 'settings', text: '' }\r\n    ]\r\n  }\r\n}\r\n\r\nexport const useConfigStore = defineStore('config', {\r\n  state: () => ({\r\n    config: defaultConfig as Config,\r\n    isLoaded: false\r\n  }),\r\n  actions: {\r\n    async loadConfig() {\r\n      try {\r\n        const response = await fetch('/config.json')\r\n        const data = await response.json()\r\n        this.config = data\r\n        this.isLoaded = true\r\n      } catch (error) {\r\n        console.error('Failed to load config:', error)\r\n        this.isLoaded = true // \r\n      }\r\n    }\r\n  }\r\n})\r\n","export class WebSocketClient {\r\n    private ws: WebSocket | null = null;\r\n    private reconnectAttempts = 0;\r\n    private maxReconnectAttempts = 10;  // \r\n    private reconnectTimeout = 1000;    // \r\n    private isReconnecting = false;     // \r\n    private heartbeatInterval: number | null = null;\r\n    private heartbeatTimeout: number | null = null;  // \r\n    \r\n    constructor() {\r\n        this.connect();\r\n    }\r\n    // \r\n    public checkConnection() {\r\n        if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\r\n            console.debug('WebSocket ...');\r\n            this.connect();\r\n        }\r\n    }\r\n    private connect() {\r\n        if (this.ws?.readyState === WebSocket.OPEN) return;\r\n        \r\n        this.ws = new WebSocket(`ws://${window.location.host}/ws`);\r\n        \r\n        this.ws.onopen = () => {\r\n            console.debug('WebSocket...');\r\n            this.reconnectAttempts = 0;\r\n            this.isReconnecting = false;\r\n            this.startHeartbeat();\r\n        };\r\n        // onmessage\r\n        this.ws.onmessage = (event) => {\r\n            try {\r\n                const message = JSON.parse(event.data);\r\n                console.debug('WebSocket:', message);  // \r\n                \r\n                // \r\n                if (message.type === 'pong' || message.type === 'ping') {\r\n                    console.debug('');\r\n                    // \r\n                    if (this.heartbeatTimeout) {\r\n                        clearTimeout(this.heartbeatTimeout);\r\n                        this.heartbeatTimeout = null;\r\n                    }\r\n                    return;\r\n                }\r\n                \r\n                this.handleMessage(message);\r\n            } catch (error) {\r\n                console.error('WebSocket:', error, ':', event.data);\r\n            }\r\n        };\r\n        \r\n        this.ws.onclose = (event) => {\r\n            console.debug('WebSocket...', event.code, event.reason);\r\n            this.stopHeartbeat();\r\n            if (!this.isReconnecting) {\r\n                this.reconnect();\r\n            }\r\n        };\r\n\r\n        this.ws.onerror = (error) => {\r\n            console.error('WebSocket:', error);\r\n            this.stopHeartbeat();\r\n            if (!this.isReconnecting) {\r\n                this.reconnect();\r\n            }\r\n        };\r\n    }\r\n    // \r\n    // WebSocketClientstartHeartbeat\r\nprivate startHeartbeat() {\r\n    this.stopHeartbeat();\r\n    this.heartbeatInterval = window.setInterval(() => {\r\n        if (this.ws?.readyState === WebSocket.OPEN) {\r\n            try {\r\n                this.ws.send(JSON.stringify({ type: 'ping' }));\r\n                console.debug('');\r\n                \r\n                // \r\n                this.heartbeatTimeout = window.setTimeout(() => {\r\n                    console.warn('...');\r\n                    this.reconnect();\r\n                }, 10000); // 10\r\n            } catch (error) {\r\n                console.error(':', error);\r\n                this.reconnect();\r\n            }\r\n        } else {\r\n            console.debug('WebSocket...');\r\n            this.reconnect();\r\n        }\r\n    }, 30000);\r\n}\r\n\r\n    private stopHeartbeat() {\r\n        if (this.heartbeatInterval) {\r\n            clearInterval(this.heartbeatInterval);\r\n            this.heartbeatInterval = null;\r\n        }\r\n    }\r\n    private reconnect() {\r\n        if (this.isReconnecting) return;\r\n        \r\n        this.isReconnecting = true;\r\n        \r\n        if (this.reconnectAttempts >= this.maxReconnectAttempts) {\r\n            console.error('Max reconnection attempts reached');\r\n            this.isReconnecting = false;\r\n            // \r\n            setTimeout(() => {\r\n                this.reconnectAttempts = 0;\r\n                this.reconnect();\r\n            }, 30000);\r\n            return;\r\n        }\r\n        \r\n        this.reconnectAttempts++;\r\n        console.debug(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})...`);\r\n        \r\n        // \r\n        const delay = this.reconnectTimeout * Math.pow(1.5, Math.min(this.reconnectAttempts, 8));\r\n        setTimeout(() => {\r\n            this.connect();\r\n        }, delay); // \r\n    }\r\n    \r\n    private handleMessage(message: any) {\r\n        console.debug(':', message.type, ':', message.data); \r\n        switch (message.type) {\r\n            case 'mass_sending_tasks':\r\n                this.handleMassSendingTasks(message.data);\r\n                break;\r\n            case 'task_status':\r\n                if (!message.data?.task_id) {\r\n                    console.error(':', message);\r\n                    return;\r\n                }\r\n                this.handleTaskStatus(message.data);\r\n                break;\r\n            case 'monitor_status':\r\n                console.debug('Received monitor monitor_status:', message.data);\r\n                window.dispatchEvent(new CustomEvent('monitor-status', {\r\n                    detail: message.data\r\n                }));\r\n                break;\r\n            case 'task_session':\r\n                console.debug('Received monitor task_session:', message.data);\r\n                window.dispatchEvent(new CustomEvent('task-session', {\r\n                    detail: message.data\r\n                }));\r\n                break;\r\n            case 'session_list':\r\n                console.debug('Received monitor session_list:', message.data);\r\n                window.dispatchEvent(new CustomEvent('session-list', {\r\n                    detail: message.data\r\n                }));\r\n                break;\r\n            case 'scheduler_status':\r\n                this.handleSchedulerStatus(message.data);\r\n                break;\r\n            case 'task_progress':\r\n                this.handleTaskProgress(message.data);\r\n                break;\r\n            case 'auto_reply_task':\r\n                this.handleAutoReplyTask(message.data);\r\n                break;\r\n            case 'pending_reply':\r\n                console.debug(':', message.data);\r\n                window.dispatchEvent(new CustomEvent('pending-reply', {\r\n                    detail: message.data\r\n                }));\r\n                break;\r\n            case 'auto_config_progress':\r\n                console.debug('Received auto_config_progress:', message.data);\r\n                window.dispatchEvent(new CustomEvent('auto-config-progress', {\r\n                    detail: message.data\r\n                }));\r\n                break;\r\n            case 'error_task':\r\n                // console.debug(':', message.data);\r\n                window.dispatchEvent(new CustomEvent('error-task', {\r\n                    detail: message.data\r\n                }));\r\n                break;\r\n        }\r\n    }\r\n    private handleMassSendingTasks(data: any) {\r\n        window.dispatchEvent(new CustomEvent('massSendingTasks', {\r\n            detail: data\r\n        }));\r\n    }\r\n    \r\n    private handleTaskStatus(data: any) {\r\n        // \r\n        if(data.type === 'mass_sending'){\r\n            //\r\n            window.dispatchEvent(new CustomEvent('taskStatus', {\r\n                detail: data\r\n            }));\r\n        } else if(data.type === 'chat_collection'){\r\n            //\r\n            window.dispatchEvent(new CustomEvent('taskStatus', {\r\n                detail: data\r\n            }));\r\n        }\r\n    }\r\n    private handleSchedulerStatus(data: any) {\r\n        // \r\n        window.dispatchEvent(new CustomEvent('scheduler-status-update', {\r\n            detail: data\r\n        }));\r\n    }\r\n    \r\n    private handleTaskProgress(data: any) {\r\n        window.dispatchEvent(new CustomEvent('task-progress-update', {\r\n            detail: data\r\n        }));\r\n    }\r\n    \r\n    private handleAutoReplyTask(data: any) {\r\n        window.dispatchEvent(new CustomEvent('auto-reply-task-update', {\r\n            detail: data\r\n        }));\r\n    }\r\n}\r\n\r\n// \r\nexport const wsClient = new WebSocketClient();","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, createBlock as _createBlock, toDisplayString as _toDisplayString, renderList as _renderList } from \"vue\"\n\nconst _hoisted_1 = { class: \"warning-text\" }\nconst _hoisted_2 = { class: \"label-with-icon\" }\nconst _hoisted_3 = { class: \"item-content\" }\nconst _hoisted_4 = { class: \"label-with-icon\" }\nconst _hoisted_5 = { class: \"item-content\" }\nconst _hoisted_6 = { class: \"grouping-control\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"grouping-input\"\n}\nconst _hoisted_8 = {\n  key: 0,\n  class: \"form-tip\"\n}\nconst _hoisted_9 = { class: \"label-with-icon\" }\nconst _hoisted_10 = { class: \"item-content\" }\nconst _hoisted_11 = { class: \"label-with-icon\" }\nconst _hoisted_12 = { class: \"item-content date-picker-container\" }\nconst _hoisted_13 = { class: \"label-with-icon\" }\nconst _hoisted_14 = { class: \"item-content\" }\nconst _hoisted_15 = { class: \"selected-targets\" }\nconst _hoisted_16 = { class: \"label-with-icon\" }\nconst _hoisted_17 = { class: \"item-content\" }\nconst _hoisted_18 = { class: \"label-with-icon\" }\nconst _hoisted_19 = { class: \"item-content\" }\nconst _hoisted_20 = { class: \"label-with-icon\" }\nconst _hoisted_21 = { class: \"item-content\" }\nconst _hoisted_22 = { class: \"dialog-footer\" }\n\nimport { ref, computed, onMounted, PropType, onUnmounted, nextTick } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { getContactTags } from '@/api/contact'\r\nimport { getConfig } from '@/api/config'\r\nimport { Clock, Calendar, User,Avatar, PriceTag, ChatLineRound, Files } from '@element-plus/icons-vue'\r\nimport zhCn from 'element-plus/es/locale/lang/zh-cn'\r\n\r\n// \r\ninterface UserTag {\r\n  id: string\r\n  name: string\r\n}\r\n\r\ninterface GreetingGroup {\r\n  id: string  // \r\n  name: string\r\n  greetings: Array<{\r\n    type: 'text' | 'file'\r\n    content: string\r\n    filePath?: string\r\n  }>\r\n}\r\n\r\ninterface CozeAgent {\r\n  botId: string\r\n  name: string\r\n  isDefault?: boolean\r\n}\r\n\r\n//  props \r\ninterface TaskFormData {\r\n  timeType: 'now' | 'schedule'\r\n  scheduleDate: Date | undefined \r\n  dayOffset: number\r\n  time: Date\r\n  tagIds: string[]\r\n  contentType: 'greeting' | 'agent'\r\n  greetingGroupId: string\r\n  agentId: string\r\n  sendInterval: string\r\n  autoGrouping: boolean\r\n  batchSize: number\r\n}\r\n\r\ninterface TaskSubmitData {\r\n  timeType: 'now' | 'schedule'\r\n  scheduleDate?: Date | null\r\n  time: Date | string | null\r\n  tagIds: string[]\r\n  selectedFriends: string[]\r\n  selectedGroups: string[]\r\n  contentType: 'greeting' | 'agent'\r\n  greetingGroupId: string\r\n  agentId: string\r\n  autoGrouping: boolean\r\n  batchSize: number\r\n}\r\n\r\n// \r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CreateTaskDialog',\n  props: {\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  modelValue: {  //  v-model\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  greetingGroups: {\r\n    type: Array as PropType<GreetingGroup[]>,\r\n    default: () => []\r\n  },\r\n  selectedFriends: {\r\n    type: Array as PropType<string[]>,\r\n    default: () => []\r\n  },\r\n  selectedGroups: {  // \r\n    type: Array as PropType<string[]>,\r\n    default: () => []\r\n  },\r\n  wechatNickname: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  isFromSOP: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n},\n  emits: ['update:visible', 'update:modelValue', 'create'],\n  setup(__props, { emit: __emit }) {\n\r\nconst props = __props\r\n\r\nconst dialogWidth = computed(() => {\r\n  // \r\n  const windowWidth = window.innerWidth\r\n  // \r\n  if (windowWidth < 768) {\r\n    return '95%'\r\n  }\r\n  // \r\n  if (windowWidth < 1200) {\r\n    return '80%'\r\n  }\r\n  // \r\n  return '500px'\r\n})\r\n\r\nconst formatSelectedTargets = computed(() => {\r\n  const parts = []\r\n  if (props.selectedFriends.length > 0) {\r\n    const friendText = props.selectedFriends.length <= 3\r\n      ? props.selectedFriends.join('')\r\n      : `${props.selectedFriends.slice(0, 3).join('')}${props.selectedFriends.length}`\r\n    parts.push(friendText)\r\n  }\r\n  if (props.selectedGroups.length > 0) {\r\n    const groupText = props.selectedGroups.length <= 3\r\n      ? props.selectedGroups.join('')\r\n      : `${props.selectedGroups.slice(0, 3).join('')}${props.selectedGroups.length}`\r\n    parts.push(groupText)\r\n  }\r\n  return parts.join('')\r\n})\r\n\r\nconst greetingGroups = ref<GreetingGroup[]>([])\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\n\r\n// \r\nconst loadGreetingGroups = async () => {\r\n  try {\r\n    const result = await getConfig('greeting_config')\r\n    console.debug(\"\",result)\r\n    // \r\n    const config = result?.data?.greeting_config?.greeting_config\r\n    if (Array.isArray(config)) {\r\n      greetingGroups.value = config.map((group) => ({\r\n        id: group.name, //  name \r\n        name: group.name,\r\n        greetings: Array.isArray(group.greetings) ? group.greetings : []\r\n      }))\r\n      console.debug(':', greetingGroups.value)\r\n    } else {\r\n      console.warn(':', config)\r\n      greetingGroups.value = []\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result.success && result.data) {\r\n      const agents = Array.isArray(result.data) ? result.data : \r\n                    Array.isArray(result.data.agents) ? result.data.agents : []\r\n      \r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n//  emit \r\nconst emit = __emit\r\n\r\n// \r\nconst dialogVisible = computed({\r\n  get: () => props.visible || props.modelValue,\r\n  set: (val) => {\r\n    emit('update:visible', val)\r\n    emit('update:modelValue', val)\r\n  }\r\n})\r\n\r\n// \r\nconst userTags = ref<UserTag[]>([])\r\n\r\nconst handleTimeChange = (time: Date) => {\r\n  if (time) {\r\n    // \r\n    const hours = time.getHours()\r\n    const minutes = time.getMinutes()\r\n    \r\n    // \r\n    const now = new Date()\r\n    taskForm.value.time = new Date(\r\n      now.getFullYear(),\r\n      now.getMonth(),\r\n      now.getDate(),\r\n      hours,\r\n      minutes,\r\n      0\r\n    )\r\n  }\r\n}\r\n\r\n// \r\nconst getLocalISOString = (date: Date) => {\r\n  // \r\n  const tzOffset = -date.getTimezoneOffset();\r\n  const diff = tzOffset >= 0 ? '+' : '-';\r\n  const pad = (n: number) => `${Math.floor(Math.abs(n))}`.padStart(2, '0');\r\n  const hours = pad(tzOffset / 60);\r\n  const minutes = pad(tzOffset % 60);\r\n  return date.getFullYear() +\r\n    '-' + pad(date.getMonth() + 1) +\r\n    '-' + pad(date.getDate()) +\r\n    'T' + pad(date.getHours()) +\r\n    ':' + pad(date.getMinutes()) +\r\n    ':' + pad(date.getSeconds()) +\r\n    diff + hours + ':' + minutes;\r\n}\r\n\r\n// \r\nconst disabledDate = (time: Date) => {\r\n  // 60\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  \r\n  const maxDate = new Date();\r\n  maxDate.setDate(maxDate.getDate() + 60);\r\n  \r\n  return time.getTime() < today.getTime() || time.getTime() > maxDate.getTime();\r\n};\r\n\r\n// \r\nconst taskForm = ref<TaskFormData>({\r\n  timeType: 'now',\r\n  scheduleDate: undefined,\r\n  dayOffset: 0,\r\n  time: new Date(),\r\n  tagIds: [],\r\n  contentType: 'greeting',\r\n  greetingGroupId: '',\r\n  agentId: '',\r\n  sendInterval: '3-8',\r\n  autoGrouping: false,\r\n  batchSize: 10\r\n})\r\n\r\n// \r\nconst loadUserTags = async () => {\r\n  try {\r\n    //  getContactTags  getConfig\r\n    userTags.value = await getContactTags()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst handleCreate = async () => {\r\n  try {\r\n    if (taskForm.value.timeType === 'schedule') {\r\n      if (!taskForm.value.scheduleDate) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n      if (!taskForm.value.time) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n    }\r\n\r\n    // \r\n    if (!taskForm.value.tagIds.length && \r\n        !props.selectedFriends.length && \r\n        !props.selectedGroups.length) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n\r\n    // \r\n    if (taskForm.value.contentType === 'greeting' && !taskForm.value.greetingGroupId) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    if (taskForm.value.contentType === 'agent' && !taskForm.value.agentId) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n\r\n    //  submitData \r\n    let submitData: TaskSubmitData = {\r\n      ...taskForm.value,\r\n      time: taskForm.value.time,\r\n      selectedFriends: props.selectedFriends,\r\n      selectedGroups: props.selectedGroups\r\n    }\r\n    \r\n    if (taskForm.value.timeType === 'schedule' && taskForm.value.scheduleDate && taskForm.value.time) {\r\n      // \r\n      const scheduleDate = new Date(taskForm.value.scheduleDate)\r\n      const selectedTime = taskForm.value.time\r\n      \r\n      const scheduleDateTime = new Date(\r\n        scheduleDate.getFullYear(),\r\n        scheduleDate.getMonth(),\r\n        scheduleDate.getDate(),\r\n        selectedTime.getHours(),\r\n        selectedTime.getMinutes(),\r\n        0\r\n      )\r\n      \r\n      //  ISO \r\n      submitData.time = getLocalISOString(scheduleDateTime)\r\n    }\r\n    \r\n    emit('create', submitData)\r\n    dialogVisible.value = false\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst handleResize = () => nextTick()\r\n\r\n// \r\nonMounted(() => {\r\n  loadUserTags()\r\n  loadGreetingGroups()\r\n  loadCozeAgents()\r\n  window.addEventListener('resize', handleResize)\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', handleResize)\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_input_number = _resolveComponent(\"el-input-number\")!\n  const _component_el_radio = _resolveComponent(\"el-radio\")!\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\")!\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\")!\n  const _component_el_time_picker = _resolveComponent(\"el-time-picker\")!\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\")!\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((dialogVisible).value = $event)),\n    title: \"\",\n    width: dialogWidth.value,\n    top: '15vh',\n    \"close-on-click-modal\": false\n  }, {\n    footer: _withCtx(() => [\n      _createElementVNode(\"span\", _hoisted_22, [\n        _createVNode(_component_el_button, {\n          onClick: _cache[10] || (_cache[10] = ($event: any) => (dialogVisible.value = false))\n        }, {\n          default: _withCtx(() => [...(_cache[28] || (_cache[28] = [\n            _createTextVNode(\"\", -1)\n          ]))]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: handleCreate\n        }, {\n          default: _withCtx(() => [...(_cache[29] || (_cache[29] = [\n            _createTextVNode(\"\", -1)\n          ]))]),\n          _: 1\n        })\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_component_el_alert, {\n        type: \"warning\",\n        \"show-icon\": \"\",\n        closable: false,\n        class: \"push-warning-banner\"\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"span\", _hoisted_1, [\n            _cache[12] || (_cache[12] = _createTextVNode(\"100\", -1)),\n            (__props.isFromSOP)\n              ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                  _createTextVNode(\"\")\n                ], 64))\n              : _createCommentVNode(\"\", true)\n          ])\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_form, {\n        model: taskForm.value,\n        \"label-width\": \"100px\"\n      }, {\n        default: _withCtx(() => [\n          (__props.wechatNickname)\n            ? (_openBlock(), _createBlock(_component_el_form_item, {\n                key: 0,\n                class: \"custom-label-form-item\"\n              }, {\n                label: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_2, [\n                    _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(Avatar))\n                      ]),\n                      _: 1\n                    }),\n                    _cache[13] || (_cache[13] = _createElementVNode(\"span\", null, \"\", -1))\n                  ])\n                ]),\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_3, [\n                    _createVNode(_component_el_input, {\n                      \"model-value\": __props.wechatNickname,\n                      readonly: \"\",\n                      placeholder: \"\"\n                    }, null, 8, [\"model-value\"])\n                  ])\n                ]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true),\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(Files))\n                  ]),\n                  _: 1\n                }),\n                _cache[14] || (_cache[14] = _createElementVNode(\"span\", null, \"\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_5, [\n                _createElementVNode(\"div\", _hoisted_6, [\n                  _createVNode(_component_el_switch, {\n                    modelValue: taskForm.value.autoGrouping,\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((taskForm.value.autoGrouping) = $event)),\n                    \"active-text\": \"\",\n                    \"inactive-text\": \"\"\n                  }, null, 8, [\"modelValue\"]),\n                  (taskForm.value.autoGrouping)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                        _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"grouping-label\" }, \"\", -1)),\n                        _createVNode(_component_el_input_number, {\n                          modelValue: taskForm.value.batchSize,\n                          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((taskForm.value.batchSize) = $event)),\n                          min: 2,\n                          max: 500,\n                          step: 1,\n                          size: \"small\",\n                          \"controls-position\": \"right\"\n                        }, null, 8, [\"modelValue\"])\n                      ]))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                (taskForm.value.autoGrouping)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \"  \"))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_9, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(Clock))\n                  ]),\n                  _: 1\n                }),\n                _cache[16] || (_cache[16] = _createElementVNode(\"span\", null, \"\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createVNode(_component_el_radio_group, {\n                  modelValue: taskForm.value.timeType,\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((taskForm.value.timeType) = $event))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_radio, { label: \"now\" }, {\n                      default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                        _createTextVNode(\"\", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_radio, { label: \"schedule\" }, {\n                      default: _withCtx(() => [...(_cache[18] || (_cache[18] = [\n                        _createTextVNode(\"\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ])\n            ]),\n            _: 1\n          }),\n          (taskForm.value.timeType === 'schedule')\n            ? (_openBlock(), _createBlock(_component_el_form_item, {\n                key: 1,\n                class: \"custom-label-form-item\"\n              }, {\n                label: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_11, [\n                    _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(Calendar))\n                      ]),\n                      _: 1\n                    }),\n                    _cache[19] || (_cache[19] = _createElementVNode(\"span\", null, \"\", -1))\n                  ])\n                ]),\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_12, [\n                    _createVNode(_component_el_date_picker, {\n                      modelValue: taskForm.value.scheduleDate,\n                      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((taskForm.value.scheduleDate) = $event)),\n                      type: \"date\",\n                      placeholder: \"\",\n                      format: \"YYYY/MM/DD\",\n                      \"disabled-date\": disabledDate,\n                      class: \"date-picker\",\n                      locale: _unref(zhCn)\n                    }, null, 8, [\"modelValue\", \"locale\"]),\n                    _createVNode(_component_el_time_picker, {\n                      modelValue: taskForm.value.time,\n                      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((taskForm.value.time) = $event)),\n                      format: \"HH:mm\",\n                      placeholder: \"\",\n                      class: \"time-picker\",\n                      \"default-time\": new Date(2000, 1, 1, new Date().getHours(), new Date().getMinutes()),\n                      onChange: handleTimeChange,\n                      locale: _unref(zhCn)\n                    }, null, 8, [\"modelValue\", \"default-time\", \"locale\"])\n                  ])\n                ]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true),\n          (__props.selectedFriends.length > 0 || __props.selectedGroups.length > 0)\n            ? (_openBlock(), _createBlock(_component_el_form_item, {\n                key: 2,\n                class: \"custom-label-form-item\"\n              }, {\n                label: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_13, [\n                    _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(User))\n                      ]),\n                      _: 1\n                    }),\n                    _cache[20] || (_cache[20] = _createElementVNode(\"span\", null, \"\", -1))\n                  ])\n                ]),\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_14, [\n                    _createElementVNode(\"div\", _hoisted_15, _toDisplayString(formatSelectedTargets.value), 1)\n                  ])\n                ]),\n                _: 1\n              }))\n            : (_openBlock(), _createBlock(_component_el_form_item, {\n                key: 3,\n                class: \"custom-label-form-item\"\n              }, {\n                label: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_16, [\n                    _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(PriceTag))\n                      ]),\n                      _: 1\n                    }),\n                    _cache[21] || (_cache[21] = _createElementVNode(\"span\", null, \"\", -1))\n                  ])\n                ]),\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_17, [\n                    _createVNode(_component_el_checkbox_group, {\n                      modelValue: taskForm.value.tagIds,\n                      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((taskForm.value.tagIds) = $event))\n                    }, {\n                      default: _withCtx(() => [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(userTags.value, (tag) => {\n                          return (_openBlock(), _createBlock(_component_el_checkbox, {\n                            key: tag.id,\n                            label: tag.id\n                          }, {\n                            default: _withCtx(() => [\n                              _createTextVNode(_toDisplayString(tag.name), 1)\n                            ]),\n                            _: 2\n                          }, 1032, [\"label\"]))\n                        }), 128))\n                      ]),\n                      _: 1\n                    }, 8, [\"modelValue\"])\n                  ])\n                ]),\n                _: 1\n              })),\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item last-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_18, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(ChatLineRound))\n                  ]),\n                  _: 1\n                }),\n                _cache[22] || (_cache[22] = _createElementVNode(\"span\", null, \"\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_19, [\n                _createVNode(_component_el_radio_group, {\n                  modelValue: taskForm.value.contentType,\n                  \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((taskForm.value.contentType) = $event)),\n                  class: \"content-type-radio\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_radio, { label: \"greeting\" }, {\n                      default: _withCtx(() => [...(_cache[23] || (_cache[23] = [\n                        _createTextVNode(\"\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"]),\n                (taskForm.value.contentType === 'greeting')\n                  ? (_openBlock(), _createBlock(_component_el_select, {\n                      key: 0,\n                      modelValue: taskForm.value.greetingGroupId,\n                      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((taskForm.value.greetingGroupId) = $event)),\n                      placeholder: \"\",\n                      class: \"select-full-width\"\n                    }, {\n                      default: _withCtx(() => [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(greetingGroups.value, (group) => {\n                          return (_openBlock(), _createBlock(_component_el_option, {\n                            key: group.id,\n                            label: group.name,\n                            value: group.id\n                          }, null, 8, [\"label\", \"value\"]))\n                        }), 128))\n                      ]),\n                      _: 1\n                    }, 8, [\"modelValue\"]))\n                  : (_openBlock(), _createBlock(_component_el_select, {\n                      key: 1,\n                      modelValue: taskForm.value.agentId,\n                      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((taskForm.value.agentId) = $event)),\n                      placeholder: \"\",\n                      class: \"select-full-width\"\n                    }, {\n                      default: _withCtx(() => [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cozeAgents.value, (agent) => {\n                          return (_openBlock(), _createBlock(_component_el_option, {\n                            key: agent.botId,\n                            label: agent.name,\n                            value: agent.botId\n                          }, null, 8, [\"label\", \"value\"]))\n                        }), 128))\n                      ]),\n                      _: 1\n                    }, 8, [\"modelValue\"]))\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_20, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(Clock))\n                  ]),\n                  _: 1\n                }),\n                _cache[24] || (_cache[24] = _createElementVNode(\"span\", null, \"\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_21, [\n                _createVNode(_component_el_radio_group, {\n                  modelValue: taskForm.value.sendInterval,\n                  \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((taskForm.value.sendInterval) = $event))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_radio, { label: \"3-8\" }, {\n                      default: _withCtx(() => [...(_cache[25] || (_cache[25] = [\n                        _createTextVNode(\"3-8\", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_radio, { label: \"10-30\" }, {\n                      default: _withCtx(() => [...(_cache[26] || (_cache[26] = [\n                        _createTextVNode(\"10-30\", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_radio, { label: \"30-60\" }, {\n                      default: _withCtx(() => [...(_cache[27] || (_cache[27] = [\n                        _createTextVNode(\"30-60\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"model\"])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\", \"width\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    title=\"\"\r\n    :width=\"dialogWidth\"\r\n    :top=\"'15vh'\"\r\n    :close-on-click-modal=\"false\"\r\n  >\r\n  <!--  -->\r\n  <el-alert\r\n      type=\"warning\"\r\n      show-icon\r\n      :closable=\"false\"\r\n      class=\"push-warning-banner\"\r\n    >\r\n      <span class=\"warning-text\">100<template v-if=\"isFromSOP\"></template></span>\r\n    </el-alert>\r\n    <el-form :model=\"taskForm\" label-width=\"100px\">\r\n      <el-form-item class=\"custom-label-form-item\" v-if=\"wechatNickname\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><Avatar /></el-icon>\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <el-input :model-value=\"wechatNickname\" readonly placeholder=\"\" />\r\n        </div>\r\n      </el-form-item>\r\n      <!--  -->\r\n      <el-form-item class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><Files /></el-icon>\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <div class=\"grouping-control\">\r\n            <el-switch\r\n              v-model=\"taskForm.autoGrouping\"\r\n              active-text=\"\"\r\n              inactive-text=\"\"\r\n            />\r\n            <div v-if=\"taskForm.autoGrouping\" class=\"grouping-input\">\r\n              <span class=\"grouping-label\"></span>\r\n              <el-input-number\r\n                v-model=\"taskForm.batchSize\"\r\n                :min=\"2\"\r\n                :max=\"500\"\r\n                :step=\"1\"\r\n                size=\"small\"\r\n                controls-position=\"right\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"form-tip\" v-if=\"taskForm.autoGrouping\">\r\n            \r\n          </div>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><Clock /></el-icon>\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <el-radio-group v-model=\"taskForm.timeType\">\r\n            <el-radio label=\"now\"></el-radio>\r\n            <el-radio label=\"schedule\"></el-radio>\r\n          </el-radio-group>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <template v-if=\"taskForm.timeType === 'schedule'\">\r\n        <!--  -->\r\n        <el-form-item class=\"custom-label-form-item\">\r\n          <template #label>\r\n            <div class=\"label-with-icon\">\r\n              <el-icon class=\"label-icon\"><Calendar /></el-icon>\r\n              <span></span>\r\n            </div>\r\n          </template>\r\n          <div class=\"item-content date-picker-container\">\r\n            <el-date-picker\r\n              v-model=\"taskForm.scheduleDate\"\r\n              type=\"date\"\r\n              placeholder=\"\"\r\n              format=\"YYYY/MM/DD\"\r\n              :disabled-date=\"disabledDate\"\r\n              class=\"date-picker\"\r\n              :locale=\"zhCn\"\r\n            />\r\n            <el-time-picker\r\n              v-model=\"taskForm.time\"\r\n              format=\"HH:mm\"\r\n              placeholder=\"\"\r\n              class=\"time-picker\"\r\n              :default-time=\"new Date(2000, 1, 1, new Date().getHours(), new Date().getMinutes())\"\r\n              @change=\"handleTimeChange\"\r\n              :locale=\"zhCn\"\r\n            />\r\n          </div>\r\n        </el-form-item>\r\n      </template>\r\n\r\n      <!--  -->\r\n      <el-form-item v-if=\"selectedFriends.length > 0 || selectedGroups.length > 0\" class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><User /></el-icon>\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <div class=\"selected-targets\">\r\n            {{ formatSelectedTargets }}\r\n          </div>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <!-- () -->\r\n      <el-form-item v-else class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><PriceTag /></el-icon>\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <el-checkbox-group v-model=\"taskForm.tagIds\">\r\n            <el-checkbox \r\n              v-for=\"tag in userTags\" \r\n              :key=\"tag.id\" \r\n              :label=\"tag.id\"\r\n            >\r\n              {{ tag.name }}\r\n            </el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n      </el-form-item>\r\n\r\n       <!--  -->\r\n       <el-form-item class=\"custom-label-form-item last-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><ChatLineRound /></el-icon>\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <el-radio-group v-model=\"taskForm.contentType\" class=\"content-type-radio\">\r\n            <el-radio label=\"greeting\"></el-radio>\r\n            <!-- <el-radio label=\"agent\"></el-radio> -->\r\n          </el-radio-group>\r\n          \r\n          <template v-if=\"taskForm.contentType === 'greeting'\">\r\n            <el-select v-model=\"taskForm.greetingGroupId\" placeholder=\"\" class=\"select-full-width\">\r\n              <el-option\r\n                v-for=\"group in greetingGroups\"\r\n                :key=\"group.id\"\r\n                :label=\"group.name\"\r\n                :value=\"group.id\"\r\n              />\r\n            </el-select>\r\n          </template>\r\n          \r\n          <template v-else>\r\n            <el-select v-model=\"taskForm.agentId\" placeholder=\"\" class=\"select-full-width\">\r\n              <el-option\r\n                v-for=\"agent in cozeAgents\"\r\n                :key=\"agent.botId\"\r\n                :label=\"agent.name\"\r\n                :value=\"agent.botId\"\r\n              />\r\n            </el-select>\r\n          </template>\r\n        </div>\r\n      </el-form-item>\r\n      <el-form-item class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><Clock /></el-icon>\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <el-radio-group v-model=\"taskForm.sendInterval\">\r\n            <el-radio label=\"3-8\">3-8</el-radio>\r\n            <el-radio label=\"10-30\">10-30</el-radio>\r\n            <el-radio label=\"30-60\">30-60</el-radio>\r\n          </el-radio-group>\r\n        </div>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\"></el-button>\r\n        <el-button type=\"primary\" @click=\"handleCreate\"></el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, PropType, onUnmounted, nextTick } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { getContactTags } from '@/api/contact'\r\nimport { getConfig } from '@/api/config'\r\nimport { Clock, Calendar, User,Avatar, PriceTag, ChatLineRound, Files } from '@element-plus/icons-vue'\r\nimport zhCn from 'element-plus/es/locale/lang/zh-cn'\r\n\r\n// \r\ninterface UserTag {\r\n  id: string\r\n  name: string\r\n}\r\n\r\ninterface GreetingGroup {\r\n  id: string  // \r\n  name: string\r\n  greetings: Array<{\r\n    type: 'text' | 'file'\r\n    content: string\r\n    filePath?: string\r\n  }>\r\n}\r\n\r\ninterface CozeAgent {\r\n  botId: string\r\n  name: string\r\n  isDefault?: boolean\r\n}\r\n\r\n//  props \r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  modelValue: {  //  v-model\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  greetingGroups: {\r\n    type: Array as PropType<GreetingGroup[]>,\r\n    default: () => []\r\n  },\r\n  selectedFriends: {\r\n    type: Array as PropType<string[]>,\r\n    default: () => []\r\n  },\r\n  selectedGroups: {  // \r\n    type: Array as PropType<string[]>,\r\n    default: () => []\r\n  },\r\n  wechatNickname: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  isFromSOP: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst dialogWidth = computed(() => {\r\n  // \r\n  const windowWidth = window.innerWidth\r\n  // \r\n  if (windowWidth < 768) {\r\n    return '95%'\r\n  }\r\n  // \r\n  if (windowWidth < 1200) {\r\n    return '80%'\r\n  }\r\n  // \r\n  return '500px'\r\n})\r\n\r\nconst formatSelectedTargets = computed(() => {\r\n  const parts = []\r\n  if (props.selectedFriends.length > 0) {\r\n    const friendText = props.selectedFriends.length <= 3\r\n      ? props.selectedFriends.join('')\r\n      : `${props.selectedFriends.slice(0, 3).join('')}${props.selectedFriends.length}`\r\n    parts.push(friendText)\r\n  }\r\n  if (props.selectedGroups.length > 0) {\r\n    const groupText = props.selectedGroups.length <= 3\r\n      ? props.selectedGroups.join('')\r\n      : `${props.selectedGroups.slice(0, 3).join('')}${props.selectedGroups.length}`\r\n    parts.push(groupText)\r\n  }\r\n  return parts.join('')\r\n})\r\n\r\nconst greetingGroups = ref<GreetingGroup[]>([])\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\n\r\n// \r\nconst loadGreetingGroups = async () => {\r\n  try {\r\n    const result = await getConfig('greeting_config')\r\n    console.debug(\"\",result)\r\n    // \r\n    const config = result?.data?.greeting_config?.greeting_config\r\n    if (Array.isArray(config)) {\r\n      greetingGroups.value = config.map((group) => ({\r\n        id: group.name, //  name \r\n        name: group.name,\r\n        greetings: Array.isArray(group.greetings) ? group.greetings : []\r\n      }))\r\n      console.debug(':', greetingGroups.value)\r\n    } else {\r\n      console.warn(':', config)\r\n      greetingGroups.value = []\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result.success && result.data) {\r\n      const agents = Array.isArray(result.data) ? result.data : \r\n                    Array.isArray(result.data.agents) ? result.data.agents : []\r\n      \r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n//  emit \r\nconst emit = defineEmits(['update:visible', 'update:modelValue', 'create'])\r\n\r\n// \r\nconst dialogVisible = computed({\r\n  get: () => props.visible || props.modelValue,\r\n  set: (val) => {\r\n    emit('update:visible', val)\r\n    emit('update:modelValue', val)\r\n  }\r\n})\r\n\r\n// \r\nconst userTags = ref<UserTag[]>([])\r\n\r\nconst handleTimeChange = (time: Date) => {\r\n  if (time) {\r\n    // \r\n    const hours = time.getHours()\r\n    const minutes = time.getMinutes()\r\n    \r\n    // \r\n    const now = new Date()\r\n    taskForm.value.time = new Date(\r\n      now.getFullYear(),\r\n      now.getMonth(),\r\n      now.getDate(),\r\n      hours,\r\n      minutes,\r\n      0\r\n    )\r\n  }\r\n}\r\n\r\n// \r\nconst getLocalISOString = (date: Date) => {\r\n  // \r\n  const tzOffset = -date.getTimezoneOffset();\r\n  const diff = tzOffset >= 0 ? '+' : '-';\r\n  const pad = (n: number) => `${Math.floor(Math.abs(n))}`.padStart(2, '0');\r\n  const hours = pad(tzOffset / 60);\r\n  const minutes = pad(tzOffset % 60);\r\n  return date.getFullYear() +\r\n    '-' + pad(date.getMonth() + 1) +\r\n    '-' + pad(date.getDate()) +\r\n    'T' + pad(date.getHours()) +\r\n    ':' + pad(date.getMinutes()) +\r\n    ':' + pad(date.getSeconds()) +\r\n    diff + hours + ':' + minutes;\r\n}\r\n\r\n// \r\nconst disabledDate = (time: Date) => {\r\n  // 60\r\n  const today = new Date();\r\n  today.setHours(0, 0, 0, 0);\r\n  \r\n  const maxDate = new Date();\r\n  maxDate.setDate(maxDate.getDate() + 60);\r\n  \r\n  return time.getTime() < today.getTime() || time.getTime() > maxDate.getTime();\r\n};\r\n\r\n// \r\ninterface TaskFormData {\r\n  timeType: 'now' | 'schedule'\r\n  scheduleDate: Date | undefined \r\n  dayOffset: number\r\n  time: Date\r\n  tagIds: string[]\r\n  contentType: 'greeting' | 'agent'\r\n  greetingGroupId: string\r\n  agentId: string\r\n  sendInterval: string\r\n  autoGrouping: boolean\r\n  batchSize: number\r\n}\r\n\r\nconst taskForm = ref<TaskFormData>({\r\n  timeType: 'now',\r\n  scheduleDate: undefined,\r\n  dayOffset: 0,\r\n  time: new Date(),\r\n  tagIds: [],\r\n  contentType: 'greeting',\r\n  greetingGroupId: '',\r\n  agentId: '',\r\n  sendInterval: '3-8',\r\n  autoGrouping: false,\r\n  batchSize: 10\r\n})\r\n\r\n// \r\nconst loadUserTags = async () => {\r\n  try {\r\n    //  getContactTags  getConfig\r\n    userTags.value = await getContactTags()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\ninterface TaskSubmitData {\r\n  timeType: 'now' | 'schedule'\r\n  scheduleDate?: Date | null\r\n  time: Date | string | null\r\n  tagIds: string[]\r\n  selectedFriends: string[]\r\n  selectedGroups: string[]\r\n  contentType: 'greeting' | 'agent'\r\n  greetingGroupId: string\r\n  agentId: string\r\n  autoGrouping: boolean\r\n  batchSize: number\r\n}\r\n\r\n// \r\nconst handleCreate = async () => {\r\n  try {\r\n    if (taskForm.value.timeType === 'schedule') {\r\n      if (!taskForm.value.scheduleDate) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n      if (!taskForm.value.time) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n    }\r\n\r\n    // \r\n    if (!taskForm.value.tagIds.length && \r\n        !props.selectedFriends.length && \r\n        !props.selectedGroups.length) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n\r\n    // \r\n    if (taskForm.value.contentType === 'greeting' && !taskForm.value.greetingGroupId) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    if (taskForm.value.contentType === 'agent' && !taskForm.value.agentId) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n\r\n    //  submitData \r\n    let submitData: TaskSubmitData = {\r\n      ...taskForm.value,\r\n      time: taskForm.value.time,\r\n      selectedFriends: props.selectedFriends,\r\n      selectedGroups: props.selectedGroups\r\n    }\r\n    \r\n    if (taskForm.value.timeType === 'schedule' && taskForm.value.scheduleDate && taskForm.value.time) {\r\n      // \r\n      const scheduleDate = new Date(taskForm.value.scheduleDate)\r\n      const selectedTime = taskForm.value.time\r\n      \r\n      const scheduleDateTime = new Date(\r\n        scheduleDate.getFullYear(),\r\n        scheduleDate.getMonth(),\r\n        scheduleDate.getDate(),\r\n        selectedTime.getHours(),\r\n        selectedTime.getMinutes(),\r\n        0\r\n      )\r\n      \r\n      //  ISO \r\n      submitData.time = getLocalISOString(scheduleDateTime)\r\n    }\r\n    \r\n    emit('create', submitData)\r\n    dialogVisible.value = false\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst handleResize = () => nextTick()\r\n\r\n// \r\nonMounted(() => {\r\n  loadUserTags()\r\n  loadGreetingGroups()\r\n  loadCozeAgents()\r\n  window.addEventListener('resize', handleResize)\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', handleResize)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.form-item-with-icon {\r\n  display: flex;\r\n  align-items: flex-start;\r\n}\r\n\r\n.item-icon {\r\n  margin-right: 8px;\r\n  font-size: 18px;\r\n  color: #409EFF;\r\n  width: 24px;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 6px\r\n}\r\n\r\n.item-content {\r\n  flex: 1;\r\n}\r\n\r\n:deep(.el-form-item__label) {\r\n  font-weight: bold;\r\n}\r\n.el-form-item__content {\r\n  margin: 0;\r\n}\r\n\r\n.date-picker-container {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n}\r\n\r\n.date-picker {\r\n  width: 160px;\r\n}\r\n.label-icon {\r\n  margin-right: 8px; /*  */\r\n  font-size: 16px;\r\n  color: #409EFF;\r\n  align-items: center; \r\n  padding-top: 2px;\r\n  justify-content: center;\r\n}\r\n.time-picker {\r\n  width: 120px;\r\n}\r\n\r\n.content-type-radio {\r\n  margin-bottom: 12px;\r\n  width: 100%;\r\n}\r\n/*  */\r\n.push-warning-banner {\r\n  margin-bottom: 16px;\r\n  border-radius: 4px;\r\n  font-size: 13px;\r\n}\r\n\r\n.warning-text {\r\n  line-height: 1.5;\r\n  color: #8c6231;\r\n}\r\n\r\n:deep(.el-alert__icon) {\r\n  font-size: 16px;\r\n  color: #e6a23c;\r\n}\r\n\r\n:deep(.el-alert__content) {\r\n  padding: 0 8px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.select-full-width {\r\n  width: 100%;\r\n}\r\n\r\n:deep(.el-checkbox-group) {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n  align-items: flex-start;\r\n  justify-content: flex-start;\r\n}\r\n\r\n.selected-targets {\r\n  color: #606266;\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n  padding: 5px 0;\r\n  text-align: left;\r\n}\r\n\r\n:deep(.el-dialog) {\r\n  margin: 0 auto;\r\n  max-width: 500px;\r\n  min-width: 280px;\r\n}\r\n.label-with-icon {\r\n  display: flex;\r\n  align-items: center;\r\n  white-space: nowrap;\r\n  min-width: 90px;\r\n}\r\n:deep(.last-form-item .el-form-item__content) {\r\n  margin: 0 !important;\r\n  padding-right: 0 !important;\r\n  width: 100% !important;\r\n  box-sizing: border-box !important;\r\n}\r\n/*  */\r\n@media screen and (max-width: 768px) {\r\n  :deep(.el-form-item) {\r\n    margin-bottom: 18px;\r\n  }\r\n  \r\n  .date-picker,\r\n  .time-picker {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n.grouping-control {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.grouping-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.grouping-label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  white-space: nowrap;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.form-tip {\r\n  font-size: 13px;\r\n  color: #909399;\r\n  margin-top: 4px;\r\n  line-height: 1.4;\r\n}\r\n</style>","import script from \"./CreateTaskDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CreateTaskDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CreateTaskDialog.vue?vue&type=style&index=0&id=2e18a8b8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2e18a8b8\"]])\n\nexport default __exports__","// API \r\n// export const API_BASE_URL = 'http://localhost:9922'\r\nexport const API_BASE_URL = window.location.origin\r\n// API \r\nexport const headers = {\r\n  'Content-Type': 'application/json',\r\n  'Accept': 'application/json',\r\n  'X-API-Key': 'yoko_test'\r\n}\r\n\r\nexport const saveConfig = async (configType: string, config: any) => {\r\n  try {\r\n    console.debug(':', configType, config)\r\n    \r\n    const response = await fetch(`${API_BASE_URL}/api/config/${configType}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(config),\r\n      credentials: 'include'\r\n    })\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text()\r\n      console.error(':', {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        body: errorText\r\n      })\r\n      throw new Error(` (${response.status}): ${errorText || response.statusText}`)\r\n    }\r\n\r\n    const data = await response.json()\r\n    console.debug(':', data)\r\n    \r\n    if (!data.success) {\r\n      throw new Error(data.error || '')\r\n    }\r\n\r\n    return data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    if (error instanceof Error) {\r\n      throw new Error(`: ${error.message}`)\r\n    }\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const getConfig = async (configType: string) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/config/${configType}`)\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}","import { API_BASE_URL, headers } from './config'\r\n\r\ninterface InitResponse {\r\n  success: boolean\r\n  message: string\r\n  user_info?: {\r\n    nickname: string\r\n    account_id: string\r\n  }\r\n}\r\n\r\n// \r\nexport interface InstanceInfo {\r\n  instance_id: string;\r\n  window_handle: number;\r\n  api_port: number;\r\n  nickname?: string;\r\n  account_id?: string;\r\n  account_info?: {\r\n    nickname: string;\r\n    account_id: string;\r\n  };\r\n  is_active?: boolean; //  is_active \r\n  is_connected?: boolean;\r\n}\r\n\r\n// \r\ninterface MultiInitResponse {\r\n  success: boolean\r\n  message: string\r\n  instances: InstanceInfo[]\r\n  code?: string\r\n  error_detail?: string\r\n}\r\n// \r\nexport const checkVersion = async (currentVersion: string, agentId: string) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/version/check`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ current_version: currentVersion, agent_id: agentId })\r\n    })\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n// \r\nexport const getVersionNotify = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/config/version_notify`)\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// \r\nexport const saveVersionNotify = async (config: any) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/config/version_notify`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(config),\r\n      credentials: 'include'\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n// \r\nexport const downloadUpdate = async (currentVersion: string, agentId: string) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/version/download`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ current_version: currentVersion, agent_id: agentId })\r\n    })\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n// \r\nexport const reconnectWeChat = async (instanceId?: string) => {\r\n  try {\r\n    const body = instanceId ? JSON.stringify({ instance_id: instanceId }) : '{}';\r\n    const response = await fetch(`${API_BASE_URL}/api/reconnect`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: body\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return { success: false, error: '' };\r\n  }\r\n};\r\n// \r\nexport const initializeMultipleWechat = async (): Promise<MultiInitResponse> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/init/multi`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      mode: 'cors',\r\n      credentials: 'include',\r\n      body: JSON.stringify({ timestamp: Date.now() })\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json().catch(() => ({ detail: '' }))\r\n      throw new Error(error.detail || '')\r\n    }\r\n    \r\n    const data = await response.json()\r\n    console.debug(':', data)\r\n    return data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const autoConfigWechat41 = async (): Promise<{success: boolean; message: string}> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/system/wechat41/auto_config`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    return { success: false, message: '' }\r\n  }\r\n}\r\n\r\nexport const stopNarrator = async (): Promise<{success: boolean; message: string}> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/system/narrator/stop`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      credentials: 'include'\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    return { success: false, message: '' }\r\n  }\r\n}\r\n\r\n// \r\nexport const getAllInstances = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/instances`, {\r\n      headers\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// \r\nexport const switchActiveInstance = async (instanceId: string) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/instances/switch`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ instance_id: instanceId })\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\nexport const getLicenseInfo = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/license/info`, {\r\n      headers\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const unbindLicense = async (activation_code: string) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/license/unbind`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ activation_code })\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\nexport const checkConnectionStatus = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/connection/status`, {\r\n      headers\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\nexport const getCurrentUser = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/user/current`, {\r\n      headers\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.detail || '')\r\n    }\r\n    const data =  await response.json()\r\n    console.debug(':', data)\r\n    return data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const getServerTime = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/time/authority`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}","export interface BrandConfig {\r\n  channel_id: string\r\n  name: string\r\n  ename: string\r\n  alias?: string\r\n  logo: string\r\n  contact: string\r\n  copyright?: string\r\n  contactType?: 'text' | 'qrcode' // \r\n  qrcodeUrl?: string // \r\n}\r\n\r\nexport interface BrandConfigs {\r\n  [key: string]: BrandConfig\r\n}\r\n\r\nconst defaultChannel = 'default'\r\n\r\n// \r\nexport const brandConfig: BrandConfigs = {\r\n  default: {\r\n    channel_id:'channel_000001',\r\n    name: 'YokoAI',\r\n    ename:'YokoAIbot',\r\n    logo: './img/logo.jpg',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/yoko_kefu.png',\r\n    copyright: 'YokoAI@2026 by '\r\n  },\r\n  channel_ailink: {\r\n    channel_id:'channel_000041',\r\n    name: 'AiLink',\r\n    ename:'AiLinkBot',\r\n    logo: './img/ailink_logo.jpg',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/ailink_kefu.jpg',\r\n  },\r\n  channel_moji: {\r\n    channel_id:'channel_000040',\r\n    name: '',\r\n    ename:'Moji',\r\n    logo: './img/moji_logo.png',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/moji_kefu.png',\r\n  },\r\n  channel_vanta: {\r\n    channel_id:'channel_000039',\r\n    name: 'VAI',\r\n    ename:'Vanta',\r\n    logo: './img/vanta_logo.jpg',\r\n    contact: '345051813@qq.com'\r\n  },\r\n  channel_xiaoxin: {\r\n    channel_id:'channel_000038',\r\n    name: 'AI',\r\n    ename:'XiaoxinAIbot',\r\n    logo: './img/xiaoxin_logo.png',\r\n    contact: '212575@qq.com'\r\n  },\r\n  channel_zoyu: {\r\n    channel_id:'channel_000037',\r\n    name: 'AI',\r\n    ename:'ZOYUAIbot',\r\n    logo: './img/zxyq_logo.png',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/zoyu_kefu.jpg',\r\n  },\r\n  channel_interstellar: {//channel_000021\r\n    channel_id:'channel_000036',\r\n    name: ' Ai',\r\n    ename:'Interstellar Cloud',\r\n    logo: './img/interstellar_logo.jpg',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/inter_kefu.jpg',\r\n  },\r\n  channel_healo: {\r\n    channel_id:'channel_000035',\r\n    name: 'HealoAI',\r\n    ename:'HealoAIbot',\r\n    logo: './img/healo_logo.png',\r\n    contact: '2634337479@qq.com'\r\n  },\r\n  channel_xipapa: {\r\n    channel_id:'channel_000034',\r\n    name: '',\r\n    ename:'XIPAPA',\r\n    logo: './img/xipapa_logo.png',\r\n    contact: '3672480844@qq.com'\r\n  },\r\n  channel_yunt: {\r\n    channel_id:'channel_000033',\r\n    name: 'yun',\r\n    ename:'yunAIbot',\r\n    logo: './img/yunt_logo.png',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/yunt_kefu.png',\r\n  },\r\n  channel_ycat: {\r\n    channel_id:'channel_000032',\r\n    name: 'AI',\r\n    ename:'YCatAIbot',\r\n    logo: './img/ycat_logo.jpg',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/ycat_kefu.png',\r\n  },\r\n  channel_nutri: {\r\n    channel_id:'channel_000031',\r\n    name: 'AI',\r\n    ename:'Z-NutriAIA',\r\n    logo: './img/nutri_logo.png',\r\n    contact: 'hrcai@126.com'\r\n  },\r\n  channel_wsy: {\r\n    channel_id:'channel_000030',\r\n    name: '',\r\n    ename:'wsykf',\r\n    logo: './img/wsy_logo.jpg',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/wsy_kefu.png',\r\n  },\r\n  channel_ruixiao: {//channel_000021\r\n    channel_id:'channel_000029',\r\n    name: '',\r\n    ename:'Ruixiao Cloud',\r\n    logo: './img/ruixiao_logo.jpg',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/ruixiao_kefu.png',\r\n  },\r\n  channel_lichuang: {\r\n    channel_id:'channel_000028',\r\n    name: 'AI',\r\n    ename:'LICHUANGAI',\r\n    logo: './img/lichuang_logo.png',\r\n    contact: '2390016326@qq.com'\r\n  },\r\n  channel_refresh: {\r\n    channel_id:'channel_000027',\r\n    name: 'AI ',\r\n    ename:'RefreshAI Agent',\r\n    logo: './img/refresh_logo.jpeg',\r\n    contact: 'Service@Refreshtour.com',\r\n    copyright: 'RefreshAi@2025 by '\r\n  },\r\n  channel_tange: {\r\n    channel_id:'channel_000026',\r\n    name: 'AI',\r\n    ename:'TangeAIbot',\r\n    logo: './img/logo_tange.png',\r\n    contact: '2463691166@qq.com'\r\n  },\r\n  channel_aiboss: {\r\n    channel_id:'channel_000025',\r\n    name: '',\r\n    ename:'Dun Pro',\r\n    logo: './img/logo_aiboss.png',\r\n    contact: '31350072@qq.com'\r\n  },\r\n    channel_relaxai: {\r\n    channel_id:'channel_000023',\r\n    name: 'Ai',\r\n    ename:'RelaxAi',\r\n    logo: './img/relax_logo.png',\r\n    contact: 'service@relaxai.cn'\r\n  },\r\n  channel_yysay: {\r\n    channel_id:'channel_000024',\r\n    name: '',\r\n    ename:'yysayAI',\r\n    logo: './img/yysay_logo.png',\r\n    contact: '',\r\n    contactType: 'qrcode', // \r\n    qrcodeUrl: 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/yokoai/yokobot_img/yysay_kefu.png'\r\n  },\r\n  channel_xlc: {\r\n    channel_id:'channel_000022',\r\n    name: 'AI',\r\n    ename:'AI',\r\n    logo: './img/xlc_logo.png',\r\n    contact: '403298000@qq.com'\r\n  },\r\n  channel_Ant: {\r\n    channel_id:'channel_000021',\r\n    name: 'AI',\r\n    ename:'AntAIbot',\r\n    logo: './img/ant_logo.png',\r\n    contact: '3236602296@qq.com',\r\n    copyright: 'AntAI@2025 by '\r\n  },\r\n  channel_stan: {\r\n    channel_id:'channel_000020',\r\n    name: 'AI',\r\n    ename:'STAibot',\r\n    logo: './img/stan_logo.png',\r\n    contact: '929944920@qq.com',\r\n    copyright: 'STAibot@2025 by '\r\n  },\r\n  channel_linkc: {\r\n    channel_id:'channel_000019',\r\n    name: 'AI',\r\n    ename:'',\r\n    logo: './img/linkc_logo.png',\r\n    contact: 'qq22528142',\r\n    copyright: 'AI@2025 by '\r\n  },\r\n  channel_astrai: {\r\n    channel_id:'channel_000018',\r\n    name: 'Astra',\r\n    ename:'Astrai',\r\n    logo: './img/astra_logo.png',\r\n    contact: '876560060@qq.com'\r\n  },\r\n  channel_xiaoxiao: {\r\n    channel_id:'channel_000017',\r\n    name: 'AI',\r\n    ename:'AIBot',\r\n    logo: './img/xiaoxiao_logo.png',\r\n    contact: 'momobaby_2023()'\r\n  },\r\n  channel_xw: {\r\n    channel_id:'channel_000015',\r\n    name: ' AIBot',\r\n    ename:'XWKJ AIBot',\r\n    logo: './img/xw_logo.png',\r\n    contact: 'i62417'\r\n  },\r\n  channel_dacore: {\r\n    channel_id:'channel_000016',\r\n    name: 'AI',\r\n    ename:'Da Core',\r\n    logo: './img/dacore_logo.png',\r\n    contact: 'dd2211999'\r\n  },\r\n  channel_yun: {\r\n    channel_id:'channel_000005',\r\n    name: '',\r\n    ename:'yunwebot',\r\n    logo: './img/yun_logo.png',\r\n    contact: '18925982768'\r\n  },\r\n  channel_wanxiao: {\r\n    channel_id:'channel_000014',\r\n    name: '',\r\n    ename:'All Schools Connect',\r\n    logo: './img/wanxiao_logo.png',\r\n    contact: 'wxhl6688@163.com'\r\n  },\r\n  channel_zhipu: {\r\n    channel_id:'channel_000013',\r\n    name: 'AI',\r\n    ename:'ZhipuAI',\r\n    logo: './img/zhipu_logo.png',\r\n    contact: 'lhg20290@nudt.edu.com'\r\n  },\r\n  channel_atom: {\r\n    channel_id:'channel_000012',\r\n    name: 'AtomAI',\r\n    ename:'AtomAIbot',\r\n    logo: './img/atom_logo.png',\r\n    contact: '591905097@qq.com'\r\n  },\r\n  channel_shaozi: {\r\n    channel_id:'channel_000010',\r\n    name: 'AI-',\r\n    ename:'ShaoziAI-Bot',\r\n    logo: './img/shaozi_logo.png',\r\n    contact: 'XM2222925'\r\n  },\r\n  channel_xlai: {\r\n    channel_id:'channel_000011',\r\n    name: 'AI',\r\n    ename:'XLAI Sales Champion',\r\n    logo: './img/xlai_logo.png',\r\n    contact: '400-6685-139'\r\n  },\r\n  channel_anlun: {\r\n    channel_id:'channel_000006',\r\n    name: '',\r\n    ename:'Anlunai',\r\n    logo: './img/anlun_logo.png',\r\n    contact: '19128689489'\r\n  },\r\n  channel_busi: {\r\n    channel_id:'channel_000007',\r\n    name: 'BusiAi',\r\n    ename:'BusiAIbot',\r\n    logo: './img/busi_logo.jpg',\r\n    contact: '641460330@qq.com'\r\n  },\r\n  channel_super: {\r\n    channel_id:'channel_000008',\r\n    name: 'AI',\r\n    ename:'AI',\r\n    alias: 'AI',\r\n    logo: './img/super_logo.jpg',\r\n    contact: '328441536@qq.com'\r\n  },\r\n  channel_allwise: {\r\n    channel_id:'channel_000009',\r\n    name: 'ALLWISE AI',\r\n    ename:'ALLWISE AIbot',\r\n    logo: './img/alws_logo.jpg',\r\n    contact: 'allwiseai'\r\n  },\r\n  channel_xunyi: {\r\n    channel_id:'channel_000003',\r\n    name: '',\r\n    ename:'PanAibot',\r\n    logo: './img/XUNYI_logo.png',\r\n    contact: '15977004390'\r\n  },\r\n  channel_aiok: {\r\n    channel_id:'channel_000002',\r\n    name: 'AI',\r\n    ename:'AIOK',\r\n    logo: './img/aiok_logo.png',\r\n    contact: 'AIOK'\r\n  }\r\n}\r\n\r\n// \r\nexport function getBrandConfig(): BrandConfig {\r\n  const channel = localStorage.getItem('channel') || defaultChannel\r\n  return brandConfig[channel] || brandConfig.default\r\n}","import { useCssVars as _useCssVars, defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createVNode as _createVNode, normalizeStyle as _normalizeStyle, createCommentVNode as _createCommentVNode, Transition as _Transition } from \"vue\"\n\nconst _hoisted_1 = { class: \"logo-container\" }\nconst _hoisted_2 = [\"src\", \"alt\"]\nconst _hoisted_3 = { class: \"app-name\" }\nconst _hoisted_4 = { class: \"menu-container\" }\n\nimport { ref, inject, onMounted, onUnmounted,computed } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport type { BrandConfig } from '@/config/brand'\r\nimport { useConfigStore } from '@/store/config'\r\nimport { useThemeStore } from '@/store/theme'\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'NavBar',\n  setup(__props) {\n\n_useCssVars(_ctx => ({\n  \"d7423eaa\": (menuActiveBackground.value),\n  \"v16bc08d3\": (menuHoverBackground.value)\n}))\n\r\nconst configStore = useConfigStore()\r\nconst themeStore = useThemeStore()\r\nconst availableWidth = ref(window.innerWidth)\r\n// \r\nconst handleResize = () => {\r\n  availableWidth.value = window.innerWidth\r\n}\r\n\r\nonMounted(() => {\r\n  window.addEventListener('resize', handleResize)\r\n    // activeIndex\r\n    router.afterEach((to) => {\r\n    activeIndex.value = to.path.substring(1) || 'welcome'\r\n  })\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', handleResize)\r\n})\r\n// \r\nconst navGradient = computed(() => {\r\n  const theme = themeStore.currentTheme\r\n  const start = theme.primary\r\n  const end = lighten(start, 0.15)\r\n  return `linear-gradient(90deg, ${start}, ${end})`\r\n})\r\n\r\n// \r\nconst menuHoverBackground = computed(() => {\r\n  return themeStore.currentTheme.menuHoverBackground\r\n})\r\n\r\n// \r\nconst menuActiveBackground = computed(() => {\r\n  return themeStore.currentTheme.primary\r\n})\r\nconst menuPopupBackground = computed(() => {\r\n  return themeStore.currentTheme.primary\r\n})\r\nconst menuPopupTextColor = computed(() => {\r\n  return themeStore.currentTheme.menuTextColor\r\n})\r\nconst brandConfig = inject<BrandConfig>('brandConfig', {\r\n  channel_id: 'channel_000001',\r\n  name: 'YokoAI',\r\n  ename: 'YokoAIbot',\r\n  logo: '/assets/logo.png',\r\n  contact: '473726474@qq.com'\r\n})\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\n// \r\nconst activeIndex = ref(route.path.substring(1) || 'welcome')\r\n\r\nconst handleSelect = (key: string) => {\r\n  // \r\n  router.push(`/${key}`)\r\n}\r\n\r\nfunction hexToRgb(hex: string) {\r\n  const h = hex.replace('#', '')\r\n  const r = parseInt(h.length === 3 ? h[0] + h[0] : h.slice(0, 2), 16)\r\n  const g = parseInt(h.length === 3 ? h[1] + h[1] : h.slice(2, 4), 16)\r\n  const b = parseInt(h.length === 3 ? h[2] + h[2] : h.slice(4, 6), 16)\r\n  return { r, g, b }\r\n}\r\n\r\nfunction rgbToHex(r: number, g: number, b: number) {\r\n  const toHex = (v: number) => v.toString(16).padStart(2, '0')\r\n  return `#${toHex(r)}${toHex(g)}${toHex(b)}`\r\n}\r\n\r\nfunction lighten(hex: string, ratio: number) {\r\n  const { r, g, b } = hexToRgb(hex)\r\n  const lr = Math.round(r + (255 - r) * ratio)\r\n  const lg = Math.round(g + (255 - g) * ratio)\r\n  const lb = Math.round(b + (255 - b) * ratio)\r\n  return rgbToHex(lr, lg, lb)\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_menu_item = _resolveComponent(\"el-menu-item\")!\n  const _component_el_menu = _resolveComponent(\"el-menu\")!\n\n  return (_openBlock(), _createBlock(_Transition, { name: \"nav-slide\" }, {\n    default: _withCtx(() => [\n      (_unref(configStore).isLoaded)\n        ? (_openBlock(), _createElementBlock(\"div\", {\n            key: 0,\n            class: \"nav-wrapper\",\n            style: _normalizeStyle({ backgroundColor: _unref(configStore).config.theme.primary })\n          }, [\n            _createElementVNode(\"div\", _hoisted_1, [\n              _createElementVNode(\"img\", {\n                src: _unref(brandConfig).logo,\n                alt: _unref(brandConfig).name,\n                class: \"logo-image\"\n              }, null, 8, _hoisted_2),\n              _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_unref(brandConfig).name), 1)\n            ]),\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createVNode(_component_el_menu, {\n                \"default-active\": activeIndex.value,\n                class: \"nav-menu\",\n                mode: \"horizontal\",\n                onSelect: handleSelect,\n                \"background-color\": \"transparent\",\n                \"text-color\": _unref(themeStore).currentTheme.menuTextColor,\n                \"active-text-color\": _unref(themeStore).currentTheme.menuActiveTextColor,\n                ellipsis: true\n              }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(configStore).config.navbar.items, (item) => {\n                    return (_openBlock(), _createBlock(_component_el_menu_item, {\n                      key: item.index,\n                      index: item.index\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(_toDisplayString(item.text), 1)\n                      ]),\n                      _: 2\n                    }, 1032, [\"index\"]))\n                  }), 128))\n                ]),\n                _: 1\n              }, 8, [\"default-active\", \"text-color\", \"active-text-color\"])\n            ])\n          ], 4))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\r\n  <Transition name=\"nav-slide\">\r\n    <div class=\"nav-wrapper\" v-if=\"configStore.isLoaded\" v-cloak :style=\"{ backgroundColor: configStore.config.theme.primary }\">\r\n      <div class=\"logo-container\">\r\n        <img :src=\"brandConfig.logo\" :alt=\"brandConfig.name\" class=\"logo-image\" />\r\n        <span class=\"app-name\">{{ brandConfig.name }}</span>\r\n      </div>\r\n      <div class=\"menu-container\">\r\n        <el-menu\r\n          :default-active=\"activeIndex\"\r\n          class=\"nav-menu\"\r\n          mode=\"horizontal\"\r\n          @select=\"handleSelect\"\r\n          background-color=\"transparent\"\r\n          :text-color=\"themeStore.currentTheme.menuTextColor\"\r\n          :active-text-color=\"themeStore.currentTheme.menuActiveTextColor\"\r\n          :ellipsis=\"true\"\r\n        >\r\n          <el-menu-item v-for=\"item in configStore.config.navbar.items\" :key=\"item.index\" :index=\"item.index\">\r\n            {{ item.text }}\r\n          </el-menu-item>\r\n        </el-menu>\r\n      </div>\r\n    </div>\r\n  </Transition>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, inject, onMounted, onUnmounted,computed } from 'vue'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport type { BrandConfig } from '@/config/brand'\r\nimport { useConfigStore } from '@/store/config'\r\nimport { useThemeStore } from '@/store/theme'\r\n\r\nconst configStore = useConfigStore()\r\nconst themeStore = useThemeStore()\r\nconst availableWidth = ref(window.innerWidth)\r\n// \r\nconst handleResize = () => {\r\n  availableWidth.value = window.innerWidth\r\n}\r\n\r\nonMounted(() => {\r\n  window.addEventListener('resize', handleResize)\r\n    // activeIndex\r\n    router.afterEach((to) => {\r\n    activeIndex.value = to.path.substring(1) || 'welcome'\r\n  })\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', handleResize)\r\n})\r\n// \r\nconst navGradient = computed(() => {\r\n  const theme = themeStore.currentTheme\r\n  const start = theme.primary\r\n  const end = lighten(start, 0.15)\r\n  return `linear-gradient(90deg, ${start}, ${end})`\r\n})\r\n\r\n// \r\nconst menuHoverBackground = computed(() => {\r\n  return themeStore.currentTheme.menuHoverBackground\r\n})\r\n\r\n// \r\nconst menuActiveBackground = computed(() => {\r\n  return themeStore.currentTheme.primary\r\n})\r\nconst menuPopupBackground = computed(() => {\r\n  return themeStore.currentTheme.primary\r\n})\r\nconst menuPopupTextColor = computed(() => {\r\n  return themeStore.currentTheme.menuTextColor\r\n})\r\nconst brandConfig = inject<BrandConfig>('brandConfig', {\r\n  channel_id: 'channel_000001',\r\n  name: 'YokoAI',\r\n  ename: 'YokoAIbot',\r\n  logo: '/assets/logo.png',\r\n  contact: '473726474@qq.com'\r\n})\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\n// \r\nconst activeIndex = ref(route.path.substring(1) || 'welcome')\r\n\r\nconst handleSelect = (key: string) => {\r\n  // \r\n  router.push(`/${key}`)\r\n}\r\n\r\nfunction hexToRgb(hex: string) {\r\n  const h = hex.replace('#', '')\r\n  const r = parseInt(h.length === 3 ? h[0] + h[0] : h.slice(0, 2), 16)\r\n  const g = parseInt(h.length === 3 ? h[1] + h[1] : h.slice(2, 4), 16)\r\n  const b = parseInt(h.length === 3 ? h[2] + h[2] : h.slice(4, 6), 16)\r\n  return { r, g, b }\r\n}\r\n\r\nfunction rgbToHex(r: number, g: number, b: number) {\r\n  const toHex = (v: number) => v.toString(16).padStart(2, '0')\r\n  return `#${toHex(r)}${toHex(g)}${toHex(b)}`\r\n}\r\n\r\nfunction lighten(hex: string, ratio: number) {\r\n  const { r, g, b } = hexToRgb(hex)\r\n  const lr = Math.round(r + (255 - r) * ratio)\r\n  const lg = Math.round(g + (255 - g) * ratio)\r\n  const lb = Math.round(b + (255 - b) * ratio)\r\n  return rgbToHex(lr, lg, lb)\r\n}\r\n</script>\r\n  \r\n<style scoped>\r\n/*  */\r\n.nav-slide-enter-active {\r\n  transition: all 0.3s ease-out;\r\n}\r\n\r\n.nav-slide-enter-from {\r\n  transform: translateY(-100%);\r\n  opacity: 0;\r\n}\r\n.menu-container {\r\n  flex: 1;\r\n  min-width: 0; /*  flex  */\r\n  overflow: hidden; /*  */\r\n}\r\n\r\n.nav-slide-enter-to {\r\n  transform: translateY(0);\r\n  opacity: 1;\r\n}\r\n[v-cloak] {\r\n  display: none;\r\n}\r\n.nav-menu {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: transparent !important;\r\n}\r\n\r\n.nav-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 64px;\r\n  background-color: v-bind(menuActiveBackground);\r\n}\r\n\r\n.logo-container {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 20px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.logo-image {\r\n  width: 64px;\r\n  height: 64px;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n  object-fit: contain;\r\n}\r\n\r\n.app-name {\r\n  color: #ffffff;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-left: 1px;\r\n}\r\n\r\n:deep(.el-menu--horizontal) {\r\n  border-bottom: none !important;\r\n  background: transparent !important;\r\n}\r\n\r\n:deep(.el-menu-item) {\r\n  height: 64px;\r\n  line-height: 64px;\r\n  background: transparent !important;\r\n}\r\n\r\n:deep(.el-menu-item:hover) {\r\n  background-color: v-bind(menuHoverBackground) !important;\r\n}\r\n\r\n:deep(.el-menu-item.is-active) {\r\n  background-color: v-bind(menuActiveBackground) !important;\r\n}\r\n:deep(.el-sub-menu__title) {\r\n  height: 64px;\r\n  line-height: 64px;\r\n  padding: 0 20px;\r\n}\r\n\r\n:deep(.el-icon) {\r\n  font-size: 20px;\r\n  vertical-align: middle;\r\n}\r\n\r\n:deep(.el-sub-menu .el-menu-item) {\r\n  min-width: 120px;\r\n}\r\n:deep(.el-menu--popup) {\r\n  background-color: var(--theme-primary) !important;\r\n}\r\n:deep(.el-menu--popup .el-menu-item) {\r\n  color: var(--menu-text-color) !important;\r\n}\r\n:deep(.el-menu--popup .el-menu-item:hover) {\r\n  background-color: var(--menu-hover-background) !important;\r\n  color: var(--menu-text-color) !important;\r\n}\r\n:deep(.el-menu--popup-container) {\r\n  background-color: var(--theme-primary) !important;\r\n  border-color: transparent !important;\r\n}\r\n:deep(.el-popper:has(.el-menu--popup)) {\r\n  background-color: var(--theme-primary) !important;\r\n  border-color: transparent !important;\r\n  --el-bg-color-overlay: var(--theme-primary);\r\n}\r\n</style>\r\n","import script from \"./NavBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NavBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=4434b42a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4434b42a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"reconnect-content\" }\nconst _hoisted_2 = { class: \"dialog-footer\" }\n\nimport { ref } from 'vue'\r\n  import { ElMessage } from 'element-plus'\r\n  import { reconnectWeChat } from '@/api/init'\r\n  \r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ReconnectDialog',\n  setup(__props, { expose: __expose }) {\n\r\n  const visible = ref(false)\r\n  const reconnecting = ref(false)\r\n  \r\n  const handleReconnect = async () => {\r\n    reconnecting.value = true\r\n    try {\r\n      const result = await reconnectWeChat()\r\n      if (result.success) {\r\n        ElMessage.success('')\r\n        visible.value = false\r\n      } else {\r\n        ElMessage.error(result.message || '')\r\n      }\r\n    } catch (error) {\r\n      ElMessage.error('')\r\n    } finally {\r\n      reconnecting.value = false\r\n    }\r\n  }\r\n  \r\n  // \r\n  __expose({\r\n    show: () => visible.value = true\r\n  })\r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: visible.value,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((visible).value = $event)),\n    title: \"\",\n    \"close-on-click-modal\": false,\n    \"close-on-press-escape\": false,\n    \"show-close\": false,\n    width: \"30%\"\n  }, {\n    footer: _withCtx(() => [\n      _createElementVNode(\"span\", _hoisted_2, [\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: handleReconnect,\n          loading: reconnecting.value\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(reconnecting.value ? '...' : ''), 1)\n          ]),\n          _: 1\n        }, 8, [\"loading\"])\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_el_alert, {\n          type: \"warning\",\n          closable: false,\n          \"show-icon\": \"\"\n        }, {\n          default: _withCtx(() => [...(_cache[1] || (_cache[1] = [\n            _createTextVNode(\"  \", -1)\n          ]))]),\n          _: 1\n        })\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\r\n    <el-dialog\r\n      v-model=\"visible\"\r\n      title=\"\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n      width=\"30%\"\r\n    >\r\n      <div class=\"reconnect-content\">\r\n        <el-alert\r\n          type=\"warning\"\r\n          :closable=\"false\"\r\n          show-icon\r\n        >\r\n          \r\n        </el-alert>\r\n      </div>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button \r\n            type=\"primary\" \r\n            @click=\"handleReconnect\"\r\n            :loading=\"reconnecting\"\r\n          >\r\n            {{ reconnecting ? '...' : '' }}\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { ref } from 'vue'\r\n  import { ElMessage } from 'element-plus'\r\n  import { reconnectWeChat } from '@/api/init'\r\n  \r\n  const visible = ref(false)\r\n  const reconnecting = ref(false)\r\n  \r\n  const handleReconnect = async () => {\r\n    reconnecting.value = true\r\n    try {\r\n      const result = await reconnectWeChat()\r\n      if (result.success) {\r\n        ElMessage.success('')\r\n        visible.value = false\r\n      } else {\r\n        ElMessage.error(result.message || '')\r\n      }\r\n    } catch (error) {\r\n      ElMessage.error('')\r\n    } finally {\r\n      reconnecting.value = false\r\n    }\r\n  }\r\n  \r\n  // \r\n  defineExpose({\r\n    show: () => visible.value = true\r\n  })\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .reconnect-content {\r\n    padding: 20px 0;\r\n  }\r\n  </style>","import script from \"./ReconnectDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ReconnectDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ReconnectDialog.vue?vue&type=style&index=0&id=301bcd34&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-301bcd34\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveDynamicComponent as _resolveDynamicComponent, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"app-container\" }\n\nimport { computed, ref, provide,onErrorCaptured } from 'vue'\r\nimport { getBrandConfig } from '@/config/brand'\r\nimport { useRoute } from 'vue-router'\r\nimport NavBar from '@/components/NavBar.vue'\r\nimport ReconnectDialog from '@/components/ReconnectDialog.vue'\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\r\nconst route = useRoute()\r\nconst isStartupPage = computed(() => route.name === 'StartupPage')\r\nconst isAgentPage = computed(() => route.path.startsWith('/agent') || route.path.includes('dashboard'))\r\nconst reconnectDialog = ref()\r\nconst brandConfig = ref(getBrandConfig())\r\nprovide('brandConfig', brandConfig)\r\n\r\nconst showReconnectDialog = () => {\r\n  reconnectDialog.value?.show()\r\n}\r\nonErrorCaptured((err, instance, info) => {\r\n  console.error('Vue :', err)\r\n  console.log(':', instance)\r\n  console.log(':', info)\r\n  return false\r\n})\r\n// \r\nprovide('showReconnectDialog', showReconnectDialog)\r\nprovide('brandConfig', brandConfig)\r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_router_view = _resolveComponent(\"router-view\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (!isStartupPage.value && !isAgentPage.value)\n      ? (_openBlock(), _createBlock(NavBar, { key: 0 }))\n      : _createCommentVNode(\"\", true),\n    _createVNode(_component_router_view, null, {\n      default: _withCtx(({ Component }) => [\n        (_openBlock(), _createBlock(_resolveDynamicComponent(Component), { class: \"main-content\" }))\n      ]),\n      _: 1\n    }),\n    _createVNode(ReconnectDialog, {\n      ref_key: \"reconnectDialog\",\n      ref: reconnectDialog\n    }, null, 512)\n  ]))\n}\n}\n\n})","<template>\r\n    <div class=\"app-container\">\r\n      <NavBar v-if=\"!isStartupPage && !isAgentPage\" />\r\n      <router-view v-slot=\"{ Component }\">\r\n        <component :is=\"Component\" class=\"main-content\" />\r\n      </router-view>\r\n      <Reconnect-dialog ref=\"reconnectDialog\" />\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup lang=\"ts\">\r\nimport { computed, ref, provide,onErrorCaptured } from 'vue'\r\nimport { getBrandConfig } from '@/config/brand'\r\nimport { useRoute } from 'vue-router'\r\nimport NavBar from '@/components/NavBar.vue'\r\nimport ReconnectDialog from '@/components/ReconnectDialog.vue'\r\nconst route = useRoute()\r\nconst isStartupPage = computed(() => route.name === 'StartupPage')\r\nconst isAgentPage = computed(() => route.path.startsWith('/agent') || route.path.includes('dashboard'))\r\nconst reconnectDialog = ref()\r\nconst brandConfig = ref(getBrandConfig())\r\nprovide('brandConfig', brandConfig)\r\n\r\nconst showReconnectDialog = () => {\r\n  reconnectDialog.value?.show()\r\n}\r\nonErrorCaptured((err, instance, info) => {\r\n  console.error('Vue :', err)\r\n  console.log(':', instance)\r\n  console.log(':', info)\r\n  return false\r\n})\r\n// \r\nprovide('showReconnectDialog', showReconnectDialog)\r\nprovide('brandConfig', brandConfig)\r\n  </script>\r\n  \r\n  <style>\r\n  /*  */\r\n  * {\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n  }\r\n  \r\n  body {\r\n    margin: 0;\r\n  }\r\n  \r\n  .app-container {\r\n    height: 100vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .main-content {\r\n    flex: 1;\r\n    overflow: hidden;\r\n  }\r\n  .el-select-dropdown .el-select-dropdown__item {\r\n    color: #ffffff !important;\r\n    background-color: transparent !important;\r\n  }\r\n  .el-select-dropdown .el-select-dropdown__item:hover,\r\n  .el-select-dropdown .el-select-dropdown__item.hover,\r\n  .el-select-dropdown .el-select-dropdown__item.is-hover,\r\n  .el-select-dropdown .el-select-dropdown__item.is-selected,\r\n  .el-select-dropdown.is-multiple .el-select-dropdown__item.selected {\r\n    color: var(--menu-active-text-color) !important;\r\n    background-color: var(--theme-primary-hover) !important;\r\n  }\r\n  .el-popper .el-select-dropdown .el-select-dropdown__item.hover,\r\n  .el-popper .el-select-dropdown .el-select-dropdown__item.is-hover {\r\n    background-color: var(--theme-primary-hover) !important;\r\n  }\r\n  .el-dropdown-menu .el-dropdown-menu__item {\r\n    color: #ffffff !important;\r\n    background-color: transparent !important;\r\n  }\r\n  .el-dropdown-menu .el-dropdown-menu__item:hover,\r\n  .el-dropdown-menu .el-dropdown-menu__item.is-active {\r\n    color: var(--menu-active-text-color) !important;\r\n    background-color: var(--theme-primary-hover) !important;\r\n  }\r\n\r\n  /*  */\r\n  .el-picker-panel,\r\n  .el-time-panel {\r\n    background-color: #1f1f1f !important;\r\n    border: 1px solid #3a3a3a !important;\r\n    color: #e0e0e0 !important;\r\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4) !important;\r\n    --el-datepicker-text-color: #e0e0e0;\r\n    --el-datepicker-off-text-color: #505050;\r\n    --el-datepicker-header-text-color: #ffffff;\r\n    --el-datepicker-icon-color: #a0a0a0;\r\n    --el-datepicker-border-color: #3a3a3a;\r\n    --el-datepicker-inner-border-color: #3a3a3a;\r\n    --el-datepicker-inrange-bg-color: rgba(64, 158, 255, 0.1);\r\n    --el-datepicker-inrange-hover-bg-color: rgba(64, 158, 255, 0.2);\r\n  }\r\n\r\n  /*  */\r\n  .el-date-picker__header-label {\r\n    color: #ffffff !important;\r\n    font-weight: 500 !important;\r\n  }\r\n\r\n  .el-picker-panel__icon-btn {\r\n    color: #a0a0a0 !important;\r\n  }\r\n\r\n  .el-picker-panel__icon-btn:hover {\r\n    color: var(--el-color-primary) !important;\r\n  }\r\n\r\n  /*  */\r\n  .el-date-table th {\r\n    color: #909399 !important;\r\n    border-bottom: 1px solid #3a3a3a !important;\r\n  }\r\n\r\n  /*  -  */\r\n  .el-date-table td.available .el-date-table-cell__text {\r\n    color: #e0e0e0 !important;\r\n  }\r\n\r\n  /*  -  */\r\n  .el-date-table td.available:hover {\r\n    color: var(--el-color-primary) !important;\r\n  }\r\n\r\n  /*  -  () */\r\n  .el-date-table td.current:not(.disabled) .el-date-table-cell__text {\r\n    background-color: var(--el-color-primary) !important;\r\n    color: #ffffff !important;\r\n    font-weight: bold !important;\r\n    box-shadow: 0 0 8px rgba(64, 158, 255, 0.5) !important;\r\n  }\r\n\r\n  /*  */\r\n  .el-date-table td.today .el-date-table-cell__text {\r\n    color: var(--el-color-primary) !important;\r\n    font-weight: bold !important;\r\n  }\r\n\r\n  /*  */\r\n  .el-date-table td.next-month .el-date-table-cell__text,\r\n  .el-date-table td.prev-month .el-date-table-cell__text {\r\n    color: #505050 !important;\r\n  }\r\n\r\n  /*  */\r\n  .el-time-spinner__item {\r\n    color: #909399 !important;\r\n  }\r\n\r\n  .el-time-spinner__item.active:not(.disabled) {\r\n    color: #ffffff !important;\r\n    font-weight: bold !important;\r\n    font-size: 16px !important;\r\n  }\r\n\r\n  .el-time-spinner__item:hover:not(.disabled):not(.active) {\r\n    background: rgba(255, 255, 255, 0.05) !important;\r\n    color: #ffffff !important;\r\n  }\r\n\r\n  /*  */\r\n  .el-picker-panel__footer {\r\n    background-color: #1f1f1f !important;\r\n    border-top: 1px solid #3a3a3a !important;\r\n  }\r\n\r\n  .el-picker-panel__footer .el-button.is-text {\r\n    color: #909399 !important;\r\n  }\r\n\r\n  .el-picker-panel__footer .el-button.is-plain {\r\n    /*  */\r\n  }\r\n\r\n  /*  */\r\n  .el-popper__arrow::before {\r\n    background: #1f1f1f !important;\r\n    border: 1px solid #3a3a3a !important;\r\n  }\r\n\r\n  .el-date-picker__time-header {\r\n    border-bottom: 1px solid #3a3a3a !important;\r\n  }\r\n  </style>\r\n","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1d966d6b&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineStore } from 'pinia'\r\nimport { computed, ref } from 'vue'\r\nimport { useConfigStore } from '@/store/config'\r\n\r\nexport const useThemeStore = defineStore('theme', () => {\r\n  const configStore = useConfigStore()\r\n  const currentTheme = computed(() => configStore.config.theme)\r\n  const isInitialized = ref(false)\r\n  const gradientStart = computed(() => currentTheme.value.gradientStart || currentTheme.value.primary)\r\n  const gradientEnd = computed(() => currentTheme.value.gradientEnd || lighten(currentTheme.value.primary, 0.15))\r\n  const cssVariables = computed(() => {\r\n    const theme = currentTheme.value\r\n    const rgb = hexToRgb(theme.primary)\r\n    const primary50 = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, 0.5)`\r\n    const primaryHover = darken(theme.primary, 0.08)\r\n    return {\r\n      '--theme-primary': theme.primary,\r\n      '--menu-background': theme.menuBackground,\r\n      '--menu-text-color': theme.menuTextColor,\r\n      '--menu-active-text-color': theme.menuActiveTextColor,\r\n      '--menu-hover-background': theme.menuHoverBackground,\r\n      '--theme-gradient-start': gradientStart.value,\r\n      '--theme-gradient-end': gradientEnd.value,\r\n      '--el-bg-color-overlay': theme.primary,\r\n      '--theme-primary-50': primary50,\r\n      '--theme-primary-hover': primaryHover\r\n    }\r\n  })\r\n  const applyTheme = () => {\r\n    const root = document.documentElement\r\n    Object.entries(cssVariables.value).forEach(([property, value]) => {\r\n      root.style.setProperty(property, value)\r\n    })\r\n  }\r\n  const initTheme = () => {\r\n    if (isInitialized.value) return\r\n    applyTheme()\r\n    isInitialized.value = true\r\n  }\r\n  return {\r\n    currentTheme,\r\n    isInitialized,\r\n    cssVariables,\r\n    initTheme,\r\n    applyTheme\r\n  }\r\n})\r\n\r\nfunction hexToRgb(hex: string) {\r\n  const h = hex.replace('#', '')\r\n  const r = parseInt(h.length === 3 ? h[0] + h[0] : h.slice(0, 2), 16)\r\n  const g = parseInt(h.length === 3 ? h[1] + h[1] : h.slice(2, 4), 16)\r\n  const b = parseInt(h.length === 3 ? h[2] + h[2] : h.slice(4, 6), 16)\r\n  return { r, g, b }\r\n}\r\n\r\nfunction rgbToHex(r: number, g: number, b: number) {\r\n  const toHex = (v: number) => v.toString(16).padStart(2, '0')\r\n  return `#${toHex(r)}${toHex(g)}${toHex(b)}`\r\n}\r\n\r\nfunction lighten(hex: string, ratio: number) {\r\n  const { r, g, b } = hexToRgb(hex)\r\n  const lr = Math.round(r + (255 - r) * ratio)\r\n  const lg = Math.round(g + (255 - g) * ratio)\r\n  const lb = Math.round(b + (255 - b) * ratio)\r\n  return rgbToHex(lr, lg, lb)\r\n}\r\nfunction darken(hex: string, ratio: number) {\r\n  const { r, g, b } = hexToRgb(hex)\r\n  const dr = Math.round(r * (1 - ratio))\r\n  const dg = Math.round(g * (1 - ratio))\r\n  const db = Math.round(b * (1 - ratio))\r\n  return rgbToHex(dr, dg, db)\r\n}\r\n","import { API_BASE_URL, headers } from './config'\r\nimport type { FriendConfig, MassSendingTaskRequest, BatchAutoFollowRequest, AutoFollowTaskResult } from '../types/autosop'\r\n\r\n// \r\nexport type { MassSendingTaskRequest, BatchAutoFollowRequest, AutoFollowTaskResult } from '../types/autosop'\r\ninterface ImportFriendListResponse {\r\n  success: boolean\r\n  count: number\r\n  remaining: number\r\n  needsAuth?: boolean\r\n  authUrl?: string\r\n}\r\nexport const uploadFile = async (file: File) => {\r\n    try {\r\n      // 10MB\r\n      const MAX_SIZE = 100 * 1024 * 1024 // 10MB\r\n      if (file.size > MAX_SIZE) {\r\n        throw new Error('100MB')\r\n      }\r\n      \r\n      const formData = new FormData()\r\n      formData.append('file', file)\r\n      \r\n      const response = await fetch(`${API_BASE_URL}/api/file/upload`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'X-API-Key': headers['X-API-Key']\r\n        },\r\n        body: formData\r\n      })\r\n  \r\n      const result = await response.json()\r\n      \r\n      if (!response.ok || !result.success) {\r\n        throw new Error(result.error || result.detail || '')\r\n      }\r\n  \r\n      return result.data\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      throw error instanceof Error ? error : new Error('')\r\n    }\r\n  }\r\n  export const startAutoAddFriend = async (config: FriendConfig) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/friend/auto-add/start`, {\r\n        method: 'POST',\r\n        headers: {\r\n          ...headers,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(config)\r\n      })\r\n  \r\n      const result = await response.json()\r\n      if (!result.success) {\r\n        throw new Error(result.error)\r\n      }\r\n  \r\n      return result\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      throw error instanceof Error ? error : new Error('')\r\n    }\r\n  }\r\n\r\n  export const getTaskLogs = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/tasks/logs`, {\r\n        method: 'GET',\r\n        headers: {\r\n          ...headers,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n  \r\n      const result = await response.json()\r\n      if (!result.success) {\r\n        throw new Error(result.error || '')\r\n      }\r\n  \r\n      return result.data\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      throw error instanceof Error ? error : new Error('')\r\n    }\r\n  }\r\n  // \r\n  export const createMassSendingTask = async (taskData: MassSendingTaskRequest) => {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/api/tasks/mass-sending`, {\r\n            method: 'POST',\r\n            headers: {\r\n                ...headers,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(taskData)\r\n        })\r\n\r\n        const result = await response.json()\r\n        \r\n        //  HTTP \r\n        if (!response.ok) {\r\n            throw new Error(result.error || result.detail || '')\r\n        }\r\n        console.debug(\"\",result)\r\n        // \r\n        if (!result.success) {\r\n            throw new Error(result.error || '')\r\n        }\r\n\r\n        return result.data\r\n    } catch (error) {\r\n        console.error(':', error)\r\n        throw error instanceof Error ? error : new Error('')\r\n    }\r\n}\r\n\r\nexport const cancelMassSendingTask = async (taskId: string) => {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/api/tasks/mass-sending/${taskId}/cancel`, {\r\n            method: 'POST',\r\n            headers: {\r\n                ...headers,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n\r\n        const result = await response.json()\r\n        if (!result.success) {\r\n            throw new Error(result.error)\r\n        }\r\n        return result\r\n    } catch (error) {\r\n        console.error(':', error)\r\n        throw error instanceof Error ? error : new Error('')\r\n    }\r\n}\r\n\r\nexport const cancelAllMassSendingTasks = async () => {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/api/tasks/mass-sending/cancel-all`, {\r\n            method: 'POST',\r\n            headers: {\r\n                ...headers,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n\r\n        const result = await response.json()\r\n        if (!result.success) {\r\n            throw new Error(result.error)\r\n        }\r\n        return result\r\n    } catch (error) {\r\n        console.error(':', error)\r\n        throw error instanceof Error ? error : new Error('')\r\n    }\r\n}\r\n\r\nexport const getMassSendingTasks = async () => {\r\n  try {\r\n      const response = await fetch(`${API_BASE_URL}/api/tasks/mass-sending`, {\r\n          headers: headers\r\n      })\r\n\r\n      const result = await response.json()\r\n      if (!result.success) {\r\n          throw new Error(result.error || '')\r\n      }\r\n\r\n      return result\r\n  } catch (error) {\r\n      console.error(':', error)\r\n      throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\n// \r\nexport const toggleAutoAddFriend = async (enabled: boolean, settings: FriendConfig) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/friend-request/toggle`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        enabled,\r\n        maxFriendsPerDay: settings.maxFriendsPerDay,\r\n        maxProcessPerTime: settings.maxProcessPerTime,\r\n        tag: settings.tag,\r\n        targetGroup: settings.targetGroup, \r\n        greetingGroupId:settings.greetingGroupId,\r\n        checkInterval: settings.checkInterval\r\n      })\r\n    })\r\n\r\n    const result = await response.json()\r\n    if (!result.success) {\r\n      throw new Error(result.error)\r\n    }\r\n\r\n    return result\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\nexport const toggleAutoComment = async (enabled: boolean, config: any) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/moment/toggle-auto-comment`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        ...config,\r\n        enabled\r\n      })\r\n    })\r\n\r\n    const result = await response.json()\r\n    if (!result.success) {\r\n      throw new Error(result.error)\r\n    }\r\n\r\n    return result\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\nexport const getFriendRequestLogs = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/friend-request/logs`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n\r\n    const result = await response.json()\r\n    if (!result.success) {\r\n      throw new Error(result.error)\r\n    }\r\n\r\n    return result.data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n// \r\nexport const importFriendList = async (file: File): Promise<ImportFriendListResponse> => {\r\n  try {\r\n    const formData = new FormData()\r\n    formData.append('file', file)\r\n    \r\n    const response = await fetch(`${API_BASE_URL}/api/friend/import`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'X-API-Key': headers['X-API-Key']\r\n      },\r\n      body: formData\r\n    })\r\n\r\n    const result = await response.json()\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(result.detail || '')\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      count: result.count,\r\n      remaining: result.remaining\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n// \r\nexport const importFriendListByAgent = async (agentId: string): Promise<ImportFriendListResponse> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/import-by-agent`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-API-Key': headers['X-API-Key']\r\n      },\r\n      body: JSON.stringify({ agent_id: agentId })\r\n    })\r\n\r\n    const result = await response.json()\r\n    \r\n    console.debug(\"\",result)\r\n    // \r\n    if (result.needsAuth && result.authUrl) {\r\n      return {\r\n        success: false,\r\n        count: 0,\r\n        remaining: 0,\r\n        needsAuth: true,\r\n        authUrl: result.authUrl\r\n      }\r\n    }\r\n    if (!response.ok) {\r\n      // \r\n      const errorMsg = result.detail || ''\r\n      const authUrlMatch = errorMsg.match(/https:\\/\\/open\\.feishu\\.cn\\/open-apis\\/authen[^\\s\"']+/)\r\n      \r\n      if (authUrlMatch) {\r\n        return {\r\n          success: false,\r\n          count: 0,\r\n          remaining: 0,\r\n          needsAuth: true,\r\n          authUrl: authUrlMatch[0]\r\n        }\r\n      }\r\n      \r\n      throw new Error(errorMsg)\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      count: result.count,\r\n      remaining: result.remaining\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n// API\r\nexport const syncFriendListByApi = async (): Promise<ImportFriendListResponse> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/sync-by-api`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-API-Key': headers['X-API-Key']\r\n      }\r\n    })\r\n\r\n    const result = await response.json()\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(result.detail || result.error || '')\r\n    }\r\n\r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      count: result.count || 0,\r\n      remaining: result.remaining || 0\r\n    }\r\n  } catch (error) {\r\n    console.error('API:', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n// \r\nexport const getAddFriendLogs = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/add-logs`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n\r\n    const result = await response.json()\r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return result.data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n// \r\nexport const getRemainingFriendCount = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/remaining-count`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n    const result = await response.json()\r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n    return {\r\n      remaining: result.data.remaining,\r\n      today_added: result.data.today_added || 0\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\n// /\r\nexport const toggleAutoAddNewFriend = async (enabled: boolean, config: any) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/auto-add-new/toggle`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        enabled,\r\n        maxFriendsPerDay: config.maxFriendsPerDay,\r\n        interval: config.interval,\r\n        batchSize: config.batchSize,\r\n        verifyMessage: config.verifyMessage || '',\r\n        multiCycleEnabled: Boolean(config.multiCycleEnabled),\r\n        accountIds: Array.isArray(config.selectedAccounts) ? config.selectedAccounts : []\r\n      })\r\n    })\r\n\r\n    const result = await response.json()\r\n    // if (!result.success) {\r\n    //   throw new Error(result.error || '')\r\n    // }\r\n    return result\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\nexport const getFriendConfig = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/friend-request/logs`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n\r\n    const result = await response.json()\r\n    if (!result.success) {\r\n      throw new Error(result.error)\r\n    }\r\n\r\n    return result.data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\nexport const getFriendList = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/list`, {\r\n      headers\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const getFriendListFiltered = async (status?: string, tag?: string) => {\r\n  try {\r\n    const params = new URLSearchParams()\r\n    if (status) params.append('status', status)\r\n    if (tag) params.append('tag', tag)\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/list?${params.toString()}`, {\r\n      headers\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const deleteFriendFromList = async (wxid: string) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/list/${wxid}`, {\r\n      method: 'DELETE',\r\n      headers\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const batchDeleteFriendFromList = async (wxids: string[]) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/friend/list/batch_delete`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ wxids })\r\n    })\r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport const exportFriendList = async (status?: string, tag?: string): Promise<void> => {\r\n  const params = new URLSearchParams()\r\n  if (status) params.append('status', status)\r\n  if (tag) params.append('tag', tag)\r\n  const url = `${API_BASE_URL}/api/friend/list/export?${params.toString()}`\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n    if (!response.ok) {\r\n      const text = await response.text().catch(() => '')\r\n      throw new Error(text || `(${response.status})`)\r\n    }\r\n    const blob = await response.blob()\r\n    const objectUrl = window.URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = objectUrl\r\n    a.download = `_${Date.now()}.csv`\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    a.remove()\r\n    window.URL.revokeObjectURL(objectUrl)\r\n  } catch (e) {\r\n  }\r\n}\r\nexport const exportFriendListPath = async (status?: string, tag?: string): Promise<string> => {\r\n  const params = new URLSearchParams()\r\n  if (status) params.append('status', status)\r\n  if (tag) params.append('tag', tag)\r\n  const url = `${API_BASE_URL}/api/friend/list/export_path?${params.toString()}`\r\n  const response = await fetch(url, { headers })\r\n  const result = await response.json()\r\n  if (!response.ok || !result.success) {\r\n    throw new Error(result.error || result.detail || '')\r\n  }\r\n  return result.path as string\r\n}\r\nexport const openLocalFolder = async (path: string): Promise<void> => {\r\n  const params = new URLSearchParams()\r\n  params.append('path', path)\r\n  await fetch(`${API_BASE_URL}/api/moment-material/open-folder?${params.toString()}`, {\r\n    method: 'GET',\r\n    headers\r\n  })\r\n}\r\n\r\n// \r\nexport interface ChatCollectionTaskRequest {\r\n  timeType: 'now' | 'schedule'\r\n  time?: string | Date | null\r\n  agent_id: string\r\n  max_sessions: number\r\n  time_limit_days: number\r\n  file_types: string[]\r\n}\r\n\r\nexport const createChatCollectionTask = async (taskData: ChatCollectionTaskRequest) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/chat-collection`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(taskData)\r\n    })\r\n\r\n    const result = await response.json()\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(result.error || result.detail || '')\r\n    }\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return result.data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\nexport const getChatCollectionTasks = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/chat-collection`, {\r\n      headers\r\n    })\r\n\r\n    const result = await response.json()\r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return result\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\nexport const cancelChatCollectionTask = async (taskId: string) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/chat-collection/${taskId}/cancel`, {\r\n      method: 'POST',\r\n      headers\r\n    })\r\n\r\n    const result = await response.json()\r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return result.data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\nexport const getChatCollectionLogs = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/chat-collection/logs`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n\r\n    const result = await response.json()\r\n    \r\n    if (!response.ok || !result.success) {\r\n      throw new Error(result.error || result.detail || '')\r\n    }\r\n\r\n    return result.data || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\n// \r\nexport const createBatchAutoFollowTasks = async (taskData: BatchAutoFollowRequest): Promise<AutoFollowTaskResult> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/auto-follow/batch`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(taskData)\r\n    })\r\n\r\n    const result = await response.json()\r\n    \r\n    //  HTTP \r\n    if (!response.ok) {\r\n      throw new Error(result.error || result.detail || '')\r\n    }\r\n    \r\n    console.debug(\"\", result)\r\n    \r\n    // \r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return {\r\n      success: true,\r\n      task_id: result.task_id,\r\n      ...result\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\n// \r\nexport const getAutoFollowTasks = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/auto-follow`, {\r\n      method: 'GET',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n\r\n    const result = await response.json()\r\n    console.info(\"\", result)\r\n    if (!response.ok) {\r\n      throw new Error(result.error || result.detail || '')\r\n    }\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return result.tasks || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\n// ID\r\nexport const cancelAutoFollowTask = async (taskId: string) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/auto-follow/${taskId}/cancel`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n\r\n    const result = await response.json()\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(result.error || result.detail || '')\r\n    }\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return result\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}\r\n\r\n// \r\nexport const getAutoFollowLogs = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/auto-follow/logs`, {\r\n      method: 'GET',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n\r\n    const result = await response.json()\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(result.error || result.detail || '')\r\n    }\r\n    \r\n    if (!result.success) {\r\n      throw new Error(result.error || '')\r\n    }\r\n\r\n    return result.data || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    throw error instanceof Error ? error : new Error('')\r\n  }\r\n}","const API_BASE_URL = 'http://127.0.0.1:9922';\r\nconst API_KEY = 'yoko_test';\r\n\r\nconst headers = {\r\n  'Content-Type': 'application/json',\r\n  'X-API-Key': API_KEY\r\n};\r\nexport const updateActivationCodeRemark = async (code: string, remark: string): Promise<any> => {\r\n  try {\r\n    const res = await fetch(`${API_BASE_URL}/api/agent/activation-code/remark`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify({ code, remark })\r\n    })\r\n    return await res.json()\r\n  } catch (e) {\r\n    return { success: false, message: '' }\r\n  }\r\n}\r\nexport const checkAgentExists = async (name: string): Promise<boolean> => {\r\n  try {\r\n    const res = await fetch(`${API_BASE_URL}/api/agent/exists?name=${encodeURIComponent(name)}`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n    const data = await res.json()\r\n    return data.success && data.exists\r\n  } catch (e) {\r\n    return false\r\n  }\r\n}\r\n\r\nexport const loginAgent = async (name: string, password: string): Promise<any> => {\r\n  try {\r\n    const res = await fetch(`${API_BASE_URL}/agent/login`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify({ name, password })\r\n    })\r\n    return await res.json()\r\n  } catch (e) {\r\n    return { success: false, message: '' }\r\n  }\r\n}\r\n\r\nexport const getAgentActivationCodes = async (name: string): Promise<any[]> => {\r\n  try {\r\n    const res = await fetch(`${API_BASE_URL}/api/agent/activation-codes?name=${encodeURIComponent(name)}`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n    const data = await res.json()\r\n    if (data.success) return data.data\r\n    return []\r\n  } catch (e) {\r\n    return []\r\n  }\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"startup-container\" }\nconst _hoisted_2 = { class: \"card-header\" }\nconst _hoisted_3 = { class: \"version\" }\nconst _hoisted_4 = { class: \"startup-content\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"startup-progress\"\n}\nconst _hoisted_6 = { class: \"progress-text\" }\nconst _hoisted_7 = { class: \"startup-actions\" }\nconst _hoisted_8 = { class: \"dialog-header warning\" }\nconst _hoisted_9 = { class: \"dialog-content\" }\nconst _hoisted_10 = { class: \"steps-panel\" }\nconst _hoisted_11 = { class: \"step-text\" }\nconst _hoisted_12 = { key: 0 }\nconst _hoisted_13 = { class: \"step-text\" }\nconst _hoisted_14 = { key: 0 }\nconst _hoisted_15 = { class: \"step-text\" }\nconst _hoisted_16 = { key: 0 }\nconst _hoisted_17 = { class: \"step-text\" }\nconst _hoisted_18 = { key: 0 }\n\nimport { ref, inject, onMounted, onUnmounted } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { WarningFilled } from '@element-plus/icons-vue'\r\nimport { initializeMultipleWechat, autoConfigWechat41, stopNarrator } from '@/api/init'\r\nimport { version } from '../../package.json'\r\nimport type { BrandConfig } from '@/config/brand'\r\nimport { checkAgentExists } from '@/api/agent'\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'StartupPage',\n  setup(__props) {\n\r\nconst brandConfig = inject<BrandConfig>('brandConfig', {\r\n  channel_id:'channel_000001',\r\n  name: 'Yoko',\r\n  ename: 'YokoAIbot',\r\n  logo: '/assets/logo.png',\r\n  contact: '473726474@qq.com'\r\n})\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst initializing = ref(false)\r\nconst progress = ref(0)\r\nconst progressStatus = ref<'success' | 'exception'>('success')\r\nconst progressText = ref('')\r\nconst showEnvConfigDialog = ref(false)\r\nconst showConfigCompleteDialog = ref(false)\r\nconst agentName = ref<string | null>(null)\r\nconst autoConfigRunning = ref(false)\r\nconst autoConfigSteps = ref<Record<number, 'pending' | 'start' | 'done'>>({1:'pending',2:'pending',3:'pending',4:'pending'})\r\n\r\nconst updateProgress = (value: number, text: string) => {\r\n  progress.value = value\r\n  progressText.value = text\r\n}\r\n// const handler = (e: any) => {\r\n//   console.log('auto-config-progress', e.detail)\r\n//   const { step, status } = e.detail || {}\r\n//   const s = Number(step)\r\n//   if ([1,2,3,4].includes(s) && status) {\r\n//     autoConfigSteps.value = { ...autoConfigSteps.value, [s]: status }\r\n//   }\r\n// }\r\nonMounted(async () => {\r\n  const agent = route.query.agent as string | undefined\r\n  if (agent) {\r\n    agentName.value = agent\r\n    const isAgent = await checkAgentExists(agent)\r\n    if (isAgent) {\r\n      goAgentLogin()\r\n    }\r\n  }\r\n  // window.addEventListener('auto-config-progress', handler as any)\r\n\r\n})\r\n  // onUnmounted(() => {\r\n  //   window.removeEventListener('auto-config-progress', handler as any)\r\n  // })\r\n\r\nconst handleMultiStartup = async () => {\r\n  if (initializing.value) return\r\n  \r\n  try {\r\n    initializing.value = true\r\n    progressStatus.value = 'success'\r\n    \r\n    updateProgress(20, '...')\r\n    // initializing.value = false\r\n    // showEnvConfigDialog.value = true\r\n    // return\r\n    // \r\n    const result = await initializeMultipleWechat()\r\n    \r\n    if (result.success) {\r\n      updateProgress(60, '...')\r\n\r\n      updateProgress(100, '') \r\n      // \r\n      localStorage.setItem('appStarted', 'true')\r\n      \r\n      // \r\n      setTimeout(() => {\r\n        router.push({\r\n          name: 'WelcomePage',\r\n          params: {\r\n            nickname: result.instances[0]?.nickname || ''\r\n          }\r\n        })\r\n      }, 500)\r\n      \r\n    } else {\r\n      if (result.code === 'ENV_NOT_CONFIGURED') {\r\n        initializing.value = false\r\n        showEnvConfigDialog.value = true\r\n        return\r\n      }\r\n      throw new Error(result.message)\r\n    }\r\n    \r\n  } catch (error) {\r\n    progressStatus.value = 'exception'\r\n    updateProgress(100, `: ${(error as Error).message}`)\r\n    ElMessage.error(`: ${(error as Error).message}`)\r\n    // \r\n    initializing.value = false\r\n  }\r\n}\r\n\r\nconst startAutoConfig = async () => {\r\n  try {\r\n    if (autoConfigRunning.value) return\r\n    autoConfigRunning.value = true\r\n    autoConfigSteps.value = {1:'pending',2:'pending',3:'pending',4:'pending'}\r\n    const res = await autoConfigWechat41()\r\n    if (res.success) {\r\n      showEnvConfigDialog.value = false\r\n      showConfigCompleteDialog.value = true\r\n    } else {\r\n      ElMessage.error(res.message || '')\r\n    }\r\n  } catch (e) {\r\n    ElMessage.error('')\r\n  } finally {\r\n    autoConfigRunning.value = false\r\n  }\r\n}\r\n\r\nconst launchAppAfterConfig = async () => {\r\n  try {\r\n    initializing.value = true\r\n    updateProgress(20, '...')\r\n    const result = await initializeMultipleWechat()\r\n    if (result.success) {\r\n      updateProgress(100, '')\r\n      localStorage.setItem('appStarted', 'true')\r\n      showConfigCompleteDialog.value = false\r\n      setTimeout(() => {\r\n        router.push({\r\n          name: 'WelcomePage',\r\n          params: { nickname: result.instances[0]?.nickname || '' }\r\n        })\r\n      }, 500)\r\n      stopNarrator()\r\n    } else {\r\n      ElMessage.error(result.message || '')\r\n    }\r\n  } finally {\r\n    initializing.value = false\r\n  }\r\n}\r\n\r\nfunction goAgentLogin() {\r\n  if (agentName.value) {\r\n    router.push({ path: '/agent/login', query: { agent: agentName.value } })\r\n  } else {\r\n    router.push('/agent/login')\r\n  }\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_progress = _resolveComponent(\"el-progress\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"background-animation\" }, null, -1)),\n    _createVNode(_component_el_card, { class: \"startup-card\" }, {\n      header: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createElementVNode(\"h2\", null, [\n            _createTextVNode(_toDisplayString(_unref(brandConfig).ename) + \" \", 1),\n            _createElementVNode(\"span\", _hoisted_3, \"v\" + _toDisplayString(_unref(version)), 1)\n          ])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"instructions\" }, [\n            _createElementVNode(\"h3\", null, \"\"),\n            _createElementVNode(\"ol\", null, [\n              _createElementVNode(\"li\", null, \"1\"),\n              _createElementVNode(\"li\", { class: \"important-tip\" }, [\n                _createElementVNode(\"span\", { class: \"important-icon\" }, \"\"),\n                _createElementVNode(\"strong\", null, \"\")\n              ]),\n              _createElementVNode(\"li\", null, \"\"),\n              _createElementVNode(\"li\", null, \"~\")\n            ])\n          ], -1)),\n          (initializing.value)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                _createVNode(_component_el_progress, {\n                  percentage: progress.value,\n                  status: progressStatus.value,\n                  \"stroke-width\": 8,\n                  \"show-text\": false\n                }, null, 8, [\"percentage\", \"status\"]),\n                _createElementVNode(\"p\", _hoisted_6, _toDisplayString(progressText.value), 1)\n              ]))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createVNode(_component_el_button, {\n              type: \"warning\",\n              loading: initializing.value,\n              onClick: handleMultiStartup,\n              class: \"start-button multi-start-button\",\n              style: {\"margin-top\":\"16px\"}\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(initializing.value ? '...' : ''), 1)\n              ]),\n              _: 1\n            }, 8, [\"loading\"]),\n            _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"disclaimer\" }, [\n              _createElementVNode(\"p\", null, \"\"),\n              _createElementVNode(\"ul\", null, [\n                _createElementVNode(\"li\", null, \"\"),\n                _createElementVNode(\"li\", null, \"\")\n              ])\n            ], -1))\n          ])\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_dialog, {\n      modelValue: showEnvConfigDialog.value,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((showEnvConfigDialog).value = $event)),\n      title: \"~\",\n      width: \"460px\",\n      \"align-center\": \"\",\n      class: \"env-dialog\"\n    }, {\n      header: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createVNode(_component_el_icon, { class: \"warning-icon\" }, {\n            default: _withCtx(() => [\n              _createVNode(_unref(WarningFilled))\n            ]),\n            _: 1\n          }),\n          _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"dialog-title\" }, \"~\", -1))\n        ])\n      ]),\n      footer: _withCtx(() => [\n        _createVNode(_component_el_button, {\n          class: \"dialog-primary\",\n          type: \"primary\",\n          loading: autoConfigRunning.value,\n          disabled: autoConfigRunning.value,\n          onClick: startAutoConfig\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(autoConfigRunning.value ? '' : ''), 1)\n          ]),\n          _: 1\n        }, 8, [\"loading\", \"disabled\"])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_9, [\n          _cache[13] || (_cache[13] = _createElementVNode(\"p\", { class: \"dialog-subtitle\" }, \"4.1\", -1)),\n          _createElementVNode(\"div\", _hoisted_10, [\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\"step-item\", { done: autoConfigSteps.value[1] === 'done' }])\n            }, [\n              _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"step-index\" }, \"1\", -1)),\n              _createElementVNode(\"span\", _hoisted_11, [\n                _cache[5] || (_cache[5] = _createTextVNode(\"\", -1)),\n                (autoConfigSteps.value[1] === 'done')\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \"\"))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ], 2),\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\"step-item\", { done: autoConfigSteps.value[2] === 'done' }])\n            }, [\n              _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"step-index\" }, \"2\", -1)),\n              _createElementVNode(\"span\", _hoisted_13, [\n                _cache[7] || (_cache[7] = _createTextVNode(\"\", -1)),\n                (autoConfigSteps.value[2] === 'done')\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, \"\"))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ], 2),\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\"step-item\", { done: autoConfigSteps.value[3] === 'done' }])\n            }, [\n              _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"step-index\" }, \"3\", -1)),\n              _createElementVNode(\"span\", _hoisted_15, [\n                _cache[9] || (_cache[9] = _createTextVNode(\" 10 \", -1)),\n                (autoConfigSteps.value[3] === 'done')\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_16, \"\"))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ], 2),\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\"step-item\", { done: autoConfigSteps.value[4] === 'done' }])\n            }, [\n              _cache[12] || (_cache[12] = _createElementVNode(\"span\", { class: \"step-index\" }, \"4\", -1)),\n              _createElementVNode(\"span\", _hoisted_17, [\n                _cache[11] || (_cache[11] = _createTextVNode(\"\", -1)),\n                (autoConfigSteps.value[4] === 'done')\n                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_18, \"\"))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ], 2)\n          ])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: showConfigCompleteDialog.value,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((showConfigCompleteDialog).value = $event)),\n      title: \"\",\n      width: \"380px\",\n      \"align-center\": \"\",\n      class: \"complete-dialog\"\n    }, {\n      footer: _withCtx(() => [\n        _createVNode(_component_el_button, {\n          class: \"dialog-primary\",\n          type: \"primary\",\n          loading: initializing.value,\n          disabled: initializing.value,\n          onClick: launchAppAfterConfig\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(initializing.value ? '' : ''), 1)\n          ]),\n          _: 1\n        }, 8, [\"loading\", \"disabled\"])\n      ]),\n      default: _withCtx(() => [\n        _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"dialog-content\" }, [\n          _createElementVNode(\"p\", { class: \"dialog-summary\" }, \"\"),\n          _createElementVNode(\"p\", { class: \"dialog-subtitle\" }, \"\")\n        ], -1))\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"startup-container\">\r\n    <div class=\"background-animation\"></div>\r\n    <el-card class=\"startup-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <h2>{{ brandConfig.ename }} <span class=\"version\">v{{ version }}</span></h2>\r\n        </div>\r\n      </template>\r\n      \r\n      <div class=\"startup-content\">\r\n        <div class=\"instructions\">\r\n          <h3></h3>\r\n          <ol>\r\n            <li>1</li>          \r\n            <!-- <li></li> -->\r\n            <li class=\"important-tip\">\r\n              <span class=\"important-icon\"></span>\r\n              <strong></strong>\r\n            </li>\r\n            <li></li>\r\n            <li>~</li>\r\n          </ol>\r\n        </div>\r\n\r\n        <div class=\"startup-progress\" v-if=\"initializing\">\r\n          <el-progress \r\n            :percentage=\"progress\" \r\n            :status=\"progressStatus\"\r\n            :stroke-width=\"8\"\r\n            :show-text=\"false\"\r\n          />\r\n          <p class=\"progress-text\">{{ progressText }}</p>\r\n      </div>\r\n      \r\n      <div class=\"startup-actions\">\r\n          <!-- <el-button \r\n            type=\"primary\" \r\n            :loading=\"initializing\"\r\n            @click=\"handleStartup\"\r\n            class=\"start-button\"\r\n          >\r\n            {{ initializing ? '...' : '' }}\r\n          </el-button> -->\r\n          <!--  -->\r\n          <el-button \r\n            type=\"warning\" \r\n            :loading=\"initializing\"\r\n            @click=\"handleMultiStartup\"\r\n            class=\"start-button multi-start-button\"\r\n            style=\"margin-top: 16px;\"\r\n          >\r\n            {{ initializing ? '...' : '' }}\r\n          </el-button>\r\n\r\n          <!--  -->\r\n          <!-- <el-button v-if=\"showAgentEntry\" type=\"success\" class=\"agent-entry-btn\" @click=\"goAgentLogin\" style=\"margin-top: 16px;\">\r\n            \r\n          </el-button> -->\r\n\r\n          <!--  -->\r\n          <div class=\"disclaimer\">\r\n            <p></p>\r\n            <ul>\r\n              <li></li>\r\n              <li></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n\r\n    <el-dialog v-model=\"showEnvConfigDialog\" title=\"~\" width=\"460px\" align-center class=\"env-dialog\">\r\n      <template #header>\r\n        <div class=\"dialog-header warning\">\r\n          <el-icon class=\"warning-icon\"><WarningFilled /></el-icon>\r\n          <span class=\"dialog-title\">~</span>\r\n        </div>\r\n      </template>\r\n      <div class=\"dialog-content\">\r\n        <p class=\"dialog-subtitle\">4.1</p>\r\n        <div class=\"steps-panel\">\r\n          <div class=\"step-item\" :class=\"{ done: autoConfigSteps[1] === 'done' }\">\r\n            <span class=\"step-index\">1</span>\r\n            <span class=\"step-text\"><span v-if=\"autoConfigSteps[1] === 'done'\"></span></span>\r\n          </div>\r\n          <div class=\"step-item\" :class=\"{ done: autoConfigSteps[2] === 'done' }\">\r\n            <span class=\"step-index\">2</span>\r\n            <span class=\"step-text\"><span v-if=\"autoConfigSteps[2] === 'done'\"></span></span>\r\n          </div>\r\n          <div class=\"step-item\" :class=\"{ done: autoConfigSteps[3] === 'done' }\">\r\n            <span class=\"step-index\">3</span>\r\n            <span class=\"step-text\"> 10 <span v-if=\"autoConfigSteps[3] === 'done'\"></span></span>\r\n          </div>\r\n          <div class=\"step-item\" :class=\"{ done: autoConfigSteps[4] === 'done' }\">\r\n            <span class=\"step-index\">4</span>\r\n            <span class=\"step-text\"><span v-if=\"autoConfigSteps[4] === 'done'\"></span></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <template #footer>\r\n        <el-button\r\n          class=\"dialog-primary\"\r\n          type=\"primary\"\r\n          :loading=\"autoConfigRunning\"\r\n          :disabled=\"autoConfigRunning\"\r\n          @click=\"startAutoConfig\"\r\n        >\r\n          {{ autoConfigRunning ? '' : '' }}\r\n        </el-button>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <el-dialog v-model=\"showConfigCompleteDialog\" title=\"\" width=\"380px\" align-center class=\"complete-dialog\">\r\n      <div class=\"dialog-content\">\r\n        <p class=\"dialog-summary\"></p>\r\n        <p class=\"dialog-subtitle\"></p>\r\n      </div>\r\n      <template #footer>\r\n        <el-button\r\n          class=\"dialog-primary\"\r\n          type=\"primary\"\r\n          :loading=\"initializing\"\r\n          :disabled=\"initializing\"\r\n          @click=\"launchAppAfterConfig\"\r\n        >\r\n          {{ initializing ? '' : '' }}\r\n        </el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n  \r\n<script setup lang=\"ts\">\r\nimport { ref, inject, onMounted, onUnmounted } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { WarningFilled } from '@element-plus/icons-vue'\r\nimport { initializeMultipleWechat, autoConfigWechat41, stopNarrator } from '@/api/init'\r\nimport { version } from '../../package.json'\r\nimport type { BrandConfig } from '@/config/brand'\r\nimport { checkAgentExists } from '@/api/agent'\r\nconst brandConfig = inject<BrandConfig>('brandConfig', {\r\n  channel_id:'channel_000001',\r\n  name: 'Yoko',\r\n  ename: 'YokoAIbot',\r\n  logo: '/assets/logo.png',\r\n  contact: '473726474@qq.com'\r\n})\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst initializing = ref(false)\r\nconst progress = ref(0)\r\nconst progressStatus = ref<'success' | 'exception'>('success')\r\nconst progressText = ref('')\r\nconst showEnvConfigDialog = ref(false)\r\nconst showConfigCompleteDialog = ref(false)\r\nconst agentName = ref<string | null>(null)\r\nconst autoConfigRunning = ref(false)\r\nconst autoConfigSteps = ref<Record<number, 'pending' | 'start' | 'done'>>({1:'pending',2:'pending',3:'pending',4:'pending'})\r\n\r\nconst updateProgress = (value: number, text: string) => {\r\n  progress.value = value\r\n  progressText.value = text\r\n}\r\n// const handler = (e: any) => {\r\n//   console.log('auto-config-progress', e.detail)\r\n//   const { step, status } = e.detail || {}\r\n//   const s = Number(step)\r\n//   if ([1,2,3,4].includes(s) && status) {\r\n//     autoConfigSteps.value = { ...autoConfigSteps.value, [s]: status }\r\n//   }\r\n// }\r\nonMounted(async () => {\r\n  const agent = route.query.agent as string | undefined\r\n  if (agent) {\r\n    agentName.value = agent\r\n    const isAgent = await checkAgentExists(agent)\r\n    if (isAgent) {\r\n      goAgentLogin()\r\n    }\r\n  }\r\n  // window.addEventListener('auto-config-progress', handler as any)\r\n\r\n})\r\n  // onUnmounted(() => {\r\n  //   window.removeEventListener('auto-config-progress', handler as any)\r\n  // })\r\n\r\nconst handleMultiStartup = async () => {\r\n  if (initializing.value) return\r\n  \r\n  try {\r\n    initializing.value = true\r\n    progressStatus.value = 'success'\r\n    \r\n    updateProgress(20, '...')\r\n    // initializing.value = false\r\n    // showEnvConfigDialog.value = true\r\n    // return\r\n    // \r\n    const result = await initializeMultipleWechat()\r\n    \r\n    if (result.success) {\r\n      updateProgress(60, '...')\r\n\r\n      updateProgress(100, '') \r\n      // \r\n      localStorage.setItem('appStarted', 'true')\r\n      \r\n      // \r\n      setTimeout(() => {\r\n        router.push({\r\n          name: 'WelcomePage',\r\n          params: {\r\n            nickname: result.instances[0]?.nickname || ''\r\n          }\r\n        })\r\n      }, 500)\r\n      \r\n    } else {\r\n      if (result.code === 'ENV_NOT_CONFIGURED') {\r\n        initializing.value = false\r\n        showEnvConfigDialog.value = true\r\n        return\r\n      }\r\n      throw new Error(result.message)\r\n    }\r\n    \r\n  } catch (error) {\r\n    progressStatus.value = 'exception'\r\n    updateProgress(100, `: ${(error as Error).message}`)\r\n    ElMessage.error(`: ${(error as Error).message}`)\r\n    // \r\n    initializing.value = false\r\n  }\r\n}\r\n\r\nconst startAutoConfig = async () => {\r\n  try {\r\n    if (autoConfigRunning.value) return\r\n    autoConfigRunning.value = true\r\n    autoConfigSteps.value = {1:'pending',2:'pending',3:'pending',4:'pending'}\r\n    const res = await autoConfigWechat41()\r\n    if (res.success) {\r\n      showEnvConfigDialog.value = false\r\n      showConfigCompleteDialog.value = true\r\n    } else {\r\n      ElMessage.error(res.message || '')\r\n    }\r\n  } catch (e) {\r\n    ElMessage.error('')\r\n  } finally {\r\n    autoConfigRunning.value = false\r\n  }\r\n}\r\n\r\nconst launchAppAfterConfig = async () => {\r\n  try {\r\n    initializing.value = true\r\n    updateProgress(20, '...')\r\n    const result = await initializeMultipleWechat()\r\n    if (result.success) {\r\n      updateProgress(100, '')\r\n      localStorage.setItem('appStarted', 'true')\r\n      showConfigCompleteDialog.value = false\r\n      setTimeout(() => {\r\n        router.push({\r\n          name: 'WelcomePage',\r\n          params: { nickname: result.instances[0]?.nickname || '' }\r\n        })\r\n      }, 500)\r\n      stopNarrator()\r\n    } else {\r\n      ElMessage.error(result.message || '')\r\n    }\r\n  } finally {\r\n    initializing.value = false\r\n  }\r\n}\r\n\r\nfunction goAgentLogin() {\r\n  if (agentName.value) {\r\n    router.push({ path: '/agent/login', query: { agent: agentName.value } })\r\n  } else {\r\n    router.push('/agent/login')\r\n  }\r\n}\r\n</script>\r\n  \r\n<style scoped>\r\n.startup-container {\r\n  height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  overflow: hidden;\r\n  background: linear-gradient(135deg, #1a1a1a 0%, #373737 100%);\r\n}\r\n.important-tip {\r\n  color: #e6a23c;\r\n  font-weight: 500;\r\n  background: rgba(230, 162, 60, 0.1);\r\n  padding: 8px 12px;\r\n  border-radius: 6px;\r\n  margin: 8px 0;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n.background-animation {\r\n  position: absolute;\r\n  top: -50%;\r\n  left: -50%;\r\n  width: 200%;\r\n  height: 200%;\r\n  background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.8) 100%),\r\n              linear-gradient(45deg, #2c3e50 0%, #3498db 100%);\r\n  animation: rotate 30s linear infinite;\r\n  z-index: 1;\r\n}\r\n\r\n@keyframes rotate {\r\n  from { transform: rotate(0deg); }\r\n  to { transform: rotate(360deg); }\r\n}\r\n\r\n.startup-card {\r\n  width: 500px;\r\n  max-width: 90%;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  backdrop-filter: blur(10px);\r\n  border: none;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\r\n  position: relative;\r\n  z-index: 2;\r\n}\r\n.multi-start-button {\r\n  background: linear-gradient(45deg, #E6A23C, #F56C6C);\r\n}\r\n\r\n.multi-start-button:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 5px 15px rgba(230, 162, 60, 0.3);\r\n}\r\n.card-header {\r\n  text-align: center;\r\n}\r\n\r\n.card-header h2 {\r\n  color: #2c3e50;\r\n  font-size: 28px;\r\n  margin: 0;\r\n  font-weight: 600;\r\n}\r\n\r\n.version {\r\n  font-size: 14px;\r\n  color: #909399;\r\n  margin-left: 8px;\r\n}\r\n\r\n.startup-content {\r\n  padding: 30px;\r\n}\r\n\r\n.instructions {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.instructions h3 {\r\n  color: #2c3e50;\r\n  font-size: 20px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.instructions ol {\r\n  padding-left: 20px;\r\n  color: #5a6a7a;\r\n  line-height: 1.8;\r\n}\r\n\r\n.startup-progress {\r\n  margin: 30px 0;\r\n}\r\n\r\n.progress-text {\r\n  margin-top: 12px;\r\n  text-align: center;\r\n  color: #409EFF;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\n.startup-actions {\r\n  text-align: center;\r\n  margin-top: 30px;\r\n}\r\n\r\n.start-button {\r\n  width: 180px;\r\n  height: 45px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  border-radius: 25px;\r\n  background: linear-gradient(45deg, #409EFF, #36D1DC);\r\n  border: none;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.start-button:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 5px 15px rgba(64, 158, 255, 0.3);\r\n}\r\n\r\n.start-button:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n:deep(.el-progress-bar__outer) {\r\n  border-radius: 4px;\r\n  background: #e9ecef;\r\n}\r\n\r\n:deep(.el-progress-bar__inner) {\r\n  border-radius: 4px;\r\n  background: linear-gradient(90deg, #409EFF, #36D1DC);\r\n  transition: width 0.3s ease;\r\n}\r\n.disclaimer {\r\n      margin-top: 20px;\r\n      padding: 15px;\r\n      border-radius: 8px;\r\n      background: rgba(64, 158, 255, 0.1);\r\n      text-align: left;\r\n    }\r\n    \r\n    .disclaimer p {\r\n      color: #409EFF;\r\n      font-weight: 600;\r\n      font-size: 14px;\r\n      margin: 0 0 8px 0;\r\n    }\r\n    \r\n    .disclaimer ul {\r\n      margin: 0;\r\n      padding-left: 20px;\r\n      list-style: none;\r\n    }\r\n    \r\n    .disclaimer li {\r\n      color: #606266;\r\n      font-size: 12px;\r\n      line-height: 1.8;\r\n      position: relative;\r\n    }\r\n    \r\n.disclaimer li::before {\r\n  content: \"\";\r\n  color: #409EFF;\r\n  position: absolute;\r\n  left: -12px;\r\n}\r\n\r\n.dialog-content {\r\n  padding: 6px 2px;\r\n}\r\n.steps-panel {\r\n  margin-top: 12px;\r\n  padding: 16px;\r\n  border-radius: 14px;\r\n  background: linear-gradient(180deg, rgba(245,247,250,0.9), rgba(245,247,250,0.86));\r\n}\r\n.step-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 10px 0;\r\n}\r\n.step-index {\r\n  width: 26px;\r\n  height: 26px;\r\n  border-radius: 50%;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 600;\r\n  color: #fff;\r\n  background: linear-gradient(180deg, #5AC8FA, #0A84FF);\r\n  box-shadow: 0 6px 18px rgba(10,132,255,0.25);\r\n}\r\n.step-text {\r\n  color: #1c1c1e;\r\n  font-size: 14px;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n  letter-spacing: 0.2px;\r\n}\r\n.step-item.done .step-text {\r\n  color: #67C23A;\r\n  font-weight: 600;\r\n}\r\n.dialog-subtitle {\r\n  color: #3a3a3c;\r\n  font-size: 14px;\r\n  line-height: 1.7;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n.dialog-summary {\r\n  color: #111;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  letter-spacing: 0.2px;\r\n}\r\n.dialog-primary {\r\n  width: 180px;\r\n  height: 40px;\r\n  border-radius: 20px;\r\n  font-weight: 600;\r\n  letter-spacing: 0.3px;\r\n  background: linear-gradient(180deg, #0A84FF, #0060DF);\r\n  box-shadow: 0 10px 24px rgba(10,132,255,0.25);\r\n}\r\n\r\n:deep(.env-dialog) {\r\n  border-radius: 18px;\r\n  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));\r\n  backdrop-filter: blur(18px);\r\n  box-shadow: 0 24px 48px rgba(0,0,0,0.18);\r\n}\r\n:deep(.complete-dialog) {\r\n  border-radius: 18px;\r\n  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));\r\n  backdrop-filter: blur(18px);\r\n  box-shadow: 0 24px 48px rgba(0,0,0,0.18);\r\n}\r\n:deep(.env-dialog .el-dialog__header),\r\n:deep(.complete-dialog .el-dialog__header) {\r\n  border: none;\r\n  padding: 18px 22px 8px 22px;\r\n}\r\n:deep(.env-dialog .el-dialog__title),\r\n:deep(.complete-dialog .el-dialog__title) {\r\n  color: #111;\r\n  font-size: 18px;\r\n  font-weight: 700;\r\n  letter-spacing: 0.3px;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n:deep(.env-dialog .el-dialog__body),\r\n:deep(.complete-dialog .el-dialog__body) {\r\n  padding: 6px 22px 18px 22px;\r\n}\r\n:deep(.env-dialog .el-dialog__footer),\r\n:deep(.complete-dialog .el-dialog__footer) {\r\n  padding: 0 22px 18px 22px;\r\n}\r\n\r\n.agent-entry-btn {\r\n  width: 180px;\r\n  height: 45px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  border-radius: 25px;\r\n  background: linear-gradient(45deg, #67C23A, #32C5E9);\r\n  border: none;\r\n  margin-left: 0;\r\n  margin-bottom: 8px;\r\n  color: #fff;\r\n}\r\n.agent-entry-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 5px 15px rgba(103, 194, 58, 0.3);\r\n}\r\n:deep(.env-dialog .dialog-header.warning) {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n:deep(.env-dialog .dialog-header .dialog-title) {\r\n  color: #E6A23C;\r\n  font-size: 18px;\r\n  font-weight: 700;\r\n  letter-spacing: 0.3px;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n}\r\n:deep(.env-dialog .dialog-header .warning-icon) {\r\n  color: #E6A23C;\r\n}\r\n</style>","import script from \"./StartupPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StartupPage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StartupPage.vue?vue&type=style&index=0&id=59b346f0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-59b346f0\"]])\n\nexport default __exports__","import { defineStore } from 'pinia'\r\nimport { getCurrentUser } from '@/api/init'\r\n\r\n// interface UserState {\r\n//   nickname: string\r\n//   account_id: string\r\n//   isLoggedIn: boolean\r\n// }\r\nexport interface UserInfo {\r\n  nickname: string\r\n  account_id: string\r\n  friendCount?: number\r\n  groupCount?: number\r\n}\r\nexport const useUserStore = defineStore('user', {\r\n  state: () => ({\r\n    userInfo: null as UserInfo | null,\r\n    isLoggedIn: false,\r\n    lastFetchTime: 0,\r\n    isFetching: false\r\n  }),\r\n  \r\n  actions: {\r\n    // async fetchUserInfo(force = false) {\r\n    //   // Promise\r\n    //   if (this.isFetching) {\r\n    //     return new Promise((resolve) => {\r\n    //       const checkInterval = setInterval(() => {\r\n    //         if (!this.isFetching) {\r\n    //           clearInterval(checkInterval)\r\n    //           resolve(this.userInfo)\r\n    //         }\r\n    //       }, 100)\r\n    //     })\r\n    //   }\r\n      \r\n    //   // 5\r\n    //   const now = Date.now()\r\n    //   if (!force && this.userInfo && (now - this.lastFetchTime < 5 * 60 * 1000)) {\r\n    //     return this.userInfo\r\n    //   }\r\n      \r\n    //   try {\r\n    //     this.isFetching = true\r\n    //     const result = await getCurrentUser()\r\n    //     if (result.success && result.data) {\r\n    //       this.setUserInfo(result.data)\r\n    //       this.lastFetchTime = now\r\n    //     }\r\n    //     this.isFetching = false\r\n    //     return this.userInfo\r\n    //   } catch (error) {\r\n    //     console.error(':', error)\r\n    //     this.isFetching = false\r\n    //     throw error\r\n    //   }\r\n    // },\r\n    async fetchUserInfo(force = false) {\r\n      // Promise\r\n      if (this.isFetching) {\r\n          return new Promise((resolve) => {\r\n              const checkInterval = setInterval(() => {\r\n                  if (!this.isFetching) {\r\n                      clearInterval(checkInterval)\r\n                      resolve(this.userInfo)\r\n                  }\r\n              }, 100)\r\n          })\r\n      }\r\n      \r\n      // 30\r\n      const now = Date.now()\r\n      if (!force && this.userInfo && (now - this.lastFetchTime < 5 * 60 * 1000)) {\r\n          return this.userInfo\r\n      }\r\n      \r\n      try {\r\n          this.isFetching = true\r\n          const result = await getCurrentUser()\r\n          if (result.success && result.data) {\r\n              this.setUserInfo(result.data)\r\n              this.lastFetchTime = now\r\n          }\r\n          this.isFetching = false\r\n          return this.userInfo\r\n      } catch (error) {\r\n          console.error(':', error)\r\n          this.isFetching = false\r\n          throw error\r\n      }\r\n  },\r\n    setUserInfo(userInfo: UserInfo) {\r\n      this.userInfo = userInfo\r\n      this.isLoggedIn = !!userInfo\r\n    },\r\n    clearUserInfo() {\r\n      this.userInfo = null\r\n      this.isLoggedIn = false\r\n      this.lastFetchTime = 0\r\n    }\r\n  }\r\n})","interface SvgConfig {\r\n    [key: string]: {\r\n      path: string\r\n      fallback?: string\r\n    }\r\n  }\r\n  \r\n  interface LoadStatus {\r\n    [key: string]: 'loading' | 'loaded' | 'error'\r\n  }\r\n  \r\n  class SvgLoader {\r\n    private static instance: SvgLoader\r\n    private loadStatus: LoadStatus = {}\r\n    private preloadedImages: Record<string, HTMLImageElement> = {}\r\n    private config: SvgConfig = {}\r\n    private globalFallback = '/icon/empty.svg'\r\n    private retryCount: Record<string, number> = {}\r\n    private maxRetries = 2\r\n  \r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    private constructor() {}\r\n  \r\n    static getInstance(): SvgLoader {\r\n      if (!SvgLoader.instance) {\r\n        SvgLoader.instance = new SvgLoader()\r\n      }\r\n      return SvgLoader.instance\r\n    }\r\n  \r\n    // SVG\r\n    registerConfig(config: SvgConfig): void {\r\n      this.config = { ...this.config, ...config }\r\n    }\r\n  \r\n    // \r\n    setGlobalFallback(path: string): void {\r\n      this.globalFallback = path\r\n    }\r\n  \r\n      // \r\n    getPath(iconName: string): string {\r\n      const iconConfig = this.config[iconName]\r\n      if (!iconConfig) {\r\n        console.warn(`: ${iconName}`)\r\n        return this.globalFallback\r\n      }\r\n\r\n      const status = this.loadStatus[iconName]\r\n      if (status === 'error') {\r\n        return iconConfig.fallback || this.globalFallback\r\n      }\r\n\r\n      return iconConfig.path\r\n    }\r\n  \r\n    // \r\n    handleLoad(event: Event): void {\r\n      const img = event.target as HTMLImageElement\r\n      const iconName = this.getIconNameFromSrc(img.src)\r\n      if (iconName) {\r\n        this.loadStatus[iconName] = 'loaded'\r\n        this.preloadedImages[iconName] = img\r\n        console.debug(`SVG: ${iconName}`)\r\n      }\r\n    }\r\n  \r\n    // \r\n    handleError(event: Event): void {\r\n      const img = event.target as HTMLImageElement\r\n      const iconName = this.getIconNameFromSrc(img.src)\r\n      \r\n      if (!iconName) return\r\n  \r\n      const currentRetries = this.retryCount[iconName] || 0\r\n      const iconConfig = this.config[iconName]\r\n      \r\n      // \r\n      if (currentRetries >= this.maxRetries) {\r\n        console.warn(`SVG: ${iconName}`)\r\n        this.loadStatus[iconName] = 'error'\r\n        return\r\n      }\r\n  \r\n      this.retryCount[iconName] = currentRetries + 1\r\n      this.loadStatus[iconName] = 'error'\r\n      \r\n      // \r\n      const fallbackPath = iconConfig?.fallback || this.globalFallback\r\n      if (img.src !== fallbackPath) {\r\n        console.warn(`SVG: ${iconName},  ( ${currentRetries + 1}/${this.maxRetries})`)\r\n        img.src = fallbackPath\r\n      }\r\n    }\r\n  \r\n    // src\r\n    private getIconNameFromSrc(src: string): string | null {\r\n      for (const [name, config] of Object.entries(this.config)) {\r\n        const fileName = config.path.split('/').pop()\r\n        if (fileName && src.endsWith(fileName)) {\r\n          return name\r\n        }\r\n      }\r\n      return null\r\n    }\r\n  \r\n    // \r\n    async preloadImages(iconNames?: string[]): Promise<void> {\r\n      const namesToLoad = iconNames || Object.keys(this.config)\r\n      \r\n      const promises = namesToLoad.map(name => {\r\n        return new Promise<void>((resolve) => {\r\n          const config = this.config[name]\r\n          if (!config) {\r\n            resolve()\r\n            return\r\n          }\r\n    \r\n          const img = new Image()\r\n          this.loadStatus[name] = 'loading'\r\n          \r\n          img.onload = () => {\r\n            this.loadStatus[name] = 'loaded'\r\n            this.preloadedImages[name] = img\r\n            console.debug(`SVG: ${name}`)\r\n            resolve()\r\n          }\r\n          \r\n          img.onerror = () => {\r\n            this.loadStatus[name] = 'error'\r\n            console.warn(`SVG: ${name}`)\r\n            resolve()\r\n          }\r\n          \r\n          // require\r\n          img.src = config.path\r\n        })\r\n      })\r\n      \r\n      await Promise.all(promises)\r\n      console.debug('SVG')\r\n    }\r\n  \r\n    // \r\n    async checkAvailability(iconName: string): Promise<boolean> {\r\n      const config = this.config[iconName]\r\n      if (!config) return false\r\n  \r\n      return new Promise((resolve) => {\r\n        const img = new Image()\r\n        img.onload = () => resolve(true)\r\n        img.onerror = () => resolve(false)\r\n        img.src = config.path\r\n      })\r\n    }\r\n  \r\n    // \r\n    getLoadStatus(iconName: string): 'loading' | 'loaded' | 'error' | 'unknown' {\r\n      return this.loadStatus[iconName] || 'unknown'\r\n    }\r\n  \r\n    // \r\n    resetRetryCount(iconName?: string): void {\r\n      if (iconName) {\r\n        delete this.retryCount[iconName]\r\n      } else {\r\n        this.retryCount = {}\r\n      }\r\n    }\r\n  }\r\n  \r\n  export default SvgLoader","import { ref } from 'vue'\r\nimport SvgLoader from '@/utils/SvgLoader'\r\n\r\nexport function useSvgLoader(config?: Record<string, { path: string; fallback?: string }>) {\r\n  const svgLoader = SvgLoader.getInstance()\r\n  const isReady = ref(false)\r\n\r\n  // \r\n  if (config) {\r\n    svgLoader.registerConfig(config)\r\n  }\r\n\r\n  // \r\n  const getIconPath = (iconName: string): string => {\r\n    return svgLoader.getPath(iconName)\r\n  }\r\n\r\n  // \r\n  const handleImageLoad = (event: Event): void => {\r\n    svgLoader.handleLoad(event)\r\n  }\r\n\r\n  // \r\n  const handleImageError = (event: Event): void => {\r\n    svgLoader.handleError(event)\r\n  }\r\n\r\n  // \r\n  const preloadImages = async (iconNames?: string[]): Promise<void> => {\r\n    await svgLoader.preloadImages(iconNames)\r\n    isReady.value = true\r\n  }\r\n\r\n  // \r\n  const checkAvailability = (iconName: string): Promise<boolean> => {\r\n    return svgLoader.checkAvailability(iconName)\r\n  }\r\n\r\n  // \r\n  const getLoadStatus = (iconName: string) => {\r\n    return svgLoader.getLoadStatus(iconName)\r\n  }\r\n\r\n  return {\r\n    isReady,\r\n    getIconPath,\r\n    handleImageLoad,\r\n    handleImageError,\r\n    preloadImages,\r\n    checkAvailability,\r\n    getLoadStatus\r\n  }\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, unref as _unref, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"multi-welcome-container\" }\nconst _hoisted_2 = { class: \"main-container\" }\nconst _hoisted_3 = { class: \"sidebar\" }\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = [\"title\"]\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = { class: \"content\" }\nconst _hoisted_8 = { class: \"header\" }\nconst _hoisted_9 = { class: \"header-content\" }\nconst _hoisted_10 = { class: \"brand-container\" }\nconst _hoisted_11 = { class: \"brand-name\" }\nconst _hoisted_12 = { class: \"version-number\" }\nconst _hoisted_13 = { class: \"welcome-container\" }\nconst _hoisted_14 = { class: \"user-name\" }\nconst _hoisted_15 = { class: \"stats-container\" }\nconst _hoisted_16 = { class: \"stat-card\" }\nconst _hoisted_17 = { class: \"stat-number\" }\nconst _hoisted_18 = { class: \"stat-card\" }\nconst _hoisted_19 = { class: \"stat-number\" }\nconst _hoisted_20 = { class: \"stat-number\" }\nconst _hoisted_21 = { class: \"stat-label\" }\nconst _hoisted_22 = {\n  key: 1,\n  class: \"copyright-info\"\n}\nconst _hoisted_23 = { class: \"copyright-text\" }\nconst _hoisted_24 = { class: \"unbind-content\" }\nconst _hoisted_25 = { class: \"machine-code-info\" }\nconst _hoisted_26 = { class: \"dialog-footer\" }\nconst _hoisted_27 = { class: \"dialog-footer\" }\nconst _hoisted_28 = { class: \"update-content\" }\nconst _hoisted_29 = { class: \"version-info\" }\nconst _hoisted_30 = { class: \"version-item\" }\nconst _hoisted_31 = { class: \"version-value latest\" }\nconst _hoisted_32 = { class: \"version-item\" }\nconst _hoisted_33 = { class: \"version-value\" }\nconst _hoisted_34 = { class: \"changelog\" }\nconst _hoisted_35 = [\"innerHTML\"]\nconst _hoisted_36 = { class: \"dialog-footer\" }\nconst _hoisted_37 = { class: \"customer-service-content\" }\nconst _hoisted_38 = {\n  key: 0,\n  class: \"qrcode-container\"\n}\nconst _hoisted_39 = [\"src\"]\nconst _hoisted_40 = { class: \"customer-service-contact\" }\nconst _hoisted_41 = {\n  key: 1,\n  class: \"text-contact-container\"\n}\nconst _hoisted_42 = { class: \"customer-service-contact\" }\nconst _hoisted_43 = { class: \"dialog-footer\" }\n\nimport { ref, onMounted, inject, computed, Ref } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { \r\n  reconnectWeChat, \r\n  checkConnectionStatus, \r\n  getLicenseInfo, \r\n  unbindLicense, \r\n  checkVersion, \r\n  downloadUpdate, \r\n  getVersionNotify, \r\n  saveVersionNotify,\r\n  getAllInstances,\r\n  switchActiveInstance,\r\n  getServerTime,\r\n  InstanceInfo\r\n} from '../api/init'\r\nimport { useUserStore, UserInfo } from '../store/user'\r\nimport { version } from '../../package.json'\r\nimport type { BrandConfig } from '@/config/brand'\r\nimport { useSvgLoader } from '@/composables/useSvgLoader'\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\r\n  name: 'MultiWelcomePage'\r\n},\n  __name: 'MultiWelcomePage',\n  setup(__props) {\n\r\nconst { getIconPath, handleImageLoad, handleImageError, preloadImages } = useSvgLoader({\r\n  refresh: {\r\n    path: '/icon/refresh.png',\r\n    fallback: '/icon/load_error.svg'\r\n  },\r\n  update: {\r\n    path: '/icon/update.svg', \r\n    fallback: '/icon/load_error.svg'\r\n  }\r\n})\r\n\r\nconst brandConfig = inject<Ref<BrandConfig>>('brandConfig', ref({\r\n  channel_id:'channel_000001',\r\n  name: 'Yoko',\r\n  ename: 'YokoAIBot',\r\n  logo: '/assets/logo.png',\r\n  contact: '473726474@qq.com',\r\n  version: '1.0.9'\r\n}))\r\n\r\n// \r\nconst instances = ref<InstanceInfo[]>([])\r\n    const activeInstanceId = ref('')\r\nconst currentInstance = computed(() => {\r\n  return instances.value.find(inst => inst.instance_id === activeInstanceId.value)\r\n})\r\n\r\n// \r\n// const nickname = computed(() => currentInstance.value?.nickname || '')\r\nconst friendCount = ref(0)\r\nconst groupCount = ref(0)\r\nconst isConnected = ref(true)\r\nconst reconnecting = ref(false)\r\nconst onlineStatus = computed(() => isConnected.value ? '' : '')\r\nconst userStore = useUserStore()\r\n\r\n// \r\nconst unbindDialogVisible = ref(false)\r\nconst confirmDialogVisible = ref(false)\r\nconst machineCode = ref('')\r\nconst activationCode = ref('')\r\n\r\n// \r\nconst updateDialogVisible = ref(false)\r\nconst updateInfo = ref({\r\n  needs_update: false,\r\n  latest_version: '',\r\n  download_url: '',\r\n  changelog: '',\r\n  is_mandatory: false,\r\n  release_date: ''\r\n})\r\nconst updating = ref(false)\r\nconst updateProgress = ref(0)\r\nconst updateChecked = ref(false)\r\n\r\n// \r\nconst customerServiceDialogVisible = ref(false)\r\n// \r\nconst handleQrcodeError = () => {\r\n  ElMessage.error('')\r\n}\r\n\r\n// \r\nconst saveQrcode = async () => {\r\n  if (!brandConfig.value.qrcodeUrl) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    // \r\n    const link = document.createElement('a')\r\n    link.href = brandConfig.value.qrcodeUrl\r\n    link.download = `${brandConfig.value.name}_.png`\r\n    document.body.appendChild(link)\r\n    link.click()\r\n    document.body.removeChild(link)\r\n    \r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst showCustomerServiceDialog = () => {\r\n  customerServiceDialogVisible.value = true\r\n}\r\n// \r\nconst copyContactInfo = () => {\r\n  if (brandConfig.value.contact) {\r\n    navigator.clipboard.writeText(brandConfig.value.contact)\r\n      .then(() => {\r\n        ElMessage.success('')\r\n      })\r\n      .catch(err => {\r\n        console.error(':', err)\r\n        ElMessage.error('')\r\n      })\r\n  } else {\r\n    ElMessage.warning('')\r\n  }\r\n}\r\n// \r\nconst showUnbindDialog = async () => {\r\n  try {\r\n    const result = await getLicenseInfo()\r\n    if (result.success) {\r\n      machineCode.value = result.data.machine_code\r\n      unbindDialogVisible.value = true\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst executeUnbind = async () => {\r\n  try {\r\n    const result = await unbindLicense(activationCode.value)\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n      // \r\n    } else {\r\n      ElMessage.error(result.message || '')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('')\r\n  } finally {\r\n    confirmDialogVisible.value = false\r\n    unbindDialogVisible.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst checkStatus = async () => {\r\n  try {\r\n    const data = await checkConnectionStatus()\r\n    isConnected.value = data.connected\r\n    if (!data.connected) {\r\n      ElMessage.warning(`: ${data.reason}`)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    isConnected.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst handleReconnect = async () => {\r\n  try {\r\n    reconnecting.value = true\r\n    const result = await reconnectWeChat(activeInstanceId.value)\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n      isConnected.value = true\r\n      // \r\n      if (result.user_info) {\r\n        userStore.setUserInfo(result.user_info)\r\n      }\r\n      // \r\n      await loadInstances()\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(': ' + error)\r\n  } finally {\r\n    reconnecting.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst handleSwitchInstance = async (instance: InstanceInfo) => {\r\n  try {\r\n    if (instance.is_active) {\r\n      return // \r\n    }\r\n    const result = await switchActiveInstance(instance.instance_id)\r\n    console.debug(':', result)\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n      activeInstanceId.value = instance.instance_id\r\n      \r\n      // \r\n      await loadInstances()\r\n      \r\n      // instance\r\n      if (result.instance) {\r\n        friendCount.value = result.instance.friend_count || 0\r\n        groupCount.value = result.instance.group_count || 0\r\n        userStore.setUserInfo({\r\n          nickname: result.instance.nickname,\r\n          account_id: result.instance.account_id,\r\n          friendCount: result.instance.friend_count,\r\n          groupCount: result.instance.group_count\r\n        })\r\n        // \r\n        userStore.$state.lastFetchTime = Date.now()\r\n      }\r\n      \r\n      // \r\n      await checkStatus()\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst loadInstances = async () => {\r\n  try {\r\n    const result = await getAllInstances();\r\n    console.debug(':', result);\r\n    if (result.success) {\r\n      instances.value = result.instances.map((inst: InstanceInfo) => ({\r\n        ...inst,\r\n        //  account_info ID\r\n        nickname: inst.nickname || (inst.account_info?.nickname) || '',\r\n        account_id: inst.account_id || (inst.account_info?.account_id) || '',\r\n        is_connected: true // \r\n      }));\r\n      \r\n      // \r\n      const activeInstance = instances.value.find(inst => inst.is_active);\r\n      if (activeInstance) {\r\n        activeInstanceId.value = activeInstance.instance_id;\r\n      }\r\n    } else {\r\n      ElMessage.error(result.error || '');\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n}\r\n\r\n// \r\nconst initializeMultiInstances = async () => {\r\n  try {\r\n    const result = await getAllInstances();\r\n    console.debug(':', result);\r\n    if (result.success) {\r\n      instances.value = result.instances.map((inst: InstanceInfo) => ({\r\n        ...inst,\r\n        //  account_info ID\r\n        nickname: inst.nickname || (inst.account_info?.nickname) || '',\r\n        account_id: inst.account_id || (inst.account_info?.account_id) || '',\r\n        is_connected: true\r\n      }));\r\n      \r\n      // \r\n      if (result.instances.length > 0) {\r\n        const activeInstance = result.instances.find((inst: InstanceInfo) => inst.is_active) || result.instances[0];\r\n        activeInstanceId.value = activeInstance.instance_id;\r\n        \r\n        // \r\n        // const nickname = activeInstance.nickname || (activeInstance.account_info?.nickname) || '';\r\n        // const account_id = activeInstance.account_id || (activeInstance.account_info?.account_id) || '';\r\n        \r\n        // if (nickname) {\r\n        //   userStore.setUserInfo({\r\n        //     nickname: nickname,\r\n        //     account_id: account_id\r\n        //   });\r\n        // }\r\n      }\r\n      \r\n      return true;\r\n    } else {\r\n      ElMessage.error(result.message || '');\r\n      return false;\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n    return false;\r\n  }\r\n}\r\n\r\n// \r\nconst manualCheckUpdate = async () => {\r\n  try {\r\n    // ID\r\n    const agentId = brandConfig.value.channel_id || 'default'\r\n    const result = await checkVersion(version, agentId)\r\n    \r\n    if (result.success) {\r\n      if (result.data.needs_update) {\r\n        updateInfo.value = result.data\r\n        updateDialogVisible.value = true\r\n      } else {\r\n        ElMessage.success('')\r\n      }\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst formatChangelog = (changelog: string) => {\r\n  if (!changelog) return ''\r\n  return changelog.replace(/\\n/g, '<br>')\r\n}\r\n\r\n// \r\nconst formatDate = (dateStr: string) => {\r\n  if (!dateStr) return ''\r\n  const date = new Date(dateStr)\r\n  return date.toLocaleDateString('zh-CN')\r\n}\r\n\r\n// \r\nconst progressFormat = (percentage: number) => {\r\n  return percentage === 100 ? '' : `${percentage}%`\r\n}\r\n\r\n// \r\nconst startUpdate = async () => {\r\n  try {\r\n    updating.value = true\r\n    updateProgress.value = 0\r\n    \r\n    // \r\n    const progressInterval = setInterval(() => {\r\n      if (updateProgress.value < 90) {\r\n        updateProgress.value += 10\r\n      }\r\n    }, 500)\r\n    \r\n    // ID\r\n    const agentId = brandConfig.value.channel_id || 'default'\r\n    \r\n    // API\r\n    const timeoutPromise = new Promise((_, reject) => {\r\n      setTimeout(() => reject(new Error('timeout')), 60000)\r\n    })\r\n    const result = await Promise.race([downloadUpdate(version, agentId), timeoutPromise])\r\n    \r\n    clearInterval(progressInterval)\r\n    \r\n    if ((result as any).success) {\r\n      updateProgress.value = 100\r\n      const logFile = (result as any).log_file\r\n      ElMessage.success(`${logFile ? ''+ logFile +'' : ''}`)\r\n      setTimeout(() => {\r\n        if (updating.value) {\r\n          ElMessage.warning('')\r\n          updating.value = false\r\n        }\r\n      }, 20000)\r\n    } else {\r\n      const err = (result as any).error || ''\r\n      const logFile = (result as any).log_file\r\n      if (err === 'invalid_update_package' || /zip/i.test(err)) {\r\n        ElMessage.error(`${logFile ? ''+ logFile +'' : ''}`)\r\n      } else if (err === 'permission_denied') {\r\n        ElMessage.error(`${logFile ? ''+ logFile +'' : ''}`)\r\n      } else {\r\n        ElMessage.error(((result as any).error || '') + (logFile ? ''+ logFile +'' : ''))\r\n      }\r\n      updating.value = false\r\n    }\r\n  } catch (error) {\r\n    if ((error as Error)?.message === 'timeout') {\r\n      ElMessage.error('')\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n    updating.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst checkForUpdates = async () => {\r\n  if (updateChecked.value) return\r\n  \r\n  try {\r\n    // ID\r\n    const agentId = brandConfig.value.channel_id || 'default'\r\n    const result = await checkVersion(version, agentId)\r\n    \r\n    if (result.success && result.data.needs_update) {\r\n      updateInfo.value = result.data\r\n      \r\n      // \r\n      if (result.data.is_mandatory) {\r\n        // \r\n        updateDialogVisible.value = true\r\n      } else {\r\n        // \r\n        const notifyResult = await getVersionNotify()\r\n        if (notifyResult.success) {\r\n          const notifiedVersions = notifyResult.data.notified_versions || []\r\n          if (!notifiedVersions.includes(result.data.latest_version)) {\r\n            // \r\n            updateDialogVisible.value = true\r\n            // \r\n            notifiedVersions.push(result.data.latest_version)\r\n            await saveVersionNotify({ notified_versions: notifiedVersions })\r\n          }\r\n        } else {\r\n          // \r\n          updateDialogVisible.value = true\r\n        }\r\n      }\r\n    }\r\n    updateChecked.value = true\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst fetchUserInfo = async () => {\r\n  try {\r\n    // ID\r\n    const activeInstance = instances.value.find(inst => inst.is_active);\r\n    const currentAccountId = activeInstance?.account_id || '';\r\n    \r\n    // ID\r\n    const cachedAccountId = userStore.userInfo?.account_id || '';\r\n    const forceRefresh = currentAccountId !== '' && cachedAccountId !== '' && currentAccountId !== cachedAccountId;\r\n    \r\n    if (forceRefresh) {\r\n      console.debug('');\r\n    }\r\n    \r\n    // storeID\r\n    const userInfo = await userStore.fetchUserInfo(forceRefresh);\r\n    console.debug(':', userInfo);\r\n    if (userInfo) {\r\n      friendCount.value = (userInfo as UserInfo).friendCount || 0;\r\n      groupCount.value = (userInfo as UserInfo).groupCount || 0;\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n  }\r\n}\r\nconst isRefreshing = ref(false)\r\n// \r\nconst refreshInstances = async () => {\r\n  // \r\n  if (isRefreshing.value) {\r\n    return\r\n  }\r\n  \r\n  try {\r\n    isRefreshing.value = true\r\n    ElMessage.info('...')\r\n    \r\n    //  onMounted \r\n    // \r\n    const initSuccess = await initializeMultiInstances()\r\n    \r\n    if (initSuccess) {\r\n      // \r\n      await fetchUserInfo()\r\n      \r\n      // \r\n      await checkStatus()\r\n    }\r\n    \r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    isRefreshing.value = false\r\n  }\r\n}\r\nonMounted(async () => {\r\n  try {\r\n    console.time('-')\r\n    // \r\n    const initSuccess = await initializeMultiInstances()\r\n    // SVG\r\n    await preloadImages(['refresh', 'update'])\r\n    if (initSuccess) {\r\n      // \r\n      await fetchUserInfo()\r\n      \r\n      // \r\n      await checkStatus()\r\n      \r\n      // \r\n      await checkForUpdates()\r\n    }\r\n    try {\r\n      const res = await getServerTime()\r\n      const iso = (res && res.success) ? (res.authority_time || res.server_time) : null\r\n      if (iso) {\r\n        const serverMs = new Date(iso).getTime()\r\n        const localMs = Date.now()\r\n        const diff = Math.abs(localMs - serverMs)\r\n        timeSkewSeconds.value = Math.round(diff / 1000)\r\n        showTimeWarning.value = diff > 60000\r\n      }\r\n    } catch (e) {}\r\n    \r\n    console.timeEnd('-')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n})\r\n\r\n\r\n\r\nconst showTimeWarning = ref(false)\r\nconst timeSkewSeconds = ref(0)\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n  const _component_el_progress = _resolveComponent(\"el-progress\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"background-animation\" }, null, -1)),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"sidebar-title\" }, \"\", -1)),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(instances.value, (instance) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: instance.instance_id,\n              class: _normalizeClass([\"account-item\", { 'active': instance.instance_id === activeInstanceId.value }]),\n              onClick: ($event: any) => (handleSwitchInstance(instance))\n            }, [\n              _createElementVNode(\"span\", null, _toDisplayString(instance.nickname?.substring(0, 2) || ''), 1),\n              _createElementVNode(\"div\", {\n                class: _normalizeClass([\"status-indicator\", { 'offline': !instance.is_connected }])\n              }, null, 2)\n            ], 10, _hoisted_4))\n          }), 128)),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"refresh-button\", {'refreshing': isRefreshing.value}]),\n            onClick: refreshInstances,\n            title: isRefreshing.value ? '...' : ''\n          }, [\n            _createElementVNode(\"img\", {\n              src: _unref(getIconPath)('refresh'),\n              alt: \"\",\n              class: \"refresh-icon\",\n              onError: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_unref(handleImageError) && _unref(handleImageError)(...args))),\n              onLoad: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_unref(handleImageLoad) && _unref(handleImageLoad)(...args)))\n            }, null, 40, _hoisted_6)\n          ], 10, _hoisted_5)\n        ]),\n        _createElementVNode(\"div\", _hoisted_7, [\n          _createElementVNode(\"div\", _hoisted_8, [\n            _createElementVNode(\"div\", _hoisted_9, [\n              _createElementVNode(\"div\", _hoisted_10, [\n                _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_unref(brandConfig).alias || _unref(brandConfig).ename), 1),\n                _createElementVNode(\"span\", _hoisted_12, \"v\" + _toDisplayString(_unref(version)), 1)\n              ]),\n              _createElementVNode(\"div\", _hoisted_13, [\n                _cache[12] || (_cache[12] = _createElementVNode(\"span\", { class: \"welcome-text\" }, \"\", -1)),\n                _createElementVNode(\"span\", _hoisted_14, _toDisplayString(currentInstance.value?.nickname || ''), 1)\n              ])\n            ])\n          ]),\n          (showTimeWarning.value)\n            ? (_openBlock(), _createBlock(_component_el_alert, {\n                key: 0,\n                type: \"warning\",\n                \"show-icon\": \"\",\n                class: \"time-warning-banner\"\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"span\", null, \" \" + _toDisplayString(timeSkewSeconds.value) + \" \", 1)\n                ]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true),\n          _createElementVNode(\"div\", _hoisted_15, [\n            _createElementVNode(\"div\", _hoisted_16, [\n              _createElementVNode(\"span\", _hoisted_17, _toDisplayString(friendCount.value), 1),\n              _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"stat-label\" }, \"\", -1))\n            ]),\n            _createElementVNode(\"div\", _hoisted_18, [\n              _createElementVNode(\"span\", _hoisted_19, _toDisplayString(groupCount.value), 1),\n              _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"stat-label\" }, \"\", -1))\n            ]),\n            _createElementVNode(\"div\", {\n              class: _normalizeClass([\"stat-card\", { 'online': isConnected.value }])\n            }, [\n              _createElementVNode(\"span\", _hoisted_20, _toDisplayString(onlineStatus.value), 1),\n              _createElementVNode(\"span\", _hoisted_21, [\n                _createTextVNode(_toDisplayString(isConnected.value ? '' : '') + \" \", 1),\n                (!isConnected.value)\n                  ? (_openBlock(), _createBlock(_component_el_button, {\n                      key: 0,\n                      type: \"info\",\n                      size: \"small\",\n                      onClick: handleReconnect,\n                      loading: reconnecting.value\n                    }, {\n                      default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n                        _createTextVNode(\"  \", -1)\n                      ]))]),\n                      _: 1\n                    }, 8, [\"loading\"]))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ], 2)\n          ]),\n          _cache[19] || (_cache[19] = _createStaticVNode(\"<div class=\\\"features-container\\\" data-v-778ff1ea><div class=\\\"features-grid\\\" data-v-778ff1ea><div class=\\\"feature-card\\\" data-v-778ff1ea><div class=\\\"feature-icon\\\" data-v-778ff1ea></div><div class=\\\"feature-title\\\" data-v-778ff1ea></div><div class=\\\"feature-desc\\\" data-v-778ff1ea>RPA</div></div><div class=\\\"feature-card\\\" data-v-778ff1ea><div class=\\\"feature-icon\\\" data-v-778ff1ea></div><div class=\\\"feature-title\\\" data-v-778ff1ea>AI</div><div class=\\\"feature-desc\\\" data-v-778ff1ea>7*24</div></div><div class=\\\"feature-card\\\" data-v-778ff1ea><div class=\\\"feature-icon\\\" data-v-778ff1ea></div><div class=\\\"feature-title\\\" data-v-778ff1ea></div><div class=\\\"feature-desc\\\" data-v-778ff1ea></div></div><div class=\\\"feature-card\\\" data-v-778ff1ea><div class=\\\"feature-icon\\\" data-v-778ff1ea></div><div class=\\\"feature-title\\\" data-v-778ff1ea>AI</div><div class=\\\"feature-desc\\\" data-v-778ff1ea>AI</div></div></div></div>\", 1)),\n          _createElementVNode(\"div\", { class: \"action-buttons\" }, [\n            _createElementVNode(\"button\", {\n              class: \"btn btn-primary\",\n              onClick: showCustomerServiceDialog\n            }, [...(_cache[16] || (_cache[16] = [\n              _createElementVNode(\"span\", null, \"\", -1),\n              _createTextVNode(\"  \", -1)\n            ]))]),\n            _createElementVNode(\"button\", {\n              class: \"btn btn-secondary\",\n              onClick: showUnbindDialog\n            }, [...(_cache[17] || (_cache[17] = [\n              _createElementVNode(\"span\", null, \"\", -1),\n              _createTextVNode(\"  \", -1)\n            ]))]),\n            _createElementVNode(\"button\", {\n              class: \"btn btn-outline\",\n              onClick: manualCheckUpdate\n            }, [...(_cache[18] || (_cache[18] = [\n              _createElementVNode(\"span\", null, \"\", -1),\n              _createTextVNode(\"  \", -1)\n            ]))])\n          ]),\n          (_unref(brandConfig).copyright)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                _createElementVNode(\"span\", _hoisted_23, _toDisplayString(_unref(brandConfig).copyright), 1)\n              ]))\n            : _createCommentVNode(\"\", true)\n        ])\n      ])\n    ]),\n    _createVNode(_component_el_dialog, {\n      modelValue: unbindDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((unbindDialogVisible).value = $event)),\n      title: \"\",\n      width: \"400px\",\n      class: \"unbind-dialog\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_26, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[3] || (_cache[3] = ($event: any) => (unbindDialogVisible.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[21] || (_cache[21] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"danger\",\n            onClick: executeUnbind\n          }, {\n            default: _withCtx(() => [...(_cache[22] || (_cache[22] = [\n              _createTextVNode(\"  \", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_24, [\n          _createElementVNode(\"p\", _hoisted_25, \" \" + _toDisplayString(machineCode.value), 1),\n          _createVNode(_component_el_form, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_form_item, { label: \"\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_input, {\n                    modelValue: activationCode.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((activationCode).value = $event)),\n                    placeholder: \"\",\n                    maxlength: 54\n                  }, null, 8, [\"modelValue\"])\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: confirmDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((confirmDialogVisible).value = $event)),\n      title: \"\",\n      width: \"300px\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_27, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[5] || (_cache[5] = ($event: any) => (confirmDialogVisible.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[23] || (_cache[23] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"danger\",\n            onClick: executeUnbind\n          }, {\n            default: _withCtx(() => [...(_cache[24] || (_cache[24] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      default: _withCtx(() => [\n        _cache[25] || (_cache[25] = _createElementVNode(\"p\", null, \"\", -1))\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: updateDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((updateDialogVisible).value = $event)),\n      title: updateInfo.value.is_mandatory ? '' : '',\n      width: \"450px\",\n      \"close-on-click-modal\": !updateInfo.value.is_mandatory,\n      \"close-on-press-escape\": !updateInfo.value.is_mandatory,\n      \"show-close\": !updateInfo.value.is_mandatory,\n      class: \"update-dialog\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_36, [\n          (!updateInfo.value.is_mandatory)\n            ? (_openBlock(), _createBlock(_component_el_button, {\n                key: 0,\n                onClick: _cache[7] || (_cache[7] = ($event: any) => (updateDialogVisible.value = false))\n              }, {\n                default: _withCtx(() => [...(_cache[30] || (_cache[30] = [\n                  _createTextVNode(\"\", -1)\n                ]))]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: startUpdate,\n            loading: updating.value,\n            disabled: updating.value\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(_toDisplayString(updating.value ? '' : ''), 1)\n            ]),\n            _: 1\n          }, 8, [\"loading\", \"disabled\"])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_28, [\n          _cache[29] || (_cache[29] = _createElementVNode(\"div\", { class: \"update-header\" }, [\n            _createElementVNode(\"img\", {\n              src: \"/icon/update.svg\",\n              alt: \"\",\n              class: \"update-icon\"\n            }),\n            _createElementVNode(\"div\", { class: \"update-title\" }, [\n              _createElementVNode(\"h3\", null, \"\"),\n              _createElementVNode(\"p\", { class: \"update-subtitle\" }, \"\")\n            ])\n          ], -1)),\n          _createElementVNode(\"div\", _hoisted_29, [\n            _createElementVNode(\"div\", _hoisted_30, [\n              _cache[26] || (_cache[26] = _createElementVNode(\"span\", { class: \"version-label\" }, \":\", -1)),\n              _createElementVNode(\"span\", _hoisted_31, \"v\" + _toDisplayString(updateInfo.value.latest_version), 1)\n            ]),\n            _createElementVNode(\"div\", _hoisted_32, [\n              _cache[27] || (_cache[27] = _createElementVNode(\"span\", { class: \"version-label\" }, \":\", -1)),\n              _createElementVNode(\"span\", _hoisted_33, _toDisplayString(formatDate(updateInfo.value.release_date)), 1)\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_34, [\n            _cache[28] || (_cache[28] = _createElementVNode(\"h4\", null, \":\", -1)),\n            _createElementVNode(\"div\", {\n              class: \"changelog-content\",\n              innerHTML: formatChangelog(updateInfo.value.changelog)\n            }, null, 8, _hoisted_35)\n          ]),\n          (updating.value)\n            ? (_openBlock(), _createBlock(_component_el_progress, {\n                key: 0,\n                percentage: updateProgress.value,\n                format: progressFormat,\n                \"stroke-width\": 10,\n                class: \"update-progress\"\n              }, null, 8, [\"percentage\"]))\n            : _createCommentVNode(\"\", true)\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\", \"title\", \"close-on-click-modal\", \"close-on-press-escape\", \"show-close\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: customerServiceDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((customerServiceDialogVisible).value = $event)),\n      title: \"\",\n      width: \"400px\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_43, [\n          (_unref(brandConfig).contactType !== 'qrcode')\n            ? (_openBlock(), _createBlock(_component_el_button, {\n                key: 0,\n                type: \"primary\",\n                onClick: copyContactInfo\n              }, {\n                default: _withCtx(() => [...(_cache[32] || (_cache[32] = [\n                  _createTextVNode(\"\", -1)\n                ]))]),\n                _: 1\n              }))\n            : (_openBlock(), _createBlock(_component_el_button, {\n                key: 1,\n                type: \"primary\",\n                onClick: saveQrcode\n              }, {\n                default: _withCtx(() => [...(_cache[33] || (_cache[33] = [\n                  _createTextVNode(\"\", -1)\n                ]))]),\n                _: 1\n              })),\n          _createVNode(_component_el_button, {\n            onClick: _cache[9] || (_cache[9] = ($event: any) => (customerServiceDialogVisible.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[34] || (_cache[34] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_37, [\n          (_unref(brandConfig).contactType === 'qrcode' && _unref(brandConfig).qrcodeUrl)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_38, [\n                _createElementVNode(\"img\", {\n                  src: _unref(brandConfig).qrcodeUrl,\n                  alt: \"\",\n                  class: \"customer-qrcode\",\n                  onError: handleQrcodeError\n                }, null, 40, _hoisted_39),\n                _createElementVNode(\"p\", _hoisted_40, _toDisplayString(_unref(brandConfig).contact), 1)\n              ]))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                _cache[31] || (_cache[31] = _createElementVNode(\"div\", { class: \"contact-icon\" }, [\n                  _createElementVNode(\"span\", { style: {\"font-size\":\"100px\"} }, \"\")\n                ], -1)),\n                _createElementVNode(\"p\", _hoisted_42, \"\" + _toDisplayString(_unref(brandConfig).contact), 1)\n              ]))\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n    <div class=\"multi-welcome-container\">\r\n      <div class=\"background-animation\"></div>\r\n      \r\n      <div class=\"main-container\">\r\n        <!--  -->\r\n        <div class=\"sidebar\">\r\n          <div class=\"sidebar-title\"></div>\r\n          <div \r\n            v-for=\"instance in instances\" \r\n            :key=\"instance.instance_id\" \r\n            class=\"account-item\"\r\n            :class=\"{ 'active': instance.instance_id === activeInstanceId }\"\r\n            @click=\"handleSwitchInstance(instance)\"\r\n          >\r\n            <span>{{ instance.nickname?.substring(0, 2) || '' }}</span>\r\n            <div \r\n              class=\"status-indicator\" \r\n              :class=\"{ 'offline': !instance.is_connected }\"\r\n            ></div>\r\n          </div>\r\n          <!--  -->\r\n          <div class=\"refresh-button\" @click=\"refreshInstances\" :class=\"{'refreshing': isRefreshing}\" :title=\"isRefreshing ? '...' : ''\">\r\n            <img \r\n              :src=\"getIconPath('refresh')\" \r\n              alt=\"\" \r\n              class=\"refresh-icon\" \r\n              @error=\"handleImageError\"\r\n              @load=\"handleImageLoad\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"content\">\r\n          <div class=\"header\">\r\n            <div class=\"header-content\">\r\n              <!--  -->\r\n              <div class=\"brand-container\">\r\n                <span class=\"brand-name\">{{ brandConfig.alias || brandConfig.ename }}</span>\r\n                <span class=\"version-number\">v{{ version }}</span>\r\n              </div>\r\n              <!--  -->\r\n              <div class=\"welcome-container\">\r\n                <span class=\"welcome-text\"></span>\r\n                <span class=\"user-name\">{{ currentInstance?.nickname || '' }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <el-alert\r\n            v-if=\"showTimeWarning\"\r\n            type=\"warning\"\r\n            show-icon\r\n            class=\"time-warning-banner\"\r\n          >\r\n            <span> {{ timeSkewSeconds }} </span>\r\n          </el-alert>\r\n\r\n          <!--  -->\r\n          <div class=\"stats-container\">\r\n            <div class=\"stat-card\">\r\n              <span class=\"stat-number\">{{ friendCount }}</span>\r\n              <span class=\"stat-label\"></span>\r\n            </div>\r\n            <div class=\"stat-card\">\r\n              <span class=\"stat-number\">{{ groupCount }}</span>\r\n              <span class=\"stat-label\"></span>\r\n            </div>\r\n            <div class=\"stat-card\" :class=\"{ 'online': isConnected }\">\r\n              <span class=\"stat-number\">{{ onlineStatus }}</span>\r\n              <span class=\"stat-label\">\r\n                {{ isConnected ? '' : '' }}\r\n                <el-button \r\n                  v-if=\"!isConnected\"\r\n                  type=\"info\"\r\n                  size=\"small\" \r\n                  @click=\"handleReconnect\"\r\n                  :loading=\"reconnecting\"\r\n                >\r\n                  \r\n                </el-button>\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"features-container\">\r\n            <div class=\"features-grid\">\r\n              <div class=\"feature-card\">\r\n                <div class=\"feature-icon\"></div>\r\n                <div class=\"feature-title\"></div>\r\n                <div class=\"feature-desc\">RPA</div>\r\n              </div>\r\n              <div class=\"feature-card\">\r\n                <div class=\"feature-icon\"></div>\r\n                <div class=\"feature-title\">AI</div>\r\n                <div class=\"feature-desc\">7*24</div>\r\n              </div>\r\n              <div class=\"feature-card\">\r\n                <div class=\"feature-icon\"></div>\r\n                <div class=\"feature-title\"></div>\r\n                <div class=\"feature-desc\"></div>\r\n              </div>\r\n              <div class=\"feature-card\">\r\n                <div class=\"feature-icon\"></div>\r\n                <div class=\"feature-title\">AI</div>\r\n                <div class=\"feature-desc\">AI</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"action-buttons\">\r\n            <button class=\"btn btn-primary\" @click=\"showCustomerServiceDialog\">\r\n              <span></span>\r\n              \r\n            </button>\r\n            <button class=\"btn btn-secondary\" @click=\"showUnbindDialog\">\r\n              <span></span>\r\n              \r\n            </button>\r\n            <button class=\"btn btn-outline\" @click=\"manualCheckUpdate\">\r\n              <span></span>\r\n              \r\n            </button>\r\n          </div>\r\n\r\n          <!--  - copyright -->\r\n          <div v-if=\"brandConfig.copyright\" class=\"copyright-info\">\r\n            <span class=\"copyright-text\">{{ brandConfig.copyright }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"unbindDialogVisible\"\r\n      title=\"\"\r\n      width=\"400px\"\r\n      class=\"unbind-dialog\"\r\n    >\r\n      <div class=\"unbind-content\">\r\n        <p class=\"machine-code-info\">  {{ machineCode }}</p>\r\n        <el-form>\r\n          <el-form-item label=\"\">\r\n            <el-input \r\n              v-model=\"activationCode\" \r\n              placeholder=\"\"\r\n              :maxlength=\"54\"\r\n            ></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"unbindDialogVisible = false\"></el-button>\r\n          <el-button \r\n            type=\"danger\" \r\n            @click=\"executeUnbind\"\r\n          >\r\n            \r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"confirmDialogVisible\"\r\n      title=\"\"\r\n      width=\"300px\"\r\n    >\r\n      <p></p>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"confirmDialogVisible = false\"></el-button>\r\n          <el-button type=\"danger\" @click=\"executeUnbind\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"updateDialogVisible\"\r\n      :title=\"updateInfo.is_mandatory ? '' : ''\"\r\n      width=\"450px\"\r\n      :close-on-click-modal=\"!updateInfo.is_mandatory\"\r\n      :close-on-press-escape=\"!updateInfo.is_mandatory\"\r\n      :show-close=\"!updateInfo.is_mandatory\"\r\n      class=\"update-dialog\"\r\n    >\r\n      <div class=\"update-content\">\r\n        <div class=\"update-header\">\r\n          <img src=\"/icon/update.svg\" alt=\"\" class=\"update-icon\" />\r\n          <div class=\"update-title\">\r\n            <h3></h3>\r\n            <p class=\"update-subtitle\"></p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"version-info\">\r\n          <div class=\"version-item\">\r\n            <span class=\"version-label\">:</span>\r\n            <span class=\"version-value latest\">v{{ updateInfo.latest_version }}</span>\r\n          </div>\r\n          <div class=\"version-item\">\r\n            <span class=\"version-label\">:</span>\r\n            <span class=\"version-value\">{{ formatDate(updateInfo.release_date) }}</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"changelog\">\r\n          <h4>:</h4>\r\n          <div class=\"changelog-content\" v-html=\"formatChangelog(updateInfo.changelog)\"></div>\r\n        </div>\r\n        \r\n        <el-progress \r\n          v-if=\"updating\" \r\n          :percentage=\"updateProgress\" \r\n          :format=\"progressFormat\"\r\n          :stroke-width=\"10\"\r\n          class=\"update-progress\"\r\n        ></el-progress>\r\n      </div>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button \r\n            v-if=\"!updateInfo.is_mandatory\" \r\n            @click=\"updateDialogVisible = false\"\r\n          ></el-button>\r\n          <el-button \r\n            type=\"primary\" \r\n            @click=\"startUpdate\"\r\n            :loading=\"updating\"\r\n            :disabled=\"updating\"\r\n          >{{ updating ? '' : '' }}</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"customerServiceDialogVisible\"\r\n      title=\"\"\r\n      width=\"400px\"\r\n    >\r\n    <div class=\"customer-service-content\">\r\n      <!--  -->\r\n      <div v-if=\"brandConfig.contactType === 'qrcode' && brandConfig.qrcodeUrl\" \r\n          class=\"qrcode-container\">\r\n        <img \r\n          :src=\"brandConfig.qrcodeUrl\" \r\n          alt=\"\"\r\n          class=\"customer-qrcode\"\r\n          @error=\"handleQrcodeError\"\r\n        />\r\n        <p class=\"customer-service-contact\">{{ brandConfig.contact }}</p>\r\n      </div>\r\n      \r\n      <!--  -->\r\n      <div v-else class=\"text-contact-container\">\r\n        <div class=\"contact-icon\">\r\n          <span style=\"font-size: 100px;\"></span>\r\n        </div>\r\n        <p class=\"customer-service-contact\">{{ brandConfig.contact }}</p>\r\n      </div>\r\n    </div>\r\n    <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <!--  -->\r\n          <el-button v-if=\"brandConfig.contactType !== 'qrcode'\" \r\n                    type=\"primary\" \r\n                    @click=\"copyContactInfo\"></el-button>\r\n          <el-button v-else \r\n                    type=\"primary\" \r\n                    @click=\"saveQrcode\"></el-button>\r\n          <el-button @click=\"customerServiceDialogVisible = false\"></el-button>\r\n        </span>\r\n    </template>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, inject, computed, Ref } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { \r\n  reconnectWeChat, \r\n  checkConnectionStatus, \r\n  getLicenseInfo, \r\n  unbindLicense, \r\n  checkVersion, \r\n  downloadUpdate, \r\n  getVersionNotify, \r\n  saveVersionNotify,\r\n  getAllInstances,\r\n  switchActiveInstance,\r\n  getServerTime,\r\n  InstanceInfo\r\n} from '../api/init'\r\nimport { useUserStore, UserInfo } from '../store/user'\r\nimport { version } from '../../package.json'\r\nimport type { BrandConfig } from '@/config/brand'\r\nimport { useSvgLoader } from '@/composables/useSvgLoader'\r\n\r\nconst { getIconPath, handleImageLoad, handleImageError, preloadImages } = useSvgLoader({\r\n  refresh: {\r\n    path: '/icon/refresh.png',\r\n    fallback: '/icon/load_error.svg'\r\n  },\r\n  update: {\r\n    path: '/icon/update.svg', \r\n    fallback: '/icon/load_error.svg'\r\n  }\r\n})\r\n\r\nconst brandConfig = inject<Ref<BrandConfig>>('brandConfig', ref({\r\n  channel_id:'channel_000001',\r\n  name: 'Yoko',\r\n  ename: 'YokoAIBot',\r\n  logo: '/assets/logo.png',\r\n  contact: '473726474@qq.com',\r\n  version: '1.0.9'\r\n}))\r\n\r\n// \r\nconst instances = ref<InstanceInfo[]>([])\r\n    const activeInstanceId = ref('')\r\nconst currentInstance = computed(() => {\r\n  return instances.value.find(inst => inst.instance_id === activeInstanceId.value)\r\n})\r\n\r\n// \r\n// const nickname = computed(() => currentInstance.value?.nickname || '')\r\nconst friendCount = ref(0)\r\nconst groupCount = ref(0)\r\nconst isConnected = ref(true)\r\nconst reconnecting = ref(false)\r\nconst onlineStatus = computed(() => isConnected.value ? '' : '')\r\nconst userStore = useUserStore()\r\n\r\n// \r\nconst unbindDialogVisible = ref(false)\r\nconst confirmDialogVisible = ref(false)\r\nconst machineCode = ref('')\r\nconst activationCode = ref('')\r\n\r\n// \r\nconst updateDialogVisible = ref(false)\r\nconst updateInfo = ref({\r\n  needs_update: false,\r\n  latest_version: '',\r\n  download_url: '',\r\n  changelog: '',\r\n  is_mandatory: false,\r\n  release_date: ''\r\n})\r\nconst updating = ref(false)\r\nconst updateProgress = ref(0)\r\nconst updateChecked = ref(false)\r\n\r\n// \r\nconst customerServiceDialogVisible = ref(false)\r\n// \r\nconst handleQrcodeError = () => {\r\n  ElMessage.error('')\r\n}\r\n\r\n// \r\nconst saveQrcode = async () => {\r\n  if (!brandConfig.value.qrcodeUrl) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    // \r\n    const link = document.createElement('a')\r\n    link.href = brandConfig.value.qrcodeUrl\r\n    link.download = `${brandConfig.value.name}_.png`\r\n    document.body.appendChild(link)\r\n    link.click()\r\n    document.body.removeChild(link)\r\n    \r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst showCustomerServiceDialog = () => {\r\n  customerServiceDialogVisible.value = true\r\n}\r\n// \r\nconst copyContactInfo = () => {\r\n  if (brandConfig.value.contact) {\r\n    navigator.clipboard.writeText(brandConfig.value.contact)\r\n      .then(() => {\r\n        ElMessage.success('')\r\n      })\r\n      .catch(err => {\r\n        console.error(':', err)\r\n        ElMessage.error('')\r\n      })\r\n  } else {\r\n    ElMessage.warning('')\r\n  }\r\n}\r\n// \r\nconst showUnbindDialog = async () => {\r\n  try {\r\n    const result = await getLicenseInfo()\r\n    if (result.success) {\r\n      machineCode.value = result.data.machine_code\r\n      unbindDialogVisible.value = true\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst executeUnbind = async () => {\r\n  try {\r\n    const result = await unbindLicense(activationCode.value)\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n      // \r\n    } else {\r\n      ElMessage.error(result.message || '')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('')\r\n  } finally {\r\n    confirmDialogVisible.value = false\r\n    unbindDialogVisible.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst checkStatus = async () => {\r\n  try {\r\n    const data = await checkConnectionStatus()\r\n    isConnected.value = data.connected\r\n    if (!data.connected) {\r\n      ElMessage.warning(`: ${data.reason}`)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    isConnected.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst handleReconnect = async () => {\r\n  try {\r\n    reconnecting.value = true\r\n    const result = await reconnectWeChat(activeInstanceId.value)\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n      isConnected.value = true\r\n      // \r\n      if (result.user_info) {\r\n        userStore.setUserInfo(result.user_info)\r\n      }\r\n      // \r\n      await loadInstances()\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(': ' + error)\r\n  } finally {\r\n    reconnecting.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst handleSwitchInstance = async (instance: InstanceInfo) => {\r\n  try {\r\n    if (instance.is_active) {\r\n      return // \r\n    }\r\n    const result = await switchActiveInstance(instance.instance_id)\r\n    console.debug(':', result)\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n      activeInstanceId.value = instance.instance_id\r\n      \r\n      // \r\n      await loadInstances()\r\n      \r\n      // instance\r\n      if (result.instance) {\r\n        friendCount.value = result.instance.friend_count || 0\r\n        groupCount.value = result.instance.group_count || 0\r\n        userStore.setUserInfo({\r\n          nickname: result.instance.nickname,\r\n          account_id: result.instance.account_id,\r\n          friendCount: result.instance.friend_count,\r\n          groupCount: result.instance.group_count\r\n        })\r\n        // \r\n        userStore.$state.lastFetchTime = Date.now()\r\n      }\r\n      \r\n      // \r\n      await checkStatus()\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst loadInstances = async () => {\r\n  try {\r\n    const result = await getAllInstances();\r\n    console.debug(':', result);\r\n    if (result.success) {\r\n      instances.value = result.instances.map((inst: InstanceInfo) => ({\r\n        ...inst,\r\n        //  account_info ID\r\n        nickname: inst.nickname || (inst.account_info?.nickname) || '',\r\n        account_id: inst.account_id || (inst.account_info?.account_id) || '',\r\n        is_connected: true // \r\n      }));\r\n      \r\n      // \r\n      const activeInstance = instances.value.find(inst => inst.is_active);\r\n      if (activeInstance) {\r\n        activeInstanceId.value = activeInstance.instance_id;\r\n      }\r\n    } else {\r\n      ElMessage.error(result.error || '');\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n  }\r\n}\r\n\r\n// \r\nconst initializeMultiInstances = async () => {\r\n  try {\r\n    const result = await getAllInstances();\r\n    console.debug(':', result);\r\n    if (result.success) {\r\n      instances.value = result.instances.map((inst: InstanceInfo) => ({\r\n        ...inst,\r\n        //  account_info ID\r\n        nickname: inst.nickname || (inst.account_info?.nickname) || '',\r\n        account_id: inst.account_id || (inst.account_info?.account_id) || '',\r\n        is_connected: true\r\n      }));\r\n      \r\n      // \r\n      if (result.instances.length > 0) {\r\n        const activeInstance = result.instances.find((inst: InstanceInfo) => inst.is_active) || result.instances[0];\r\n        activeInstanceId.value = activeInstance.instance_id;\r\n        \r\n        // \r\n        // const nickname = activeInstance.nickname || (activeInstance.account_info?.nickname) || '';\r\n        // const account_id = activeInstance.account_id || (activeInstance.account_info?.account_id) || '';\r\n        \r\n        // if (nickname) {\r\n        //   userStore.setUserInfo({\r\n        //     nickname: nickname,\r\n        //     account_id: account_id\r\n        //   });\r\n        // }\r\n      }\r\n      \r\n      return true;\r\n    } else {\r\n      ElMessage.error(result.message || '');\r\n      return false;\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    ElMessage.error('');\r\n    return false;\r\n  }\r\n}\r\n\r\n// \r\nconst manualCheckUpdate = async () => {\r\n  try {\r\n    // ID\r\n    const agentId = brandConfig.value.channel_id || 'default'\r\n    const result = await checkVersion(version, agentId)\r\n    \r\n    if (result.success) {\r\n      if (result.data.needs_update) {\r\n        updateInfo.value = result.data\r\n        updateDialogVisible.value = true\r\n      } else {\r\n        ElMessage.success('')\r\n      }\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst formatChangelog = (changelog: string) => {\r\n  if (!changelog) return ''\r\n  return changelog.replace(/\\n/g, '<br>')\r\n}\r\n\r\n// \r\nconst formatDate = (dateStr: string) => {\r\n  if (!dateStr) return ''\r\n  const date = new Date(dateStr)\r\n  return date.toLocaleDateString('zh-CN')\r\n}\r\n\r\n// \r\nconst progressFormat = (percentage: number) => {\r\n  return percentage === 100 ? '' : `${percentage}%`\r\n}\r\n\r\n// \r\nconst startUpdate = async () => {\r\n  try {\r\n    updating.value = true\r\n    updateProgress.value = 0\r\n    \r\n    // \r\n    const progressInterval = setInterval(() => {\r\n      if (updateProgress.value < 90) {\r\n        updateProgress.value += 10\r\n      }\r\n    }, 500)\r\n    \r\n    // ID\r\n    const agentId = brandConfig.value.channel_id || 'default'\r\n    \r\n    // API\r\n    const timeoutPromise = new Promise((_, reject) => {\r\n      setTimeout(() => reject(new Error('timeout')), 60000)\r\n    })\r\n    const result = await Promise.race([downloadUpdate(version, agentId), timeoutPromise])\r\n    \r\n    clearInterval(progressInterval)\r\n    \r\n    if ((result as any).success) {\r\n      updateProgress.value = 100\r\n      const logFile = (result as any).log_file\r\n      ElMessage.success(`${logFile ? ''+ logFile +'' : ''}`)\r\n      setTimeout(() => {\r\n        if (updating.value) {\r\n          ElMessage.warning('')\r\n          updating.value = false\r\n        }\r\n      }, 20000)\r\n    } else {\r\n      const err = (result as any).error || ''\r\n      const logFile = (result as any).log_file\r\n      if (err === 'invalid_update_package' || /zip/i.test(err)) {\r\n        ElMessage.error(`${logFile ? ''+ logFile +'' : ''}`)\r\n      } else if (err === 'permission_denied') {\r\n        ElMessage.error(`${logFile ? ''+ logFile +'' : ''}`)\r\n      } else {\r\n        ElMessage.error(((result as any).error || '') + (logFile ? ''+ logFile +'' : ''))\r\n      }\r\n      updating.value = false\r\n    }\r\n  } catch (error) {\r\n    if ((error as Error)?.message === 'timeout') {\r\n      ElMessage.error('')\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n    updating.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst checkForUpdates = async () => {\r\n  if (updateChecked.value) return\r\n  \r\n  try {\r\n    // ID\r\n    const agentId = brandConfig.value.channel_id || 'default'\r\n    const result = await checkVersion(version, agentId)\r\n    \r\n    if (result.success && result.data.needs_update) {\r\n      updateInfo.value = result.data\r\n      \r\n      // \r\n      if (result.data.is_mandatory) {\r\n        // \r\n        updateDialogVisible.value = true\r\n      } else {\r\n        // \r\n        const notifyResult = await getVersionNotify()\r\n        if (notifyResult.success) {\r\n          const notifiedVersions = notifyResult.data.notified_versions || []\r\n          if (!notifiedVersions.includes(result.data.latest_version)) {\r\n            // \r\n            updateDialogVisible.value = true\r\n            // \r\n            notifiedVersions.push(result.data.latest_version)\r\n            await saveVersionNotify({ notified_versions: notifiedVersions })\r\n          }\r\n        } else {\r\n          // \r\n          updateDialogVisible.value = true\r\n        }\r\n      }\r\n    }\r\n    updateChecked.value = true\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst fetchUserInfo = async () => {\r\n  try {\r\n    // ID\r\n    const activeInstance = instances.value.find(inst => inst.is_active);\r\n    const currentAccountId = activeInstance?.account_id || '';\r\n    \r\n    // ID\r\n    const cachedAccountId = userStore.userInfo?.account_id || '';\r\n    const forceRefresh = currentAccountId !== '' && cachedAccountId !== '' && currentAccountId !== cachedAccountId;\r\n    \r\n    if (forceRefresh) {\r\n      console.debug('');\r\n    }\r\n    \r\n    // storeID\r\n    const userInfo = await userStore.fetchUserInfo(forceRefresh);\r\n    console.debug(':', userInfo);\r\n    if (userInfo) {\r\n      friendCount.value = (userInfo as UserInfo).friendCount || 0;\r\n      groupCount.value = (userInfo as UserInfo).groupCount || 0;\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n  }\r\n}\r\nconst isRefreshing = ref(false)\r\n// \r\nconst refreshInstances = async () => {\r\n  // \r\n  if (isRefreshing.value) {\r\n    return\r\n  }\r\n  \r\n  try {\r\n    isRefreshing.value = true\r\n    ElMessage.info('...')\r\n    \r\n    //  onMounted \r\n    // \r\n    const initSuccess = await initializeMultiInstances()\r\n    \r\n    if (initSuccess) {\r\n      // \r\n      await fetchUserInfo()\r\n      \r\n      // \r\n      await checkStatus()\r\n    }\r\n    \r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    isRefreshing.value = false\r\n  }\r\n}\r\nonMounted(async () => {\r\n  try {\r\n    console.time('-')\r\n    // \r\n    const initSuccess = await initializeMultiInstances()\r\n    // SVG\r\n    await preloadImages(['refresh', 'update'])\r\n    if (initSuccess) {\r\n      // \r\n      await fetchUserInfo()\r\n      \r\n      // \r\n      await checkStatus()\r\n      \r\n      // \r\n      await checkForUpdates()\r\n    }\r\n    try {\r\n      const res = await getServerTime()\r\n      const iso = (res && res.success) ? (res.authority_time || res.server_time) : null\r\n      if (iso) {\r\n        const serverMs = new Date(iso).getTime()\r\n        const localMs = Date.now()\r\n        const diff = Math.abs(localMs - serverMs)\r\n        timeSkewSeconds.value = Math.round(diff / 1000)\r\n        showTimeWarning.value = diff > 60000\r\n      }\r\n    } catch (e) {}\r\n    \r\n    console.timeEnd('-')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n})\r\n\r\ndefineOptions({\r\n  name: 'MultiWelcomePage'\r\n})\r\n\r\nconst showTimeWarning = ref(false)\r\nconst timeSkewSeconds = ref(0)\r\n</script>\r\n\r\n<style scoped>\r\n.multi-welcome-container {\r\n  height: calc(100vh - 64px);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  overflow: hidden;\r\n  background: linear-gradient(180deg, #2c3e50, #4a5568, #2d3748);\r\n}\r\n\r\n.background-animation {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: linear-gradient(180deg, #2c3e50, #4a5568, #2d3748);\r\n  z-index: 0;\r\n}\r\n\r\n.main-container {\r\n  display: flex;\r\n  gap: 12px;\r\n  padding: 15px;\r\n  max-width: 1400px;\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  z-index: 1;\r\n  height: calc(100vh - 84px); /*  */\r\n  overflow: hidden; /*  */\r\n}\r\n/* Webkit */\r\n.main-container::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n/*  */\r\n.sidebar {\r\n  width: 80px;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  backdrop-filter: blur(10px);\r\n  border-radius: 20px;\r\n  padding: 20px 0;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\r\n  height: fit-content;\r\n}\r\n.sidebar-title {\r\n  text-align: center;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  color: #7f8c8d;\r\n  margin-bottom: 15px;\r\n}\r\n.account-item {\r\n  position: relative;\r\n  width: 50px;\r\n  height: 50px;\r\n  margin: 15px auto;\r\n  border-radius: 50%;\r\n  background: linear-gradient(45deg, #ffa726, #fb8c00);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n}\r\n\r\n.account-item:hover {\r\n  transform: scale(1.1);\r\n  box-shadow: 0 5px 15px rgba(255, 167, 38, 0.4);\r\n}\r\n\r\n.account-item.active {\r\n  transform: scale(1.15);\r\n  box-shadow: 0 8px 25px rgba(79, 172, 254, 0.5);\r\n  background: linear-gradient(45deg, #4facfe, #00f2fe);\r\n}\r\n\r\n.status-indicator {\r\n  position: absolute;\r\n  top: -2px;\r\n  right: -2px;\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 50%;\r\n  background: #4caf50;\r\n  border: 2px solid white;\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n.status-indicator.offline {\r\n  background: #f44336;\r\n  animation: none;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% {\r\n    box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7);\r\n  }\r\n  70% {\r\n    box-shadow: 0 0 0 10px rgba(76, 175, 80, 0);\r\n  }\r\n  100% {\r\n    box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);\r\n  }\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  backdrop-filter: blur(10px);\r\n  border-radius: 16px;\r\n  padding: 20px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\r\n  position: relative;\r\n  overflow-y: auto; /*  */\r\n  scrollbar-width: none; /* Firefox */\r\n  -ms-overflow-style: none; /* IEEdge */\r\n}\r\n/* Webkit */\r\n.content::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n.content::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 4px;\r\n  background: linear-gradient(90deg, #4facfe, #00f2fe, #4facfe);\r\n  animation: shimmer 3s infinite;\r\n}\r\n\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -100% 0;\r\n  }\r\n  100% {\r\n    background-position: 100% 0;\r\n  }\r\n}\r\n\r\n.header {\r\n  margin-bottom: 20px;\r\n}\r\n.header-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n.brand-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 10px; /*  */\r\n  padding-bottom: 10px; /*  */\r\n  border-bottom: 1px solid rgba(127, 140, 141, 0.2); /*  */\r\n}\r\n\r\n.welcome-container {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n\r\n.welcome-text {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\n.user-name {\r\n  color: #4facfe;\r\n  font-size: 18px;\r\n  margin-left: 8px;\r\n}\r\n\r\n.version {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  background: rgba(79, 172, 254, 0.1);\r\n  padding: 5px 15px;\r\n  border-radius: 20px;\r\n}\r\n.version-number {\r\n  font-size: 13px;\r\n  color: #7f8c8d;\r\n  align-self: flex-end;\r\n  margin-bottom: 4px;\r\n}\r\n.brand-name {\r\n  font-weight: bold;\r\n  color: #2c3e50; /*  */\r\n  margin-right: 8px;\r\n  font-size: 24px;\r\n}\r\n/*  */\r\n.stats-container {\r\n  display: flex; /* flex */\r\n  gap: 12px;\r\n  margin-bottom: 40px;\r\n  flex-wrap: nowrap; /*  */\r\n}\r\n\r\n.stat-card {\r\n  flex: 1; /*  */\r\n  background: white;\r\n  border-radius: 15px;\r\n  padding: 18px;\r\n  text-align: center;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.stat-card::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: -100%;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, transparent, rgba(79, 172, 254, 0.1), transparent);\r\n  transition: left 0.5s ease;\r\n}\r\n\r\n.stat-card:hover::before {\r\n  left: 100%;\r\n}\r\n\r\n.stat-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 8px 30px rgba(79, 172, 254, 0.2);\r\n}\r\n\r\n.stat-number {\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n  color: #4facfe;\r\n  margin-bottom: 10px;\r\n  display: block;\r\n}\r\n\r\n.stat-label {\r\n  color: #7f8c8d;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\n.stat-card.online {\r\n  background: linear-gradient(135deg, #4facfe, #00f2fe);\r\n  color: white;\r\n}\r\n\r\n.stat-card.online .stat-number {\r\n  font-size: 22px;\r\n  color: white;\r\n}\r\n.stat-card.online .stat-label {\r\n  color: white;\r\n}\r\n\r\n/*  */\r\n.features-container {\r\n  margin-bottom: 25px;\r\n}\r\n\r\n.features-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr); /* 2 */\r\n  grid-template-rows: repeat(2, auto); /* 2 */\r\n  gap: 15px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.feature-card {\r\n  background: white;\r\n  border-radius: 15px;\r\n  padding: 15px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.feature-card::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  height: 3px;\r\n  background: linear-gradient(90deg, #4facfe, #00f2fe);\r\n  transform: scaleX(0);\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.feature-card:hover::before {\r\n  transform: scaleX(1);\r\n}\r\n\r\n.feature-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 8px 30px rgba(79, 172, 254, 0.2);\r\n}\r\n\r\n.feature-icon {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 24px;\r\n  color: white;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.feature-title {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.feature-desc {\r\n  color: #7f8c8d;\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n}\r\n\r\n/*  */\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 15px;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.btn {\r\n  padding: 10px 25px;\r\n  border-radius: 25px;\r\n  border: none;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  text-decoration: none;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.btn-primary {\r\n  background: linear-gradient(45deg, #4facfe, #00f2fe);\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);\r\n}\r\n\r\n.btn-secondary {\r\n  background: white;\r\n  color: #4facfe;\r\n  border: 2px solid #4facfe;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #4facfe;\r\n  color: white;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.btn-outline {\r\n  background: transparent;\r\n  color: #7f8c8d;\r\n  border: 2px solid #e0e0e0;\r\n}\r\n\r\n.btn-outline:hover {\r\n  background: #f8f9fa;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/*  */\r\n.customer-service-content {\r\n  text-align: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.customer-service-qrcode {\r\n  width: 200px;\r\n  height: 200px;\r\n  margin: 0 auto 20px;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.qrcode-img {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n}\r\n\r\n.customer-service-tip {\r\n  font-size: 16px;\r\n  color: #333;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.customer-service-contact {\r\n  font-size: 16px;\r\n  margin-top: 10px;\r\n  color: #333;\r\n}\r\n\r\n/*  */\r\n.unbind-content {\r\n  padding: 10px 0;\r\n}\r\n.machine-code-info {\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n  padding: 12px 15px;\r\n  margin-bottom: 20px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n  border-left: 3px solid #409EFF;\r\n}\r\n.unbind-content .el-form-item__label {\r\n  font-weight: 500;\r\n  color: #606266;\r\n}\r\n.unbind-dialog :deep(.el-dialog__header) {\r\n  border-bottom: 1px solid #ebeef5;\r\n  padding-bottom: 15px;\r\n  background-color: #f8f9fa;\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n.unbind-dialog :deep(.el-dialog__title) {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n.unbind-dialog :deep(.el-dialog__body) {\r\n  padding: 20px 25px;\r\n}\r\n.unbind-dialog :deep(.el-dialog__footer) {\r\n  border-top: 1px solid #ebeef5;\r\n  padding-top: 15px;\r\n  background-color: #f8f9fa;\r\n  border-radius: 0 0 8px 8px;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n.dialog-footer .el-button--danger {\r\n  background-color: #f56c6c;\r\n  border-color: #f56c6c;\r\n  transition: all 0.3s ease;\r\n}\r\n.dialog-footer .el-button--danger:hover {\r\n  background-color: #f78989;\r\n  border-color: #f78989;\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 2px 8px rgba(245, 108, 108, 0.3);\r\n}\r\n/*  */\r\n.update-content {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.update-dialog :deep(.el-dialog__header) {\r\n  border-bottom: 1px solid #ebeef5;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.update-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.update-icon {\r\n  width: 48px;\r\n  height: 48px;\r\n  margin-right: 15px;\r\n}\r\n\r\n.update-title {\r\n  flex: 1;\r\n}\r\n\r\n.update-title h3 {\r\n  margin: 0 0 5px 0;\r\n  color: #303133;\r\n  font-size: 18px;\r\n}\r\n\r\n.update-subtitle {\r\n  margin: 0;\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n.version-info {\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n  padding: 15px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.version-item {\r\n  display: flex;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.version-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n.refresh-button {\r\n  width: 30px;\r\n  height: 30px;\r\n  margin: 15px auto 0;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  color: #7f8c8d; /*  */\r\n  font-size: 20px;\r\n  background-color: transparent;\r\n}\r\n.refresh-icon {\r\n  width: 30px;\r\n  height: 30px;\r\n  transition: all 0.3s ease;\r\n}\r\n.refresh-button:hover {\r\n  transform: rotate(180deg);\r\n  color: #4facfe;\r\n  border-color: #4facfe;\r\n}\r\n.refresh-button:hover .refresh-icon {\r\n  filter: invert(60%) sepia(75%) saturate(5017%) hue-rotate(195deg) brightness(101%) contrast(101%);\r\n}\r\n.refresh-button.refreshing {\r\n  animation: rotating 2s linear infinite;\r\n  color: #4facfe;\r\n  cursor: not-allowed;\r\n  border-color: #4facfe;\r\n}\r\n.refresh-button.refreshing .refresh-icon {\r\n  filter: invert(60%) sepia(75%) saturate(5017%) hue-rotate(195deg) brightness(101%) contrast(101%);\r\n}\r\n@keyframes rotating {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n.version-label {\r\n  width: 80px;\r\n  color: #606266;\r\n  font-weight: 500;\r\n}\r\n\r\n.version-value {\r\n  flex: 1;\r\n  color: #303133;\r\n}\r\n\r\n.version-value.current {\r\n  color: #909399;\r\n}\r\n\r\n.version-value.latest {\r\n  color: #67C23A;\r\n  font-weight: 500;\r\n}\r\n\r\n.changelog {\r\n  margin-top: 15px;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 4px;\r\n  padding: 15px;\r\n  background-color: #fafafa;\r\n}\r\n\r\n.changelog h4 {\r\n  margin-top: 0;\r\n  margin-bottom: 10px;\r\n  color: #303133;\r\n  font-size: 16px;\r\n}\r\n\r\n.changelog-content {\r\n  max-height: 150px;\r\n  overflow-y: auto;\r\n  color: #606266;\r\n  line-height: 1.6;\r\n  padding-right: 5px;\r\n}\r\n\r\n.update-progress {\r\n  margin-top: 20px;\r\n}\r\n.copyright-info {\r\n  margin-top: 30px;\r\n  text-align: center;\r\n  padding: 15px 0;\r\n}\r\n\r\n.copyright-text {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  opacity: 0.8;\r\n  font-weight: 400;\r\n  letter-spacing: 0.5px;\r\n}\r\n/*  */\r\n@media (max-width: 500px) {\r\n  .main-container {\r\n    flex-direction: column;\r\n    padding: 20px;\r\n  }\r\n  .copyright-info {\r\n    margin-top: 20px;\r\n    padding: 10px 0;\r\n  }\r\n  \r\n  .copyright-text {\r\n    font-size: 11px;\r\n  }\r\n  .sidebar {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: flex-start; /*  */\r\n    padding: 15px 10px; /*  */\r\n    align-items: flex-start; /*  */\r\n    overflow-x: auto; /*  */\r\n  }\r\n\r\n  .sidebar-title {\r\n    margin-bottom: 0;\r\n    margin-right: 10px;\r\n    display: flex;\r\n    align-items: center;\r\n    height: 50px;\r\n  }\r\n\r\n  .account-item {\r\n    margin: 0 10px 0 0; /*  */\r\n  }\r\n  \r\n  .refresh-button {\r\n    margin: 5px 0 5px 10px; /*  */\r\n    width: 36px;\r\n    height: 36px;\r\n  }\r\n\r\n  .content {\r\n    padding: 30px 20px;\r\n  }\r\n\r\n  .stats-container {\r\n    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n  }\r\n\r\n  .features-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .action-buttons {\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n}\r\n\r\n/*  */\r\n@keyframes fadeInUp {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(30px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.stat-card,\r\n.feature-card {\r\n  animation: fadeInUp 0.6s ease forwards;\r\n}\r\n\r\n.stat-card:nth-child(1) { animation-delay: 0.1s; }\r\n.stat-card:nth-child(2) { animation-delay: 0.2s; }\r\n.stat-card:nth-child(3) { animation-delay: 0.3s; }\r\n\r\n.feature-card:nth-child(1) { animation-delay: 0.4s; }\r\n.feature-card:nth-child(2) { animation-delay: 0.5s; }\r\n.feature-card:nth-child(3) { animation-delay: 0.6s; }\r\n.feature-card:nth-child(4) { animation-delay: 0.7s; }\r\n</style>\r\n","import script from \"./MultiWelcomePage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MultiWelcomePage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MultiWelcomePage.vue?vue&type=style&index=0&id=778ff1ea&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-778ff1ea\"]])\n\nexport default __exports__","const API_BASE_URL = 'http://127.0.0.1:9922/api';\r\nconst API_KEY = 'yoko_test'; // API\r\n\r\n// \r\nconst headers = {\r\n  'Content-Type': 'application/json',\r\n  'X-API-Key': API_KEY\r\n};\r\n\r\nexport interface ChatSession {\r\n  id: string | number     // unique_id\r\n  name: string\r\n  avatar: string\r\n  lastMessage: string\r\n  lastTime?: string\r\n  lastMessageId?: number  // ID\r\n  unread?: number\r\n  isGroup?: boolean\r\n  account_id?: string     // ID\r\n  account_nickname?: string  // \r\n  unique_id?: string      // account_id_session_name\r\n}\r\n// \r\nexport interface StatsData {\r\n  sessionCount: number;\r\n  sessionIncrease: number;\r\n  messageCount: number;\r\n  messageIncrease: number;\r\n  savedHours: number;\r\n  savedMoney: number;\r\n}\r\n\r\nexport interface AIGenerateResponse {\r\n  success: boolean\r\n  error?: string\r\n  data?: {\r\n    reply?: string\r\n  }\r\n}\r\n\r\nexport interface ChatMessage {\r\n  id: number\r\n  content: string\r\n  isSelf: boolean\r\n  isTimeMessage?: boolean\r\n  time?: string\r\n  sessionId?: number\r\n  isRead?: boolean\r\n  isGroup?: boolean  // \r\n  sender?: {         // \r\n    name: string\r\n    // tags: string[]   // \r\n  }\r\n  file_info?:string\r\n  voice_text?:string\r\n}\r\nexport interface SuspendedSession {\r\n  session_name: string\r\n  suspended_at: number\r\n  account_id: string\r\n  account_nickname?: string\r\n}\r\n\r\n// \r\nexport const getSuspendedSessions = async (): Promise<SuspendedSession[]> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/suspended_sessions`, {\r\n      method: 'GET',\r\n      headers\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// \r\nexport const unsuspendSession = async (sessionName: string, accountId: string): Promise<boolean> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/unsuspend_session`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify({\r\n        session_name: sessionName,\r\n        account_id: accountId\r\n      })\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    return data.success === true;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// \r\nexport const getHistorySessions = async (): Promise<ChatSession[]> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/history_sessions`, {\r\n      method: 'GET',\r\n      headers\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// \r\nexport const getHistoryMessages = async (sessionId: string, accountId?: string):  Promise<ChatMessagesResponse> => {\r\n  try {\r\n    const url = new URL(`${API_BASE_URL}/chat/history_messages/${encodeURIComponent(sessionId)}`);\r\n    if (accountId) {\r\n      url.searchParams.append('account_id', accountId);\r\n    }\r\n    \r\n    const response = await fetch(url.toString(), {\r\n      method: 'GET',\r\n      headers\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    return {\r\n      messages: data.messages || [],\r\n      chatType: data.chatType || 'unknown'\r\n    };\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return {\r\n      messages: [],\r\n      chatType: 'unknown'\r\n    };\r\n  }\r\n};\r\n// \r\nexport const getStatsData = async (): Promise<StatsData> => {\r\n  try {\r\n    // \r\n    const response = await fetch(`${API_BASE_URL}/chat/logs`, {\r\n      headers\r\n    });\r\n    const data = await response.json();\r\n    \r\n    if (!data.success) {\r\n      throw new Error('');\r\n    }\r\n    \r\n    const logs = data.logs.map((log: any) => ({\r\n      timestamp: new Date(log.timestamp),\r\n      targetName: log.targetName || log.session_name,  // \r\n      content: log.content,\r\n      status: log.status,\r\n      error: log.error,\r\n      chatType: log.chatType || (log.content?.includes('') ? 'group' : 'single'),  // \r\n      account_id: log.account_id || 'default'  // account_iddefault\r\n    }));\r\n    \r\n    // \r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const todayTimestamp = today.getTime();\r\n\r\n    // \r\n    const yesterday = new Date(todayTimestamp);\r\n    yesterday.setDate(yesterday.getDate() - 1);\r\n    const yesterdayTimestamp = yesterday.getTime();\r\n\r\n    // \r\n    const todayLogs = logs.filter((log: any) => {\r\n      return log.timestamp.getTime() >= todayTimestamp;\r\n    });\r\n    \r\n    // \r\n    const yesterdayLogs = logs.filter((log: any) => {\r\n      return log.timestamp.getTime() >= yesterdayTimestamp && log.timestamp.getTime() < todayTimestamp;\r\n    });\r\n    \r\n    // - account_id+targetName\r\n    const uniqueUsers = new Set(todayLogs.map((log: any) => `${log.account_id}_${log.targetName}`));\r\n    const sessionCount = uniqueUsers.size;\r\n    \r\n    // - account_id+targetName\r\n    const yesterdayUniqueUsers = new Set(yesterdayLogs.map((log: any) => `${log.account_id}_${log.targetName}`));\r\n    const yesterdaySessionCount = yesterdayUniqueUsers.size;\r\n    \r\n    // \r\n    const messageCount = todayLogs.filter((log: any) => log.status === 'completed').length;\r\n    \r\n    // \r\n    const yesterdayMessageCount = yesterdayLogs.filter((log: any) => log.status === 'completed').length;\r\n    \r\n    // \r\n    let sessionIncrease = 0;\r\n    if (yesterdaySessionCount === 0) {\r\n      // 0 =  * 100%\r\n      sessionIncrease = sessionCount * 100;\r\n    } else {\r\n      //  = ( - ) * 100 / \r\n      sessionIncrease = ((sessionCount - yesterdaySessionCount) * 100) / yesterdaySessionCount;\r\n      // -100%\r\n      if (sessionIncrease < -100) {\r\n        sessionIncrease = -100;\r\n      }\r\n    }\r\n    \r\n    // \r\n    let messageIncrease = 0;\r\n    if (yesterdayMessageCount === 0) {\r\n      // 0 =  * 100%\r\n      messageIncrease = messageCount * 100;\r\n    } else {\r\n      //  = ( - ) * 100 / \r\n      messageIncrease = ((messageCount - yesterdayMessageCount) * 100) / yesterdayMessageCount;\r\n      // -100%\r\n      if (messageIncrease < -100) {\r\n        messageIncrease = -100;\r\n      }\r\n    }\r\n    \r\n    // \r\n    let totalChars = 0;\r\n    todayLogs.forEach((log: any) => {\r\n      if (log.status === 'completed' && log.content) {\r\n        totalChars += log.content.length;\r\n      }\r\n    });\r\n    \r\n    // 12\r\n    const savedHours = parseFloat((totalChars * 5 / 3600).toFixed(2));\r\n    \r\n    // 25\r\n    const hourlyRate = 25;\r\n    const savedMoney = parseFloat((savedHours * hourlyRate).toFixed(0));\r\n    \r\n    return {\r\n      sessionCount,\r\n      sessionIncrease: parseFloat(sessionIncrease.toFixed(1)), // 1\r\n      messageCount,\r\n      messageIncrease: parseFloat(messageIncrease.toFixed(1)), // 1\r\n      savedHours,\r\n      savedMoney\r\n    };\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return {\r\n      sessionCount: 0,\r\n      sessionIncrease: 0,\r\n      messageCount: 0,\r\n      messageIncrease: 0,\r\n      savedHours: 0,\r\n      savedMoney: 0\r\n    };\r\n  }\r\n};\r\n// \r\nexport const startChatMonitor = async (params?: {\r\n  manualReview?: boolean\r\n}) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/multi-monitor/start`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(params || {})\r\n    });\r\n    const data = await response.json();\r\n    // \r\n    if (data.status === 'error' && (data.code === 'SYNC_REQUIRED' || data.code === 'SYNC_EXPIRED')) {\r\n      throw new Error(JSON.stringify({\r\n        type: 'SYNC_ERROR',\r\n        message: data.message\r\n      }));\r\n    }\r\n    return data;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    throw error;\r\n  }\r\n};\r\n//  AI \r\nexport const chatCoze = async (params: {\r\n  message: string\r\n  agent_id: string\r\n  session_id: string\r\n  user_name: string\r\n  session_name: string\r\n}): Promise<AIGenerateResponse> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/generate`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(params)\r\n    })\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`)\r\n    }\r\n\r\n    const data = await response.json()\r\n    return data\r\n  } catch (error) {\r\n    console.error('AI:', error)\r\n    return {\r\n      success: false,\r\n      error: String(error)\r\n    }\r\n  }\r\n}\r\n// \r\nexport const confirmAutoReply = async (params: {\r\n  task_id: string;\r\n  action: 'confirm' | 'cancel';\r\n  final_content?: string;\r\n}) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/v2/tasks/auto-reply/confirm`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(params)\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    throw error;\r\n  }\r\n};\r\nexport const stopChatMonitor = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/monitor/stop`, {\r\n      method: 'POST',\r\n      headers\r\n    });\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    throw error;\r\n  }\r\n};\r\n// \r\nexport const getLatestSessions = async (startTime?: number): Promise<ChatSession[]> => {\r\n  try {\r\n    const url = new URL(`${API_BASE_URL}/chat/latest_sessions`);\r\n    if (startTime) {\r\n      url.searchParams.append('start_time', startTime.toString());\r\n    }\r\n\r\n    const response = await fetch(url.toString(), {\r\n      method: 'GET',\r\n      headers\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    return Array.isArray(data) ? data : [];\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return [];\r\n  }\r\n};\r\n// \r\nexport const getSessionList = async (reset = false): Promise<ChatSession[]> => {\r\n    try {\r\n      console.debug(', :', reset);\r\n      \r\n      //  XMLHttpRequest  fetch \r\n      return new Promise((resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open('GET', `${API_BASE_URL}/chat/session_list?reset=${reset}`, true);\r\n        \r\n        // \r\n        Object.entries(headers).forEach(([key, value]) => {\r\n          xhr.setRequestHeader(key, value);\r\n        });\r\n        \r\n        xhr.onreadystatechange = function() {\r\n          console.debug('XHR :', xhr.readyState, xhr.status);\r\n          if (xhr.readyState === 4) {\r\n            if (xhr.status === 200) {\r\n              try {\r\n                const data = JSON.parse(xhr.responseText);\r\n                console.debug(':', data);\r\n                \r\n                if (!data || !Array.isArray(data)) {\r\n                  console.error(':', data);\r\n                  resolve([]);\r\n                } else {\r\n                  resolve(data);\r\n                }\r\n              } catch (e) {\r\n                console.error(':', e, xhr.responseText);\r\n                resolve([]);\r\n              }\r\n            } else {\r\n              console.error(', :', xhr.status);\r\n              console.error(':', xhr.responseText);\r\n              resolve([]);\r\n            }\r\n          }\r\n        };\r\n        \r\n        xhr.onerror = function(e) {\r\n          console.error(':', e);\r\n          resolve([]);\r\n        };\r\n        \r\n        console.debug('...');\r\n        xhr.send();\r\n      });\r\n    } catch (error) {\r\n      console.error(':', error);\r\n      return [];\r\n    }\r\n  };\r\n// \r\ninterface ChatMessagesResponse {\r\n  messages: ChatMessage[];\r\n  chatType: string;\r\n}\r\n// \r\nexport const getChatMessages = async (sessionName: string, accountId?: string): Promise<ChatMessagesResponse> => {\r\n  try {\r\n    const url = new URL(`${API_BASE_URL}/chat/messages/${encodeURIComponent(sessionName)}`);\r\n    if (accountId) {\r\n      url.searchParams.append('account_id', accountId);\r\n    }\r\n    \r\n    const response = await fetch(url.toString(), {\r\n      method: 'GET',\r\n      headers\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`: ${response.status}`);\r\n    }\r\n    const data = await response.json();\r\n    console.debug(` ${sessionName} :`, data);\r\n    return {\r\n      messages: data.messages || [],\r\n      chatType: data.chatType || 'unknown'\r\n    };\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return {\r\n      messages: [],\r\n      chatType: 'unknown'\r\n    };\r\n  }\r\n};\r\n\r\n// \r\nexport const sendChatMessage = async (user: string, message: string): Promise<any> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/send_message`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify({ user, message })\r\n    });\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    throw error;\r\n  }\r\n};\r\n// \r\nexport const createAutoReplyTask = async (params: {\r\n  sessionId: string | number;\r\n  content: string;\r\n  userName: string;\r\n  sessionName: string;  // \r\n  isGroup: boolean;\r\n  accountId?: string;   // ID\r\n}) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/v2/tasks/auto-reply`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(params)\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    return { success: false, error: String(error) };\r\n  }\r\n};\r\nexport const updateManualReviewStatus = async (enabled: boolean) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/monitor/manual-review`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify({ enabled })\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    throw error;\r\n  }\r\n};\r\nexport const getMonitorStatus = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/chat/monitor/status`, {\r\n      method: 'GET',\r\n      headers\r\n    });\r\n    const data = await response.json();\r\n    return data;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    throw error;\r\n  }\r\n};","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"staff-form\" }\nconst _hoisted_2 = { class: \"form-item\" }\nconst _hoisted_3 = { class: \"form-item\" }\nconst _hoisted_4 = {\n  key: 0,\n  style: {\"margin-top\":\"6px\",\"padding-top\":\"6px\",\"border-top\":\"1px dashed #eee\"}\n}\nconst _hoisted_5 = { class: \"form-item\" }\nconst _hoisted_6 = { style: {\"display\":\"flex\",\"align-items\":\"center\"} }\nconst _hoisted_7 = [\"src\", \"alt\"]\nconst _hoisted_8 = {\n  key: 0,\n  class: \"form-item\"\n}\nconst _hoisted_9 = { class: \"section-header\" }\nconst _hoisted_10 = {\n  key: 1,\n  class: \"form-item\"\n}\nconst _hoisted_11 = { class: \"section-header\" }\nconst _hoisted_12 = { class: \"dialog-footer\" }\n\nimport { ref, computed, nextTick, PropType, watch } from 'vue'\r\n  import { ElMessage } from 'element-plus'\r\n  import { Tag } from '@/api/contact'\r\n  // \r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'StaffDialog',\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    staff: {\r\n      type: Object as PropType<{\r\n        id: string\r\n        name: string\r\n        enabled: boolean\r\n        agentId: string\r\n        chatType: 'single' | 'group' | 'all'\r\n        selectedTags: string[]\r\n        keywords: string[]\r\n        readGroupMember?: boolean\r\n      }>,\r\n      default: undefined\r\n    },\r\n    isEdit: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    cozeAgents: {\r\n      type: Array as PropType<Array<{\r\n        name: string,\r\n        botId: string,\r\n        platform: string\r\n      }>>,\r\n      default: () => []\r\n    },\r\n    contactTags: {\r\n      type: Array as PropType<Tag[]>,\r\n      default: () => []\r\n    },\r\n    groupTags: {\r\n      type: Array as PropType<Tag[]>,\r\n      default: () => []\r\n    },\r\n    hasGroupStaff: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\n  emits: ['update:visible', 'save'],\n  setup(__props, { emit: __emit }) {\n\r\n  const getPlatformIconExtension = (platform?: string) => {\r\n    if (platform === 'dify') return 'png'\r\n    if (platform === 'yuanqi') return 'png'\r\n    return 'svg'\r\n  }\r\n  // \r\n  const props = __props\r\n  \r\n  // \r\n  const emit = __emit\r\n  const isEditingGroupStaff = computed(() => {\r\n    return props.isEdit && props.staff?.chatType === 'group'\r\n  })\r\n  // \r\n  const dialogVisible = computed({\r\n    get: () => props.visible,\r\n    set: (val) => emit('update:visible', val)\r\n  })\r\n  \r\n  // \r\n  const staffForm = ref({\r\n    id: '',\r\n    name: '',\r\n    enabled: true,\r\n    agentId: '',\r\n    chatType: 'single' as 'single' | 'group' | 'all',\r\n    selectedTags: [] as string[],\r\n    keywords: [] as string[],\r\n    readGroupMember: false\r\n  })\r\n  \r\n  // \r\n  const keywordInputVisible = ref(false)\r\n  const keywordInputValue = ref('')\r\n  const keywordInputRef = ref<HTMLInputElement | null>(null)\r\n  \r\n  // staff\r\n  watch(() => props.staff, (newVal) => {\r\n    if (newVal) {\r\n      const staffData = JSON.parse(JSON.stringify(newVal))\r\n      staffForm.value = {\r\n        ...staffData,\r\n        readGroupMember: staffData.readGroupMember ?? false\r\n      }\r\n    }\r\n  }, { immediate: true })\r\n  \r\n  // \r\n  const addKeyword = () => {\r\n    keywordInputVisible.value = true\r\n    nextTick(() => {\r\n      keywordInputRef.value?.focus()\r\n    })\r\n  }\r\n  \r\n  const confirmKeyword = () => {\r\n    if (keywordInputValue.value.trim()) {\r\n      if (!staffForm.value.keywords.includes(keywordInputValue.value.trim())) {\r\n        staffForm.value.keywords.push(keywordInputValue.value.trim())\r\n      }\r\n    }\r\n    keywordInputVisible.value = false\r\n    keywordInputValue.value = ''\r\n  }\r\n  \r\n  const removeKeyword = (index: number) => {\r\n    staffForm.value.keywords.splice(index, 1)\r\n  }\r\n  \r\n  // \r\n  const resetTags = () => {\r\n    staffForm.value.selectedTags = []\r\n    ElMessage.success('')\r\n  }\r\n  \r\n  // \r\n  const saveStaff = () => {\r\n    // \r\n    if (!staffForm.value.name.trim()) {\r\n      ElMessage.error('')\r\n      return\r\n    }\r\n    \r\n    if (!staffForm.value.agentId) {\r\n      ElMessage.error('')\r\n      return\r\n    }\r\n    \r\n    emit('save', staffForm.value)\r\n  }\r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_radio = _resolveComponent(\"el-radio\")!\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\")!\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((dialogVisible).value = $event)),\n    title: __props.isEdit ? 'AI' : 'AI',\n    width: \"500px\"\n  }, {\n    footer: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createVNode(_component_el_button, {\n          onClick: _cache[6] || (_cache[6] = ($event: any) => (dialogVisible.value = false))\n        }, {\n          default: _withCtx(() => [...(_cache[19] || (_cache[19] = [\n            _createTextVNode(\"\", -1)\n          ]))]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: saveStaff\n        }, {\n          default: _withCtx(() => [...(_cache[20] || (_cache[20] = [\n            _createTextVNode(\"\", -1)\n          ]))]),\n          _: 1\n        })\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _cache[8] || (_cache[8] = _createElementVNode(\"h3\", null, \"*\", -1)),\n          _createVNode(_component_el_input, {\n            modelValue: staffForm.value.name,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((staffForm.value.name) = $event)),\n            placeholder: \"AI\"\n          }, null, 8, [\"modelValue\"])\n        ]),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"*\", -1)),\n          _createVNode(_component_el_radio_group, {\n            modelValue: staffForm.value.chatType,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((staffForm.value.chatType) = $event))\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_radio, { label: \"single\" }, {\n                default: _withCtx(() => [...(_cache[9] || (_cache[9] = [\n                  _createTextVNode(\"\", -1)\n                ]))]),\n                _: 1\n              }),\n              _createVNode(_component_el_radio, { label: \"group\" }, {\n                default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n                  _createTextVNode(\"\", -1)\n                ]))]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"]),\n          (staffForm.value.chatType === 'group')\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                _createVNode(_component_el_checkbox, {\n                  modelValue: staffForm.value.readGroupMember,\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((staffForm.value.readGroupMember) = $event))\n                }, {\n                  default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n                    _createTextVNode(\"  \", -1)\n                  ]))]),\n                  _: 1\n                }, 8, [\"modelValue\"]),\n                _cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n                  class: \"description\",\n                  style: {\"margin-top\":\"4px\",\"color\":\"#909399\",\"font-size\":\"12px\"}\n                }, \" 4.1 \", -1))\n              ]))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _createElementVNode(\"div\", _hoisted_5, [\n          _cache[14] || (_cache[14] = _createElementVNode(\"h3\", null, \"*\", -1)),\n          _createVNode(_component_el_select, {\n            modelValue: staffForm.value.agentId,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((staffForm.value.agentId) = $event)),\n            placeholder: \"\",\n            clearable: \"\",\n            style: {\"width\":\"100%\"}\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.cozeAgents, (agent) => {\n                return (_openBlock(), _createBlock(_component_el_option, {\n                  key: agent.botId,\n                  label: agent.name,\n                  value: agent.botId\n                }, {\n                  default: _withCtx(() => [\n                    _createElementVNode(\"div\", _hoisted_6, [\n                      _createElementVNode(\"img\", {\n                        src: `/icon/${agent.platform || 'coze'}.${getPlatformIconExtension(agent.platform)}`,\n                        alt: agent.platform || 'coze',\n                        style: {\"width\":\"18px\",\"height\":\"18px\",\"margin-right\":\"8px\"}\n                      }, null, 8, _hoisted_7),\n                      _createElementVNode(\"span\", null, _toDisplayString(agent.name), 1)\n                    ])\n                  ]),\n                  _: 2\n                }, 1032, [\"label\", \"value\"]))\n              }), 128))\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ]),\n        (staffForm.value.chatType === 'single' || staffForm.value.chatType === 'all')\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n              _createElementVNode(\"div\", _hoisted_9, [\n                _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"title-group\" }, [\n                  _createElementVNode(\"h3\", null, \"\"),\n                  _createElementVNode(\"p\", { class: \"description\" }, \"AI\")\n                ], -1)),\n                (__props.isEdit)\n                  ? (_openBlock(), _createBlock(_component_el_button, {\n                      key: 0,\n                      type: \"warning\",\n                      size: \"small\",\n                      onClick: resetTags,\n                      disabled: staffForm.value.selectedTags.length === 0\n                    }, {\n                      default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n                        _createTextVNode(\"  \", -1)\n                      ]))]),\n                      _: 1\n                    }, 8, [\"disabled\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createVNode(_component_el_checkbox_group, {\n                modelValue: staffForm.value.selectedTags,\n                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((staffForm.value.selectedTags) = $event))\n              }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.contactTags, (tag) => {\n                    return (_openBlock(), _createBlock(_component_el_checkbox, {\n                      key: tag.id,\n                      label: tag.id\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(_toDisplayString(tag.name), 1)\n                      ]),\n                      _: 2\n                    }, 1032, [\"label\"]))\n                  }), 128))\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ]))\n          : _createCommentVNode(\"\", true),\n        (staffForm.value.chatType === 'group')\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n              _createElementVNode(\"div\", _hoisted_11, [\n                _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"title-group\" }, [\n                  _createElementVNode(\"h3\", null, \"\"),\n                  _createElementVNode(\"p\", { class: \"description\" }, \"AI\")\n                ], -1)),\n                (__props.isEdit)\n                  ? (_openBlock(), _createBlock(_component_el_button, {\n                      key: 0,\n                      type: \"warning\",\n                      size: \"small\",\n                      onClick: resetTags,\n                      disabled: staffForm.value.selectedTags.length === 0\n                    }, {\n                      default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                        _createTextVNode(\"  \", -1)\n                      ]))]),\n                      _: 1\n                    }, 8, [\"disabled\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createVNode(_component_el_checkbox_group, {\n                modelValue: staffForm.value.selectedTags,\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((staffForm.value.selectedTags) = $event))\n              }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(props.groupTags, (tag) => {\n                    return (_openBlock(), _createBlock(_component_el_checkbox, {\n                      key: tag.id,\n                      label: tag.id\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(_toDisplayString(tag.name), 1)\n                      ]),\n                      _: 2\n                    }, 1032, [\"label\"]))\n                  }), 128))\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ]))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\", \"title\"]))\n}\n}\n\n})","<template>\r\n    <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      :title=\"isEdit ? 'AI' : 'AI'\"\r\n      width=\"500px\"\r\n    >\r\n      <div class=\"staff-form\">\r\n        <!--  -->\r\n        <div class=\"form-item\">\r\n          <h3>*</h3>\r\n          <el-input v-model=\"staffForm.name\" placeholder=\"AI\" />\r\n        </div>\r\n        \r\n        <!--  -->\r\n        <div class=\"form-item\">\r\n          <h3>*</h3>\r\n          <el-radio-group v-model=\"staffForm.chatType\">\r\n            <el-radio label=\"single\"></el-radio>\r\n            <el-radio label=\"group\"></el-radio>\r\n          </el-radio-group>\r\n          \r\n          <!--  -->\r\n          <div v-if=\"staffForm.chatType === 'group'\" style=\"margin-top: 6px; padding-top: 6px; border-top: 1px dashed #eee;\">\r\n            <el-checkbox v-model=\"staffForm.readGroupMember\">\r\n              \r\n            </el-checkbox>\r\n            <div class=\"description\" style=\"margin-top: 4px; color: #909399; font-size: 12px;\">\r\n              4.1\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!--  -->\r\n        <div class=\"form-item\">\r\n          <h3>*</h3>\r\n          <el-select \r\n            v-model=\"staffForm.agentId\"\r\n            placeholder=\"\"\r\n            clearable\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-option\r\n              v-for=\"agent in props.cozeAgents\"\r\n              :key=\"agent.botId\"\r\n              :label=\"agent.name\"\r\n              :value=\"agent.botId\"\r\n            >\r\n              <div style=\"display: flex; align-items: center;\">\r\n                <img \r\n                  :src=\"`/icon/${agent.platform || 'coze'}.${getPlatformIconExtension(agent.platform)}`\" \r\n                  :alt=\"agent.platform || 'coze'\" \r\n                  style=\"width: 18px; height: 18px; margin-right: 8px;\"\r\n                />\r\n                <span>{{ agent.name }}</span>\r\n              </div>\r\n            </el-option>\r\n          </el-select>\r\n        </div>\r\n        <!--  -->\r\n        <div class=\"form-item\" v-if=\"staffForm.chatType === 'single' || staffForm.chatType === 'all'\">\r\n          <div class=\"section-header\">\r\n            <div class=\"title-group\">\r\n              <h3></h3>\r\n              <p class=\"description\">AI</p>\r\n            </div>\r\n            <el-button \r\n              v-if=\"isEdit\"\r\n              type=\"warning\" \r\n              size=\"small\"\r\n              @click=\"resetTags\"\r\n              :disabled=\"staffForm.selectedTags.length === 0\"\r\n            >\r\n              \r\n            </el-button>\r\n          </div>\r\n          <el-checkbox-group v-model=\"staffForm.selectedTags\">\r\n            <el-checkbox \r\n              v-for=\"tag in props.contactTags\" \r\n              :key=\"tag.id\" \r\n              :label=\"tag.id\"\r\n            >\r\n              {{ tag.name }}\r\n            </el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n        <!--  -->\r\n        <div class=\"form-item\" v-if=\"staffForm.chatType === 'group'\">\r\n          <div class=\"section-header\">\r\n            <div class=\"title-group\">\r\n              <h3></h3>\r\n              <p class=\"description\">AI</p>\r\n            </div>\r\n            <el-button \r\n              v-if=\"isEdit\"\r\n              type=\"warning\" \r\n              size=\"small\"\r\n              @click=\"resetTags\"\r\n              :disabled=\"staffForm.selectedTags.length === 0\"\r\n            >\r\n              \r\n            </el-button>\r\n          </div>\r\n          <el-checkbox-group v-model=\"staffForm.selectedTags\">\r\n            <el-checkbox \r\n              v-for=\"tag in props.groupTags\" \r\n              :key=\"tag.id\" \r\n              :label=\"tag.id\"\r\n            >\r\n              {{ tag.name }}\r\n            </el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n        \r\n        <!--  -->\r\n        <!-- <div class=\"form-item\">\r\n          <div class=\"section-header\">\r\n            <div class=\"title-group\">\r\n              <h3></h3>\r\n              <p class=\"description\"></p>\r\n            </div>\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\"\r\n              @click=\"addKeyword\"\r\n              :disabled=\"staffForm.keywords.length >= 20\"\r\n            >\r\n              \r\n            </el-button>\r\n          </div>\r\n          <div class=\"keywords-list\">\r\n            <el-tag\r\n              v-for=\"(keyword, index) in staffForm.keywords\"\r\n              :key=\"index\"\r\n              closable\r\n              @close=\"removeKeyword(index)\"\r\n            >\r\n              {{ keyword }}\r\n            </el-tag>\r\n            <el-input\r\n              v-if=\"keywordInputVisible\"\r\n              ref=\"keywordInputRef\"\r\n              v-model=\"keywordInputValue\"\r\n              class=\"keyword-input\"\r\n              size=\"small\"\r\n              @keyup.enter=\"confirmKeyword\"\r\n              @blur=\"confirmKeyword\"\r\n            />\r\n          </div>\r\n        </div> -->\r\n      </div>\r\n      \r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"saveStaff\"></el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { ref, computed, nextTick, PropType, watch } from 'vue'\r\n  import { ElMessage } from 'element-plus'\r\n  import { Tag } from '@/api/contact'\r\n  // \r\n  const getPlatformIconExtension = (platform?: string) => {\r\n    if (platform === 'dify') return 'png'\r\n    if (platform === 'yuanqi') return 'png'\r\n    return 'svg'\r\n  }\r\n  // \r\n  const props = defineProps({\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    staff: {\r\n      type: Object as PropType<{\r\n        id: string\r\n        name: string\r\n        enabled: boolean\r\n        agentId: string\r\n        chatType: 'single' | 'group' | 'all'\r\n        selectedTags: string[]\r\n        keywords: string[]\r\n        readGroupMember?: boolean\r\n      }>,\r\n      default: undefined\r\n    },\r\n    isEdit: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    cozeAgents: {\r\n      type: Array as PropType<Array<{\r\n        name: string,\r\n        botId: string,\r\n        platform: string\r\n      }>>,\r\n      default: () => []\r\n    },\r\n    contactTags: {\r\n      type: Array as PropType<Tag[]>,\r\n      default: () => []\r\n    },\r\n    groupTags: {\r\n      type: Array as PropType<Tag[]>,\r\n      default: () => []\r\n    },\r\n    hasGroupStaff: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  })\r\n  \r\n  // \r\n  const emit = defineEmits(['update:visible', 'save'])\r\n  const isEditingGroupStaff = computed(() => {\r\n    return props.isEdit && props.staff?.chatType === 'group'\r\n  })\r\n  // \r\n  const dialogVisible = computed({\r\n    get: () => props.visible,\r\n    set: (val) => emit('update:visible', val)\r\n  })\r\n  \r\n  // \r\n  const staffForm = ref({\r\n    id: '',\r\n    name: '',\r\n    enabled: true,\r\n    agentId: '',\r\n    chatType: 'single' as 'single' | 'group' | 'all',\r\n    selectedTags: [] as string[],\r\n    keywords: [] as string[],\r\n    readGroupMember: false\r\n  })\r\n  \r\n  // \r\n  const keywordInputVisible = ref(false)\r\n  const keywordInputValue = ref('')\r\n  const keywordInputRef = ref<HTMLInputElement | null>(null)\r\n  \r\n  // staff\r\n  watch(() => props.staff, (newVal) => {\r\n    if (newVal) {\r\n      const staffData = JSON.parse(JSON.stringify(newVal))\r\n      staffForm.value = {\r\n        ...staffData,\r\n        readGroupMember: staffData.readGroupMember ?? false\r\n      }\r\n    }\r\n  }, { immediate: true })\r\n  \r\n  // \r\n  const addKeyword = () => {\r\n    keywordInputVisible.value = true\r\n    nextTick(() => {\r\n      keywordInputRef.value?.focus()\r\n    })\r\n  }\r\n  \r\n  const confirmKeyword = () => {\r\n    if (keywordInputValue.value.trim()) {\r\n      if (!staffForm.value.keywords.includes(keywordInputValue.value.trim())) {\r\n        staffForm.value.keywords.push(keywordInputValue.value.trim())\r\n      }\r\n    }\r\n    keywordInputVisible.value = false\r\n    keywordInputValue.value = ''\r\n  }\r\n  \r\n  const removeKeyword = (index: number) => {\r\n    staffForm.value.keywords.splice(index, 1)\r\n  }\r\n  \r\n  // \r\n  const resetTags = () => {\r\n    staffForm.value.selectedTags = []\r\n    ElMessage.success('')\r\n  }\r\n  \r\n  // \r\n  const saveStaff = () => {\r\n    // \r\n    if (!staffForm.value.name.trim()) {\r\n      ElMessage.error('')\r\n      return\r\n    }\r\n    \r\n    if (!staffForm.value.agentId) {\r\n      ElMessage.error('')\r\n      return\r\n    }\r\n    \r\n    emit('save', staffForm.value)\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .staff-form {\r\n  padding: 12px 0;\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 18px;\r\n  padding: 16px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 8px;\r\n  border: 1px solid #ebeef5;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.03);\r\n}\r\n\r\n.form-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\nh3 {\r\n  margin: 0 0 12px 0;\r\n  font-size: 16px;\r\n  color: #303133;\r\n  position: relative;\r\n  padding-left: 12px;\r\n  border-left: 3px solid #409eff;\r\n}\r\n\r\n.description {\r\n  margin: 8px 0 16px;\r\n  font-size: 14px;\r\n  color: #909399;\r\n  line-height: 1.4;\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.title-group {\r\n  flex: 1;\r\n}\r\n\r\n.title-group h3 {\r\n  margin: 0;\r\n  line-height: 1.2;\r\n}\r\n\r\n.keywords-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n  background-color: #fff;\r\n  padding: 12px;\r\n  border-radius: 6px;\r\n  border: 1px dashed #dcdfe6;\r\n}\r\n\r\n.el-tag {\r\n  margin-right: 8px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.keyword-input {\r\n  width: 120px;\r\n  margin-right: 8px;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n:deep(.el-checkbox-group) {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n  background-color: #fff;\r\n  padding: 12px;\r\n  border-radius: 6px;\r\n  border: 1px solid #ebeef5;\r\n}\r\n\r\n:deep(.el-radio-group) {\r\n  display: flex;\r\n  gap: 24px;\r\n  background-color: #fff;\r\n  padding: 12px;\r\n  border-radius: 6px;\r\n  border: 1px solid #ebeef5;\r\n}\r\n\r\n:deep(.el-input__wrapper),\r\n:deep(.el-select__wrapper) {\r\n  box-shadow: 0 0 0 1px #dcdfe6 inset;\r\n}\r\n\r\n:deep(.el-dialog__header) {\r\n  border-bottom: 1px solid #ebeef5;\r\n  padding-bottom: 16px;\r\n  margin-bottom: 0;\r\n}\r\n\r\n:deep(.el-dialog__title) {\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n}\r\n\r\n:deep(.el-dialog__footer) {\r\n  border-top: 1px solid #ebeef5;\r\n  padding-top: 16px;\r\n}\r\n  </style>","import script from \"./StaffDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StaffDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StaffDialog.vue?vue&type=style&index=0&id=146b4356&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-146b4356\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withKeys as _withKeys } from \"vue\"\n\nconst _hoisted_1 = { class: \"strategy-content\" }\nconst _hoisted_2 = { class: \"config-section\" }\nconst _hoisted_3 = { class: \"section-header\" }\nconst _hoisted_4 = { class: \"staff-list\" }\nconst _hoisted_5 = { class: \"staff-info\" }\nconst _hoisted_6 = { class: \"staff-icon\" }\nconst _hoisted_7 = { class: \"staff-details\" }\nconst _hoisted_8 = { class: \"staff-name\" }\nconst _hoisted_9 = { class: \"staff-tags\" }\nconst _hoisted_10 = { class: \"staff-actions\" }\nconst _hoisted_11 = { class: \"config-section\" }\nconst _hoisted_12 = { class: \"common-config-item\" }\nconst _hoisted_13 = { style: {\"display\":\"flex\",\"justify-content\":\"space-between\",\"align-items\":\"center\"} }\nconst _hoisted_14 = {\n  key: 0,\n  class: \"greeting-group-select\"\n}\nconst _hoisted_15 = { class: \"common-config-item\" }\nconst _hoisted_16 = { class: \"form-item\" }\nconst _hoisted_17 = {\n  class: \"form-item\",\n  style: {\"margin-top\":\"10px\"}\n}\nconst _hoisted_18 = { class: \"common-config-item\" }\nconst _hoisted_19 = { style: {\"display\":\"flex\",\"justify-content\":\"space-between\",\"align-items\":\"center\"} }\nconst _hoisted_20 = {\n  key: 0,\n  class: \"whitelist-input\"\n}\nconst _hoisted_21 = { class: \"common-config-item\" }\nconst _hoisted_22 = { class: \"section-header\" }\nconst _hoisted_23 = { class: \"form-item\" }\nconst _hoisted_24 = { class: \"filter-words-list\" }\nconst _hoisted_25 = { class: \"common-config-item\" }\nconst _hoisted_26 = { style: {\"display\":\"flex\",\"justify-content\":\"space-between\",\"align-items\":\"center\"} }\nconst _hoisted_27 = {\n  key: 0,\n  class: \"file-recognition-config\"\n}\nconst _hoisted_28 = { class: \"form-item\" }\nconst _hoisted_29 = { class: \"form-item\" }\nconst _hoisted_30 = { class: \"path-input-header\" }\nconst _hoisted_31 = { class: \"dialog-footer\" }\n\nimport { ref, computed, nextTick, onMounted, onUnmounted, PropType,watch } from 'vue'\r\n  import { ElMessage } from 'element-plus'\r\n  import { getContactTags, getGroups, Tag } from '@/api/contact'\r\n  import { saveConfig, getConfig } from '@/api/config'\r\n  import StaffDialog from './StaffDialog.vue'\r\n  import {Edit, Delete, QuestionFilled,Plus } from '@element-plus/icons-vue'\r\n  \r\n  interface GreetingGroup {\r\n    id: string\r\n    name: string\r\n    greetings: Array<{\r\n      type: 'text' | 'file'\r\n      content: string\r\n      filePath?: string\r\n    }>\r\n  }\r\n  \r\n  // AI\r\n  interface AIStaff {\r\n    id: string\r\n    name: string\r\n    enabled: boolean\r\n    agentId: string\r\n    chatType: 'single' | 'group' | 'all'\r\n    selectedTags: string[]\r\n    keywords: string[]\r\n    readGroupMember?: boolean\r\n  }\r\n  \r\n  // \r\n  interface CommonConfig {\r\n    groupAtOnly: boolean\r\n    colleagueNamesToIgnore: string\r\n    filterWords: string[]\r\n    autoGreeting: {\r\n      enabled: boolean\r\n      greetingGroupId: string\r\n    }\r\n    fileRecognition: {\r\n      enabled: boolean\r\n      fileTypes: string[]\r\n      filePath: string\r\n    }\r\n    whitelist: {\r\n      enabled: boolean\r\n      names: string\r\n      list: string[]\r\n    }\r\n  }\r\n  \r\n  // \r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AIStaffConfig',\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    cozeAgents: {\r\n      type: Array as PropType<Array<{\r\n        name: string,\r\n        botId: string,\r\n        platform: string\r\n      }>>,\r\n      default: () => []\r\n    }\r\n  },\n  emits: ['update:visible', 'save'],\n  setup(__props, { emit: __emit }) {\n\r\n  const windowWidth = ref(window.innerWidth)\r\n  const handleResize = () => {\r\n    windowWidth.value = window.innerWidth\r\n  }\r\n  \r\n  // \r\n  const props = __props\r\n  \r\n  // \r\n  const emit = __emit\r\n  \r\n  // \r\n  const dialogVisible = computed({\r\n    get: () => props.visible,\r\n    set: (val) => emit('update:visible', val)\r\n  })\r\n  const hasGroupStaff = computed(() => {\r\n  // \r\n  if (isEditMode.value && currentStaff.value?.chatType === 'group') {\r\n    const otherStaffs = staffList.value.filter((_, index) => index !== editingIndex.value)\r\n    return otherStaffs.some(staff => staff.chatType === 'group')\r\n  }\r\n  // \r\n  return staffList.value.some(staff => staff.chatType === 'group')\r\n})\r\n  // \r\n  watch(dialogVisible, async (newVal) => {\r\n    if (newVal) {\r\n      // \r\n      await loadConfig()\r\n      await loadGreetingGroups()\r\n    }\r\n  })\r\n  // \r\n  const activeCollapse = ref(['common'])\r\n  \r\n  // AI\r\n  const staffList = ref<AIStaff[]>([])\r\n  \r\n  // \r\n  const commonConfig = ref<CommonConfig>({\r\n    groupAtOnly: false,\r\n    colleagueNamesToIgnore: '',\r\n    filterWords: [],\r\n    autoGreeting: {\r\n      enabled: false,\r\n      greetingGroupId: ''\r\n    },\r\n    fileRecognition: {\r\n      enabled: false,\r\n      fileTypes: [],\r\n      filePath: ''\r\n    },\r\n    whitelist: {\r\n      enabled: false,\r\n      names: '',\r\n      list: []\r\n    }\r\n  })\r\n  \r\n  // \r\n  const greetingGroups = ref<GreetingGroup[]>([])\r\n  \r\n  // \r\n  const contactTags = ref<Tag[]>([])\r\n  const groupTags = ref<Tag[]>([])\r\n  \r\n  // \r\n  const filterWordInputVisible = ref(false)\r\n  const filterWordInputValue = ref('')\r\n  const filterWordInputRef = ref<HTMLInputElement | null>(null)\r\n  \r\n  // AI\r\n  const staffDialogVisible = ref(false)\r\n  const isEditMode = ref(false)\r\n  const currentStaff = ref<AIStaff | undefined>(undefined)\r\n  const editingIndex = ref(-1)\r\n  \r\n  // \r\n  onMounted(async () => {\r\n    try {\r\n      // \r\n      contactTags.value = await getContactTags()\r\n      try {\r\n        const groups = await getGroups()\r\n        const counter = new Map<string, number>()\r\n        groups.forEach((g: any) => {\r\n          const t = (g?.tag || '').trim()\r\n          if (t) counter.set(t, (counter.get(t) || 0) + 1)\r\n        })\r\n        groupTags.value = Array.from(counter.entries()).map(([name, count]) => ({\r\n          id: name,\r\n          name,\r\n          count\r\n        }))\r\n      } catch (e) {}\r\n      await loadGreetingGroups()\r\n      // \r\n      await loadConfig()\r\n      window.addEventListener('resize', handleResize)\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  })\r\n  \r\n  // \r\n  onUnmounted(() => {\r\n    window.removeEventListener('resize', handleResize)\r\n  })\r\n  \r\n  // \r\n  const loadGreetingGroups = async () => {\r\n    try {\r\n      const result = await getConfig('greeting_config')\r\n      const config = result?.data?.greeting_config?.greeting_config\r\n      if (Array.isArray(config)) {\r\n        greetingGroups.value = config.map((group) => ({\r\n          id: group.name,\r\n          name: group.name,\r\n          greetings: Array.isArray(group.greetings) ? group.greetings : []\r\n        }))\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  \r\n  // \r\n  const loadConfig = async () => {\r\n    try {\r\n      const result = await getConfig('reply_strategy_v2')\r\n      if (result?.success && result?.data) {\r\n        // AI\r\n        staffList.value = result.data.staffList || []\r\n        \r\n        // \r\n        if (result.data.commonConfig) {\r\n          commonConfig.value = {\r\n            groupAtOnly: result.data.commonConfig.groupAtOnly || false,\r\n            colleagueNamesToIgnore: result.data.commonConfig.colleagueNamesToIgnore || '',\r\n            filterWords: result.data.commonConfig.filterWords || [],\r\n            autoGreeting: {\r\n              enabled: result.data.commonConfig.autoGreeting?.enabled || false,\r\n              greetingGroupId: result.data.commonConfig.autoGreeting?.greetingGroupId || ''\r\n            },\r\n            fileRecognition: {\r\n              enabled: result.data.commonConfig.fileRecognition?.enabled || false,\r\n              fileTypes: result.data.commonConfig.fileRecognition?.fileTypes || [],\r\n              filePath: result.data.commonConfig.fileRecognition?.filePath || ''\r\n            },\r\n            whitelist: {\r\n              enabled: result.data.commonConfig.whitelist?.enabled || false,\r\n              names: result.data.commonConfig.whitelist?.names || '',\r\n              list: result.data.commonConfig.whitelist?.list || []\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  \r\n  // \r\n  const saveStrategy = async () => {\r\n    try {\r\n      // \r\n      if (commonConfig.value.fileRecognition.enabled) {\r\n        if (commonConfig.value.fileRecognition.fileTypes.length === 0) {\r\n          ElMessage.error('')\r\n          return\r\n        }\r\n        if (!commonConfig.value.fileRecognition.filePath.trim()) {\r\n          ElMessage.error('')\r\n          return\r\n        }\r\n      }\r\n      // \r\n      if (commonConfig.value.autoGreeting.enabled && !commonConfig.value.autoGreeting.greetingGroupId) {\r\n        ElMessage.error('')\r\n        return\r\n      }\r\n      // \r\n      if (commonConfig.value.whitelist.enabled && !commonConfig.value.whitelist.names?.trim()) {\r\n        ElMessage.error('')\r\n        return\r\n      }\r\n      \r\n      // \r\n      if (commonConfig.value.whitelist.enabled) {\r\n        // nameslist\r\n        const namesList = commonConfig.value.whitelist.names\r\n          .split('//')\r\n          .map(name => name.trim())\r\n          .filter(name => name)\r\n        \r\n        // \r\n        commonConfig.value.whitelist.list = namesList\r\n      } else {\r\n        // list\r\n        commonConfig.value.whitelist.list = []\r\n      }\r\n      \r\n      // \r\n      const config = {\r\n        staffList: staffList.value,\r\n        commonConfig: commonConfig.value\r\n      }\r\n      \r\n      const result = await saveConfig('reply_strategy_v2', config)\r\n      if (result?.success) {\r\n        ElMessage.success('')\r\n        emit('save')\r\n      } else {\r\n        ElMessage.error('')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  const getChatTypeTagType = (type: string) => {\r\n    switch (type) {\r\n      case 'single': return 'success' // \r\n      case 'group': return 'info'    // \r\n      default: return 'info'\r\n    }\r\n  }\r\n  // \r\n  const addFilterWord = () => {\r\n    filterWordInputVisible.value = true\r\n    nextTick(() => {\r\n      filterWordInputRef.value?.focus()\r\n    })\r\n  }\r\n  \r\n  const confirmFilterWord = () => {\r\n    if (filterWordInputValue.value.trim()) {\r\n      if (!commonConfig.value.filterWords.includes(filterWordInputValue.value.trim())) {\r\n        commonConfig.value.filterWords.push(filterWordInputValue.value.trim())\r\n        saveStrategy()\r\n      }\r\n    }\r\n    filterWordInputVisible.value = false\r\n    filterWordInputValue.value = ''\r\n  }\r\n  \r\n  const removeFilterWord = (index: number) => {\r\n    commonConfig.value.filterWords.splice(index, 1)\r\n    saveStrategy()\r\n  }\r\n  \r\n  // AI\r\n  const showAddStaffDialog = () => {\r\n    if (staffList.value.length >= 5) {\r\n      ElMessage.warning('5AI')\r\n      return\r\n    }\r\n    isEditMode.value = false\r\n    currentStaff.value = {\r\n      id: Date.now().toString(),\r\n      name: '',\r\n      enabled: true,\r\n      agentId: '',\r\n      chatType: 'single',\r\n      selectedTags: [],\r\n      keywords: [],\r\n      readGroupMember: false\r\n    }\r\n    staffDialogVisible.value = true\r\n  }\r\n  \r\n  const editStaff = (index: number) => {\r\n    isEditMode.value = true\r\n    currentStaff.value = JSON.parse(JSON.stringify(staffList.value[index]))\r\n    editingIndex.value = index\r\n    staffDialogVisible.value = true\r\n  }\r\n  \r\n  const deleteStaff = (index: number) => {\r\n    staffList.value.splice(index, 1)\r\n    saveStrategy()\r\n  }\r\n  \r\n  const handleStaffSave = (staff: AIStaff) => {\r\n    if (isEditMode.value && editingIndex.value !== -1) {\r\n      staffList.value[editingIndex.value] = staff\r\n    } else {\r\n      staffList.value.push(staff)\r\n    }\r\n    staffDialogVisible.value = false\r\n    saveStrategy()\r\n  }\r\n  \r\n  // \r\n  const getChatTypeText = (type: string) => {\r\n    switch (type) {\r\n      case 'single': return ''\r\n      case 'group': return ''\r\n      case 'all': return ''\r\n      default: return type\r\n    }\r\n  }\r\n  \r\n  const getTagsText = (tags: string[]) => {\r\n    if (tags.length === 0) return ''\r\n    \r\n    const tagNames = tags.map(tagId => {\r\n      const tag = contactTags.value.find(t => t.id === tagId)\r\n      return tag ? tag.name : tagId\r\n    })\r\n    \r\n    if (tagNames.length <= 2) {\r\n      return tagNames.join('')\r\n    } else {\r\n      return `${tagNames[0]}${tagNames[1]}${tagNames.length}`\r\n    }\r\n  }\r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\")!\n  const _component_el_collapse_item = _resolveComponent(\"el-collapse-item\")!\n  const _component_el_collapse = _resolveComponent(\"el-collapse\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_el_dialog, {\n      modelValue: dialogVisible.value,\n      \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((dialogVisible).value = $event)),\n      width: windowWidth.value <= 700 ? '95%' : '700px'\n    }, {\n      header: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n        _createElementVNode(\"div\", { class: \"dialog-header\" }, [\n          _createElementVNode(\"span\", { class: \"dialog-title\" }, \"AI\")\n        ], -1)\n      ]))]),\n      footer: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_31, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[11] || (_cache[11] = ($event: any) => (dialogVisible.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[34] || (_cache[34] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: saveStrategy\n          }, {\n            default: _withCtx(() => [...(_cache[35] || (_cache[35] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_el_alert, {\n          type: \"info\",\n          \"show-icon\": \"\",\n          closable: false,\n          style: {\"margin-bottom\":\"10px\"}\n        }, {\n          default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n            _createElementVNode(\"span\", null, \"AI\", -1)\n          ]))]),\n          _: 1\n        }),\n        _createElementVNode(\"div\", _hoisted_1, [\n          _createElementVNode(\"div\", _hoisted_2, [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"title-group\" }, [\n                _createElementVNode(\"h3\", null, \"AI\"),\n                _createElementVNode(\"p\", { class: \"description\" }, \"AI\")\n              ], -1)),\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                size: \"small\",\n                onClick: showAddStaffDialog,\n                class: \"add-staff-btn\",\n                round: \"\",\n                disabled: staffList.value.length >= 5\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_icon, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(Plus))\n                    ]),\n                    _: 1\n                  }),\n                  _cache[16] || (_cache[16] = _createElementVNode(\"span\", null, \"AI\", -1))\n                ]),\n                _: 1\n              }, 8, [\"disabled\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_4, [\n              (staffList.value.length === 0)\n                ? (_openBlock(), _createBlock(_component_el_empty, {\n                    key: 0,\n                    description: \"AI\"\n                  }))\n                : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(staffList.value, (staff, index) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                      class: \"staff-item\",\n                      key: index\n                    }, [\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"div\", _hoisted_6, [\n                          _createElementVNode(\"img\", {\n                            src: \"/icon/ai_assistant.svg\",\n                            style: _normalizeStyle({ filter: staff.chatType === 'single' ? 'invert(43%) sepia(94%) saturate(1752%) hue-rotate(190deg) brightness(97%) contrast(96%)' : 'none' })\n                          }, null, 4)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                          _createElementVNode(\"div\", _hoisted_8, _toDisplayString(staff.name), 1),\n                          _createElementVNode(\"div\", _hoisted_9, [\n                            _createVNode(_component_el_tag, {\n                              size: \"small\",\n                              type: getChatTypeTagType(staff.chatType)\n                            }, {\n                              default: _withCtx(() => [\n                                _createTextVNode(_toDisplayString(getChatTypeText(staff.chatType)), 1)\n                              ]),\n                              _: 2\n                            }, 1032, [\"type\"]),\n                            (staff.selectedTags.length > 0)\n                              ? (_openBlock(), _createBlock(_component_el_tag, {\n                                  key: 0,\n                                  size: \"small\",\n                                  type: \"success\"\n                                }, {\n                                  default: _withCtx(() => [\n                                    _createTextVNode(_toDisplayString(getTagsText(staff.selectedTags)), 1)\n                                  ]),\n                                  _: 2\n                                }, 1024))\n                              : _createCommentVNode(\"\", true)\n                          ])\n                        ])\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_10, [\n                        _createVNode(_component_el_tooltip, {\n                          content: staff.enabled ? 'AI' : 'AI',\n                          placement: \"top\",\n                          effect: \"light\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_switch, {\n                              modelValue: staff.enabled,\n                              \"onUpdate:modelValue\": ($event: any) => ((staff.enabled) = $event),\n                              onChange: saveStrategy\n                            }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"])\n                          ]),\n                          _: 2\n                        }, 1032, [\"content\"]),\n                        _createVNode(_component_el_button, {\n                          type: \"primary\",\n                          text: \"\",\n                          onClick: ($event: any) => (editStaff(index))\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_icon, null, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(Edit))\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"onClick\"]),\n                        _createVNode(_component_el_button, {\n                          type: \"danger\",\n                          text: \"\",\n                          onClick: ($event: any) => (deleteStaff(index))\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_icon, null, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(Delete))\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"onClick\"])\n                      ])\n                    ]))\n                  }), 128))\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_11, [\n            _createVNode(_component_el_collapse, {\n              modelValue: activeCollapse.value,\n              \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((activeCollapse).value = $event))\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_collapse_item, {\n                  title: \"\",\n                  name: \"common\"\n                }, {\n                  default: _withCtx(() => [\n                    _createElementVNode(\"div\", _hoisted_12, [\n                      _createElementVNode(\"div\", _hoisted_13, [\n                        _cache[18] || (_cache[18] = _createElementVNode(\"div\", null, [\n                          _createElementVNode(\"h3\", null, \"\"),\n                          _createElementVNode(\"p\", { class: \"description\" }, \"\")\n                        ], -1)),\n                        _createVNode(_component_el_switch, {\n                          modelValue: commonConfig.value.autoGreeting.enabled,\n                          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((commonConfig.value.autoGreeting.enabled) = $event))\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      (commonConfig.value.autoGreeting.enabled)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                            _createVNode(_component_el_select, {\n                              modelValue: commonConfig.value.autoGreeting.greetingGroupId,\n                              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((commonConfig.value.autoGreeting.greetingGroupId) = $event)),\n                              placeholder: \"\",\n                              class: \"greeting-select\",\n                              onChange: saveStrategy\n                            }, {\n                              default: _withCtx(() => [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(greetingGroups.value, (group) => {\n                                  return (_openBlock(), _createBlock(_component_el_option, {\n                                    key: group.id,\n                                    label: group.name,\n                                    value: group.id\n                                  }, null, 8, [\"label\", \"value\"]))\n                                }), 128))\n                              ]),\n                              _: 1\n                            }, 8, [\"modelValue\"])\n                          ]))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_15, [\n                      _cache[21] || (_cache[21] = _createElementVNode(\"h3\", null, \"\", -1)),\n                      _cache[22] || (_cache[22] = _createElementVNode(\"p\", { class: \"description\" }, \"\", -1)),\n                      _createElementVNode(\"div\", _hoisted_16, [\n                        _createVNode(_component_el_checkbox, {\n                          modelValue: commonConfig.value.groupAtOnly,\n                          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((commonConfig.value.groupAtOnly) = $event))\n                        }, {\n                          default: _withCtx(() => [...(_cache[19] || (_cache[19] = [\n                            _createTextVNode(\"@\", -1)\n                          ]))]),\n                          _: 1\n                        }, 8, [\"modelValue\"])\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_17, [\n                        _createVNode(_component_el_input, {\n                          modelValue: commonConfig.value.colleagueNamesToIgnore,\n                          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((commonConfig.value.colleagueNamesToIgnore) = $event)),\n                          placeholder: \"\",\n                          clearable: \"\"\n                        }, null, 8, [\"modelValue\"]),\n                        _cache[20] || (_cache[20] = _createElementVNode(\"p\", {\n                          class: \"el-form-item__hint\",\n                          style: {\"font-size\":\"12px\",\"color\":\"#909399\",\"line-height\":\"1.5\",\"margin-top\":\"5px\"}\n                        }, \" \\\"//\\\" \", -1))\n                      ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_18, [\n                      _createElementVNode(\"div\", _hoisted_19, [\n                        _cache[23] || (_cache[23] = _createElementVNode(\"div\", null, [\n                          _createElementVNode(\"h3\", null, \"\"),\n                          _createElementVNode(\"p\", { class: \"description\" }, \"\")\n                        ], -1)),\n                        _createVNode(_component_el_switch, {\n                          modelValue: commonConfig.value.whitelist.enabled,\n                          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((commonConfig.value.whitelist.enabled) = $event))\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      (commonConfig.value.whitelist.enabled)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                            _createVNode(_component_el_input, {\n                              modelValue: commonConfig.value.whitelist.names,\n                              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((commonConfig.value.whitelist.names) = $event)),\n                              type: \"textarea\",\n                              rows: 3,\n                              placeholder: \"\\\"//\\\"//\"\n                            }, null, 8, [\"modelValue\"]),\n                            _cache[24] || (_cache[24] = _createElementVNode(\"p\", { class: \"input-tip\" }, \"\\\"//\\\"//\", -1))\n                          ]))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_21, [\n                      _createElementVNode(\"div\", _hoisted_22, [\n                        _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"title-group\" }, [\n                          _createElementVNode(\"h3\", null, \"\"),\n                          _createElementVNode(\"p\", { class: \"description\" }, \"AI\")\n                        ], -1)),\n                        _createVNode(_component_el_button, {\n                          type: \"primary\",\n                          size: \"small\",\n                          onClick: addFilterWord,\n                          disabled: commonConfig.value.filterWords.length >= 5\n                        }, {\n                          default: _withCtx(() => [...(_cache[25] || (_cache[25] = [\n                            _createTextVNode(\"  \", -1)\n                          ]))]),\n                          _: 1\n                        }, 8, [\"disabled\"])\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_23, [\n                        _createElementVNode(\"div\", _hoisted_24, [\n                          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(commonConfig.value.filterWords, (word, index) => {\n                            return (_openBlock(), _createBlock(_component_el_tag, {\n                              key: index,\n                              closable: \"\",\n                              onClose: ($event: any) => (removeFilterWord(index))\n                            }, {\n                              default: _withCtx(() => [\n                                _createTextVNode(_toDisplayString(word), 1)\n                              ]),\n                              _: 2\n                            }, 1032, [\"onClose\"]))\n                          }), 128)),\n                          (filterWordInputVisible.value)\n                            ? (_openBlock(), _createBlock(_component_el_input, {\n                                key: 0,\n                                ref_key: \"filterWordInputRef\",\n                                ref: filterWordInputRef,\n                                modelValue: filterWordInputValue.value,\n                                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((filterWordInputValue).value = $event)),\n                                class: \"keyword-input\",\n                                size: \"small\",\n                                onKeyup: _withKeys(confirmFilterWord, [\"enter\"]),\n                                onBlur: confirmFilterWord\n                              }, null, 8, [\"modelValue\"]))\n                            : _createCommentVNode(\"\", true)\n                        ])\n                      ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_25, [\n                      _createElementVNode(\"div\", _hoisted_26, [\n                        _cache[27] || (_cache[27] = _createElementVNode(\"div\", null, [\n                          _createElementVNode(\"h3\", null, \"\"),\n                          _createElementVNode(\"p\", { class: \"description\" }, \"Coze\")\n                        ], -1)),\n                        _createVNode(_component_el_switch, {\n                          modelValue: commonConfig.value.fileRecognition.enabled,\n                          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((commonConfig.value.fileRecognition.enabled) = $event))\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      (commonConfig.value.fileRecognition.enabled)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [\n                            _createElementVNode(\"div\", _hoisted_28, [\n                              _cache[32] || (_cache[32] = _createElementVNode(\"h4\", null, \"\", -1)),\n                              _createVNode(_component_el_checkbox_group, {\n                                modelValue: commonConfig.value.fileRecognition.fileTypes,\n                                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((commonConfig.value.fileRecognition.fileTypes) = $event))\n                              }, {\n                                default: _withCtx(() => [\n                                  _createVNode(_component_el_checkbox, { label: \"word\" }, {\n                                    default: _withCtx(() => [...(_cache[28] || (_cache[28] = [\n                                      _createTextVNode(\"Word\", -1)\n                                    ]))]),\n                                    _: 1\n                                  }),\n                                  _createVNode(_component_el_checkbox, { label: \"pdf\" }, {\n                                    default: _withCtx(() => [...(_cache[29] || (_cache[29] = [\n                                      _createTextVNode(\"PDF\", -1)\n                                    ]))]),\n                                    _: 1\n                                  }),\n                                  _createVNode(_component_el_checkbox, { label: \"excel\" }, {\n                                    default: _withCtx(() => [...(_cache[30] || (_cache[30] = [\n                                      _createTextVNode(\"Excel\", -1)\n                                    ]))]),\n                                    _: 1\n                                  }),\n                                  _createVNode(_component_el_checkbox, { label: \"image\" }, {\n                                    default: _withCtx(() => [...(_cache[31] || (_cache[31] = [\n                                      _createTextVNode(\"\", -1)\n                                    ]))]),\n                                    _: 1\n                                  })\n                                ]),\n                                _: 1\n                              }, 8, [\"modelValue\"])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_29, [\n                              _createElementVNode(\"div\", _hoisted_30, [\n                                _cache[33] || (_cache[33] = _createElementVNode(\"h4\", null, \"\", -1)),\n                                _createVNode(_component_el_tooltip, {\n                                  effect: \"dark\",\n                                  content: \"D:\\\\ProgramData\\\\tencent_cache\\\\WeChat Files\\\\ABC123\",\n                                  placement: \"top\"\n                                }, {\n                                  default: _withCtx(() => [\n                                    _createVNode(_component_el_icon, null, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_unref(QuestionFilled))\n                                      ]),\n                                      _: 1\n                                    })\n                                  ]),\n                                  _: 1\n                                })\n                              ]),\n                              _createVNode(_component_el_input, {\n                                modelValue: commonConfig.value.fileRecognition.filePath,\n                                \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((commonConfig.value.fileRecognition.filePath) = $event)),\n                                placeholder: \"\",\n                                onChange: saveStrategy\n                              }, null, 8, [\"modelValue\"])\n                            ])\n                          ]))\n                        : _createCommentVNode(\"\", true)\n                    ])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"])\n          ])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\", \"width\"]),\n    _createVNode(StaffDialog, {\n      visible: staffDialogVisible.value,\n      \"onUpdate:visible\": _cache[13] || (_cache[13] = ($event: any) => ((staffDialogVisible).value = $event)),\n      staff: currentStaff.value,\n      \"is-edit\": isEditMode.value,\n      \"coze-agents\": props.cozeAgents,\n      \"contact-tags\": contactTags.value,\n      \"group-tags\": groupTags.value,\n      \"has-group-staff\": hasGroupStaff.value,\n      onSave: handleStaffSave\n    }, null, 8, [\"visible\", \"staff\", \"is-edit\", \"coze-agents\", \"contact-tags\", \"group-tags\", \"has-group-staff\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n    <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      :width=\"windowWidth <= 700 ? '95%' : '700px'\"\r\n    >\r\n      <template #header>\r\n        <div class=\"dialog-header\">\r\n          <span class=\"dialog-title\">AI</span>\r\n          <!-- <span class=\"dialog-subtitle\"></span> -->\r\n        </div>\r\n      </template>\r\n      <el-alert\r\n        type=\"info\"\r\n        show-icon\r\n        :closable=\"false\"\r\n        style=\"margin-bottom: 10px;\"\r\n      >\r\n        <span>AI</span>\r\n      </el-alert>\r\n      <div class=\"strategy-content\">\r\n        <!-- AI -->\r\n        <div class=\"config-section\">\r\n          <div class=\"section-header\">\r\n            <div class=\"title-group\">\r\n              <h3>AI</h3>\r\n              <p class=\"description\">AI</p>\r\n            </div>\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\"\r\n              @click=\"showAddStaffDialog\"\r\n              class=\"add-staff-btn\"\r\n              round\r\n              :disabled=\"staffList.length >= 5\"\r\n            >\r\n              <el-icon><Plus /></el-icon>\r\n              <span>AI</span>\r\n            </el-button>\r\n          </div>\r\n          \r\n          <div class=\"staff-list\">\r\n            <el-empty v-if=\"staffList.length === 0\" description=\"AI\" />\r\n            <div v-else class=\"staff-item\" v-for=\"(staff, index) in staffList\" :key=\"index\">\r\n              <div class=\"staff-info\">\r\n                <!--  AI  -->\r\n                <div class=\"staff-icon\">\r\n                  <img src=\"/icon/ai_assistant.svg\" :style=\"{ filter: staff.chatType === 'single' ? 'invert(43%) sepia(94%) saturate(1752%) hue-rotate(190deg) brightness(97%) contrast(96%)' : 'none' }\" />\r\n                </div>\r\n                <div class=\"staff-details\">\r\n                  <div class=\"staff-name\">{{ staff.name }}</div>\r\n                  <div class=\"staff-tags\">\r\n                    <el-tag size=\"small\" :type=\"getChatTypeTagType(staff.chatType)\">{{ getChatTypeText(staff.chatType) }}</el-tag>\r\n                    <el-tag size=\"small\" type=\"success\" v-if=\"staff.selectedTags.length > 0\">{{ getTagsText(staff.selectedTags) }}</el-tag>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"staff-actions\">\r\n                <el-tooltip\r\n                  :content=\"staff.enabled ? 'AI' : 'AI'\"\r\n                  placement=\"top\"\r\n                  effect=\"light\"\r\n                >\r\n                  <el-switch v-model=\"staff.enabled\" @change=\"saveStrategy\" />\r\n                </el-tooltip>\r\n                <el-button type=\"primary\" text @click=\"editStaff(index)\">\r\n                  <el-icon><Edit /></el-icon>\r\n                </el-button>\r\n                <el-button type=\"danger\" text @click=\"deleteStaff(index)\">\r\n                  <el-icon><Delete /></el-icon>\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!--  -->\r\n        <div class=\"config-section\">\r\n          <el-collapse v-model=\"activeCollapse\">\r\n            <el-collapse-item title=\"\" name=\"common\">\r\n              <!--  -->\r\n              <div class=\"common-config-item\">\r\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n                <div>\r\n                  <h3></h3>\r\n                  <p class=\"description\"></p>\r\n                </div>\r\n                <el-switch v-model=\"commonConfig.autoGreeting.enabled\"/>\r\n              </div>\r\n              \r\n              <!--  -->\r\n              <div v-if=\"commonConfig.autoGreeting.enabled\" class=\"greeting-group-select\">\r\n                <el-select \r\n                  v-model=\"commonConfig.autoGreeting.greetingGroupId\" \r\n                  placeholder=\"\"\r\n                  class=\"greeting-select\"\r\n                  @change=\"saveStrategy\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"group in greetingGroups\"\r\n                    :key=\"group.id\"\r\n                    :label=\"group.name\"\r\n                    :value=\"group.id\"\r\n                  />\r\n                </el-select>\r\n              </div>\r\n            </div>\r\n              \r\n              <!--  -->\r\n              <div class=\"common-config-item\">\r\n                <h3></h3>\r\n                <p class=\"description\"></p>\r\n                <div class=\"form-item\">\r\n                  <el-checkbox v-model=\"commonConfig.groupAtOnly\">@</el-checkbox>\r\n                </div>\r\n                <div class=\"form-item\" style=\"margin-top: 10px;\">\r\n                  <!-- <p class=\"description\"></p> -->\r\n                  <el-input\r\n                    v-model=\"commonConfig.colleagueNamesToIgnore\"\r\n                    placeholder=\"\"\r\n                    clearable\r\n                  ></el-input>\r\n                  <p class=\"el-form-item__hint\" style=\"font-size: 12px; color: #909399; line-height: 1.5; margin-top: 5px;\">\r\n                    \"//\"\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              <!--  -->\r\n              <div class=\"common-config-item\">\r\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n                  <div>\r\n                    <h3></h3>\r\n                    <p class=\"description\"></p>\r\n                  </div>\r\n                  <el-switch v-model=\"commonConfig.whitelist.enabled\"/>\r\n                </div>\r\n                \r\n                <!--  -->\r\n                <div v-if=\"commonConfig.whitelist.enabled\" class=\"whitelist-input\">\r\n                  <el-input\r\n                    v-model=\"commonConfig.whitelist.names\"\r\n                    type=\"textarea\"\r\n                    :rows=\"3\"\r\n                    placeholder='\"//\"//'\r\n                  />\r\n                  <p class=\"input-tip\">\"//\"//</p>\r\n                </div>\r\n              </div>\r\n              \r\n              <!--  -->\r\n              <div class=\"common-config-item\">\r\n                <div class=\"section-header\">\r\n                  <div class=\"title-group\">\r\n                    <h3></h3>\r\n                    <p class=\"description\">AI</p>\r\n                  </div>\r\n                  <el-button \r\n                    type=\"primary\" \r\n                    size=\"small\"\r\n                    @click=\"addFilterWord\"\r\n                    :disabled=\"commonConfig.filterWords.length >= 5\"\r\n                  >\r\n                    \r\n                  </el-button>\r\n                </div>\r\n                <div class=\"form-item\">\r\n                  <div class=\"filter-words-list\">\r\n                    <el-tag\r\n                      v-for=\"(word, index) in commonConfig.filterWords\"\r\n                      :key=\"index\"\r\n                      closable\r\n                      @close=\"removeFilterWord(index)\"\r\n                    >\r\n                      {{ word }}\r\n                    </el-tag>\r\n                    <el-input\r\n                      v-if=\"filterWordInputVisible\"\r\n                      ref=\"filterWordInputRef\"\r\n                      v-model=\"filterWordInputValue\"\r\n                      class=\"keyword-input\"\r\n                      size=\"small\"\r\n                      @keyup.enter=\"confirmFilterWord\"\r\n                      @blur=\"confirmFilterWord\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <!--  -->\r\n              <div class=\"common-config-item\">\r\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n                  <div>\r\n                    <h3></h3>\r\n                    <p class=\"description\">Coze</p>\r\n                  </div>\r\n                  <el-switch v-model=\"commonConfig.fileRecognition.enabled\"/>\r\n                </div>\r\n                \r\n                <!--  -->\r\n                <div v-if=\"commonConfig.fileRecognition.enabled\" class=\"file-recognition-config\">\r\n                    <div class=\"form-item\">\r\n                      <h4></h4>\r\n                      <el-checkbox-group v-model=\"commonConfig.fileRecognition.fileTypes\">\r\n                        <el-checkbox label=\"word\">Word</el-checkbox>\r\n                        <el-checkbox label=\"pdf\">PDF</el-checkbox>\r\n                        <el-checkbox label=\"excel\">Excel</el-checkbox>\r\n                        <el-checkbox label=\"image\"></el-checkbox>\r\n                      </el-checkbox-group>\r\n                    </div>\r\n                    \r\n                    <div class=\"form-item\">\r\n                      <div class=\"path-input-header\">\r\n                        <h4></h4>\r\n                        <el-tooltip \r\n                          effect=\"dark\" \r\n                          content=\"D:\\ProgramData\\tencent_cache\\WeChat Files\\ABC123\"\r\n                          placement=\"top\"\r\n                        >\r\n                          <el-icon><QuestionFilled /></el-icon>\r\n                        </el-tooltip>\r\n                      </div>\r\n                      <el-input \r\n                        v-model=\"commonConfig.fileRecognition.filePath\" \r\n                        placeholder=\"\"\r\n                        @change=\"saveStrategy\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n            </el-collapse-item>\r\n          </el-collapse>\r\n        </div>\r\n      </div>\r\n  \r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"saveStrategy\"></el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n    \r\n    <!-- AI/ -->\r\n    <staff-dialog\r\n      v-model:visible=\"staffDialogVisible\"\r\n      :staff=\"currentStaff\"\r\n      :is-edit=\"isEditMode\"\r\n      :coze-agents=\"props.cozeAgents\"\r\n      :contact-tags=\"contactTags\"\r\n      :group-tags=\"groupTags\"\r\n      :has-group-staff=\"hasGroupStaff\"\r\n      @save=\"handleStaffSave\"\r\n    />\r\n  </template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { ref, computed, nextTick, onMounted, onUnmounted, PropType,watch } from 'vue'\r\n  import { ElMessage } from 'element-plus'\r\n  import { getContactTags, getGroups, Tag } from '@/api/contact'\r\n  import { saveConfig, getConfig } from '@/api/config'\r\n  import StaffDialog from './StaffDialog.vue'\r\n  import {Edit, Delete, QuestionFilled,Plus } from '@element-plus/icons-vue'\r\n  \r\n  const windowWidth = ref(window.innerWidth)\r\n  const handleResize = () => {\r\n    windowWidth.value = window.innerWidth\r\n  }\r\n  \r\n  // \r\n  const props = defineProps({\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    cozeAgents: {\r\n      type: Array as PropType<Array<{\r\n        name: string,\r\n        botId: string,\r\n        platform: string\r\n      }>>,\r\n      default: () => []\r\n    }\r\n  })\r\n  \r\n  // \r\n  interface GreetingGroup {\r\n    id: string\r\n    name: string\r\n    greetings: Array<{\r\n      type: 'text' | 'file'\r\n      content: string\r\n      filePath?: string\r\n    }>\r\n  }\r\n  \r\n  // AI\r\n  interface AIStaff {\r\n    id: string\r\n    name: string\r\n    enabled: boolean\r\n    agentId: string\r\n    chatType: 'single' | 'group' | 'all'\r\n    selectedTags: string[]\r\n    keywords: string[]\r\n    readGroupMember?: boolean\r\n  }\r\n  \r\n  // \r\n  interface CommonConfig {\r\n    groupAtOnly: boolean\r\n    colleagueNamesToIgnore: string\r\n    filterWords: string[]\r\n    autoGreeting: {\r\n      enabled: boolean\r\n      greetingGroupId: string\r\n    }\r\n    fileRecognition: {\r\n      enabled: boolean\r\n      fileTypes: string[]\r\n      filePath: string\r\n    }\r\n    whitelist: {\r\n      enabled: boolean\r\n      names: string\r\n      list: string[]\r\n    }\r\n  }\r\n  \r\n  // \r\n  const emit = defineEmits(['update:visible', 'save'])\r\n  \r\n  // \r\n  const dialogVisible = computed({\r\n    get: () => props.visible,\r\n    set: (val) => emit('update:visible', val)\r\n  })\r\n  const hasGroupStaff = computed(() => {\r\n  // \r\n  if (isEditMode.value && currentStaff.value?.chatType === 'group') {\r\n    const otherStaffs = staffList.value.filter((_, index) => index !== editingIndex.value)\r\n    return otherStaffs.some(staff => staff.chatType === 'group')\r\n  }\r\n  // \r\n  return staffList.value.some(staff => staff.chatType === 'group')\r\n})\r\n  // \r\n  watch(dialogVisible, async (newVal) => {\r\n    if (newVal) {\r\n      // \r\n      await loadConfig()\r\n      await loadGreetingGroups()\r\n    }\r\n  })\r\n  // \r\n  const activeCollapse = ref(['common'])\r\n  \r\n  // AI\r\n  const staffList = ref<AIStaff[]>([])\r\n  \r\n  // \r\n  const commonConfig = ref<CommonConfig>({\r\n    groupAtOnly: false,\r\n    colleagueNamesToIgnore: '',\r\n    filterWords: [],\r\n    autoGreeting: {\r\n      enabled: false,\r\n      greetingGroupId: ''\r\n    },\r\n    fileRecognition: {\r\n      enabled: false,\r\n      fileTypes: [],\r\n      filePath: ''\r\n    },\r\n    whitelist: {\r\n      enabled: false,\r\n      names: '',\r\n      list: []\r\n    }\r\n  })\r\n  \r\n  // \r\n  const greetingGroups = ref<GreetingGroup[]>([])\r\n  \r\n  // \r\n  const contactTags = ref<Tag[]>([])\r\n  const groupTags = ref<Tag[]>([])\r\n  \r\n  // \r\n  const filterWordInputVisible = ref(false)\r\n  const filterWordInputValue = ref('')\r\n  const filterWordInputRef = ref<HTMLInputElement | null>(null)\r\n  \r\n  // AI\r\n  const staffDialogVisible = ref(false)\r\n  const isEditMode = ref(false)\r\n  const currentStaff = ref<AIStaff | undefined>(undefined)\r\n  const editingIndex = ref(-1)\r\n  \r\n  // \r\n  onMounted(async () => {\r\n    try {\r\n      // \r\n      contactTags.value = await getContactTags()\r\n      try {\r\n        const groups = await getGroups()\r\n        const counter = new Map<string, number>()\r\n        groups.forEach((g: any) => {\r\n          const t = (g?.tag || '').trim()\r\n          if (t) counter.set(t, (counter.get(t) || 0) + 1)\r\n        })\r\n        groupTags.value = Array.from(counter.entries()).map(([name, count]) => ({\r\n          id: name,\r\n          name,\r\n          count\r\n        }))\r\n      } catch (e) {}\r\n      await loadGreetingGroups()\r\n      // \r\n      await loadConfig()\r\n      window.addEventListener('resize', handleResize)\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  })\r\n  \r\n  // \r\n  onUnmounted(() => {\r\n    window.removeEventListener('resize', handleResize)\r\n  })\r\n  \r\n  // \r\n  const loadGreetingGroups = async () => {\r\n    try {\r\n      const result = await getConfig('greeting_config')\r\n      const config = result?.data?.greeting_config?.greeting_config\r\n      if (Array.isArray(config)) {\r\n        greetingGroups.value = config.map((group) => ({\r\n          id: group.name,\r\n          name: group.name,\r\n          greetings: Array.isArray(group.greetings) ? group.greetings : []\r\n        }))\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  \r\n  // \r\n  const loadConfig = async () => {\r\n    try {\r\n      const result = await getConfig('reply_strategy_v2')\r\n      if (result?.success && result?.data) {\r\n        // AI\r\n        staffList.value = result.data.staffList || []\r\n        \r\n        // \r\n        if (result.data.commonConfig) {\r\n          commonConfig.value = {\r\n            groupAtOnly: result.data.commonConfig.groupAtOnly || false,\r\n            colleagueNamesToIgnore: result.data.commonConfig.colleagueNamesToIgnore || '',\r\n            filterWords: result.data.commonConfig.filterWords || [],\r\n            autoGreeting: {\r\n              enabled: result.data.commonConfig.autoGreeting?.enabled || false,\r\n              greetingGroupId: result.data.commonConfig.autoGreeting?.greetingGroupId || ''\r\n            },\r\n            fileRecognition: {\r\n              enabled: result.data.commonConfig.fileRecognition?.enabled || false,\r\n              fileTypes: result.data.commonConfig.fileRecognition?.fileTypes || [],\r\n              filePath: result.data.commonConfig.fileRecognition?.filePath || ''\r\n            },\r\n            whitelist: {\r\n              enabled: result.data.commonConfig.whitelist?.enabled || false,\r\n              names: result.data.commonConfig.whitelist?.names || '',\r\n              list: result.data.commonConfig.whitelist?.list || []\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  \r\n  // \r\n  const saveStrategy = async () => {\r\n    try {\r\n      // \r\n      if (commonConfig.value.fileRecognition.enabled) {\r\n        if (commonConfig.value.fileRecognition.fileTypes.length === 0) {\r\n          ElMessage.error('')\r\n          return\r\n        }\r\n        if (!commonConfig.value.fileRecognition.filePath.trim()) {\r\n          ElMessage.error('')\r\n          return\r\n        }\r\n      }\r\n      // \r\n      if (commonConfig.value.autoGreeting.enabled && !commonConfig.value.autoGreeting.greetingGroupId) {\r\n        ElMessage.error('')\r\n        return\r\n      }\r\n      // \r\n      if (commonConfig.value.whitelist.enabled && !commonConfig.value.whitelist.names?.trim()) {\r\n        ElMessage.error('')\r\n        return\r\n      }\r\n      \r\n      // \r\n      if (commonConfig.value.whitelist.enabled) {\r\n        // nameslist\r\n        const namesList = commonConfig.value.whitelist.names\r\n          .split('//')\r\n          .map(name => name.trim())\r\n          .filter(name => name)\r\n        \r\n        // \r\n        commonConfig.value.whitelist.list = namesList\r\n      } else {\r\n        // list\r\n        commonConfig.value.whitelist.list = []\r\n      }\r\n      \r\n      // \r\n      const config = {\r\n        staffList: staffList.value,\r\n        commonConfig: commonConfig.value\r\n      }\r\n      \r\n      const result = await saveConfig('reply_strategy_v2', config)\r\n      if (result?.success) {\r\n        ElMessage.success('')\r\n        emit('save')\r\n      } else {\r\n        ElMessage.error('')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  const getChatTypeTagType = (type: string) => {\r\n    switch (type) {\r\n      case 'single': return 'success' // \r\n      case 'group': return 'info'    // \r\n      default: return 'info'\r\n    }\r\n  }\r\n  // \r\n  const addFilterWord = () => {\r\n    filterWordInputVisible.value = true\r\n    nextTick(() => {\r\n      filterWordInputRef.value?.focus()\r\n    })\r\n  }\r\n  \r\n  const confirmFilterWord = () => {\r\n    if (filterWordInputValue.value.trim()) {\r\n      if (!commonConfig.value.filterWords.includes(filterWordInputValue.value.trim())) {\r\n        commonConfig.value.filterWords.push(filterWordInputValue.value.trim())\r\n        saveStrategy()\r\n      }\r\n    }\r\n    filterWordInputVisible.value = false\r\n    filterWordInputValue.value = ''\r\n  }\r\n  \r\n  const removeFilterWord = (index: number) => {\r\n    commonConfig.value.filterWords.splice(index, 1)\r\n    saveStrategy()\r\n  }\r\n  \r\n  // AI\r\n  const showAddStaffDialog = () => {\r\n    if (staffList.value.length >= 5) {\r\n      ElMessage.warning('5AI')\r\n      return\r\n    }\r\n    isEditMode.value = false\r\n    currentStaff.value = {\r\n      id: Date.now().toString(),\r\n      name: '',\r\n      enabled: true,\r\n      agentId: '',\r\n      chatType: 'single',\r\n      selectedTags: [],\r\n      keywords: [],\r\n      readGroupMember: false\r\n    }\r\n    staffDialogVisible.value = true\r\n  }\r\n  \r\n  const editStaff = (index: number) => {\r\n    isEditMode.value = true\r\n    currentStaff.value = JSON.parse(JSON.stringify(staffList.value[index]))\r\n    editingIndex.value = index\r\n    staffDialogVisible.value = true\r\n  }\r\n  \r\n  const deleteStaff = (index: number) => {\r\n    staffList.value.splice(index, 1)\r\n    saveStrategy()\r\n  }\r\n  \r\n  const handleStaffSave = (staff: AIStaff) => {\r\n    if (isEditMode.value && editingIndex.value !== -1) {\r\n      staffList.value[editingIndex.value] = staff\r\n    } else {\r\n      staffList.value.push(staff)\r\n    }\r\n    staffDialogVisible.value = false\r\n    saveStrategy()\r\n  }\r\n  \r\n  // \r\n  const getChatTypeText = (type: string) => {\r\n    switch (type) {\r\n      case 'single': return ''\r\n      case 'group': return ''\r\n      case 'all': return ''\r\n      default: return type\r\n    }\r\n  }\r\n  \r\n  const getTagsText = (tags: string[]) => {\r\n    if (tags.length === 0) return ''\r\n    \r\n    const tagNames = tags.map(tagId => {\r\n      const tag = contactTags.value.find(t => t.id === tagId)\r\n      return tag ? tag.name : tagId\r\n    })\r\n    \r\n    if (tagNames.length <= 2) {\r\n      return tagNames.join('')\r\n    } else {\r\n      return `${tagNames[0]}${tagNames[1]}${tagNames.length}`\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n.strategy-content {\r\n  padding: 10px 0;\r\n  background-color: #fff; /*  */\r\n}\r\n\r\n.config-section {\r\n  margin-bottom: 24px;\r\n  padding: 15px;\r\n  background: #fff;\r\n  border-radius: 12px;\r\n  border: 1px solid #e4e7ed;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);\r\n}\r\n\r\n.config-section:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.title-group {\r\n  flex: 1;\r\n}\r\n\r\n.title-group h3 {\r\n  margin: 0;\r\n  line-height: 1.2;\r\n  font-size: 16px;\r\n  color: #303133;\r\n}\r\n\r\n.description {\r\n  margin: 8px 0 16px;\r\n  font-size: 14px;\r\n  color: #909399;\r\n  line-height: 1.4;\r\n}\r\n\r\n.form-item {\r\n  margin-top: 16px;\r\n}\r\n\r\n.staff-list {\r\n  margin-top: 16px;\r\n}\r\n\r\n/*  */\r\n:deep(.el-empty) {\r\n  padding: 10px 0;\r\n}\r\n:deep(.el-empty__image) {\r\n  width: 80px; /*  */\r\n  height: 80px;\r\n}\r\n:deep(.el-empty__description) {\r\n  margin-top: 8px; /*  */\r\n}\r\n\r\n.staff-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px;\r\n  margin-bottom: 12px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.staff-info {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.staff-icon {\r\n  margin-right: 12px;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.staff-icon img {\r\n  width: 24px;\r\n  height: 24px;\r\n}\r\n.staff-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.staff-name {\r\n  font-weight: bold;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.staff-tags {\r\n  display: flex;\r\n  gap: 8px;\r\n  height: 32px;\r\n}\r\n\r\n.staff-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px; /*  */\r\n}\r\n\r\n.staff-actions .el-button {\r\n  padding: 8px; /*  */\r\n  margin: 0; /*  */\r\n}\r\n\r\n.staff-actions .el-icon {\r\n  font-size: 18px; /*  */\r\n}\r\n\r\n.common-config-item {\r\n  margin-bottom: 24px;\r\n  padding-bottom: 24px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  position: relative; /*  */\r\n}\r\n\r\n.common-config-item:last-child {\r\n  margin-bottom: 0;\r\n  padding-bottom: 0;\r\n  border-bottom: none;\r\n}\r\n:deep(.el-collapse-item__content) {\r\n  padding: 16px;\r\n  background-color: #fff;\r\n  /* border: 1px solid #e4e7ed; */\r\n  border-radius: 4px;\r\n}\r\n\r\n.filter-words-list {\r\n  margin-top: 12px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.el-tag {\r\n  margin-right: 8px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.keyword-input {\r\n  width: 120px;\r\n  margin-right: 8px;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.whitelist-input {\r\n  margin-top: 10px;\r\n}\r\n\r\n.input-tip {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-top: 5px;\r\n}\r\n\r\n.file-recognition-config {\r\n  margin-top: 16px;\r\n  padding: 16px;\r\n  background: #f0f2f5;\r\n  border-radius: 8px;\r\n}\r\n\r\n.path-input-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.path-input-header h4 {\r\n  margin: 0;\r\n}\r\n\r\n.file-recognition-config h4 {\r\n  margin: 0 0 8px 0;\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.dialog-header {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 0 0;\r\n}\r\n\r\n.dialog-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  color: #303133;\r\n}\r\n\r\n.dialog-subtitle {\r\n  margin-top: 8px;\r\n  font-size: 14px;\r\n  color: #909399;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  padding-top: 20px;\r\n}\r\n\r\n/*  */\r\n:deep(.el-dialog) {\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n}\r\n\r\n:deep(.el-dialog__body) {\r\n  padding: 0 24px;\r\n}\r\n\r\n:deep(.el-dialog__header) {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n:deep(.el-dialog__footer) {\r\n  padding: 16px 24px 24px;\r\n}\r\n\r\n:deep(.el-collapse) {\r\n  border: none;\r\n}\r\n\r\n:deep(.el-collapse-item__header) {\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  color: #303133;\r\n  border-bottom: none;\r\n  padding: 8px 0;\r\n}\r\n\r\n:deep(.el-collapse-item__wrap) {\r\n  border-bottom: none;\r\n}\r\n\r\n:deep(.el-checkbox-group) {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n}\r\n\r\n:deep(.el-radio-group) {\r\n  display: flex;\r\n  gap: 24px;\r\n}\r\n\r\n.greeting-group-select {\r\n  margin-top: 10px;\r\n}\r\n\r\n.greeting-select {\r\n  width: 100%;\r\n}\r\n</style>","import script from \"./AIStaffConfig.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AIStaffConfig.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AIStaffConfig.vue?vue&type=style&index=0&id=1f3f8f1c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1f3f8f1c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"error-dialog-content\" }\nconst _hoisted_2 = { class: \"error-header\" }\nconst _hoisted_3 = { class: \"error-title\" }\nconst _hoisted_4 = { class: \"error-body\" }\nconst _hoisted_5 = { class: \"error-message-box\" }\nconst _hoisted_6 = { class: \"main-content\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"error-detail-wrapper\"\n}\nconst _hoisted_8 = { class: \"error-detail-text\" }\nconst _hoisted_9 = { class: \"error-footer\" }\n\nimport { computed } from 'vue'\nimport { WarningFilled } from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CommonErrorDialog',\n  props: {\n    visible: { type: Boolean },\n    title: {},\n    content: {},\n    errorDetail: {}\n  },\n  emits: ['update:visible', 'close'],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props\n\nconst emit = __emit\n\nconst dialogVisible = computed({\n  get: () => props.visible,\n  set: (val) => emit('update:visible', val)\n})\n\nconst handleClose = () => {\n  dialogVisible.value = false\n  emit('close')\n}\n\nconst handleCopyError = async () => {\n  if (props.errorDetail) {\n    try {\n      await navigator.clipboard.writeText(props.errorDetail)\n      ElMessage.success('')\n    } catch (err) {\n      console.error(':', err)\n      ElMessage.error('')\n    }\n  }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((dialogVisible).value = $event)),\n    \"show-close\": false,\n    width: \"420px\",\n    class: \"common-error-dialog\",\n    center: \"\",\n    \"align-center\": \"\",\n    \"destroy-on-close\": \"\"\n  }, {\n    header: _withCtx(() => [...(_cache[1] || (_cache[1] = [\n      _createElementVNode(\"div\", { class: \"my-header\" }, null, -1)\n    ]))]),\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createVNode(_component_el_icon, {\n            class: \"error-icon\",\n            size: 48,\n            color: \"#F56C6C\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_unref(WarningFilled))\n            ]),\n            _: 1\n          }),\n          _createElementVNode(\"h3\", _hoisted_3, _toDisplayString(__props.title), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createElementVNode(\"p\", _hoisted_6, _toDisplayString(__props.content), 1),\n            (__props.errorDetail)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                  _cache[2] || (_cache[2] = _createElementVNode(\"p\", { class: \"error-detail-title\" }, \"\", -1)),\n                  _createElementVNode(\"p\", _hoisted_8, _toDisplayString(__props.errorDetail), 1)\n                ]))\n              : _createCommentVNode(\"\", true)\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          (__props.errorDetail)\n            ? (_openBlock(), _createBlock(_component_el_button, {\n                key: 0,\n                onClick: handleCopyError,\n                class: \"copy-btn\",\n                size: \"large\"\n              }, {\n                default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                  _createTextVNode(\"\", -1)\n                ]))]),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: handleClose,\n            class: \"close-btn\",\n            size: \"large\"\n          }, {\n            default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\n  <el-dialog\n    v-model=\"dialogVisible\"\n    :show-close=\"false\"\n    width=\"420px\"\n    class=\"common-error-dialog\"\n    center\n    align-center\n    destroy-on-close\n  >\n    <template #header>\n      <div class=\"my-header\"></div>\n    </template>\n    <div class=\"error-dialog-content\">\n      <div class=\"error-header\">\n        <el-icon class=\"error-icon\" :size=\"48\" color=\"#F56C6C\"><WarningFilled /></el-icon>\n        <h3 class=\"error-title\">{{ title }}</h3>\n      </div>\n      \n      <div class=\"error-body\">\n        <div class=\"error-message-box\">\n            <p class=\"main-content\">{{ content }}</p>\n            <div v-if=\"errorDetail\" class=\"error-detail-wrapper\">\n              <p class=\"error-detail-title\"></p>\n              <p class=\"error-detail-text\">{{ errorDetail }}</p>\n            </div>\n        </div>\n      </div>\n      \n      <div class=\"error-footer\">\n        <el-button v-if=\"errorDetail\" @click=\"handleCopyError\" class=\"copy-btn\" size=\"large\"></el-button>\n        <el-button type=\"primary\" @click=\"handleClose\" class=\"close-btn\" size=\"large\"></el-button>\n      </div>\n    </div>\n  </el-dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { WarningFilled } from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\n\nconst props = defineProps<{\n  visible: boolean\n  title: string\n  content: string\n  errorDetail?: string\n}>()\n\nconst emit = defineEmits(['update:visible', 'close'])\n\nconst dialogVisible = computed({\n  get: () => props.visible,\n  set: (val) => emit('update:visible', val)\n})\n\nconst handleClose = () => {\n  dialogVisible.value = false\n  emit('close')\n}\n\nconst handleCopyError = async () => {\n  if (props.errorDetail) {\n    try {\n      await navigator.clipboard.writeText(props.errorDetail)\n      ElMessage.success('')\n    } catch (err) {\n      console.error(':', err)\n      ElMessage.error('')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.error-dialog-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 10px 10px;\n}\n\n.error-header {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 24px;\n}\n\n.error-icon {\n  margin-bottom: 16px;\n}\n\n.error-title {\n  font-size: 20px;\n  font-weight: 600;\n  color: #303133;\n  margin: 0;\n  line-height: 1.4;\n}\n\n.error-body {\n  width: 100%;\n  margin-bottom: 30px;\n}\n\n.error-message-box {\n  background-color: #f5f7fa;\n  border-radius: 8px;\n  padding: 20px;\n  color: #606266;\n  font-size: 14px;\n  line-height: 1.6;\n  width: 100%;\n  box-sizing: border-box;\n  text-align: left;\n}\n\n.main-content {\n  white-space: pre-wrap; \n  word-break: break-all;\n  margin: 0;\n}\n\n.error-detail-wrapper {\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #ebeef5;\n}\n\n.error-detail-title {\n  font-weight: bold;\n  color: #303133;\n  margin: 0 0 8px 0;\n}\n\n.error-detail-text {\n  color: #F56C6C;\n  white-space: pre-wrap; \n  word-break: break-all;\n  margin: 0;\n}\n\n.error-footer {\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  gap: 12px;\n}\n\n.close-btn, .copy-btn {\n  width: 140px;\n  border-radius: 8px;\n}\n</style>\n","import script from \"./CommonErrorDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CommonErrorDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CommonErrorDialog.vue?vue&type=style&index=0&id=c1ada4e4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c1ada4e4\"]])\n\nexport default __exports__","import { ref, computed } from 'vue'\r\nimport { headers } from '@/api/config'\r\n// \r\nexport enum TaskStatus {\r\n  PENDING = 'pending',\r\n  PROCESSING = 'processing',\r\n  COMPLETED = 'completed',\r\n  FAILED = 'failed',\r\n  CANCELLED = 'cancelled'\r\n}\r\n\r\n// \r\nexport enum TaskPriority {\r\n  LOW = 1,\r\n  MEDIUM = 2,\r\n  HIGH = 3,\r\n  URGENT = 4,\r\n  CRITICAL = 5\r\n}\r\n\r\n// \r\nexport interface TaskLog {\r\n  timestamp: Date;\r\n  targetName: string;\r\n  content: string;\r\n  status: 'completed' | 'failed' | 'cancelled';\r\n  error?: string;\r\n  chatType: 'single' | 'group';  // \r\n}\r\n\r\n// \r\nexport interface ChatTask {\r\n  id: string;\r\n  sessionId: number;\r\n  userName: string;\r\n  content: string;\r\n  priority: TaskPriority;\r\n  status: TaskStatus;\r\n  createTime: number;\r\n  startTime?: number;\r\n  endTime?: number;\r\n  isGroup: boolean;\r\n  retryCount: number;\r\n  lastError?: string;\r\n  messageNum: number; // \r\n}\r\n\r\nexport class TaskQueue {\r\n  private tasks = ref<ChatTask[]>([]);\r\n  private taskLogs = ref<TaskLog[]>([]);  // \r\n  private messageNumLock = ref<boolean>(false);\r\n  // \r\n  private lastAutoReplies = new Map<number, string>();\r\n  \r\n  constructor() {\r\n    // \r\n    this.loadTaskLogs();\r\n  }\r\n  private maxConcurrent = 1; // \r\n  private processing = ref<Set<string>>(new Set()); // ID\r\n // \r\n public getQueueLength(): number {\r\n  const length = this.tasks.value.filter(task => \r\n    task.status === TaskStatus.PENDING || \r\n    task.status === TaskStatus.PROCESSING\r\n  ).length;\r\n  console.log(':', length);\r\n  return length;\r\n}\r\n  // \r\n  public sortedTasks = computed(() => {\r\n    return [...this.tasks.value].sort((a, b) => {\r\n      // \r\n      if (b.priority !== a.priority) {\r\n        return b.priority - a.priority;\r\n      }\r\n      // \r\n      return a.createTime - b.createTime;\r\n    });\r\n  });\r\n  // \r\n  public async loadTaskLogs() {\r\n    try {\r\n      const response = await fetch('/api/chat/logs', {\r\n        headers: headers\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        this.taskLogs.value = data.logs.map((log: any) => ({\r\n          timestamp: new Date(log.timestamp),\r\n          targetName: log.targetName || log.session_name,  // \r\n          content: log.content,\r\n          status: log.status,\r\n          error: log.error,\r\n          chatType: log.chatType || (log.content?.includes('') ? 'group' : 'single')  // \r\n        }));\r\n        \r\n        // \r\n        this.taskLogs.value.sort((a, b) => b.timestamp.getTime() - a.timestamp.getTime());\r\n        \r\n      }\r\n    } catch (error) {\r\n      console.error(':', error);\r\n    }\r\n  }\r\n  // \r\n  public markTaskAsCancelled(taskId: string, reason = '') {\r\n    const task = this.tasks.value.find(t => t.id === taskId);\r\n    if (task) {\r\n      task.status = TaskStatus.CANCELLED;\r\n      task.lastError = reason;\r\n      task.messageNum = 0; // \r\n      console.log('',task.content)\r\n    }\r\n  }\r\n  // \r\n  public addTask(task: Omit<ChatTask, 'id' | 'createTime' | 'status' | 'retryCount' | 'messageNum'>) {\r\n    const waitLock = () => {\r\n      if (this.messageNumLock.value) {\r\n        return new Promise(resolve => setTimeout(() => resolve(waitLock()), 10));\r\n      }\r\n      return Promise.resolve();\r\n    };\r\n\r\n    waitLock().then(() => {\r\n      try {\r\n        this.messageNumLock.value = true;\r\n        \r\n        // \r\n        const existingTask = this.tasks.value.find(t => \r\n          t.userName === task.userName && \r\n          // (t.status === TaskStatus.PENDING || t.status === TaskStatus.PROCESSING)\r\n          (t.status === TaskStatus.PENDING)\r\n        );\r\n        \r\n        if (existingTask) {\r\n          // \r\n          existingTask.messageNum = (existingTask.messageNum || 0) + 1;\r\n          console.log(` - ${task.userName}: ${existingTask.messageNum}`);\r\n        } else {\r\n          // 1\r\n          const newTask: ChatTask = {\r\n            ...task,\r\n            id: `task_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n            createTime: Date.now(),\r\n            status: TaskStatus.PENDING,\r\n            retryCount: 0,\r\n            messageNum: 1\r\n          };\r\n          this.tasks.value.push(newTask);\r\n          console.log(` - ${task.userName}:  1`);\r\n          this.processNextTask();\r\n        }\r\n      } finally {\r\n        this.messageNumLock.value = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  // \r\n  private getNextTask(): ChatTask | undefined {\r\n    return this.sortedTasks.value.find(task => \r\n      task.status === TaskStatus.PENDING || \r\n      (task.status === TaskStatus.FAILED && task.retryCount < 3)\r\n    );\r\n  }\r\n\r\n  // \r\n  private async processNextTask() {\r\n    if (this.processing.value.size >= this.maxConcurrent) {\r\n      return;\r\n    }\r\n\r\n    const task = this.getNextTask();\r\n    if (!task) {\r\n      return;\r\n    }\r\n\r\n    this.processing.value.add(task.id);\r\n    task.status = TaskStatus.PROCESSING;\r\n    task.startTime = Date.now();\r\n\r\n    try {\r\n      await this.processTask(task);\r\n      \r\n      task.status = TaskStatus.COMPLETED;\r\n      task.endTime = Date.now();\r\n      task.messageNum = 0; // \r\n\r\n      // \r\n      const isGroupChat = task.content.includes('') || task.isGroup;\r\n      console.log(\"\")\r\n      this.addTaskLog({\r\n        timestamp: new Date(),\r\n        targetName: task.userName,\r\n        content: task.content,\r\n        status: 'completed',\r\n        chatType: isGroupChat ? 'group' : 'single'\r\n      });\r\n    } catch (error: Error | unknown) {\r\n      const err = error as Error\r\n      console.error(\"\",err.message)\r\n      task.status = TaskStatus.FAILED;\r\n      task.lastError = err.message;\r\n      task.retryCount++;\r\n      \r\n       // \r\n       if (task.retryCount >= 3) {\r\n        task.messageNum = 0; // \r\n        this.addTaskLog({\r\n          timestamp: new Date(),\r\n          targetName: task.userName,\r\n          content: task.content,\r\n          status: 'failed',\r\n          error: err.message,\r\n          chatType: task.isGroup ? 'group' : 'single'\r\n        });\r\n      }\r\n    } finally {\r\n      this.processing.value.delete(task.id);\r\n      this.processNextTask();\r\n    }\r\n  }\r\n\r\n   // \r\n   private async addTaskLog(log: TaskLog) {\r\n    try {\r\n      // \r\n      const response = await fetch('/api/chat/logs', {\r\n        method: 'POST',\r\n        headers: headers,\r\n        body: JSON.stringify(log)\r\n      });\r\n\r\n      if (response.ok) {\r\n        this.taskLogs.value.unshift(log);\r\n        if (this.taskLogs.value.length > 100) {\r\n          this.taskLogs.value = this.taskLogs.value.slice(0, 100);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error);\r\n    }\r\n  }\r\n  // \r\n  public getTaskLogs(): TaskLog[] {\r\n    return this.taskLogs.value;\r\n  }\r\n\r\n  //  24 \r\n  public cleanOldLogs() {\r\n    const twentyFourHoursAgo = Date.now() - 24 * 60 * 60 * 1000;\r\n    this.taskLogs.value = this.taskLogs.value.filter(\r\n      log => log.timestamp.getTime() > twentyFourHoursAgo\r\n    );\r\n  }\r\n  private taskHandler?: (task: ChatTask) => Promise<void>;\r\n  // \r\n  public setTaskHandler(handler: (task: ChatTask) => Promise<void>) {\r\n    this.taskHandler = handler;\r\n  }\r\n  // \r\n  private async processTask(task: ChatTask): Promise<void> {\r\n    if (!this.taskHandler) {\r\n      throw new Error('Task handler not set');\r\n    }\r\n    await this.taskHandler(task);\r\n  }\r\n  public hasDuplicateTask(userName: string, isGroup: boolean): boolean {\r\n    return this.tasks.value.some(task => \r\n      task.userName === userName && \r\n      task.isGroup === isGroup &&\r\n      (task.status === TaskStatus.PENDING)\r\n    );\r\n  }\r\n\r\n  // \r\n  public getTaskMessageNum(userName: string): number {\r\n    const task = this.tasks.value.find(t => t.userName === userName);\r\n    return task?.messageNum || 0;\r\n  }\r\n\r\n  // \r\n  public getTaskStatus(taskId: string): TaskStatus | undefined {\r\n    const task = this.tasks.value.find(t => t.id === taskId);\r\n    return task?.status;\r\n  }\r\n\r\n  // \r\n  public cancelTask(taskId: string): boolean {\r\n    const task = this.tasks.value.find(t => t.id === taskId);\r\n    if (task && task.status === TaskStatus.PENDING) {\r\n      task.status = TaskStatus.FAILED;\r\n      task.lastError = 'Task cancelled';\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // \r\n  public cleanCompletedTasks() {\r\n    this.tasks.value = this.tasks.value.filter(task => \r\n      task.status !== TaskStatus.COMPLETED\r\n    );\r\n  }\r\n\r\n  // \r\n  public getQueueStats() {\r\n    const stats = {\r\n      total: this.tasks.value.length,\r\n      pending: 0,\r\n      processing: 0,\r\n      completed: 0,\r\n      failed: 0,\r\n      cancelled: 0\r\n    };\r\n\r\n    this.tasks.value.forEach(task => {\r\n      stats[task.status]++;\r\n    });\r\n\r\n    return stats;\r\n  }\r\n\r\n    // \r\n    public recordAutoReply(sessionId: number, content: string) {\r\n      console.log()\r\n      this.lastAutoReplies.set(sessionId, content);\r\n    }\r\n  \r\n    // \r\n    public isAutoReplyMessage(sessionId: number, content: string): boolean {\r\n      const lastReply = this.lastAutoReplies.get(sessionId);\r\n      return lastReply === content;\r\n    }\r\n}\r\n\r\n// \r\nexport const taskQueue = new TaskQueue();","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { computed, onMounted,onUnmounted,ref  } from 'vue'\r\n  import dayjs from 'dayjs'\r\n  import { taskQueue } from '@/utils/TaskQueue'\r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ReplyLogDialog',\n  props: {\n    visible: { type: Boolean }\n  },\n  emits: ['update:visible'],\n  setup(__props: any, { emit: __emit }) {\n\r\n  const windowWidth = ref(window.innerWidth)\r\n  const props = __props\r\n  const handleResize = () => {\r\n  windowWidth.value = window.innerWidth\r\n}\r\n  // \r\nconst loadLogs = async () => {\r\n  await taskQueue.loadTaskLogs()\r\n}\r\n  const emit = __emit\r\n  \r\n  const dialogVisible = computed({\r\n    get: () => props.visible,\r\n    set: (value) => emit('update:visible', value)\r\n  })\r\n  const handleDialogOpen = () => {\r\n  loadLogs()\r\n  console.log(':', filteredLogs.value)\r\n}\r\n  // 24\r\n  const filteredLogs = computed(() => {\r\n    return taskQueue.getTaskLogs()\r\n  })\r\n  // \r\nonMounted(() => {\r\n  loadLogs()\r\n  window.addEventListener('resize', handleResize)\r\n})\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', () => {\r\n    windowWidth.value = window.innerWidth\r\n  })\r\n})\r\n  const formatTime = (timestamp: Date) => {\r\n    return dayjs(timestamp).format('MM-DD HH:mm:ss')\r\n  }\r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((dialogVisible).value = $event)),\n    title: \"\",\n    width: windowWidth.value <= 700 ? '95%' : '95%',\n    onOpen: handleDialogOpen\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_el_table, {\n        data: filteredLogs.value,\n        style: {\"width\":\"100%\"},\n        \"max-height\": \"500px\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_table_column, {\n            prop: \"timestamp\",\n            label: \"\",\n            width: \"120\"\n          }, {\n            default: _withCtx(({ row }) => [\n              _createTextVNode(_toDisplayString(formatTime(row.timestamp)), 1)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"targetName\",\n            label: \"\",\n            width: \"80\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"chatType\",\n            label: \"\",\n            width: \"70\"\n          }, {\n            default: _withCtx(({ row }) => [\n              _createVNode(_component_el_tag, {\n                size: \"small\",\n                type: row.chatType === 'group' ? 'warning' : 'info'\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(row.chatType === 'group' ? '' : ''), 1)\n                ]),\n                _: 2\n              }, 1032, [\"type\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"content\",\n            label: \"AI\",\n            \"show-overflow-tooltip\": \"\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"status\",\n            label: \"\",\n            width: \"70\"\n          }, {\n            default: _withCtx(({ row }) => [\n              _createVNode(_component_el_tag, {\n                type: row.status === 'completed' ? 'success' : 'danger',\n                size: \"small\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(row.status === 'completed' ? '' : ''), 1)\n                ]),\n                _: 2\n              }, 1032, [\"type\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"data\"])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\", \"width\"]))\n}\n}\n\n})","<template>\r\n    <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      title=\"\"\r\n      :width=\"windowWidth <= 700 ? '95%' : '95%'\"\r\n      @open=\"handleDialogOpen\"\r\n    >\r\n      <el-table :data=\"filteredLogs\" style=\"width: 100%\" max-height=\"500px\">\r\n        <el-table-column prop=\"timestamp\" label=\"\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            {{ formatTime(row.timestamp) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"targetName\" label=\"\" width=\"80\" />\r\n         <!--  -->\r\n        <el-table-column prop=\"chatType\" label=\"\" width=\"70\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag size=\"small\" :type=\"row.chatType === 'group' ? 'warning' : 'info'\">\r\n              {{ row.chatType === 'group' ? '' : '' }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"content\" label=\"AI\" show-overflow-tooltip />\r\n        <el-table-column prop=\"status\" label=\"\" width=\"70\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag :type=\"row.status === 'completed' ? 'success' : 'danger'\" size=\"small\">\r\n              {{ row.status === 'completed' ? '' : '' }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { computed, onMounted,onUnmounted,ref  } from 'vue'\r\n  import dayjs from 'dayjs'\r\n  import { taskQueue } from '@/utils/TaskQueue'\r\n  const windowWidth = ref(window.innerWidth)\r\n  const props = defineProps<{\r\n    visible: boolean\r\n  }>()\r\n  const handleResize = () => {\r\n  windowWidth.value = window.innerWidth\r\n}\r\n  // \r\nconst loadLogs = async () => {\r\n  await taskQueue.loadTaskLogs()\r\n}\r\n  const emit = defineEmits(['update:visible'])\r\n  \r\n  const dialogVisible = computed({\r\n    get: () => props.visible,\r\n    set: (value) => emit('update:visible', value)\r\n  })\r\n  const handleDialogOpen = () => {\r\n  loadLogs()\r\n  console.log(':', filteredLogs.value)\r\n}\r\n  // 24\r\n  const filteredLogs = computed(() => {\r\n    return taskQueue.getTaskLogs()\r\n  })\r\n  // \r\nonMounted(() => {\r\n  loadLogs()\r\n  window.addEventListener('resize', handleResize)\r\n})\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', () => {\r\n    windowWidth.value = window.innerWidth\r\n  })\r\n})\r\n  const formatTime = (timestamp: Date) => {\r\n    return dayjs(timestamp).format('MM-DD HH:mm:ss')\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .el-dialog :deep(.el-dialog__body) {\r\n    padding: 10px 20px;\r\n  }\r\n  </style>","import script from \"./ReplyLogDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ReplyLogDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ReplyLogDialog.vue?vue&type=style&index=0&id=e65364e8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e65364e8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"stat-card\" }\nconst _hoisted_2 = { class: \"stat-content\" }\nconst _hoisted_3 = { class: \"stat-number\" }\nconst _hoisted_4 = { class: \"stat-card\" }\nconst _hoisted_5 = { class: \"stat-content\" }\nconst _hoisted_6 = { class: \"stat-number\" }\nconst _hoisted_7 = { class: \"stat-card\" }\nconst _hoisted_8 = { class: \"stat-content\" }\nconst _hoisted_9 = { class: \"stat-number\" }\nconst _hoisted_10 = { class: \"stat-trend\" }\n\n\r\n  \r\n  interface Stats {\r\n    sessionCount: number;\r\n    sessionIncrease: number;\r\n    messageCount: number;\r\n    messageIncrease: number;\r\n    savedHours: number;\r\n    savedMoney: number;\r\n  }\r\n  \r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'StatsPanel',\n  props: {\n    expanded: { type: Boolean },\n    stats: {}\n  },\n  setup(__props: any) {\n\r\n  const props = __props;\r\n  \nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"stats-grid\", { expanded: __props.expanded }])\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(__props.stats.sessionCount), 1),\n        _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1)),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"stat-trend\", { 'trend-up': __props.stats.sessionIncrease >= 0, 'trend-down': __props.stats.sessionIncrease < 0 }])\n        }, _toDisplayString(__props.stats.sessionIncrease >= 0 ? '' : '') + \" \" + _toDisplayString(__props.stats.sessionIncrease >= 0 ? '+' : '') + _toDisplayString(__props.stats.sessionIncrease) + \"%  \", 3)\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"div\", _hoisted_6, _toDisplayString(__props.stats.messageCount), 1),\n        _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"\", -1)),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"stat-trend\", { 'trend-up': __props.stats.messageIncrease >= 0, 'trend-down': __props.stats.messageIncrease < 0 }])\n        }, _toDisplayString(__props.stats.messageIncrease >= 0 ? '' : '') + \" \" + _toDisplayString(__props.stats.messageIncrease >= 0 ? '+' : '') + _toDisplayString(__props.stats.messageIncrease) + \"%  \", 3)\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createElementVNode(\"div\", _hoisted_9, _toDisplayString(__props.stats.savedHours), 1),\n        _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"stat-label\" }, \"()\", -1)),\n        _createElementVNode(\"div\", _hoisted_10, \"   \" + _toDisplayString(__props.stats.savedMoney), 1)\n      ])\n    ])\n  ], 2))\n}\n}\n\n})","<template>\r\n  <div class=\"stats-grid\" :class=\"{ expanded: expanded }\">\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-content\">\r\n        <div class=\"stat-number\">{{ stats.sessionCount }}</div>\r\n        <div class=\"stat-label\"></div>\r\n        <div class=\"stat-trend\" :class=\"{ 'trend-up': stats.sessionIncrease >= 0, 'trend-down': stats.sessionIncrease < 0 }\">\r\n          {{ stats.sessionIncrease >= 0 ? '' : '' }} \r\n          {{ stats.sessionIncrease >= 0 ? '+' : '' }}{{ stats.sessionIncrease }}% \r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-content\">\r\n        <div class=\"stat-number\">{{ stats.messageCount }}</div>\r\n        <div class=\"stat-label\"></div>\r\n        <div class=\"stat-trend\" :class=\"{ 'trend-up': stats.messageIncrease >= 0, 'trend-down': stats.messageIncrease < 0 }\">\r\n          {{ stats.messageIncrease >= 0 ? '' : '' }} \r\n          {{ stats.messageIncrease >= 0 ? '+' : '' }}{{ stats.messageIncrease }}% \r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"stat-card\">\r\n      <div class=\"stat-content\">\r\n        <div class=\"stat-number\">{{ stats.savedHours }}</div>\r\n        <div class=\"stat-label\">()</div>\r\n        <div class=\"stat-trend\">\r\n            {{ stats.savedMoney }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { defineProps } from 'vue';\r\n  \r\n  interface Stats {\r\n    sessionCount: number;\r\n    sessionIncrease: number;\r\n    messageCount: number;\r\n    messageIncrease: number;\r\n    savedHours: number;\r\n    savedMoney: number;\r\n  }\r\n  \r\n  const props = defineProps<{\r\n    expanded: boolean;\r\n    stats: Stats;\r\n  }>();\r\n  </script>\r\n  \r\n  <style scoped>\r\n.stats-grid {\r\n  display: flex;\r\n  gap: 15px;\r\n  padding: 0 15px 15px;\r\n  overflow: hidden;\r\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\r\n  opacity: 0;\r\n  max-height: 0;\r\n  transform: translateY(-10px);\r\n}\r\n\r\n.stats-grid.expanded {\r\n  opacity: 1;\r\n  max-height: 120px;\r\n  transform: translateY(0);\r\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\r\n  padding-top: 15px;\r\n}\r\n\r\n.stat-card {\r\n  flex: 1;\r\n  background: rgba(249, 250, 251, 0.95);\r\n  backdrop-filter: blur(10px);\r\n  border-radius: 10px;\r\n  padding: 10px;\r\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n  border: 1px solid rgba(0, 0, 0, 0.03);\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.stat-content {\r\n  text-align: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.stat-card:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.stat-number {\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  color: #2d3748;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 14px;\r\n  color: #718096;\r\n  margin-bottom: 3px;\r\n}\r\n\r\n.stat-trend {\r\n  font-size: 12px;\r\n  color: #48bb78;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 4px;\r\n}\r\n\r\n.trend-up {\r\n  color: #48bb78; /*  */\r\n}\r\n\r\n.trend-down {\r\n  color: #e53e3e; /*  */\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .stats-grid.expanded {\r\n    max-height: 120px;\r\n  }\r\n  \r\n  .stat-number {\r\n    font-size: 20px;\r\n  }\r\n  \r\n  .stat-label {\r\n    font-size: 12px;\r\n  }\r\n  \r\n  .stat-trend {\r\n    font-size: 10px;\r\n  }\r\n}\r\n</style>","import script from \"./StatsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatsPanel.vue?vue&type=style&index=0&id=28885b0a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-28885b0a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"info-text\" }\nconst _hoisted_2 = { class: \"account-status-content\" }\nconst _hoisted_3 = { class: \"account-list\" }\nconst _hoisted_4 = { class: \"account-header\" }\nconst _hoisted_5 = { class: \"account-info\" }\nconst _hoisted_6 = { class: \"account-label\" }\nconst _hoisted_7 = { class: \"account-id\" }\nconst _hoisted_8 = { class: \"account-nickname\" }\nconst _hoisted_9 = { class: \"status-list\" }\nconst _hoisted_10 = { class: \"status-item\" }\nconst _hoisted_11 = { class: \"status-item\" }\nconst _hoisted_12 = { class: \"dialog-footer\" }\n\nimport { computed } from 'vue'\r\n\r\ninterface AccountStatus {\r\n  account_id: string\r\n  nickname: string\r\n  sync_status: {\r\n    synced: boolean\r\n    expired: boolean\r\n    message: string\r\n    error: boolean\r\n  }\r\n  ai_status: {\r\n    configured: boolean\r\n    count: number\r\n    message: string\r\n    error: boolean\r\n  }\r\n}\r\n\r\ninterface Props {\r\n  visible: boolean\r\n  accountList: AccountStatus[]\r\n}\r\n\r\ninterface Emits {\r\n  (e: 'update:visible', value: boolean): void\r\n  (e: 'confirm'): void\r\n}\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AccountStatusDialog',\n  props: {\n    visible: { type: Boolean },\n    accountList: {}\n  },\n  emits: [\"update:visible\", \"confirm\"],\n  setup(__props: any, { emit: __emit }) {\n\r\nconst props = __props\r\nconst emit = __emit\r\n\r\n// computedv-model\r\nconst dialogVisible = computed({\r\n  get: () => props.visible,\r\n  set: (value: boolean) => emit('update:visible', value)\r\n})\r\n\r\n// \r\nconst getAccountStatusLabel = (account: AccountStatus) => {\r\n  const hasError = account.sync_status.error || account.ai_status.error\r\n  return hasError ? '' : ''\r\n}\r\n\r\n// \r\nconst handleConfirm = () => {\r\n  emit('confirm')\r\n  emit('update:visible', false)\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((dialogVisible).value = $event)),\n    title: \"AI\",\n    width: \"600px\",\n    \"close-on-click-modal\": false,\n    class: \"account-status-dialog\"\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_el_alert, {\n        type: \"info\",\n        \"show-icon\": \"\",\n        closable: false,\n        class: \"status-info-banner\"\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"span\", _hoisted_1, \" \" + _toDisplayString(__props.accountList.length) + \" \", 1)\n        ]),\n        _: 1\n      }),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.accountList, (account) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              key: account.account_id,\n              class: \"account-item\"\n            }, [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createElementVNode(\"span\", _hoisted_6, _toDisplayString(getAccountStatusLabel(account)) + \"\", 1),\n                  _createElementVNode(\"span\", _hoisted_7, _toDisplayString(account.account_id), 1),\n                  _createElementVNode(\"span\", _hoisted_8, \"(\" + _toDisplayString(account.nickname) + \")\", 1)\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_9, [\n                _createElementVNode(\"div\", _hoisted_10, [\n                  _createElementVNode(\"span\", {\n                    class: _normalizeClass([\"status-text\", { 'error-text': account.sync_status.error }])\n                  }, _toDisplayString(account.sync_status.message), 3)\n                ]),\n                _createElementVNode(\"div\", _hoisted_11, [\n                  _createElementVNode(\"span\", {\n                    class: _normalizeClass([\"status-text\", { 'error-text': account.ai_status.error }])\n                  }, _toDisplayString(account.ai_status.message), 3)\n                ])\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_12, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            class: \"confirm-button\",\n            onClick: handleConfirm\n          }, {\n            default: _withCtx(() => [...(_cache[1] || (_cache[1] = [\n              _createTextVNode(\"  \", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    title=\"AI\"\r\n    width=\"600px\"\r\n    :close-on-click-modal=\"false\"\r\n    class=\"account-status-dialog\"\r\n  >\r\n    <!--  -->\r\n    <el-alert\r\n      type=\"info\"\r\n      show-icon\r\n      :closable=\"false\"\r\n      class=\"status-info-banner\"\r\n    >\r\n      <span class=\"info-text\"> {{ accountList.length }} </span>\r\n    </el-alert>\r\n    \r\n    <div class=\"account-status-content\">\r\n      <div class=\"account-list\">\r\n        <div \r\n          v-for=\"account in accountList\" \r\n          :key=\"account.account_id\"\r\n          class=\"account-item\"\r\n        >\r\n          <div class=\"account-header\">\r\n            <div class=\"account-info\">\r\n              <span class=\"account-label\">{{ getAccountStatusLabel(account) }}</span>\r\n              <span class=\"account-id\">{{ account.account_id }}</span>\r\n              <span class=\"account-nickname\">({{ account.nickname }})</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"status-list\">\r\n            <div class=\"status-item\">\r\n              <span \r\n                class=\"status-text\"\r\n                :class=\"{ 'error-text': account.sync_status.error }\"\r\n              >\r\n                {{ account.sync_status.message }}\r\n              </span>\r\n            </div>\r\n            \r\n            <div class=\"status-item\">\r\n              <span \r\n                class=\"status-text\"\r\n                :class=\"{ 'error-text': account.ai_status.error }\"\r\n              >\r\n                {{ account.ai_status.message }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"dialog-footer\">\r\n        <el-button \r\n          type=\"primary\" \r\n          class=\"confirm-button\"\r\n          @click=\"handleConfirm\"\r\n        >\r\n          \r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from 'vue'\r\n\r\ninterface AccountStatus {\r\n  account_id: string\r\n  nickname: string\r\n  sync_status: {\r\n    synced: boolean\r\n    expired: boolean\r\n    message: string\r\n    error: boolean\r\n  }\r\n  ai_status: {\r\n    configured: boolean\r\n    count: number\r\n    message: string\r\n    error: boolean\r\n  }\r\n}\r\n\r\ninterface Props {\r\n  visible: boolean\r\n  accountList: AccountStatus[]\r\n}\r\n\r\ninterface Emits {\r\n  (e: 'update:visible', value: boolean): void\r\n  (e: 'confirm'): void\r\n}\r\n\r\nconst props = defineProps<Props>()\r\nconst emit = defineEmits<Emits>()\r\n\r\n// computedv-model\r\nconst dialogVisible = computed({\r\n  get: () => props.visible,\r\n  set: (value: boolean) => emit('update:visible', value)\r\n})\r\n\r\n// \r\nconst getAccountStatusLabel = (account: AccountStatus) => {\r\n  const hasError = account.sync_status.error || account.ai_status.error\r\n  return hasError ? '' : ''\r\n}\r\n\r\n// \r\nconst handleConfirm = () => {\r\n  emit('confirm')\r\n  emit('update:visible', false)\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n.account-status-dialog {\r\n  .el-dialog__header {\r\n    text-align: center;\r\n    padding: 20px 20px 10px;\r\n    border-bottom: 1px solid #f0f0f0;\r\n  }\r\n  \r\n  .el-dialog__title {\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    color: #333;\r\n  }\r\n}\r\n\r\n.status-info-banner {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.info-text {\r\n  font-size: 14px;\r\n  color: #666;\r\n  line-height: 1.5;\r\n}\r\n\r\n.account-status-content {\r\n  padding: 0;\r\n}\r\n\r\n.account-list {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.account-item {\r\n  background: #f8f9fa;\r\n  border-radius: 12px;\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  border: 1px solid #e9ecef;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.account-item:hover {\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.account-header {\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.account-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 14px;\r\n}\r\n\r\n.account-label {\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n.account-id {\r\n  color: #1890ff;\r\n  font-weight: 700;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 15px;\r\n  background: rgba(24, 144, 255, 0.1);\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.account-nickname {\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.status-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px 12px;\r\n  background: white;\r\n  border-radius: 8px;\r\n  border-left: 4px solid #52c41a;\r\n}\r\n\r\n.status-text {\r\n  font-size: 13px;\r\n  color: #333;\r\n  line-height: 1.4;\r\n}\r\n\r\n.error-text {\r\n  color: #ff4d4f !important;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-item:has(.error-text) {\r\n  border-left-color: #ff4d4f;\r\n  background: #fff2f0;\r\n}\r\n\r\n.dialog-footer {\r\n  text-align: center;\r\n  padding-top: 20px;\r\n  border-top: 1px solid #f0f0f0;\r\n  margin-top: 20px;\r\n}\r\n\r\n.confirm-button {\r\n  background: linear-gradient(135deg, #1890ff, #096dd9);\r\n  border: none;\r\n  padding: 12px 32px;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.confirm-button:hover {\r\n  background: linear-gradient(135deg, #096dd9, #0050b3);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 16px rgba(24, 144, 255, 0.3);\r\n}\r\n</style>","import script from \"./AccountStatusDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AccountStatusDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AccountStatusDialog.vue?vue&type=style&index=0&id=03049c1c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-03049c1c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, unref as _unref, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, withModifiers as _withModifiers } from \"vue\"\n\nconst _hoisted_1 = { class: \"ai-chat-container\" }\nconst _hoisted_2 = { class: \"settings-bar\" }\nconst _hoisted_3 = { class: \"settings-content\" }\nconst _hoisted_4 = { class: \"auto-reply-container\" }\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = { class: \"settings-right\" }\nconst _hoisted_7 = { class: \"main-content1\" }\nconst _hoisted_8 = { class: \"chat-list\" }\nconst _hoisted_9 = { class: \"chat-tabs\" }\nconst _hoisted_10 = { class: \"tab-header\" }\nconst _hoisted_11 = { class: \"tab-header-left\" }\nconst _hoisted_12 = { class: \"tab-title\" }\nconst _hoisted_13 = {\n  key: 0,\n  class: \"status-indicator-chat\"\n}\nconst _hoisted_14 = {\n  key: 0,\n  class: \"account-header\"\n}\nconst _hoisted_15 = { class: \"account-title\" }\nconst _hoisted_16 = [\"onClick\"]\nconst _hoisted_17 = { class: \"avatar-wrapper\" }\nconst _hoisted_18 = {\n  key: 0,\n  class: \"unread-dot\"\n}\nconst _hoisted_19 = { class: \"chat-info\" }\nconst _hoisted_20 = { class: \"chat-header\" }\nconst _hoisted_21 = { class: \"chat-title\" }\nconst _hoisted_22 = { class: \"name-tag-container\" }\nconst _hoisted_23 = [\"title\"]\nconst _hoisted_24 = { class: \"chat-time\" }\nconst _hoisted_25 = [\"title\"]\nconst _hoisted_26 = {\n  key: 0,\n  class: \"account-info\"\n}\nconst _hoisted_27 = { class: \"account-id\" }\nconst _hoisted_28 = { class: \"tab-header\" }\nconst _hoisted_29 = { class: \"tab-header-left\" }\nconst _hoisted_30 = { class: \"tab-title\" }\nconst _hoisted_31 = {\n  key: 1,\n  class: \"suspended-list\"\n}\nconst _hoisted_32 = [\"onClick\"]\nconst _hoisted_33 = { class: \"avatar-wrapper\" }\nconst _hoisted_34 = { class: \"suspended-info\" }\nconst _hoisted_35 = { class: \"suspended-header\" }\nconst _hoisted_36 = [\"title\"]\nconst _hoisted_37 = { class: \"suspended-time-row\" }\nconst _hoisted_38 = { class: \"suspended-time\" }\nconst _hoisted_39 = { class: \"account-info\" }\nconst _hoisted_40 = { class: \"account-id\" }\nconst _hoisted_41 = { class: \"tab-header\" }\nconst _hoisted_42 = {\n  key: 0,\n  class: \"account-header\"\n}\nconst _hoisted_43 = { class: \"account-title\" }\nconst _hoisted_44 = [\"onClick\"]\nconst _hoisted_45 = { class: \"avatar-wrapper\" }\nconst _hoisted_46 = { class: \"chat-info\" }\nconst _hoisted_47 = { class: \"chat-header\" }\nconst _hoisted_48 = { class: \"chat-title\" }\nconst _hoisted_49 = { class: \"name-tag-container\" }\nconst _hoisted_50 = [\"title\"]\nconst _hoisted_51 = { class: \"chat-time\" }\nconst _hoisted_52 = [\"title\"]\nconst _hoisted_53 = {\n  key: 0,\n  class: \"account-info\"\n}\nconst _hoisted_54 = { class: \"account-id\" }\nconst _hoisted_55 = { class: \"current-chat-header\" }\nconst _hoisted_56 = { class: \"header-left\" }\nconst _hoisted_57 = { class: \"user-name\" }\nconst _hoisted_58 = {\n  class: \"messages\",\n  ref: \"messageContainer\"\n}\nconst _hoisted_59 = {\n  key: 0,\n  class: \"sender-name\"\n}\nconst _hoisted_60 = { class: \"voice-text\" }\nconst _hoisted_61 = { class: \"input-area\" }\nconst _hoisted_62 = { class: \"message-input-container\" }\nconst _hoisted_63 = { class: \"countdown-content\" }\nconst _hoisted_64 = { class: \"countdown-circle\" }\nconst _hoisted_65 = {\n  width: \"40\",\n  height: \"40\",\n  viewBox: \"0 0 40 40\"\n}\nconst _hoisted_66 = [\"stroke-dasharray\"]\nconst _hoisted_67 = { class: \"countdown-number\" }\nconst _hoisted_68 = { class: \"countdown-text\" }\nconst _hoisted_69 = { class: \"countdown-subtitle\" }\nconst _hoisted_70 = { class: \"input-content\" }\nconst _hoisted_71 = { class: \"input-footer\" }\nconst _hoisted_72 = {\n  key: 1,\n  class: \"empty-chat-container\"\n}\n\nimport { ref, onMounted, onUnmounted, nextTick, watch,computed } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { getLatestSessions, sendChatMessage, ChatSession, \r\n  ChatMessage, getChatMessages, startChatMonitor, stopChatMonitor, \r\n  getMonitorStatus,getStatsData, StatsData,getHistoryMessages,\r\n  getHistorySessions,confirmAutoReply, createAutoReplyTask,updateManualReviewStatus,\r\n  getSuspendedSessions, unsuspendSession, SuspendedSession } from '@/api/chat'\r\nimport AIStaffConfig from '@/components/chat/AIStaffConfig.vue'\r\nimport CommonErrorDialog from '@/components/CommonErrorDialog.vue'\r\nimport {User, Refresh,DocumentCopy, ArrowRight } from '@element-plus/icons-vue'  // \r\nimport ReplyLogDialog from '@/components/chat/ReplyLogDialog.vue'  // \r\nimport StatsPanel from '@/components/chat/StatsPanel.vue'  // \r\nimport AccountStatusDialog from '@/components/chat/AccountStatusDialog.vue'  // \r\nimport { getConfig } from '@/api/config'\r\nimport { useRouter } from 'vue-router'\r\n\r\n// \r\ninterface SyncError {\r\n  message: string;\r\n  type: string;\r\n}\r\n\r\n// \r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AiChatNew',\n  setup(__props) {\n\r\nconst router = useRouter()\r\nconst isSending = ref(false)\r\n// \r\nconst logDialogVisible = ref(false)\r\nconst autoReplyEnabled = ref(false)\r\nconst messageInput = ref('')\r\nconst currentChat = ref<ChatSession | null>(null)\r\nconst loading = ref(false)\r\nconst clearCache = ref(false) // \r\nconst refreshingChat = ref(false)\r\nconst error = ref('')\r\nconst isInitialLoad = ref(true)\r\nconst isInputting = ref(false)\r\nconst currentProcessingName = ref('')\r\nconst strategyDialogVisible = ref(false)\r\nconst selectedStrategy = ref('none')\r\nconst isGenerating = ref(false)\r\nconst isProcessingChat = ref(false)\r\nconst chatList = ref<ChatSession[]>([])\r\nconst messages = ref<ChatMessage[]>([])\r\nconst refreshing = ref(false)\r\nconst isNarrowScreen = ref(window.innerWidth < 600)\r\nconst statsExpanded = ref(false)\r\nconst activeTab = ref('recent')\r\nconst currentTaskId = ref(null)  // ID\r\nconst pendingReply = ref<{task_id: string, content: string, timeout?: number} | null>(null)  // \r\nconst countdownTimer = ref<number | null>(null)  // \r\nconst countdown = ref(0)  // \r\nconst isAutoSending = ref(false)  // \r\nconst manualReviewEnabled = ref(false)  // \r\n\r\n// \r\nconst suspendedList = ref<SuspendedSession[]>([])\r\nconst refreshingSuspended = ref(false)\r\n\r\n// \r\nconst refreshingHistory = ref(false)\r\nconst loadingHistory = ref(false)\r\nconst collapsedGroups = ref<Record<string, boolean>>({})\r\n\r\n// \r\nconst cozeAgents = ref<any[]>([])\r\nconst historySessions = ref<ChatSession[]>([])\r\n// \r\nconst statsData = ref<StatsData>({\r\n  sessionCount: 0,\r\n  sessionIncrease: 0,\r\n  messageCount: 0,\r\n  messageIncrease: 0,\r\n  savedHours: 0,\r\n  savedMoney: 0\r\n})\r\n\r\n// \r\nconst groupedHistoryList = computed(() => {\r\n  const groups: Record<string, { nickname: string, sessions: ChatSession[] }> = {}\r\n  \r\n  historySessions.value.forEach(session => {\r\n    const accountId = session.account_id || 'unknown'\r\n    const nickname = session.account_nickname || ''\r\n    \r\n    if (!groups[accountId]) {\r\n      groups[accountId] = {\r\n        nickname,\r\n        sessions: []\r\n      }\r\n    }\r\n    \r\n    // IDID\r\n    session.unique_id = session.unique_id || `${accountId}_${session.name}`\r\n    groups[accountId].sessions.push(session)\r\n  })\r\n  \r\n  return groups\r\n})\r\n\r\n// \r\nconst formatSuspendedTime = (timestamp: number) => {\r\n  if (!timestamp) return ''\r\n  const date = new Date(timestamp * 1000)\r\n  const month = (date.getMonth() + 1).toString().padStart(2, '0')\r\n  const day = date.getDate().toString().padStart(2, '0')\r\n  const hours = date.getHours().toString().padStart(2, '0')\r\n  const minutes = date.getMinutes().toString().padStart(2, '0')\r\n  return `${month}-${day} ${hours}:${minutes}`\r\n}\r\n\r\n// \r\nconst refreshSuspendedList = async () => {\r\n  refreshingSuspended.value = true\r\n  try {\r\n    suspendedList.value = await getSuspendedSessions()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    refreshingSuspended.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst confirmUnsuspend = (session: SuspendedSession) => {\r\n  ElMessageBox.confirm(\r\n    ` ${session.session_name} `,\r\n    '',\r\n    {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'warning',\r\n    }\r\n  ).then(async () => {\r\n    const success = await unsuspendSession(session.session_name, session.account_id)\r\n    if (success) {\r\n      ElMessage.success('')\r\n      refreshSuspendedList()\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  }).catch(() => {\r\n    // \r\n  })\r\n}\r\n\r\n// \r\nconst refreshHistoryList = async () => {\r\n  refreshingHistory.value = true\r\n  loadingHistory.value = true\r\n  try {\r\n    historySessions.value = await getHistorySessions()\r\n    // \r\n    Object.keys(groupedHistoryList.value).forEach(accId => {\r\n      collapsedGroups.value[accId] = false\r\n    })\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    refreshingHistory.value = false\r\n    loadingHistory.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst toggleGroup = (accountId: string) => {\r\n  collapsedGroups.value[accountId] = !collapsedGroups.value[accountId]\r\n}\r\n\r\n// tab\r\nwatch(activeTab, (newTab) => {\r\n  if (newTab === 'history' && historySessions.value.length === 0) {\r\n    refreshHistoryList()\r\n  } else if (newTab === 'suspended') {\r\n    refreshSuspendedList()\r\n  }\r\n})\r\n\r\nconst handleManualReviewChange = async (val: boolean) => {\r\n  // val\r\n  const enabled = typeof val === 'boolean' ? val : manualReviewEnabled.value;\r\n  \r\n  if (!autoReplyEnabled.value) {\r\n    return\r\n  }\r\n  \r\n  try {\r\n    await updateManualReviewStatus(enabled)\r\n    ElMessage.success(`${enabled ? '' : ''}`)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    // \r\n    manualReviewEnabled.value = !enabled\r\n  }\r\n}\r\n// \r\nconst messageCache = new Map()\r\nconst lastMessageTimes = new Map<number, { time: number; content: string }>()\r\n\r\n// \r\nconst monitorStatusHandler = ((event: CustomEvent) => {\r\n  const { running } = event.detail;\r\n  autoReplyEnabled.value = running;\r\n}) as EventListener;\r\n\r\n// \r\nconst handleResize = () => {\r\n  const newIsNarrow = window.innerWidth < 600\r\n  if (isNarrowScreen.value !== newIsNarrow) {\r\n    isNarrowScreen.value = newIsNarrow\r\n  }\r\n}\r\n\r\nconst taskSessionHandler = ((event: CustomEvent) => {\r\n  const { status, session_name } = event.detail;\r\n  if (status === 'processing') {\r\n    currentProcessingName.value = session_name;\r\n    isProcessingChat.value = true;\r\n  } else {\r\n    if (currentProcessingName.value === session_name) {\r\n      currentProcessingName.value = '';\r\n      isProcessingChat.value = false;\r\n    }\r\n    // \r\n    if (status === 'completed') {\r\n      refreshStatsData();\r\n    }\r\n  }\r\n}) as EventListener;\r\n\r\nconst sessionListHandler = ((event: CustomEvent) => {\r\n  const { sessions } = event.detail;\r\n  if (Array.isArray(sessions)) {\r\n    const processedList = sessions.map(session => ({\r\n      id: session.unique_id || session.id || Date.now(),\r\n      name: session.name || '',\r\n      avatar: session.avatar || '',\r\n      lastMessage: session.lastMessage || '',\r\n      lastTime: session.lastTime || '',\r\n      unread: session.unread || 0,\r\n      isGroup: session.isGroup || false,\r\n      account_id: session.account_id || '',\r\n      account_nickname: session.account_nickname || '',\r\n      unique_id: session.unique_id || session.name\r\n    }));\r\n    \r\n    // \r\n    const existingList = chatList.value || [];\r\n    const mergedList = [...existingList];\r\n    \r\n    processedList.forEach(newSession => {\r\n      const existingIndex = mergedList.findIndex(existing => \r\n        existing.unique_id === newSession.unique_id || existing.id === newSession.id\r\n      );\r\n      \r\n      if (existingIndex >= 0) {\r\n        // \r\n        mergedList[existingIndex] = newSession;\r\n      } else {\r\n        // \r\n        mergedList.push(newSession);\r\n      }\r\n    });\r\n    \r\n    // \r\n    mergedList.sort((a, b) => {\r\n      const timeA = new Date(a.lastTime || 0).getTime();\r\n      const timeB = new Date(b.lastTime || 0).getTime();\r\n      return timeB - timeA;\r\n    });\r\n    \r\n    chatList.value = mergedList;\r\n  }\r\n}) as EventListener;\r\n\r\n// \r\nconst refreshStatsData = async () => {\r\n  try {\r\n    const data = await getStatsData()\r\n    statsData.value = data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst toggleStatsPanel = async () => {\r\n  statsExpanded.value = !statsExpanded.value\r\n  if (statsExpanded.value) {\r\n    await refreshStatsData()\r\n  }\r\n}\r\n// \r\nconst fetchHistorySessions = async () => {\r\n  try {\r\n    const sessions = await getHistorySessions()\r\n    historySessions.value = sessions\r\n  } catch (err) {\r\n    console.error(':', err)\r\n  }\r\n}\r\n\r\n// \r\nconst selectHistoryChat = async (session: ChatSession) => {\r\n  if (currentChat.value?.id === session.id) return\r\n  currentChat.value = session\r\n  \r\n  try {\r\n    // \r\n    messages.value = []\r\n    \r\n    // \r\n    const result = await getHistoryMessages(session.name, session.account_id)\r\n    const chatMessages = result.messages || []\r\n    \r\n    // \r\n    if (Array.isArray(chatMessages)) {\r\n      messages.value = chatMessages\r\n    }\r\n    \r\n    await scrollToBottom()\r\n  } catch (err) {\r\n    error.value = ''\r\n    loading.value = false\r\n  }\r\n}\r\n// \r\nconst checkMonitorStatus = async () => {\r\n  try {\r\n    const result = await getMonitorStatus()\r\n    if (result.success) {\r\n      autoReplyEnabled.value = result.data.running\r\n      // \r\n      if (result.data.manual_review_enabled !== undefined) {\r\n        manualReviewEnabled.value = result.data.manual_review_enabled\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\nconst pendingReplyHandler = ((event: CustomEvent) => {\r\n  handlePendingReply(event)\r\n}) as EventListener;\r\n\r\n// \r\nconst errorDialogVisible = ref(false)\r\nconst errorTitle = ref('')\r\nconst errorContent = ref('')\r\nconst errorDetail = ref('')\r\n\r\nconst handleErrorTask = ((event: CustomEvent) => {\r\n  const data = event.detail\r\n  if (data.scene === 'AI') {\r\n    const params = data.params || []\r\n    const errorMsg = params[0] || ''\r\n    const sessionName = params[1] || ''\r\n    const agentId = params[2] || 'ID'\r\n    \r\n    errorTitle.value = ''\r\n    errorContent.value = ` ${sessionName}  ${agentId} `\r\n    errorDetail.value = errorMsg\r\n    errorDialogVisible.value = true\r\n  }\r\n}) as EventListener;\r\n\r\n// \r\nonMounted(async () => {\r\n  await loadCozeAgents()\r\n  await checkMonitorStatus()\r\n  \r\n  // \r\n  window.addEventListener('monitor-status', monitorStatusHandler);\r\n  window.addEventListener('task-session', taskSessionHandler);\r\n  window.addEventListener('session-list', sessionListHandler);\r\n  window.addEventListener('pending-reply', pendingReplyHandler);\r\n  window.addEventListener('error-task', handleErrorTask);\r\n  \r\n  await nextTick()\r\n  handleResize() // \r\n  window.addEventListener('resize', handleResize)\r\n  \r\n  // \r\n  requestAnimationFrame(() => {\r\n    isInitialLoad.value = false\r\n  })\r\n})\r\n\r\nonUnmounted(() => {\r\n  // \r\n  window.removeEventListener('monitor-status', monitorStatusHandler);\r\n  window.removeEventListener('task-session', taskSessionHandler);\r\n  window.removeEventListener('session-list', sessionListHandler);\r\n  window.removeEventListener('resize', handleResize);\r\n  window.removeEventListener('pending-reply', pendingReplyHandler);\r\n  window.removeEventListener('error-task', handleErrorTask);\r\n  clearPendingReply()\r\n})\r\n\r\n// \r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result.success && result.data) {\r\n      cozeAgents.value = Array.isArray(result.data) ? result.data : result.data.agents || []\r\n      console.debug(':', cozeAgents.value)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst refreshCurrentChat = async () => {\r\n  if (!currentChat.value || refreshingChat.value) return\r\n  \r\n  refreshingChat.value = true\r\n  try {\r\n    const { messages: chatMessages, chatType } = await getChatMessages(currentChat.value.name, currentChat.value.account_id)\r\n    \r\n    // \r\n    if (chatType === 'official_account') {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    if (Array.isArray(chatMessages)) {\r\n      messages.value = chatMessages\r\n    }\r\n    await scrollToBottom()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    refreshingChat.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst showLogDialog = () => {\r\n  logDialogVisible.value = true\r\n}\r\n\r\n// \r\nconst handleRefresh = async () => {\r\n  if (refreshing.value) return\r\n  refreshing.value = true\r\n  try {\r\n    await fetchSessionList()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    refreshing.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst showStrategyDialog = () => {\r\n  strategyDialogVisible.value = true\r\n}\r\n\r\n// AI\r\nconst generateAIResponse = async () => {\r\n  if (!currentChat.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  // \r\n  if (!currentChat.value.lastMessage) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  isGenerating.value = true\r\n  try {\r\n    // \r\n    const result = await createAutoReplyTask({\r\n      sessionId: currentChat.value.id,\r\n      content: currentChat.value.lastMessage, // \r\n      userName: currentChat.value.name,\r\n      sessionName: currentChat.value.name,\r\n      isGroup: currentChat.value.isGroup || false,\r\n      accountId: currentChat.value.account_id // ID\r\n    })\r\n\r\n    if (result.success) {\r\n      if (result.message === 'task_exists') {\r\n        ElMessage.warning('AI')\r\n      } else {\r\n        ElMessage.success('AI...')\r\n        // ID\r\n        currentTaskId.value = result.taskId\r\n      }\r\n    } else {\r\n      throw new Error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    console.error('AI:', error)\r\n    ElMessage.error('AI')\r\n  } finally {\r\n    isGenerating.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst handleStrategyChange = async (strategyType: string) => {\r\n  selectedStrategy.value = strategyType\r\n}\r\n\r\n// \r\nconst showAccountStatusDialog = ref(false)\r\nconst accountStatusList = ref<any[]>([])\r\n\r\n// \r\nconst handleAccountStatusConfirm = () => {\r\n  // \r\n}\r\n\r\n// \r\nconst handleAutoReplyChange = async (val: string | number | boolean) => {\r\n  if (val) {\r\n    try {\r\n      const result = await startChatMonitor({\r\n        manualReview: manualReviewEnabled.value\r\n      })\r\n      if (result.status !== 'success') {\r\n        // \r\n        if (result.code === 'VALIDATION_FAILED' && result.accounts) {\r\n          // \r\n          accountStatusList.value = result.accounts\r\n          showAccountStatusDialog.value = true\r\n          autoReplyEnabled.value = false\r\n          return\r\n        }\r\n        // \r\n        ElMessage.error(result.message || '')\r\n        autoReplyEnabled.value = false\r\n        return\r\n      }\r\n      // \r\n      ElMessage.success(result.message || '')\r\n    } catch (error: unknown) {\r\n      // \r\n      if (error instanceof Error && typeof error.message === 'string') {\r\n          try {\r\n            const errorData = JSON.parse(error.message) as SyncError\r\n            if (errorData.type === 'SYNC_ERROR') {\r\n              ElMessageBox.confirm(\r\n                errorData.message,\r\n                '',\r\n                {\r\n                  confirmButtonText: '',\r\n                  cancelButtonText: '',\r\n                  type: 'warning',\r\n                }\r\n              ).then(() => {\r\n                router.push('/mass-sending?tab=group')\r\n              }).catch(() => {\r\n                autoReplyEnabled.value = false\r\n              })\r\n              return\r\n            }\r\n          } catch {}\r\n        }\r\n      autoReplyEnabled.value = false\r\n      return\r\n    }\r\n  } else {\r\n    await stopChatMonitor()\r\n    manualReviewEnabled.value = false\r\n    try {\r\n      await updateManualReviewStatus(false)\r\n    } catch {}\r\n  }\r\n}\r\n\r\n// \r\nconst scrollToBottom = async () => {\r\n  await nextTick() //  DOM \r\n  const container = document.querySelector('.messages')\r\n  if (container) {\r\n    //  setTimeout \r\n    setTimeout(() => {\r\n      container.scrollTop = container.scrollHeight\r\n    }, 100)\r\n  }\r\n}\r\n\r\n//  messages \r\nwatch(() => messages.value, () => {\r\n  scrollToBottom()\r\n}, { deep: true })\r\nwatch(activeTab, (newVal) => {\r\n  if (newVal === 'history') {\r\n    fetchHistorySessions()\r\n  } else if(newVal === 'recent'){\r\n    fetchSessionList()\r\n  }\r\n})\r\nwatch(autoReplyEnabled, (enabled) => {\r\n  if (!enabled) {\r\n    manualReviewEnabled.value = false\r\n  }\r\n})\r\n\r\n// \r\nconst handleInputFocus = () => {\r\n  isInputting.value = true\r\n}\r\n\r\n// \r\nconst clearMessageCache = () => {\r\n  messageCache.clear()\r\n  lastMessageTimes.clear()\r\n  chatList.value = []\r\n  messages.value = []\r\n}\r\n\r\n// \r\nconst selectChat = async (chat: ChatSession, isManualSelect = true) => {\r\n  if (currentChat.value?.id === chat.id) return { messages: messages.value }\r\n  currentChat.value = chat\r\n}\r\n\r\n// \r\nconst sendMessage = async (content: string) => {\r\n  if (!currentChat.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  messageInput.value = ''\r\n  \r\n  try {\r\n    const result = await sendChatMessage(currentChat.value.name, content)\r\n    console.debug(':', result)\r\n    \r\n    if (result.status === 'success') {\r\n      console.debug(\"\",currentChat);   \r\n      // \r\n      if (result.data?.messages && Array.isArray(result.data.messages)) {\r\n        // \r\n        messages.value = result.data.messages\r\n      }       \r\n      await scrollToBottom()\r\n    } else {\r\n      error.value = result.message || ''\r\n    }\r\n  } catch (err) {\r\n    error.value = ''\r\n  }\r\n}\r\n\r\n// \r\nconst sendMessageByHand = async () => {\r\n  if (!messageInput.value.trim()) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  // \r\n  if (isSending.value) {\r\n    return\r\n  }\r\n  \r\n  // \r\n  isSending.value = true\r\n  \r\n  try {\r\n    // \r\n    if (countdownTimer.value) {\r\n      clearInterval(countdownTimer.value)\r\n      countdownTimer.value = null\r\n    }\r\n    isAutoSending.value = false\r\n    \r\n    // API\r\n    if (pendingReply.value && currentTaskId.value) {\r\n      try {\r\n        await confirmAutoReply({\r\n          task_id: currentTaskId.value,\r\n          action: 'confirm',\r\n          final_content: messageInput.value.trim()\r\n        })\r\n        \r\n        clearPendingReply()\r\n        ElMessage.success('')\r\n        return\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        ElMessage.error('')\r\n        // \r\n        isAutoSending.value = true\r\n        startCountdown(countdown.value || 30)\r\n        return\r\n      }\r\n    }\r\n    \r\n    // \r\n    await sendMessage(messageInput.value)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    // \r\n    isSending.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst fetchSessionList = async () => {\r\n  try {\r\n    if (clearCache.value) {\r\n      clearMessageCache()\r\n    }\r\n    const list = await getLatestSessions()\r\n    \r\n    // \r\n    const processedList = list.map(session => {\r\n      //  session \r\n      const processedSession = {\r\n        id: session.unique_id || session.id || Date.now(), // unique_id\r\n        name: session.name || '',\r\n        avatar: session.avatar || '',\r\n        lastMessage: session.lastMessage || '',\r\n        lastTime: session.lastTime || '',\r\n        unread: session.unread || 0,\r\n        isGroup: session.isGroup || false,\r\n        account_id: session.account_id || '',\r\n        account_nickname: session.account_nickname || '',\r\n        unique_id: session.unique_id || session.name\r\n      }\r\n      \r\n      return processedSession\r\n    })\r\n    \r\n    chatList.value = processedList\r\n    return processedList\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    return []\r\n  }\r\n}\r\n// \r\nconst handlePendingReply = (event: CustomEvent) => {\r\n  const data = event.detail\r\n  \r\n  // \r\n  if (autoReplyEnabled.value && activeTab.value !== 'recent') {\r\n    activeTab.value = 'recent'\r\n  }\r\n\r\n  console.debug(':', data, chatList)\r\n  // unique_id\r\n  const uniqueId = data.unique_id || `${data.account_id}_${data.session_name}`\r\n  let targetChat = null\r\n  // activeTab\r\n  if (activeTab.value === 'recent') {\r\n    // unique_id\r\n    targetChat = chatList.value.find(chat => \r\n      chat.unique_id === uniqueId || chat.id === uniqueId\r\n    )\r\n  } else if (activeTab.value === 'history') {\r\n    // unique_id\r\n    targetChat = historySessions.value.find(chat => \r\n      chat.unique_id === uniqueId || chat.id === uniqueId\r\n    )\r\n  }\r\n  if (!targetChat) {\r\n    console.warn(`: ${data.session_name} (: ${data.account_id})`)\r\n    ElMessage.warning(`: ${data.session_name} (: ${data.account_id})`)\r\n    return\r\n  }\r\n  \r\n  // \r\n  // selectChat(targetChat, false) \r\n    // \r\n    if (activeTab.value === 'recent') {\r\n    // \r\n    selectChat(targetChat, false)\r\n  } else if (activeTab.value === 'history') {\r\n    // \r\n    selectHistoryChat(targetChat)\r\n  }\r\n  \r\n  // AI\r\n  pendingReply.value = {\r\n    task_id: data.task_id,\r\n    content: data.ai_reply,  // ai_reply\r\n    timeout: data.timeout\r\n  }\r\n  messageInput.value = data.ai_reply || ''  // ai_reply\r\n  currentTaskId.value = data.task_id\r\n  \r\n  // \r\n  startCountdown(data.timeout || 30)\r\n  \r\n  ElMessage({\r\n    message: `AI${data.timeout || 30}`,\r\n    type: 'success',\r\n    duration: 2000\r\n  })\r\n}\r\nconst countdownOverlayRef = ref<HTMLElement | null>(null)  // \r\n\r\n// computed\r\nconst circleProgress = computed(() => {\r\n  if (countdown.value <= 0) return 0\r\n  const initialTime = pendingReply.value?.timeout || 30\r\n  const progress = ((initialTime - countdown.value) / initialTime) * 100\r\n  return Math.min(progress, 100)\r\n})\r\n\r\n// stroke-dasharray\r\nconst circleStrokeDasharray = computed(() => {\r\n  const circumference = 2 * Math.PI * 18 // 18\r\n  const progress = circleProgress.value\r\n  const dashLength = (progress / 100) * circumference\r\n  return `${dashLength} ${circumference}`\r\n})\r\n\r\n// \r\nconst groupedChatList = computed(() => {\r\n  const groups: Record<string, { sessions: any[], lastTime: string }> = {}\r\n  \r\n  chatList.value.forEach(chat => {\r\n    const accountId = chat.account_id || ''\r\n    if (!groups[accountId]) {\r\n      groups[accountId] = { sessions: [], lastTime: '' }\r\n    }\r\n    groups[accountId].sessions.push(chat)\r\n    // \r\n    if (!groups[accountId].lastTime || (chat.lastTime && chat.lastTime > groups[accountId].lastTime)) {\r\n      groups[accountId].lastTime = chat.lastTime || ''\r\n    }\r\n  })\r\n  \r\n  // \r\n  Object.values(groups).forEach(group => {\r\n    group.sessions.sort((a, b) => {\r\n      const timeA = new Date(a.lastTime || 0).getTime()\r\n      const timeB = new Date(b.lastTime || 0).getTime()\r\n      return timeB - timeA\r\n    })\r\n  })\r\n  \r\n  return groups\r\n})\r\n\r\n// \r\nconst groupedHistorySessions = computed(() => {\r\n  const groups: Record<string, { sessions: any[], lastTime: string }> = {}\r\n  \r\n  historySessions.value.forEach(session => {\r\n    const accountId = session.account_id || ''\r\n    if (!groups[accountId]) {\r\n      groups[accountId] = { sessions: [], lastTime: '' }\r\n    }\r\n    groups[accountId].sessions.push(session)\r\n    // \r\n    if (!groups[accountId].lastTime || (session.lastTime && session.lastTime > groups[accountId].lastTime)) {\r\n      groups[accountId].lastTime = session.lastTime || ''\r\n    }\r\n  })\r\n  \r\n  // \r\n  Object.values(groups).forEach(group => {\r\n    group.sessions.sort((a, b) => {\r\n      const timeA = new Date(a.lastTime || 0).getTime()\r\n      const timeB = new Date(b.lastTime || 0).getTime()\r\n      return timeB - timeA\r\n    })\r\n  })\r\n  \r\n  return groups\r\n})\r\n// \r\nconst startCountdown = (seconds: number) => {\r\n  countdown.value = seconds\r\n  isAutoSending.value = true\r\n  \r\n  countdownTimer.value = setInterval(() => {\r\n    countdown.value--\r\n    \r\n    // refDOMthis.$el\r\n    if (countdown.value <= 5 && countdownOverlayRef.value) {\r\n      countdownOverlayRef.value.classList.add('urgent')\r\n    }\r\n    \r\n    if (countdown.value <= 0) {\r\n      // \r\n      autoConfirmReply()\r\n      // \r\n      if (countdownTimer.value) {\r\n        clearInterval(countdownTimer.value)\r\n        countdownTimer.value = null\r\n      }\r\n      // \r\n      countdown.value = 0\r\n    }\r\n  }, 1000)\r\n}\r\n\r\n// \r\nconst autoConfirmReply = async () => {\r\n  if (!pendingReply.value) return\r\n  \r\n  try {\r\n    await confirmAutoReply({\r\n      task_id: pendingReply.value.task_id,\r\n      action: 'confirm',\r\n      final_content: messageInput.value\r\n    })\r\n    \r\n    clearPendingReply()\r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    clearPendingReply()\r\n  }\r\n}\r\n\r\n// \r\nconst cancelPendingReply = async () => {\r\n  if (!pendingReply.value) return\r\n  \r\n  try {\r\n    await confirmAutoReply({\r\n      task_id: pendingReply.value.task_id,\r\n      action: 'cancel'\r\n    })\r\n    \r\n    clearPendingReply()\r\n    ElMessage.info('AI')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst copyMessageInput = async () => {\r\n  if (!messageInput.value.trim()) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    await navigator.clipboard.writeText(messageInput.value)\r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst clearPendingReply = () => {\r\n  if (countdownTimer.value) {\r\n    clearInterval(countdownTimer.value)\r\n    countdownTimer.value = null\r\n  }\r\n  \r\n  pendingReply.value = null\r\n  countdown.value = 0\r\n  isAutoSending.value = false\r\n  messageInput.value = ''\r\n  currentTaskId.value = null\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n  const _component_el_avatar = _resolveComponent(\"el-avatar\")!\n  const _component_el_tab_pane = _resolveComponent(\"el-tab-pane\")!\n  const _component_el_tabs = _resolveComponent(\"el-tabs\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createVNode(_component_el_switch, {\n            modelValue: autoReplyEnabled.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((autoReplyEnabled).value = $event)),\n            class: \"auto-reply-switch\",\n            \"active-text\": \"\",\n            onChange: handleAutoReplyChange\n          }, null, 8, [\"modelValue\"]),\n          _createVNode(_component_el_tooltip, {\n            content: \"AI\",\n            placement: \"bottom\",\n            effect: \"dark\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"label\", {\n                class: _normalizeClass([\"cyberpunk-checkbox-label manual-review-top\", { 'is-disabled': !autoReplyEnabled.value }])\n              }, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"checkbox\",\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((manualReviewEnabled).value = $event)),\n                  disabled: !autoReplyEnabled.value,\n                  class: \"cyberpunk-checkbox\",\n                  onChange: _cache[2] || (_cache[2] = ($event: any) => (handleManualReviewChange(manualReviewEnabled.value)))\n                }, null, 40, _hoisted_5), [\n                  [_vModelCheckbox, manualReviewEnabled.value]\n                ]),\n                _cache[9] || (_cache[9] = _createTextVNode(\"  \", -1))\n              ], 2)\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createVNode(_component_el_button, {\n            class: _normalizeClass([\"stats-btn\", { 'active': statsExpanded.value }]),\n            onClick: toggleStatsPanel,\n            size: \"small\"\n          }, {\n            default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n              _createElementVNode(\"span\", {\n                class: _normalizeClass({ 'rotate-icon': true })\n              }, \"  \", -1),\n              _createTextVNode(\"  \", -1)\n            ]))]),\n            _: 1\n          }, 8, [\"class\"]),\n          _createVNode(_component_el_button, {\n            class: \"log-btn\",\n            onClick: showLogDialog,\n            size: \"small\",\n            type: \"info\",\n            plain: \"\"\n          }, {\n            default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n              _createTextVNode(\"   \", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            class: \"setting-btn\",\n            onClick: showStrategyDialog\n          }, {\n            default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n              _createTextVNode(\"  AI \", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      _createVNode(StatsPanel, {\n        expanded: statsExpanded.value,\n        stats: statsData.value\n      }, null, 8, [\"expanded\", \"stats\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createElementVNode(\"div\", _hoisted_8, [\n        _createElementVNode(\"div\", _hoisted_9, [\n          _createVNode(_component_el_tabs, {\n            modelValue: activeTab.value,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((activeTab).value = $event)),\n            class: \"chat-tabs-container\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_tab_pane, {\n                label: \"\",\n                name: \"recent\"\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_10, [\n                    _createElementVNode(\"div\", _hoisted_11, [\n                      _createElementVNode(\"span\", _hoisted_12, _toDisplayString(chatList.value.length) + \" \", 1),\n                      (autoReplyEnabled.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                            _createVNode(_component_el_tag, {\n                              type: \"info\",\n                              size: \"small\"\n                            }, {\n                              default: _withCtx(() => [\n                                _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"dot-flashing\" }, null, -1)),\n                                _createTextVNode(\" \" + _toDisplayString(isProcessingChat.value ? ` ${currentProcessingName.value} ` : ''), 1)\n                              ]),\n                              _: 1\n                            })\n                          ]))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _createVNode(_component_el_button, {\n                      class: \"refresh-icon-btn\",\n                      loading: refreshing.value,\n                      onClick: handleRefresh,\n                      size: \"small\",\n                      type: \"primary\",\n                      circle: \"\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_icon, null, {\n                          default: _withCtx(() => [\n                            _createVNode(_unref(Refresh))\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    }, 8, [\"loading\"])\n                  ]),\n                  (chatList.value.length === 0)\n                    ? (_openBlock(), _createBlock(_component_el_empty, {\n                        key: 0,\n                        \"image-size\": 120,\n                        description: \"\"\n                      }))\n                    : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(groupedChatList.value, (group, accountId) => {\n                        return (_openBlock(), _createElementBlock(_Fragment, { key: accountId }, [\n                          (group.sessions.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                _createElementVNode(\"span\", _hoisted_15, \"\" + _toDisplayString(accountId || ''), 1)\n                              ]))\n                            : _createCommentVNode(\"\", true),\n                          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.sessions, (chat) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                              key: chat.id,\n                              class: _normalizeClass([\"chat-item\", { \r\n                      active: currentChat.value?.id === chat.id,\r\n                      unread: chat?.unread && chat.unread > 0 \r\n                    }]),\n                              onClick: ($event: any) => (selectChat(chat))\n                            }, [\n                              _createElementVNode(\"div\", _hoisted_17, [\n                                _createVNode(_component_el_avatar, {\n                                  size: 40,\n                                  src: chat.avatar,\n                                  icon: _unref(User)\n                                }, null, 8, [\"src\", \"icon\"]),\n                                (chat?.unread && chat.unread > 0)\n                                  ? (_openBlock(), _createElementBlock(\"span\", _hoisted_18))\n                                  : _createCommentVNode(\"\", true)\n                              ]),\n                              _createElementVNode(\"div\", _hoisted_19, [\n                                _createElementVNode(\"div\", _hoisted_20, [\n                                  _createElementVNode(\"div\", _hoisted_21, [\n                                    _createElementVNode(\"div\", _hoisted_22, [\n                                      _createElementVNode(\"span\", {\n                                        class: \"chat-name\",\n                                        title: chat.name\n                                      }, _toDisplayString(chat.name), 9, _hoisted_23),\n                                      (chat.isGroup)\n                                        ? (_openBlock(), _createBlock(_component_el_tag, {\n                                            key: 0,\n                                            size: \"small\",\n                                            type: \"info\",\n                                            class: \"group-tag\"\n                                          }, {\n                                            default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                                              _createTextVNode(\"\", -1)\n                                            ]))]),\n                                            _: 1\n                                          }))\n                                        : _createCommentVNode(\"\", true)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_24, _toDisplayString(chat.lastTime), 1)\n                                  ]),\n                                  _createElementVNode(\"div\", {\n                                    class: \"last-message\",\n                                    title: chat.lastMessage\n                                  }, _toDisplayString(chat.lastMessage), 9, _hoisted_25),\n                                  (chat.account_id)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [\n                                        _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"account-label\" }, \"\", -1)),\n                                        _createElementVNode(\"span\", _hoisted_27, _toDisplayString(chat.account_id), 1)\n                                      ]))\n                                    : _createCommentVNode(\"\", true)\n                                ])\n                              ])\n                            ], 10, _hoisted_16))\n                          }), 128))\n                        ], 64))\n                      }), 128))\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_el_tab_pane, {\n                label: \"\",\n                name: \"suspended\"\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_28, [\n                    _createElementVNode(\"div\", _hoisted_29, [\n                      _createElementVNode(\"span\", _hoisted_30, _toDisplayString(suspendedList.value.length) + \" \", 1)\n                    ])\n                  ]),\n                  (suspendedList.value.length === 0)\n                    ? (_openBlock(), _createBlock(_component_el_empty, {\n                        key: 0,\n                        \"image-size\": 120\n                      }, {\n                        description: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n                          _createElementVNode(\"span\", null, \"\", -1),\n                          _createElementVNode(\"div\", { style: {\"margin-top\":\"2cap\",\"padding\":\"0 20px\",\"font-size\":\"12px\",\"color\":\"#909399\",\"line-height\":\"1.6\"} }, [\n                            _createElementVNode(\"br\"),\n                            _createTextVNode(\" \")\n                          ], -1)\n                        ]))]),\n                        _: 1\n                      }))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(suspendedList.value, (session) => {\n                          return (_openBlock(), _createElementBlock(\"div\", {\n                            key: `${session.account_id}_${session.session_name}`,\n                            class: \"suspended-item\",\n                            onClick: ($event: any) => (confirmUnsuspend(session))\n                          }, [\n                            _createElementVNode(\"div\", _hoisted_33, [\n                              _createVNode(_component_el_avatar, {\n                                size: 40,\n                                icon: _unref(User)\n                              }, null, 8, [\"icon\"])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_34, [\n                              _createElementVNode(\"div\", _hoisted_35, [\n                                _createElementVNode(\"div\", {\n                                  class: \"suspended-name\",\n                                  title: session.session_name\n                                }, _toDisplayString(session.session_name), 9, _hoisted_36),\n                                _createVNode(_component_el_button, {\n                                  type: \"primary\",\n                                  link: \"\",\n                                  size: \"small\",\n                                  onClick: _withModifiers(($event: any) => (confirmUnsuspend(session)), [\"stop\"])\n                                }, {\n                                  default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                                    _createTextVNode(\"  \", -1)\n                                  ]))]),\n                                  _: 1\n                                }, 8, [\"onClick\"])\n                              ]),\n                              _createElementVNode(\"div\", _hoisted_37, [\n                                _cache[18] || (_cache[18] = _createElementVNode(\"span\", { class: \"time-label\" }, \"\", -1)),\n                                _createElementVNode(\"span\", _hoisted_38, _toDisplayString(formatSuspendedTime(session.suspended_at)), 1)\n                              ]),\n                              _createElementVNode(\"div\", _hoisted_39, [\n                                _cache[19] || (_cache[19] = _createElementVNode(\"span\", { class: \"account-label\" }, \"\", -1)),\n                                _createElementVNode(\"span\", _hoisted_40, _toDisplayString(session.account_nickname || session.account_id), 1)\n                              ])\n                            ])\n                          ], 8, _hoisted_32))\n                        }), 128))\n                      ]))\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_el_tab_pane, {\n                label: \"\",\n                name: \"history\"\n              }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_41, [\n                    _createElementVNode(\"span\", null, _toDisplayString(historySessions.value.length) + \" \", 1)\n                  ]),\n                  (historySessions.value.length === 0)\n                    ? (_openBlock(), _createBlock(_component_el_empty, {\n                        key: 0,\n                        \"image-size\": 120,\n                        description: \"\"\n                      }))\n                    : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(groupedHistorySessions.value, (group, accountId) => {\n                        return (_openBlock(), _createElementBlock(_Fragment, { key: accountId }, [\n                          (group.sessions.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_42, [\n                                _createElementVNode(\"span\", _hoisted_43, \"\" + _toDisplayString(accountId || ''), 1)\n                              ]))\n                            : _createCommentVNode(\"\", true),\n                          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.sessions, (session) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                              key: session.id,\n                              class: _normalizeClass([\"chat-item\", { active: currentChat.value?.id === session.id }]),\n                              onClick: ($event: any) => (selectHistoryChat(session))\n                            }, [\n                              _createElementVNode(\"div\", _hoisted_45, [\n                                _createVNode(_component_el_avatar, {\n                                  size: 40,\n                                  src: session.avatar,\n                                  icon: _unref(User)\n                                }, null, 8, [\"src\", \"icon\"])\n                              ]),\n                              _createElementVNode(\"div\", _hoisted_46, [\n                                _createElementVNode(\"div\", _hoisted_47, [\n                                  _createElementVNode(\"div\", _hoisted_48, [\n                                    _createElementVNode(\"div\", _hoisted_49, [\n                                      _createElementVNode(\"span\", {\n                                        class: \"chat-name\",\n                                        title: session.name\n                                      }, _toDisplayString(session.name), 9, _hoisted_50),\n                                      (session.isGroup)\n                                        ? (_openBlock(), _createBlock(_component_el_tag, {\n                                            key: 0,\n                                            size: \"small\",\n                                            type: \"info\",\n                                            class: \"group-tag\"\n                                          }, {\n                                            default: _withCtx(() => [...(_cache[20] || (_cache[20] = [\n                                              _createTextVNode(\"\", -1)\n                                            ]))]),\n                                            _: 1\n                                          }))\n                                        : _createCommentVNode(\"\", true)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_51, _toDisplayString(session.lastTime), 1)\n                                  ]),\n                                  _createElementVNode(\"div\", {\n                                    class: \"last-message\",\n                                    title: session.lastMessage\n                                  }, _toDisplayString(session.lastMessage), 9, _hoisted_52),\n                                  (session.account_id)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_53, [\n                                        _cache[21] || (_cache[21] = _createElementVNode(\"span\", { class: \"account-label\" }, \"\", -1)),\n                                        _createElementVNode(\"span\", _hoisted_54, _toDisplayString(session.account_id), 1)\n                                      ]))\n                                    : _createCommentVNode(\"\", true)\n                                ])\n                              ])\n                            ], 10, _hoisted_44))\n                          }), 128))\n                        ], 64))\n                      }), 128))\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ])\n      ]),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"chat-area\", { 'chat-area-hidden': isNarrowScreen.value, 'no-transition': isInitialLoad.value }])\n      }, [\n        (currentChat.value)\n          ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n              _createElementVNode(\"div\", _hoisted_55, [\n                _createElementVNode(\"div\", _hoisted_56, [\n                  _createElementVNode(\"span\", _hoisted_57, _toDisplayString(currentChat.value.name), 1),\n                  (currentChat.value.isGroup)\n                    ? (_openBlock(), _createBlock(_component_el_tag, {\n                        key: 0,\n                        size: \"small\",\n                        type: \"info\"\n                      }, {\n                        default: _withCtx(() => [...(_cache[22] || (_cache[22] = [\n                          _createTextVNode(\"\", -1)\n                        ]))]),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                (activeTab.value !== 'history')\n                  ? (_openBlock(), _createBlock(_component_el_button, {\n                      key: 0,\n                      class: \"refresh-chat-btn\",\n                      loading: refreshingChat.value,\n                      onClick: refreshCurrentChat,\n                      size: \"small\",\n                      type: \"primary\",\n                      plain: \"\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_icon, null, {\n                          default: _withCtx(() => [\n                            _createVNode(_unref(Refresh))\n                          ]),\n                          _: 1\n                        }),\n                        _cache[23] || (_cache[23] = _createTextVNode(\"  \", -1))\n                      ]),\n                      _: 1\n                    }, 8, [\"loading\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createElementVNode(\"div\", _hoisted_58, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(messages.value, (msg) => {\n                  return (_openBlock(), _createElementBlock(\"div\", {\n                    key: msg.id,\n                    class: _normalizeClass([\"message-wrapper\", { 'message-wrapper-self': msg.isSelf }])\n                  }, [\n                    (currentChat.value?.isGroup && !msg.isSelf && !msg.isTimeMessage)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_59, _toDisplayString(msg.sender?.name), 1))\n                      : _createCommentVNode(\"\", true),\n                    _createElementVNode(\"div\", {\n                      class: _normalizeClass([\"message\", {\r\n                  'message-self': msg.isSelf,\r\n                  'message-time': msg.isTimeMessage\r\n                }])\n                    }, [\n                      _createTextVNode(_toDisplayString(msg.content) + \" \", 1),\n                      (msg.voice_text)\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                            _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"voice-text-divider\" }, null, -1)),\n                            _createElementVNode(\"div\", _hoisted_60, _toDisplayString(msg.voice_text), 1)\n                          ], 64))\n                        : _createCommentVNode(\"\", true)\n                    ], 2)\n                  ], 2))\n                }), 128))\n              ], 512),\n              _createElementVNode(\"div\", _hoisted_61, [\n                _createElementVNode(\"div\", _hoisted_62, [\n                  (isAutoSending.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        ref_key: \"countdownOverlayRef\",\n                        ref: countdownOverlayRef,\n                        class: _normalizeClass([\"countdown-overlay\", { 'urgent': countdown.value <= 5 }])\n                      }, [\n                        _createElementVNode(\"div\", _hoisted_63, [\n                          _createElementVNode(\"div\", _hoisted_64, [\n                            (_openBlock(), _createElementBlock(\"svg\", _hoisted_65, [\n                              _cache[25] || (_cache[25] = _createElementVNode(\"circle\", {\n                                cx: \"20\",\n                                cy: \"20\",\n                                r: \"18\",\n                                fill: \"none\",\n                                stroke: \"rgba(255, 255, 255, 0.3)\",\n                                \"stroke-width\": \"3\"\n                              }, null, -1)),\n                              _createElementVNode(\"circle\", {\n                                cx: \"20\",\n                                cy: \"20\",\n                                r: \"18\",\n                                fill: \"none\",\n                                stroke: \"#fff\",\n                                \"stroke-width\": \"3\",\n                                \"stroke-linecap\": \"round\",\n                                \"stroke-dasharray\": circleStrokeDasharray.value,\n                                \"stroke-dashoffset\": \"0\",\n                                transform: \"rotate(-90 20 20)\",\n                                class: \"countdown-progress\"\n                              }, null, 8, _hoisted_66)\n                            ])),\n                            _createElementVNode(\"div\", _hoisted_67, _toDisplayString(countdown.value), 1)\n                          ]),\n                          _createElementVNode(\"div\", _hoisted_68, [\n                            _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"countdown-title\" }, \"AI\", -1)),\n                            _createElementVNode(\"div\", _hoisted_69, _toDisplayString(countdown.value) + \"\", 1)\n                          ])\n                        ]),\n                        _createVNode(_component_el_button, {\n                          class: \"cancel-btn\",\n                          size: \"small\",\n                          type: \"danger\",\n                          onClick: cancelPendingReply\n                        }, {\n                          default: _withCtx(() => [...(_cache[27] || (_cache[27] = [\n                            _createTextVNode(\"  \", -1)\n                          ]))]),\n                          _: 1\n                        })\n                      ], 2))\n                    : _createCommentVNode(\"\", true),\n                  _createElementVNode(\"div\", _hoisted_70, [\n                    _createVNode(_component_el_input, {\n                      modelValue: messageInput.value,\n                      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((messageInput).value = $event)),\n                      type: \"textarea\",\n                      rows: 5,\n                      placeholder: \"...\",\n                      onFocus: handleInputFocus\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_71, [\n                    (messageInput.value.trim())\n                      ? (_openBlock(), _createBlock(_component_el_button, {\n                          key: 0,\n                          class: \"copy-btn\",\n                          onClick: copyMessageInput\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_icon, null, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(DocumentCopy))\n                              ]),\n                              _: 1\n                            }),\n                            _cache[28] || (_cache[28] = _createTextVNode(\"  \", -1))\n                          ]),\n                          _: 1\n                        }))\n                      : _createCommentVNode(\"\", true),\n                    _createVNode(_component_el_button, {\n                      class: \"coze-btn\",\n                      disabled: autoReplyEnabled.value || !currentChat.value || isGenerating.value,\n                      loading: isGenerating.value,\n                      onClick: generateAIResponse\n                    }, {\n                      default: _withCtx(() => [\n                        _cache[29] || (_cache[29] = _createElementVNode(\"img\", {\n                          src: \"/icon/img_ai.png\",\n                          alt: \"Dify\",\n                          class: \"img-ai\"\n                        }, null, -1)),\n                        _createTextVNode(\" \" + _toDisplayString(isGenerating.value ? '..' : ''), 1)\n                      ]),\n                      _: 1\n                    }, 8, [\"disabled\", \"loading\"]),\n                    _createVNode(_component_el_button, {\n                      type: \"primary\",\n                      class: \"send-btn\",\n                      disabled: isSending.value || !messageInput.value.trim(),\n                      loading: isSending.value,\n                      onClick: sendMessageByHand\n                    }, {\n                      default: _withCtx(() => [\n                        _createTextVNode(_toDisplayString(isSending.value ? '.' : ''), 1)\n                      ]),\n                      _: 1\n                    }, 8, [\"disabled\", \"loading\"])\n                  ])\n                ])\n              ])\n            ], 64))\n          : (_openBlock(), _createElementBlock(\"div\", _hoisted_72, [...(_cache[30] || (_cache[30] = [\n              _createElementVNode(\"div\", { class: \"empty-state\" }, [\n                _createElementVNode(\"div\", { class: \"empty-state-icon\" }, \"\"),\n                _createElementVNode(\"div\", { class: \"empty-state-text\" }, \"\"),\n                _createElementVNode(\"div\", { class: \"empty-state-subtext\" }, \"\")\n              ], -1)\n            ]))]))\n      ], 2)\n    ]),\n    _createVNode(AIStaffConfig, {\n      visible: strategyDialogVisible.value,\n      \"onUpdate:visible\": _cache[5] || (_cache[5] = ($event: any) => ((strategyDialogVisible).value = $event)),\n      \"coze-agents\": cozeAgents.value,\n      onSave: handleStrategyChange\n    }, null, 8, [\"visible\", \"coze-agents\"]),\n    _createVNode(ReplyLogDialog, {\n      visible: logDialogVisible.value,\n      \"onUpdate:visible\": _cache[6] || (_cache[6] = ($event: any) => ((logDialogVisible).value = $event))\n    }, null, 8, [\"visible\"]),\n    _createVNode(AccountStatusDialog, {\n      visible: showAccountStatusDialog.value,\n      \"onUpdate:visible\": _cache[7] || (_cache[7] = ($event: any) => ((showAccountStatusDialog).value = $event)),\n      \"account-list\": accountStatusList.value,\n      onConfirm: handleAccountStatusConfirm\n    }, null, 8, [\"visible\", \"account-list\"]),\n    _createVNode(CommonErrorDialog, {\n      visible: errorDialogVisible.value,\n      \"onUpdate:visible\": _cache[8] || (_cache[8] = ($event: any) => ((errorDialogVisible).value = $event)),\n      title: errorTitle.value,\n      content: errorContent.value,\n      \"error-detail\": errorDetail.value\n    }, null, 8, [\"visible\", \"title\", \"content\", \"error-detail\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"ai-chat-container\">\r\n    <!--  -->\r\n    <div class=\"settings-bar\">\r\n      <div class=\"settings-content\">\r\n        <div class=\"auto-reply-container\">\r\n          <el-switch\r\n            v-model=\"autoReplyEnabled\"\r\n            class=\"auto-reply-switch\"\r\n            active-text=\"\"\r\n            @change=\"handleAutoReplyChange\"\r\n          />\r\n           <!-- -->\r\n           <el-tooltip\r\n            content=\"AI\"\r\n            placement=\"bottom\"\r\n            effect=\"dark\"\r\n          >\r\n            <label class=\"cyberpunk-checkbox-label manual-review-top\" :class=\"{ 'is-disabled': !autoReplyEnabled }\">\r\n              <input\r\n                type=\"checkbox\"\r\n                v-model=\"manualReviewEnabled\"\r\n                :disabled=\"!autoReplyEnabled\"\r\n                class=\"cyberpunk-checkbox\"\r\n                @change=\"handleManualReviewChange(manualReviewEnabled)\"\r\n              />\r\n              \r\n            </label>\r\n          </el-tooltip>\r\n          \r\n        </div>\r\n\r\n        <div class=\"settings-right\">\r\n          <!--  -->\r\n          <el-button\r\n            class=\"stats-btn\"\r\n            :class=\"{ 'active': statsExpanded }\"\r\n            @click=\"toggleStatsPanel\"\r\n            size=\"small\"\r\n          >\r\n            <span :class=\"{ 'rotate-icon': true }\">\r\n              \r\n            </span>\r\n            \r\n          </el-button>\r\n          \r\n          <!--  -->\r\n          <el-button\r\n            class=\"log-btn\"\r\n            @click=\"showLogDialog\"\r\n            size=\"small\"\r\n            type=\"info\"\r\n            plain\r\n          >\r\n             \r\n          </el-button>\r\n          \r\n          <!-- AI -->\r\n          <el-button \r\n            class=\"setting-btn\"\r\n            @click=\"showStrategyDialog\"\r\n          >\r\n             AI\r\n          </el-button>\r\n          \r\n        </div>\r\n      </div>\r\n      \r\n      <!--  - settings-bar -->\r\n      <StatsPanel :expanded=\"statsExpanded\" :stats=\"statsData\" />\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"main-content1\">\r\n      <!--  -->\r\n      <div class=\"chat-list\">\r\n        <!--  -->\r\n        <div class=\"chat-tabs\">\r\n          <el-tabs v-model=\"activeTab\" class=\"chat-tabs-container\">\r\n            <el-tab-pane label=\"\" name=\"recent\">\r\n              <div class=\"tab-header\">\r\n                <div class=\"tab-header-left\">\r\n                  <span class=\"tab-title\">{{ chatList.length }} </span>\r\n                  <!--  -  -->\r\n                  <div v-if=\"autoReplyEnabled\" class=\"status-indicator-chat\">\r\n                    <el-tag type=\"info\" size=\"small\">\r\n                      <span class=\"dot-flashing\"></span>\r\n                      {{ isProcessingChat ? ` ${currentProcessingName} ` : '' }}\r\n                    </el-tag>\r\n                  </div>\r\n                </div>\r\n                <el-button\r\n                  class=\"refresh-icon-btn\"\r\n                  :loading=\"refreshing\"\r\n                  @click=\"handleRefresh\"\r\n                  size=\"small\"\r\n                  type=\"primary\"\r\n                  circle\r\n                >\r\n                  <el-icon><Refresh /></el-icon>\r\n                </el-button>\r\n              </div>\r\n              \r\n              <!--  -->\r\n              <el-empty\r\n                v-if=\"chatList.length === 0\"\r\n                :image-size=\"120\"\r\n                description=\"\"/>\r\n                \r\n              <!--  -->\r\n              <template v-else>\r\n                <template v-for=\"(group, accountId) in groupedChatList\" :key=\"accountId\">\r\n                  <!--  -->\r\n                  <div class=\"account-header\" v-if=\"group.sessions.length > 0\">\r\n                    <span class=\"account-title\">{{ accountId || '' }}</span>\r\n                  </div>\r\n                  <!--  -->\r\n                  <div\r\n                    v-for=\"chat in group.sessions\"\r\n                    :key=\"chat.id\"\r\n                    class=\"chat-item\"\r\n                    :class=\"{ \r\n                      active: currentChat?.id === chat.id,\r\n                      unread: chat?.unread && chat.unread > 0 \r\n                    }\"\r\n                    @click=\"selectChat(chat)\"\r\n              >\r\n                <!--  -->\r\n                <div class=\"avatar-wrapper\">\r\n                  <el-avatar :size=\"40\" :src=\"chat.avatar\" :icon=\"User\" />\r\n                  <span v-if=\"chat?.unread && chat.unread > 0\" class=\"unread-dot\"></span>\r\n                </div>\r\n                \r\n                <!--  -->\r\n                <div class=\"chat-info\">\r\n                  <div class=\"chat-header\">\r\n                    <div class=\"chat-title\">\r\n                      <div class=\"name-tag-container\">\r\n                        <span class=\"chat-name\" :title=\"chat.name\">\r\n                          {{ chat.name }}\r\n                        </span>\r\n                        <el-tag v-if=\"chat.isGroup\" size=\"small\" type=\"info\" class=\"group-tag\"></el-tag>\r\n                      </div>\r\n                      <span class=\"chat-time\">{{ chat.lastTime }}</span>\r\n                    </div>\r\n                    <div class=\"last-message\" :title=\"chat.lastMessage\">\r\n                      {{ chat.lastMessage }}\r\n                    </div>\r\n                    <div v-if=\"chat.account_id\" class=\"account-info\">\r\n                      <span class=\"account-label\"></span>\r\n                      <span class=\"account-id\">{{ chat.account_id }}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n                </template>\r\n              </template>\r\n            </el-tab-pane>\r\n\r\n            <el-tab-pane label=\"\" name=\"suspended\">\r\n              <div class=\"tab-header\">\r\n                <div class=\"tab-header-left\">\r\n                  <span class=\"tab-title\">{{ suspendedList.length }} </span>\r\n                </div>\r\n                <!-- <el-button\r\n                  class=\"refresh-icon-btn\"\r\n                  :loading=\"refreshingSuspended\"\r\n                  @click=\"refreshSuspendedList\"\r\n                  size=\"small\"\r\n                  type=\"primary\"\r\n                  circle\r\n                >\r\n                  <el-icon><Refresh /></el-icon>\r\n                </el-button> -->\r\n              </div>\r\n\r\n              <!--  -->\r\n              <el-empty\r\n                v-if=\"suspendedList.length === 0\"\r\n                :image-size=\"120\"\r\n              >\r\n                <template #description>\r\n                  <span></span>\r\n                  <div style=\"margin-top: 2cap; padding: 0 20px; font-size: 12px; color: #909399; line-height: 1.6;\">\r\n                    <br>\r\n                  </div>\r\n                </template>\r\n              </el-empty>\r\n\r\n              <!--  -->\r\n              <div v-else class=\"suspended-list\">\r\n                <div\r\n                  v-for=\"session in suspendedList\"\r\n                  :key=\"`${session.account_id}_${session.session_name}`\"\r\n                  class=\"suspended-item\"\r\n                  @click=\"confirmUnsuspend(session)\"\r\n                >\r\n                  <!--  -->\r\n                  <div class=\"avatar-wrapper\">\r\n                    <el-avatar :size=\"40\" :icon=\"User\" />\r\n                  </div>\r\n\r\n                  <div class=\"suspended-info\">\r\n                    <div class=\"suspended-header\">\r\n                      <div class=\"suspended-name\" :title=\"session.session_name\">\r\n                        {{ session.session_name }}\r\n                      </div>\r\n                      <el-button\r\n                        type=\"primary\"\r\n                        link\r\n                        size=\"small\"\r\n                        @click.stop=\"confirmUnsuspend(session)\"\r\n                      >\r\n                        \r\n                      </el-button>\r\n                    </div>\r\n                    \r\n                    <div class=\"suspended-time-row\">\r\n                      <span class=\"time-label\"></span>\r\n                      <span class=\"suspended-time\">\r\n                        {{ formatSuspendedTime(session.suspended_at) }}\r\n                      </span>\r\n                    </div>\r\n\r\n                    <div class=\"account-info\">\r\n                      <span class=\"account-label\"></span>\r\n                      <span class=\"account-id\">{{ session.account_nickname || session.account_id }}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </el-tab-pane>\r\n            \r\n            <el-tab-pane label=\"\" name=\"history\">\r\n              <!--  -->\r\n              <div class=\"tab-header\">\r\n                <span>{{ historySessions.length }} </span>\r\n              </div>\r\n              <!--  -->\r\n              <el-empty\r\n                v-if=\"historySessions.length === 0\"\r\n                :image-size=\"120\"\r\n                description=\"\"/>\r\n                \r\n              <!--  -->\r\n              <template v-else>\r\n                <template v-for=\"(group, accountId) in groupedHistorySessions\" :key=\"accountId\">\r\n                  <!--  -->\r\n                  <div class=\"account-header\" v-if=\"group.sessions.length > 0\">\r\n                    <span class=\"account-title\">{{ accountId || '' }}</span>\r\n                  </div>\r\n                  <!--  -->\r\n                  <div\r\n                    v-for=\"session in group.sessions\"\r\n                    :key=\"session.id\"\r\n                    class=\"chat-item\"\r\n                    :class=\"{ active: currentChat?.id === session.id }\"\r\n                    @click=\"selectHistoryChat(session)\"\r\n                  >\r\n                <!--  -->\r\n                <div class=\"avatar-wrapper\">\r\n                  <el-avatar :size=\"40\" :src=\"session.avatar\" :icon=\"User\" />\r\n                </div>\r\n                \r\n                <!--  -->\r\n                <div class=\"chat-info\">\r\n                  <div class=\"chat-header\">\r\n                    <div class=\"chat-title\">\r\n                      <div class=\"name-tag-container\">\r\n                        <span class=\"chat-name\" :title=\"session.name\">\r\n                          {{ session.name }}\r\n                        </span>\r\n                        <el-tag v-if=\"session.isGroup\" size=\"small\" type=\"info\" class=\"group-tag\"></el-tag>\r\n                      </div>\r\n                      <span class=\"chat-time\">{{ session.lastTime }}</span>\r\n                    </div>\r\n                    <div class=\"last-message\" :title=\"session.lastMessage\">\r\n                      {{ session.lastMessage }}\r\n                    </div>\r\n                    <div v-if=\"session.account_id\" class=\"account-info\">\r\n                      <span class=\"account-label\"></span>\r\n                      <span class=\"account-id\">{{ session.account_id }}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n                </template>\r\n              </template>\r\n            </el-tab-pane>\r\n          </el-tabs>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"chat-area\" :class=\"{ 'chat-area-hidden': isNarrowScreen, 'no-transition': isInitialLoad }\">\r\n        <template v-if=\"currentChat\">\r\n          <div class=\"current-chat-header\">\r\n            <div class=\"header-left\">\r\n              <span class=\"user-name\">{{ currentChat.name }}</span>\r\n              <el-tag v-if=\"currentChat.isGroup\" size=\"small\" type=\"info\"></el-tag>\r\n            </div>\r\n            <el-button\r\n              class=\"refresh-chat-btn\"\r\n              :loading=\"refreshingChat\"\r\n              v-if=\"activeTab !== 'history'\"\r\n              @click=\"refreshCurrentChat\"\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              plain\r\n            >\r\n              <el-icon><Refresh /></el-icon>\r\n              \r\n            </el-button>\r\n          </div>\r\n          \r\n          <div class=\"messages\" ref=\"messageContainer\">\r\n            <div\r\n              v-for=\"msg in messages\"\r\n              :key=\"msg.id\"\r\n              class=\"message-wrapper\"\r\n              :class=\"{ 'message-wrapper-self': msg.isSelf }\"\r\n            >\r\n              <!--  -->\r\n              <div \r\n                v-if=\"currentChat?.isGroup && !msg.isSelf && !msg.isTimeMessage\" \r\n                class=\"sender-name\"\r\n              >\r\n                {{ msg.sender?.name }}\r\n              </div>\r\n              <div\r\n                class=\"message\"\r\n                :class=\"{\r\n                  'message-self': msg.isSelf,\r\n                  'message-time': msg.isTimeMessage\r\n                }\"\r\n              >\r\n                {{ msg.content }}\r\n                <!--  -->\r\n                <template v-if=\"msg.voice_text\">\r\n                  <div class=\"voice-text-divider\"></div>\r\n                  <div class=\"voice-text\">{{ msg.voice_text }}</div>\r\n                </template>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"input-area\">\r\n            <div class=\"message-input-container\">\r\n              <!--  -->\r\n              <div \r\n                v-if=\"isAutoSending\" \r\n                ref=\"countdownOverlayRef\"\r\n                class=\"countdown-overlay\"\r\n                :class=\"{ 'urgent': countdown <= 5 }\"\r\n              >\r\n                <div class=\"countdown-content\">\r\n                  <!--  -->\r\n                  <div class=\"countdown-circle\">\r\n                    <svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\">\r\n                      <!--  -->\r\n                      <circle\r\n                        cx=\"20\"\r\n                        cy=\"20\"\r\n                        r=\"18\"\r\n                        fill=\"none\"\r\n                        stroke=\"rgba(255, 255, 255, 0.3)\"\r\n                        stroke-width=\"3\"\r\n                      />\r\n                      <!--  -->\r\n                      <circle\r\n                        cx=\"20\"\r\n                        cy=\"20\"\r\n                        r=\"18\"\r\n                        fill=\"none\"\r\n                        stroke=\"#fff\"\r\n                        stroke-width=\"3\"\r\n                        stroke-linecap=\"round\"\r\n                        :stroke-dasharray=\"circleStrokeDasharray\"\r\n                        stroke-dashoffset=\"0\"\r\n                        transform=\"rotate(-90 20 20)\"\r\n                        class=\"countdown-progress\"\r\n                      />\r\n                    </svg>\r\n                    <!--  -->\r\n                    <div class=\"countdown-number\">{{ countdown }}</div>\r\n                  </div>\r\n                  \r\n                  <!--  -->\r\n                  <div class=\"countdown-text\">\r\n                    <div class=\"countdown-title\">AI</div>\r\n                    <div class=\"countdown-subtitle\">{{ countdown }}</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!--  -->\r\n                <el-button \r\n                  class=\"cancel-btn\"\r\n                  size=\"small\"\r\n                  type=\"danger\"\r\n                  @click=\"cancelPendingReply\"\r\n                >\r\n                  \r\n                </el-button>\r\n              </div>\r\n              <div class=\"input-content\">\r\n                <el-input\r\n                  v-model=\"messageInput\"\r\n                  type=\"textarea\"\r\n                  :rows=\"5\"\r\n                  placeholder=\"...\"\r\n                  @focus=\"handleInputFocus\"\r\n                />\r\n              </div>\r\n              <div class=\"input-footer\">\r\n                <el-button \r\n                    v-if=\"messageInput.trim()\"\r\n                    class=\"copy-btn\"\r\n                    @click=\"copyMessageInput\"\r\n                  >\r\n                    <el-icon><DocumentCopy /></el-icon>\r\n                    \r\n                  </el-button>\r\n                <el-button \r\n                    class=\"coze-btn\"\r\n                    :disabled=\"autoReplyEnabled || !currentChat || isGenerating\"\r\n                    :loading=\"isGenerating\"\r\n                    @click=\"generateAIResponse\"\r\n                  >\r\n                    <img src=\"/icon/img_ai.png\" alt=\"Dify\" class=\"img-ai\" />\r\n                    {{ isGenerating ? '..' : '' }}\r\n                  </el-button>\r\n                  <el-button \r\n                    type=\"primary\" \r\n                    class=\"send-btn\"\r\n                    :disabled=\"isSending || !messageInput.trim()\"\r\n                    :loading=\"isSending\"\r\n                    @click=\"sendMessageByHand\"\r\n                  >\r\n                    {{ isSending ? '.' : '' }}\r\n                  </el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n        \r\n        <!--  -->\r\n        <div v-else class=\"empty-chat-container\">\r\n          <div class=\"empty-state\">\r\n            <div class=\"empty-state-icon\"></div>\r\n            <div class=\"empty-state-text\"></div>\r\n            <div class=\"empty-state-subtext\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!--  -->\r\n    <AIStaffConfig\r\n      v-model:visible=\"strategyDialogVisible\"\r\n      :coze-agents=\"cozeAgents\"\r\n      @save=\"handleStrategyChange\"\r\n    />\r\n    <reply-log-dialog\r\n      v-model:visible=\"logDialogVisible\"\r\n    />\r\n    \r\n    <!--  -->\r\n    <AccountStatusDialog\r\n      v-model:visible=\"showAccountStatusDialog\"\r\n      :account-list=\"accountStatusList\"\r\n      @confirm=\"handleAccountStatusConfirm\"\r\n    />\r\n    \r\n    <!--  -->\r\n    <CommonErrorDialog\r\n      v-model:visible=\"errorDialogVisible\"\r\n      :title=\"errorTitle\"\r\n      :content=\"errorContent\"\r\n      :error-detail=\"errorDetail\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, onUnmounted, nextTick, watch,computed } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { getLatestSessions, sendChatMessage, ChatSession, \r\n  ChatMessage, getChatMessages, startChatMonitor, stopChatMonitor, \r\n  getMonitorStatus,getStatsData, StatsData,getHistoryMessages,\r\n  getHistorySessions,confirmAutoReply, createAutoReplyTask,updateManualReviewStatus,\r\n  getSuspendedSessions, unsuspendSession, SuspendedSession } from '@/api/chat'\r\nimport AIStaffConfig from '@/components/chat/AIStaffConfig.vue'\r\nimport CommonErrorDialog from '@/components/CommonErrorDialog.vue'\r\nimport {User, Refresh,DocumentCopy, ArrowRight } from '@element-plus/icons-vue'  // \r\nimport ReplyLogDialog from '@/components/chat/ReplyLogDialog.vue'  // \r\nimport StatsPanel from '@/components/chat/StatsPanel.vue'  // \r\nimport AccountStatusDialog from '@/components/chat/AccountStatusDialog.vue'  // \r\nimport { getConfig } from '@/api/config'\r\nimport { useRouter } from 'vue-router'\r\n\r\n// \r\nconst router = useRouter()\r\nconst isSending = ref(false)\r\n// \r\nconst logDialogVisible = ref(false)\r\nconst autoReplyEnabled = ref(false)\r\nconst messageInput = ref('')\r\nconst currentChat = ref<ChatSession | null>(null)\r\nconst loading = ref(false)\r\nconst clearCache = ref(false) // \r\nconst refreshingChat = ref(false)\r\nconst error = ref('')\r\nconst isInitialLoad = ref(true)\r\nconst isInputting = ref(false)\r\nconst currentProcessingName = ref('')\r\nconst strategyDialogVisible = ref(false)\r\nconst selectedStrategy = ref('none')\r\nconst isGenerating = ref(false)\r\nconst isProcessingChat = ref(false)\r\nconst chatList = ref<ChatSession[]>([])\r\nconst messages = ref<ChatMessage[]>([])\r\nconst refreshing = ref(false)\r\nconst isNarrowScreen = ref(window.innerWidth < 600)\r\nconst statsExpanded = ref(false)\r\nconst activeTab = ref('recent')\r\nconst currentTaskId = ref(null)  // ID\r\nconst pendingReply = ref<{task_id: string, content: string, timeout?: number} | null>(null)  // \r\nconst countdownTimer = ref<number | null>(null)  // \r\nconst countdown = ref(0)  // \r\nconst isAutoSending = ref(false)  // \r\nconst manualReviewEnabled = ref(false)  // \r\n\r\n// \r\nconst suspendedList = ref<SuspendedSession[]>([])\r\nconst refreshingSuspended = ref(false)\r\n\r\n// \r\nconst refreshingHistory = ref(false)\r\nconst loadingHistory = ref(false)\r\nconst collapsedGroups = ref<Record<string, boolean>>({})\r\n\r\n// \r\nconst cozeAgents = ref<any[]>([])\r\nconst historySessions = ref<ChatSession[]>([])\r\n// \r\nconst statsData = ref<StatsData>({\r\n  sessionCount: 0,\r\n  sessionIncrease: 0,\r\n  messageCount: 0,\r\n  messageIncrease: 0,\r\n  savedHours: 0,\r\n  savedMoney: 0\r\n})\r\n\r\n// \r\nconst groupedHistoryList = computed(() => {\r\n  const groups: Record<string, { nickname: string, sessions: ChatSession[] }> = {}\r\n  \r\n  historySessions.value.forEach(session => {\r\n    const accountId = session.account_id || 'unknown'\r\n    const nickname = session.account_nickname || ''\r\n    \r\n    if (!groups[accountId]) {\r\n      groups[accountId] = {\r\n        nickname,\r\n        sessions: []\r\n      }\r\n    }\r\n    \r\n    // IDID\r\n    session.unique_id = session.unique_id || `${accountId}_${session.name}`\r\n    groups[accountId].sessions.push(session)\r\n  })\r\n  \r\n  return groups\r\n})\r\n\r\n// \r\nconst formatSuspendedTime = (timestamp: number) => {\r\n  if (!timestamp) return ''\r\n  const date = new Date(timestamp * 1000)\r\n  const month = (date.getMonth() + 1).toString().padStart(2, '0')\r\n  const day = date.getDate().toString().padStart(2, '0')\r\n  const hours = date.getHours().toString().padStart(2, '0')\r\n  const minutes = date.getMinutes().toString().padStart(2, '0')\r\n  return `${month}-${day} ${hours}:${minutes}`\r\n}\r\n\r\n// \r\nconst refreshSuspendedList = async () => {\r\n  refreshingSuspended.value = true\r\n  try {\r\n    suspendedList.value = await getSuspendedSessions()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    refreshingSuspended.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst confirmUnsuspend = (session: SuspendedSession) => {\r\n  ElMessageBox.confirm(\r\n    ` ${session.session_name} `,\r\n    '',\r\n    {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'warning',\r\n    }\r\n  ).then(async () => {\r\n    const success = await unsuspendSession(session.session_name, session.account_id)\r\n    if (success) {\r\n      ElMessage.success('')\r\n      refreshSuspendedList()\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  }).catch(() => {\r\n    // \r\n  })\r\n}\r\n\r\n// \r\nconst refreshHistoryList = async () => {\r\n  refreshingHistory.value = true\r\n  loadingHistory.value = true\r\n  try {\r\n    historySessions.value = await getHistorySessions()\r\n    // \r\n    Object.keys(groupedHistoryList.value).forEach(accId => {\r\n      collapsedGroups.value[accId] = false\r\n    })\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    refreshingHistory.value = false\r\n    loadingHistory.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst toggleGroup = (accountId: string) => {\r\n  collapsedGroups.value[accountId] = !collapsedGroups.value[accountId]\r\n}\r\n\r\n// tab\r\nwatch(activeTab, (newTab) => {\r\n  if (newTab === 'history' && historySessions.value.length === 0) {\r\n    refreshHistoryList()\r\n  } else if (newTab === 'suspended') {\r\n    refreshSuspendedList()\r\n  }\r\n})\r\n\r\nconst handleManualReviewChange = async (val: boolean) => {\r\n  // val\r\n  const enabled = typeof val === 'boolean' ? val : manualReviewEnabled.value;\r\n  \r\n  if (!autoReplyEnabled.value) {\r\n    return\r\n  }\r\n  \r\n  try {\r\n    await updateManualReviewStatus(enabled)\r\n    ElMessage.success(`${enabled ? '' : ''}`)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    // \r\n    manualReviewEnabled.value = !enabled\r\n  }\r\n}\r\n// \r\nconst messageCache = new Map()\r\nconst lastMessageTimes = new Map<number, { time: number; content: string }>()\r\n\r\n// \r\nconst monitorStatusHandler = ((event: CustomEvent) => {\r\n  const { running } = event.detail;\r\n  autoReplyEnabled.value = running;\r\n}) as EventListener;\r\n\r\n// \r\ninterface SyncError {\r\n  message: string;\r\n  type: string;\r\n}\r\n\r\n// \r\nconst handleResize = () => {\r\n  const newIsNarrow = window.innerWidth < 600\r\n  if (isNarrowScreen.value !== newIsNarrow) {\r\n    isNarrowScreen.value = newIsNarrow\r\n  }\r\n}\r\n\r\nconst taskSessionHandler = ((event: CustomEvent) => {\r\n  const { status, session_name } = event.detail;\r\n  if (status === 'processing') {\r\n    currentProcessingName.value = session_name;\r\n    isProcessingChat.value = true;\r\n  } else {\r\n    if (currentProcessingName.value === session_name) {\r\n      currentProcessingName.value = '';\r\n      isProcessingChat.value = false;\r\n    }\r\n    // \r\n    if (status === 'completed') {\r\n      refreshStatsData();\r\n    }\r\n  }\r\n}) as EventListener;\r\n\r\nconst sessionListHandler = ((event: CustomEvent) => {\r\n  const { sessions } = event.detail;\r\n  if (Array.isArray(sessions)) {\r\n    const processedList = sessions.map(session => ({\r\n      id: session.unique_id || session.id || Date.now(),\r\n      name: session.name || '',\r\n      avatar: session.avatar || '',\r\n      lastMessage: session.lastMessage || '',\r\n      lastTime: session.lastTime || '',\r\n      unread: session.unread || 0,\r\n      isGroup: session.isGroup || false,\r\n      account_id: session.account_id || '',\r\n      account_nickname: session.account_nickname || '',\r\n      unique_id: session.unique_id || session.name\r\n    }));\r\n    \r\n    // \r\n    const existingList = chatList.value || [];\r\n    const mergedList = [...existingList];\r\n    \r\n    processedList.forEach(newSession => {\r\n      const existingIndex = mergedList.findIndex(existing => \r\n        existing.unique_id === newSession.unique_id || existing.id === newSession.id\r\n      );\r\n      \r\n      if (existingIndex >= 0) {\r\n        // \r\n        mergedList[existingIndex] = newSession;\r\n      } else {\r\n        // \r\n        mergedList.push(newSession);\r\n      }\r\n    });\r\n    \r\n    // \r\n    mergedList.sort((a, b) => {\r\n      const timeA = new Date(a.lastTime || 0).getTime();\r\n      const timeB = new Date(b.lastTime || 0).getTime();\r\n      return timeB - timeA;\r\n    });\r\n    \r\n    chatList.value = mergedList;\r\n  }\r\n}) as EventListener;\r\n\r\n// \r\nconst refreshStatsData = async () => {\r\n  try {\r\n    const data = await getStatsData()\r\n    statsData.value = data\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst toggleStatsPanel = async () => {\r\n  statsExpanded.value = !statsExpanded.value\r\n  if (statsExpanded.value) {\r\n    await refreshStatsData()\r\n  }\r\n}\r\n// \r\nconst fetchHistorySessions = async () => {\r\n  try {\r\n    const sessions = await getHistorySessions()\r\n    historySessions.value = sessions\r\n  } catch (err) {\r\n    console.error(':', err)\r\n  }\r\n}\r\n\r\n// \r\nconst selectHistoryChat = async (session: ChatSession) => {\r\n  if (currentChat.value?.id === session.id) return\r\n  currentChat.value = session\r\n  \r\n  try {\r\n    // \r\n    messages.value = []\r\n    \r\n    // \r\n    const result = await getHistoryMessages(session.name, session.account_id)\r\n    const chatMessages = result.messages || []\r\n    \r\n    // \r\n    if (Array.isArray(chatMessages)) {\r\n      messages.value = chatMessages\r\n    }\r\n    \r\n    await scrollToBottom()\r\n  } catch (err) {\r\n    error.value = ''\r\n    loading.value = false\r\n  }\r\n}\r\n// \r\nconst checkMonitorStatus = async () => {\r\n  try {\r\n    const result = await getMonitorStatus()\r\n    if (result.success) {\r\n      autoReplyEnabled.value = result.data.running\r\n      // \r\n      if (result.data.manual_review_enabled !== undefined) {\r\n        manualReviewEnabled.value = result.data.manual_review_enabled\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\nconst pendingReplyHandler = ((event: CustomEvent) => {\r\n  handlePendingReply(event)\r\n}) as EventListener;\r\n\r\n// \r\nconst errorDialogVisible = ref(false)\r\nconst errorTitle = ref('')\r\nconst errorContent = ref('')\r\nconst errorDetail = ref('')\r\n\r\nconst handleErrorTask = ((event: CustomEvent) => {\r\n  const data = event.detail\r\n  if (data.scene === 'AI') {\r\n    const params = data.params || []\r\n    const errorMsg = params[0] || ''\r\n    const sessionName = params[1] || ''\r\n    const agentId = params[2] || 'ID'\r\n    \r\n    errorTitle.value = ''\r\n    errorContent.value = ` ${sessionName}  ${agentId} `\r\n    errorDetail.value = errorMsg\r\n    errorDialogVisible.value = true\r\n  }\r\n}) as EventListener;\r\n\r\n// \r\nonMounted(async () => {\r\n  await loadCozeAgents()\r\n  await checkMonitorStatus()\r\n  \r\n  // \r\n  window.addEventListener('monitor-status', monitorStatusHandler);\r\n  window.addEventListener('task-session', taskSessionHandler);\r\n  window.addEventListener('session-list', sessionListHandler);\r\n  window.addEventListener('pending-reply', pendingReplyHandler);\r\n  window.addEventListener('error-task', handleErrorTask);\r\n  \r\n  await nextTick()\r\n  handleResize() // \r\n  window.addEventListener('resize', handleResize)\r\n  \r\n  // \r\n  requestAnimationFrame(() => {\r\n    isInitialLoad.value = false\r\n  })\r\n})\r\n\r\nonUnmounted(() => {\r\n  // \r\n  window.removeEventListener('monitor-status', monitorStatusHandler);\r\n  window.removeEventListener('task-session', taskSessionHandler);\r\n  window.removeEventListener('session-list', sessionListHandler);\r\n  window.removeEventListener('resize', handleResize);\r\n  window.removeEventListener('pending-reply', pendingReplyHandler);\r\n  window.removeEventListener('error-task', handleErrorTask);\r\n  clearPendingReply()\r\n})\r\n\r\n// \r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result.success && result.data) {\r\n      cozeAgents.value = Array.isArray(result.data) ? result.data : result.data.agents || []\r\n      console.debug(':', cozeAgents.value)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst refreshCurrentChat = async () => {\r\n  if (!currentChat.value || refreshingChat.value) return\r\n  \r\n  refreshingChat.value = true\r\n  try {\r\n    const { messages: chatMessages, chatType } = await getChatMessages(currentChat.value.name, currentChat.value.account_id)\r\n    \r\n    // \r\n    if (chatType === 'official_account') {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    if (Array.isArray(chatMessages)) {\r\n      messages.value = chatMessages\r\n    }\r\n    await scrollToBottom()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    refreshingChat.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst showLogDialog = () => {\r\n  logDialogVisible.value = true\r\n}\r\n\r\n// \r\nconst handleRefresh = async () => {\r\n  if (refreshing.value) return\r\n  refreshing.value = true\r\n  try {\r\n    await fetchSessionList()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    refreshing.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst showStrategyDialog = () => {\r\n  strategyDialogVisible.value = true\r\n}\r\n\r\n// AI\r\nconst generateAIResponse = async () => {\r\n  if (!currentChat.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  // \r\n  if (!currentChat.value.lastMessage) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  isGenerating.value = true\r\n  try {\r\n    // \r\n    const result = await createAutoReplyTask({\r\n      sessionId: currentChat.value.id,\r\n      content: currentChat.value.lastMessage, // \r\n      userName: currentChat.value.name,\r\n      sessionName: currentChat.value.name,\r\n      isGroup: currentChat.value.isGroup || false,\r\n      accountId: currentChat.value.account_id // ID\r\n    })\r\n\r\n    if (result.success) {\r\n      if (result.message === 'task_exists') {\r\n        ElMessage.warning('AI')\r\n      } else {\r\n        ElMessage.success('AI...')\r\n        // ID\r\n        currentTaskId.value = result.taskId\r\n      }\r\n    } else {\r\n      throw new Error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    console.error('AI:', error)\r\n    ElMessage.error('AI')\r\n  } finally {\r\n    isGenerating.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst handleStrategyChange = async (strategyType: string) => {\r\n  selectedStrategy.value = strategyType\r\n}\r\n\r\n// \r\nconst showAccountStatusDialog = ref(false)\r\nconst accountStatusList = ref<any[]>([])\r\n\r\n// \r\nconst handleAccountStatusConfirm = () => {\r\n  // \r\n}\r\n\r\n// \r\nconst handleAutoReplyChange = async (val: string | number | boolean) => {\r\n  if (val) {\r\n    try {\r\n      const result = await startChatMonitor({\r\n        manualReview: manualReviewEnabled.value\r\n      })\r\n      if (result.status !== 'success') {\r\n        // \r\n        if (result.code === 'VALIDATION_FAILED' && result.accounts) {\r\n          // \r\n          accountStatusList.value = result.accounts\r\n          showAccountStatusDialog.value = true\r\n          autoReplyEnabled.value = false\r\n          return\r\n        }\r\n        // \r\n        ElMessage.error(result.message || '')\r\n        autoReplyEnabled.value = false\r\n        return\r\n      }\r\n      // \r\n      ElMessage.success(result.message || '')\r\n    } catch (error: unknown) {\r\n      // \r\n      if (error instanceof Error && typeof error.message === 'string') {\r\n          try {\r\n            const errorData = JSON.parse(error.message) as SyncError\r\n            if (errorData.type === 'SYNC_ERROR') {\r\n              ElMessageBox.confirm(\r\n                errorData.message,\r\n                '',\r\n                {\r\n                  confirmButtonText: '',\r\n                  cancelButtonText: '',\r\n                  type: 'warning',\r\n                }\r\n              ).then(() => {\r\n                router.push('/mass-sending?tab=group')\r\n              }).catch(() => {\r\n                autoReplyEnabled.value = false\r\n              })\r\n              return\r\n            }\r\n          } catch {}\r\n        }\r\n      autoReplyEnabled.value = false\r\n      return\r\n    }\r\n  } else {\r\n    await stopChatMonitor()\r\n    manualReviewEnabled.value = false\r\n    try {\r\n      await updateManualReviewStatus(false)\r\n    } catch {}\r\n  }\r\n}\r\n\r\n// \r\nconst scrollToBottom = async () => {\r\n  await nextTick() //  DOM \r\n  const container = document.querySelector('.messages')\r\n  if (container) {\r\n    //  setTimeout \r\n    setTimeout(() => {\r\n      container.scrollTop = container.scrollHeight\r\n    }, 100)\r\n  }\r\n}\r\n\r\n//  messages \r\nwatch(() => messages.value, () => {\r\n  scrollToBottom()\r\n}, { deep: true })\r\nwatch(activeTab, (newVal) => {\r\n  if (newVal === 'history') {\r\n    fetchHistorySessions()\r\n  } else if(newVal === 'recent'){\r\n    fetchSessionList()\r\n  }\r\n})\r\nwatch(autoReplyEnabled, (enabled) => {\r\n  if (!enabled) {\r\n    manualReviewEnabled.value = false\r\n  }\r\n})\r\n\r\n// \r\nconst handleInputFocus = () => {\r\n  isInputting.value = true\r\n}\r\n\r\n// \r\nconst clearMessageCache = () => {\r\n  messageCache.clear()\r\n  lastMessageTimes.clear()\r\n  chatList.value = []\r\n  messages.value = []\r\n}\r\n\r\n// \r\nconst selectChat = async (chat: ChatSession, isManualSelect = true) => {\r\n  if (currentChat.value?.id === chat.id) return { messages: messages.value }\r\n  currentChat.value = chat\r\n}\r\n\r\n// \r\nconst sendMessage = async (content: string) => {\r\n  if (!currentChat.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  messageInput.value = ''\r\n  \r\n  try {\r\n    const result = await sendChatMessage(currentChat.value.name, content)\r\n    console.debug(':', result)\r\n    \r\n    if (result.status === 'success') {\r\n      console.debug(\"\",currentChat);   \r\n      // \r\n      if (result.data?.messages && Array.isArray(result.data.messages)) {\r\n        // \r\n        messages.value = result.data.messages\r\n      }       \r\n      await scrollToBottom()\r\n    } else {\r\n      error.value = result.message || ''\r\n    }\r\n  } catch (err) {\r\n    error.value = ''\r\n  }\r\n}\r\n\r\n// \r\nconst sendMessageByHand = async () => {\r\n  if (!messageInput.value.trim()) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  // \r\n  if (isSending.value) {\r\n    return\r\n  }\r\n  \r\n  // \r\n  isSending.value = true\r\n  \r\n  try {\r\n    // \r\n    if (countdownTimer.value) {\r\n      clearInterval(countdownTimer.value)\r\n      countdownTimer.value = null\r\n    }\r\n    isAutoSending.value = false\r\n    \r\n    // API\r\n    if (pendingReply.value && currentTaskId.value) {\r\n      try {\r\n        await confirmAutoReply({\r\n          task_id: currentTaskId.value,\r\n          action: 'confirm',\r\n          final_content: messageInput.value.trim()\r\n        })\r\n        \r\n        clearPendingReply()\r\n        ElMessage.success('')\r\n        return\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        ElMessage.error('')\r\n        // \r\n        isAutoSending.value = true\r\n        startCountdown(countdown.value || 30)\r\n        return\r\n      }\r\n    }\r\n    \r\n    // \r\n    await sendMessage(messageInput.value)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    // \r\n    isSending.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst fetchSessionList = async () => {\r\n  try {\r\n    if (clearCache.value) {\r\n      clearMessageCache()\r\n    }\r\n    const list = await getLatestSessions()\r\n    \r\n    // \r\n    const processedList = list.map(session => {\r\n      //  session \r\n      const processedSession = {\r\n        id: session.unique_id || session.id || Date.now(), // unique_id\r\n        name: session.name || '',\r\n        avatar: session.avatar || '',\r\n        lastMessage: session.lastMessage || '',\r\n        lastTime: session.lastTime || '',\r\n        unread: session.unread || 0,\r\n        isGroup: session.isGroup || false,\r\n        account_id: session.account_id || '',\r\n        account_nickname: session.account_nickname || '',\r\n        unique_id: session.unique_id || session.name\r\n      }\r\n      \r\n      return processedSession\r\n    })\r\n    \r\n    chatList.value = processedList\r\n    return processedList\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    return []\r\n  }\r\n}\r\n// \r\nconst handlePendingReply = (event: CustomEvent) => {\r\n  const data = event.detail\r\n  \r\n  // \r\n  if (autoReplyEnabled.value && activeTab.value !== 'recent') {\r\n    activeTab.value = 'recent'\r\n  }\r\n\r\n  console.debug(':', data, chatList)\r\n  // unique_id\r\n  const uniqueId = data.unique_id || `${data.account_id}_${data.session_name}`\r\n  let targetChat = null\r\n  // activeTab\r\n  if (activeTab.value === 'recent') {\r\n    // unique_id\r\n    targetChat = chatList.value.find(chat => \r\n      chat.unique_id === uniqueId || chat.id === uniqueId\r\n    )\r\n  } else if (activeTab.value === 'history') {\r\n    // unique_id\r\n    targetChat = historySessions.value.find(chat => \r\n      chat.unique_id === uniqueId || chat.id === uniqueId\r\n    )\r\n  }\r\n  if (!targetChat) {\r\n    console.warn(`: ${data.session_name} (: ${data.account_id})`)\r\n    ElMessage.warning(`: ${data.session_name} (: ${data.account_id})`)\r\n    return\r\n  }\r\n  \r\n  // \r\n  // selectChat(targetChat, false) \r\n    // \r\n    if (activeTab.value === 'recent') {\r\n    // \r\n    selectChat(targetChat, false)\r\n  } else if (activeTab.value === 'history') {\r\n    // \r\n    selectHistoryChat(targetChat)\r\n  }\r\n  \r\n  // AI\r\n  pendingReply.value = {\r\n    task_id: data.task_id,\r\n    content: data.ai_reply,  // ai_reply\r\n    timeout: data.timeout\r\n  }\r\n  messageInput.value = data.ai_reply || ''  // ai_reply\r\n  currentTaskId.value = data.task_id\r\n  \r\n  // \r\n  startCountdown(data.timeout || 30)\r\n  \r\n  ElMessage({\r\n    message: `AI${data.timeout || 30}`,\r\n    type: 'success',\r\n    duration: 2000\r\n  })\r\n}\r\nconst countdownOverlayRef = ref<HTMLElement | null>(null)  // \r\n\r\n// computed\r\nconst circleProgress = computed(() => {\r\n  if (countdown.value <= 0) return 0\r\n  const initialTime = pendingReply.value?.timeout || 30\r\n  const progress = ((initialTime - countdown.value) / initialTime) * 100\r\n  return Math.min(progress, 100)\r\n})\r\n\r\n// stroke-dasharray\r\nconst circleStrokeDasharray = computed(() => {\r\n  const circumference = 2 * Math.PI * 18 // 18\r\n  const progress = circleProgress.value\r\n  const dashLength = (progress / 100) * circumference\r\n  return `${dashLength} ${circumference}`\r\n})\r\n\r\n// \r\nconst groupedChatList = computed(() => {\r\n  const groups: Record<string, { sessions: any[], lastTime: string }> = {}\r\n  \r\n  chatList.value.forEach(chat => {\r\n    const accountId = chat.account_id || ''\r\n    if (!groups[accountId]) {\r\n      groups[accountId] = { sessions: [], lastTime: '' }\r\n    }\r\n    groups[accountId].sessions.push(chat)\r\n    // \r\n    if (!groups[accountId].lastTime || (chat.lastTime && chat.lastTime > groups[accountId].lastTime)) {\r\n      groups[accountId].lastTime = chat.lastTime || ''\r\n    }\r\n  })\r\n  \r\n  // \r\n  Object.values(groups).forEach(group => {\r\n    group.sessions.sort((a, b) => {\r\n      const timeA = new Date(a.lastTime || 0).getTime()\r\n      const timeB = new Date(b.lastTime || 0).getTime()\r\n      return timeB - timeA\r\n    })\r\n  })\r\n  \r\n  return groups\r\n})\r\n\r\n// \r\nconst groupedHistorySessions = computed(() => {\r\n  const groups: Record<string, { sessions: any[], lastTime: string }> = {}\r\n  \r\n  historySessions.value.forEach(session => {\r\n    const accountId = session.account_id || ''\r\n    if (!groups[accountId]) {\r\n      groups[accountId] = { sessions: [], lastTime: '' }\r\n    }\r\n    groups[accountId].sessions.push(session)\r\n    // \r\n    if (!groups[accountId].lastTime || (session.lastTime && session.lastTime > groups[accountId].lastTime)) {\r\n      groups[accountId].lastTime = session.lastTime || ''\r\n    }\r\n  })\r\n  \r\n  // \r\n  Object.values(groups).forEach(group => {\r\n    group.sessions.sort((a, b) => {\r\n      const timeA = new Date(a.lastTime || 0).getTime()\r\n      const timeB = new Date(b.lastTime || 0).getTime()\r\n      return timeB - timeA\r\n    })\r\n  })\r\n  \r\n  return groups\r\n})\r\n// \r\nconst startCountdown = (seconds: number) => {\r\n  countdown.value = seconds\r\n  isAutoSending.value = true\r\n  \r\n  countdownTimer.value = setInterval(() => {\r\n    countdown.value--\r\n    \r\n    // refDOMthis.$el\r\n    if (countdown.value <= 5 && countdownOverlayRef.value) {\r\n      countdownOverlayRef.value.classList.add('urgent')\r\n    }\r\n    \r\n    if (countdown.value <= 0) {\r\n      // \r\n      autoConfirmReply()\r\n      // \r\n      if (countdownTimer.value) {\r\n        clearInterval(countdownTimer.value)\r\n        countdownTimer.value = null\r\n      }\r\n      // \r\n      countdown.value = 0\r\n    }\r\n  }, 1000)\r\n}\r\n\r\n// \r\nconst autoConfirmReply = async () => {\r\n  if (!pendingReply.value) return\r\n  \r\n  try {\r\n    await confirmAutoReply({\r\n      task_id: pendingReply.value.task_id,\r\n      action: 'confirm',\r\n      final_content: messageInput.value\r\n    })\r\n    \r\n    clearPendingReply()\r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n    clearPendingReply()\r\n  }\r\n}\r\n\r\n// \r\nconst cancelPendingReply = async () => {\r\n  if (!pendingReply.value) return\r\n  \r\n  try {\r\n    await confirmAutoReply({\r\n      task_id: pendingReply.value.task_id,\r\n      action: 'cancel'\r\n    })\r\n    \r\n    clearPendingReply()\r\n    ElMessage.info('AI')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst copyMessageInput = async () => {\r\n  if (!messageInput.value.trim()) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    await navigator.clipboard.writeText(messageInput.value)\r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst clearPendingReply = () => {\r\n  if (countdownTimer.value) {\r\n    clearInterval(countdownTimer.value)\r\n    countdownTimer.value = null\r\n  }\r\n  \r\n  pendingReply.value = null\r\n  countdown.value = 0\r\n  isAutoSending.value = false\r\n  messageInput.value = ''\r\n  currentTaskId.value = null\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.ai-chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  background: linear-gradient(180deg, #2c3e50, #4a5568, #2d3748);\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n  color: #333;\r\n}\r\n\r\n/*  */\r\n.settings-bar {\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #fff;\r\n  border-radius: 12px;\r\n  margin-bottom: 15px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n}\r\n.settings-content {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px 16px;\r\n  width: 100%;\r\n}\r\n/*  */\r\n.status-indicator-chat {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  max-width: 200px; /*  */\r\n  flex-shrink: 0; /*  */\r\n}\r\n\r\n.status-indicator-chat .el-tag {\r\n  margin: 0;\r\n  font-size: 12px;\r\n  height: 20px;\r\n  line-height: 18px;\r\n  max-width: 100%; /*  */\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis; /*  */\r\n}\r\n.auto-reply-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0;\r\n}\r\n.manual-review-checkbox {\r\n  margin-left: 10px;\r\n}\r\n\r\n.manual-review-checkbox.is-disabled {\r\n  opacity: 0.5;\r\n}\r\n.settings-right {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.stats-btn, .log-btn, .setting-btn {\r\n  height: 32px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.stats-btn {\r\n  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);\r\n  border: 2px solid #e2e8f0;\r\n  color: #4a5568;\r\n  padding: 8px 16px;\r\n  border-radius: 10px;\r\n  height: 32px;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.stats-btn::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: -100%;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);\r\n  transition: left 0.5s ease;\r\n}\r\n.stats-btn:hover {\r\n  background: linear-gradient(135deg, #edf2f7 0%, #e2e8f0 100%);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n  border-color: #cbd5e0;\r\n}\r\n.stats-btn:hover::before {\r\n  left: 100%;\r\n}\r\n.stats-btn.active, .stats-btn:active {\r\n  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);\r\n  color: white;\r\n  border-color: #4facfe;\r\n  box-shadow: 0 4px 12px rgba(79, 172, 254, 0.3);\r\n}\r\n\r\n.setting-btn:hover {\r\n  background: linear-gradient(135deg, #5a6eea 0%, #6a3ca2 100%);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n}\r\n.rotate-icon {\r\n  transform: rotate(0deg); /*  */\r\n  transition: all 0.3s ease;\r\n  font-size: 16px;\r\n  display: inline-block;\r\n}\r\n/* 90270 */\r\n.stats-btn.active .rotate-icon {\r\n  transform: rotate(180deg) scale(1.1);\r\n}\r\n\r\n.status-indicator {\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.dot-flashing {\r\n  display: inline-block;\r\n  width: 4px;\r\n  height: 4px;\r\n  border-radius: 50%;\r\n  background-color: currentColor;\r\n  margin-right: 6px;\r\n  animation: dot-flashing 1s infinite linear;\r\n}\r\n\r\n@keyframes dot-flashing {\r\n  0%, 100% { opacity: 1; }\r\n  50% { opacity: 0.5; }\r\n}\r\n\r\n/*  */\r\n.main-content1 {\r\n  display: flex;\r\n  flex: 1;\r\n  background: rgba(30, 41, 59, 0.8);\r\n  backdrop-filter: blur(10px);\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n/*  */\r\n.chat-list {\r\n  min-width: 260px;\r\n  width: 25%;\r\n  max-width: 350px;\r\n  border-right: 1px solid rgba(0, 0, 0, 0.1);\r\n  overflow-y: auto;\r\n  transition: width 0.3s ease;\r\n  background: rgba(255, 255, 255, 0.98);\r\n  \r\n  /*  */\r\n  scrollbar-width: thin; /* Firefox */\r\n  scrollbar-color: rgba(0, 0, 0, 0.1) transparent; /* Firefox */\r\n}\r\n.chat-list::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.chat-list::-webkit-scrollbar-track {\r\n  background: transparent;\r\n}\r\n\r\n.chat-list::-webkit-scrollbar-thumb {\r\n  background-color: rgba(0, 0, 0, 0.1);\r\n  border-radius: 6px;\r\n  border: 2px solid transparent;\r\n}\r\n\r\n.chat-list::-webkit-scrollbar-thumb:hover {\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.chat-tabs {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-tabs-container {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n:deep(.el-tabs__content) {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 0;\r\n}\r\n\r\n:deep(.el-tabs__nav) {\r\n  width: 100%;\r\n  display: flex;\r\n}\r\n.img-ai {\r\n  width: 24px;\r\n  height: 24px;\r\n  object-fit: contain;\r\n}\r\n:deep(.el-tabs__item) {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 0 !important;\r\n  justify-content: center;\r\n}\r\n\r\n.tab-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-bottom: 12px;\r\n  padding-left: 16px;\r\n  padding-right: 16px;\r\n  border-bottom: 1px solid #e4e7ed;\r\n  background: #f8f9fa;\r\n}\r\n\r\n.tab-header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  flex: 1; /*  */\r\n  min-width: 0; /*  */\r\n  overflow: hidden; /*  */\r\n}\r\n\r\n.tab-title {\r\n  flex-shrink: 0; /*  */\r\n  white-space: nowrap; /*  */\r\n}\r\n.refresh-icon-btn {\r\n  padding: 6px;\r\n}\r\n\r\n.chat-item {\r\n  display: flex;\r\n  padding: 12px 15px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.chat-item:hover {\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.chat-item.active {\r\n  background-color: #e6f7ff;\r\n}\r\n\r\n.chat-item.unread {\r\n  background-color: #f0f9eb;\r\n}\r\n\r\n.avatar-wrapper {\r\n  position: relative;\r\n  margin-right: 12px;\r\n}\r\n\r\n.unread-dot {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 10px;\r\n  height: 10px;\r\n  background-color: #f56c6c;\r\n  border-radius: 50%;\r\n}\r\n\r\n.chat-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.chat-header {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n}\r\n\r\n.chat-title {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.name-tag-container {\r\n  display: flex;\r\n  align-items: center;\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.chat-name {\r\n  flex: 1;\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  margin-right: 8px;\r\n  display: inline-block;\r\n}\r\n\r\n.chat-time {\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n\r\n.last-message {\r\n  font-size: 13px;\r\n  color: #666;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n.cyberpunk-checkbox {\r\n  appearance: none;\r\n  width: 18px;\r\n  height: 18px;\r\n  border: 2px solid #1890ff;\r\n  border-radius: 4px;\r\n  background-color: transparent;\r\n  display: inline-block;\r\n  position: relative;\r\n  margin-right: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  vertical-align: middle;\r\n}\r\n\r\n.cyberpunk-checkbox:before {\r\n  content: \"\";\r\n  background-color: #1890ff;\r\n  display: block;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%) scale(0);\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 2px;\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n\r\n.cyberpunk-checkbox:checked {\r\n  background-color: rgba(24, 144, 255, 0.1);\r\n  border-color: #1890ff;\r\n  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n}\r\n\r\n.cyberpunk-checkbox:checked:before {\r\n  transform: translate(-50%, -50%) scale(1);\r\n}\r\n\r\n.cyberpunk-checkbox:hover {\r\n  border-color: #40a9ff;\r\n  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.1);\r\n}\r\n\r\n.cyberpunk-checkbox-label {\r\n  font-size: 14px;\r\n  color: #333;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 10px;\r\n  padding: 6px 12px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.cyberpunk-checkbox-label:hover {\r\n  background-color: rgba(24, 144, 255, 0.05);\r\n}\r\n.group-tag {\r\n  border-radius: 10px;\r\n  font-size: 12px;\r\n  margin-right: 5px;\r\n}\r\n\r\n/*  */\r\n.chat-area {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 0;\r\n  position: relative;\r\n  background: #fff;\r\n  transform: translateX(0);\r\n  visibility: visible;\r\n  transition: none;\r\n}\r\n\r\n.chat-area:not(.no-transition) {\r\n  transition: transform 0.3s ease, visibility 0.3s ease;\r\n}\r\n\r\n.chat-area-hidden {\r\n  transform: translateX(100%);\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  background: #fff;\r\n  width: 75%;\r\n  visibility: hidden;\r\n}\r\n.manual-review-top {\r\n  margin-left: 10px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  font-size: 14px;\r\n  color: #606266;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.manual-review-top:hover {\r\n  color: #409eff;\r\n}\r\n.manual-review-top.is-disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n.current-chat-header {\r\n  flex-shrink: 0;\r\n  height: 50px; /* 50 */\r\n  padding: 0 15px; /*  */\r\n  border-bottom: 1px solid #eee;\r\n  background-color: #f5f7fa;\r\n  display: flex;\r\n  align-items: center; /*  */\r\n  justify-content: space-between;\r\n}\r\n\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.user-name {\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n}\r\n\r\n.refresh-chat-btn {\r\n  height: 32px;\r\n}\r\n\r\n.messages {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow-y: auto;\r\n  background-color: #f9f9f9;\r\n  display: flex;\r\n  flex-direction: column;\r\n  /*  */\r\n  scrollbar-width: thin; /* Firefox */\r\n  scrollbar-color: rgba(0, 0, 0, 0.1) transparent; /* Firefox */\r\n}\r\n/* Webkit (Chrome, Safari, Edge) */\r\n.messages::-webkit-scrollbar {\r\n  width: 6px; /*  */\r\n}\r\n\r\n.messages::-webkit-scrollbar-track {\r\n  background: transparent; /*  */\r\n}\r\n\r\n.messages::-webkit-scrollbar-thumb {\r\n  background-color: rgba(0, 0, 0, 0.1); /*  */\r\n  border-radius: 6px; /*  */\r\n  border: 2px solid transparent; /*  */\r\n}\r\n\r\n.messages::-webkit-scrollbar-thumb:hover {\r\n  background-color: rgba(0, 0, 0, 0.2); /*  */\r\n}\r\n\r\n\r\n.message-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  margin-bottom: 16px;\r\n  max-width: 80%;\r\n  align-self: flex-start; /*  */\r\n}\r\n\r\n.message-wrapper-self {\r\n  align-items: flex-end;\r\n  align-self: flex-end; /*  */\r\n}\r\n\r\n.sender-name {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.message {\r\n  max-width: 100%;\r\n  padding: 10px 14px;\r\n  border-radius: 12px;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n  word-break: break-all;\r\n  border-top-left-radius: 4px; /*  */\r\n}\r\n\r\n.message-self {\r\n  background-color: #95ed68;\r\n  color: #333;\r\n  border-top-right-radius: 4px; /*  */\r\n  border-top-left-radius: 12px; /*  */\r\n}\r\n\r\n.message-time {\r\n  background: none;\r\n  color: #999;\r\n  font-size: 12px;\r\n  text-align: center;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  box-shadow: none;\r\n}\r\n\r\n.voice-text-divider {\r\n  margin: 8px 0;\r\n  border-top: 1px dashed #dcdfe6;\r\n}\r\n\r\n.voice-text {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-top: 4px;\r\n}\r\n\r\n.input-area {\r\n  background: #fff;\r\n  border-top: 1px solid #eee;\r\n}\r\n\r\n.message-input-container {\r\n  background: #fff;\r\n  position: relative; \r\n}\r\n\r\n.input-header {\r\n  padding: 8px 12px;\r\n  border-top: 1px solid #f1f1f1;\r\n}\r\n\r\n.coze-btn {\r\n  font-size: 14px;\r\n  padding: 6px 12px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.input-content {\r\n  padding: 10px;\r\n}\r\n\r\n.input-content :deep(.el-textarea__inner) {\r\n  border: none;\r\n  resize: none;\r\n  box-shadow: none;\r\n  background-color: #f9f9f9;\r\n  border-radius: 8px;\r\n  padding: 10px;\r\n}\r\n\r\n.input-content :deep(.el-textarea__inner:focus) {\r\n  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\r\n}\r\n\r\n.input-footer {\r\n  padding: 8px 12px;\r\n  text-align: right;\r\n}\r\n\r\n.send-btn {\r\n  border-radius: 20px;\r\n  padding: 8px 24px;\r\n  background: linear-gradient(135deg, #1890ff, #096dd9);\r\n  border: none;\r\n  box-shadow: 0 2px 6px rgba(24, 144, 255, 0.3);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.send-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 12px rgba(24, 144, 255, 0.4);\r\n}\r\n.copy-btn {\r\n  margin-right: 8px;\r\n  border: 1px solid #dcdfe6;\r\n  color: #606266;\r\n}\r\n\r\n.copy-btn:hover {\r\n  color: #409eff;\r\n  border-color: #c6e2ff;\r\n  background-color: #ecf5ff;\r\n}\r\n.empty-chat-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  background-color: #f9f9f9;\r\n}\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n  color: #a0aec0;\r\n}\r\n\r\n.empty-state-icon {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.empty-state-text {\r\n  font-size: 16px;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.empty-state-subtext {\r\n  font-size: 14px;\r\n  opacity: 0.8;\r\n}\r\n/*  */\r\n.countdown-overlay {\r\n  position: absolute;\r\n  top: -80px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background: linear-gradient(135deg, #1890ff, #096dd9);\r\n  color: white;\r\n  padding: 16px 20px;\r\n  border-radius: 16px;\r\n  box-shadow: 0 12px 24px rgba(24, 144, 255, 0.3);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  min-width: 320px;\r\n  animation: slideDown 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n  z-index: 100;\r\n  backdrop-filter: blur(10px);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.countdown-overlay.urgent {\r\n  background: linear-gradient(135deg, #ff4d4f, #cf1322);\r\n  animation: pulse 0.8s infinite;\r\n}\r\n\r\n@keyframes slideDown {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateX(-50%) translateY(-20px) scale(0.9);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateX(-50%) translateY(0) scale(1);\r\n  }\r\n}\r\n\r\n@keyframes pulse {\r\n  0%, 100% {\r\n    transform: translateX(-50%) scale(1);\r\n  }\r\n  50% {\r\n    transform: translateX(-50%) scale(1.05);\r\n  }\r\n}\r\n\r\n.countdown-content {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  flex: 1;\r\n}\r\n\r\n.countdown-circle {\r\n  position: relative;\r\n  width: 40px;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.countdown-progress {\r\n  transition: stroke-dasharray 0.3s ease;\r\n}\r\n\r\n.countdown-number {\r\n  position: absolute;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  color: white;\r\n  text-align: center;\r\n}\r\n\r\n.countdown-text {\r\n  flex: 1;\r\n}\r\n\r\n.countdown-title {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.countdown-subtitle {\r\n  font-size: 12px;\r\n  opacity: 0.9;\r\n}\r\n\r\n.cancel-btn {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n  color: white;\r\n  border-radius: 8px;\r\n  padding: 6px 12px;\r\n  font-size: 12px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.cancel-btn:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n  border-color: rgba(255, 255, 255, 0.5);\r\n}\r\n\r\n.setting-btn {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border: none;\r\n  padding: 8px 16px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n/*  */\r\n.account-header {\r\n  padding: 8px 16px;\r\n  background: #f5f7fa;\r\n  border-bottom: 1px solid #e4e7ed;\r\n  margin: 0;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n}\r\n\r\n.account-title {\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n  color: #606266;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.5px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  max-width: 200px;\r\n  display: inline-block;\r\n}\r\n/*  */\r\n@media screen and (max-width: 768px) {\r\n  .settings-content {\r\n    flex-wrap: wrap;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .settings-right {\r\n    flex-wrap: wrap;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .stats-btn, .log-btn, .setting-btn {\r\n    font-size: 12px;\r\n    padding: 6px 10px;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 600px) {\r\n  .chat-list {\r\n    width: 100%;\r\n    max-width: 100%;\r\n  }\r\n  \r\n  .settings-right {\r\n    flex-wrap: wrap;\r\n  }\r\n}\r\n\r\n/*  */\r\n.account-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  margin-top: 4px;\r\n  font-size: 12px;\r\n}\r\n\r\n.account-label {\r\n  color: #999;\r\n  font-size: 11px;\r\n}\r\n\r\n.account-id {\r\n  color: #1890ff;\r\n  font-weight: 600;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 12px;\r\n  background: rgba(24, 144, 255, 0.1);\r\n  padding: 1px 4px;\r\n  border-radius: 3px;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n/*  */\r\n.suspended-list {\r\n  padding: 0;\r\n  overflow-y: auto;\r\n  flex: 1;\r\n}\r\n\r\n.suspended-item {\r\n  padding: 12px 16px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.suspended-item:hover {\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.suspended-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n}\r\n\r\n.suspended-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.suspended-name {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #333;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  margin-right: 8px;\r\n}\r\n\r\n.suspended-time-row {\r\n  font-size: 12px;\r\n  color: #999;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.time-label {\r\n  color: #909399;\r\n}\r\n\r\n.suspended-time {\r\n  color: #606266;\r\n}\r\n</style>\r\n","import script from \"./AiChatNew.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AiChatNew.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AiChatNew.vue?vue&type=style&index=0&id=4639e5cc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4639e5cc\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, withModifiers as _withModifiers, withKeys as _withKeys, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"coze-settings\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"agents-list\"\n}\nconst _hoisted_3 = { class: \"dialog-footer\" }\n\nimport { ref,watch,computed } from 'vue'\r\n  import { ElMessage,FormItemRule } from 'element-plus'\r\n  import type { CozeAgent } from '@/types/coze'\r\n  import { saveConfig } from '@/api/config'\r\n  \r\n  type ValidateCallback = (error?: Error | string) => void\r\n  type ValidateRule = {\r\n    field: string\r\n    fullField: string\r\n    type: string\r\n    validator: (rule: any, value: string, callback: ValidateCallback) => void\r\n  }\r\n\r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CozeAgentConfig',\n  props: {\n    visible: { type: Boolean },\n    agents: {}\n  },\n  emits: ['update:visible', 'update:agents'],\n  setup(__props: any, { emit: __emit }) {\n\r\n  const props = __props\r\n  \r\n  const emit = __emit\r\n  \r\n  const dialogVisible = ref(props.visible)\r\n  const agentFormRef = ref()\r\n  const agentForm = ref({\r\n    name: '',\r\n    botId: '',\r\n    isDefault: false,\r\n    platform: 'coze' //  Coze \r\n  })\r\n  const safeAgents = computed(() => Array.isArray(props.agents) ? props.agents : [])\r\n  const agentRules = {\r\n  name: [\r\n    { required: true, message: '', trigger: 'blur' }\r\n  ] as FormItemRule[],\r\n  botId: [\r\n    { required: true, message: ' Bot ID', trigger: 'blur' },\r\n    {\r\n      validator: async (rule: any, value: string, callback: ValidateCallback) => {\r\n        if (value && checkBotIdExists(value)) {\r\n          callback(new Error(''))\r\n        } else {\r\n          callback()\r\n        }\r\n      },\r\n      trigger: 'blur'\r\n    }\r\n  ] as FormItemRule[]\r\n}\r\n  \r\n  // \r\n  watch(() => props.visible, (val) => {\r\n    dialogVisible.value = val\r\n  })\r\n  \r\n  watch(() => dialogVisible.value, (val) => {\r\n    emit('update:visible', val)\r\n  })\r\n  //  botId \r\nconst checkBotIdExists = (botId: string): boolean => {\r\n  return safeAgents.value.some(agent => agent.botId === botId)\r\n}\r\nconst handleClose = () => {\r\n  dialogVisible.value = false\r\n  agentFormRef.value?.resetFields()\r\n  agentForm.value.isDefault = false  // \r\n}\r\n  \r\n//  handleAdd \r\nconst handleAdd = async () => {\r\n  if (!agentFormRef.value) return\r\n  \r\n  await agentFormRef.value.validate(async (valid: boolean) => {\r\n    if (valid) {\r\n      if (safeAgents.value.length >= 10) {\r\n        ElMessage.warning('10')\r\n        return\r\n      }\r\n\r\n      //  botId \r\n      if (checkBotIdExists(agentForm.value.botId.trim())) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n\r\n      // \r\n      const newAgent: CozeAgent = {\r\n        name: agentForm.value.name.trim(),\r\n        botId: agentForm.value.botId.trim(),\r\n        isDefault: agentForm.value.isDefault,\r\n        platform: agentForm.value.platform // \r\n      }\r\n      \r\n      //  Dify  ID ID\r\n      if (agentForm.value.platform === 'dify') {\r\n        //  ID\r\n        newAgent.id = `dify-${Date.now()}-${Math.random().toString(36).substring(2, 10)}`\r\n      } else {\r\n        // Coze  botId  ID\r\n        newAgent.id = agentForm.value.botId.trim()\r\n      }\r\n\r\n      // \r\n      const updatedAgents = [...safeAgents.value]\r\n      if (newAgent.isDefault) {\r\n        // \r\n        updatedAgents.forEach(agent => {\r\n          agent.isDefault = false\r\n        })\r\n      } else if (updatedAgents.length === 0) {\r\n        // \r\n        newAgent.isDefault = true\r\n      } else if (!updatedAgents.some(agent => agent.isDefault)) {\r\n        // \r\n        newAgent.isDefault = true\r\n      }\r\n      \r\n      updatedAgents.push(newAgent)\r\n\r\n      try {\r\n        // \r\n        const result = await saveConfig('agents', { agents: updatedAgents })\r\n        if (result.success) {\r\n          emit('update:agents', updatedAgents)\r\n          agentFormRef.value.resetFields()\r\n          ElMessage.success('')\r\n          dialogVisible.value = false\r\n        } else {\r\n          throw new Error(result.error || '')\r\n        }\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((dialogVisible).value = $event)),\n    title: \"\",\n    width: \"500px\"\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        (safeAgents.value.length)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2))\n          : _createCommentVNode(\"\", true),\n        _createVNode(_component_el_form, {\n          ref_key: \"agentFormRef\",\n          ref: agentFormRef,\n          model: agentForm.value,\n          rules: agentRules,\n          \"label-width\": \"100px\",\n          class: \"agent-form\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, {\n              label: \"\",\n              prop: \"platform\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_select, {\n                  modelValue: agentForm.value.platform,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((agentForm.value.platform) = $event)),\n                  placeholder: \"\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_option, {\n                      label: \"Coze\",\n                      value: \"coze\"\n                    }),\n                    _createVNode(_component_el_option, {\n                      label: \"Dify\",\n                      value: \"dify\"\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              label: \"\",\n              prop: \"name\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: agentForm.value.name,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((agentForm.value.name) = $event)),\n                  onKeydown: _cache[2] || (_cache[2] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"])),\n                  placeholder: \"\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              label: agentForm.value.platform === 'coze' ? 'Bot ID' : 'API ',\n              prop: \"botId\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: agentForm.value.botId,\n                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((agentForm.value.botId) = $event)),\n                  onKeydown: _cache[4] || (_cache[4] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"])),\n                  placeholder: agentForm.value.platform === 'coze' ? ' Bot ID' : ' API ',\n                  type: agentForm.value.platform === 'dify' ? 'password' : 'text',\n                  \"show-password\": agentForm.value.platform === 'dify'\n                }, null, 8, [\"modelValue\", \"placeholder\", \"type\", \"show-password\"])\n              ]),\n              _: 1\n            }, 8, [\"label\"]),\n            _createVNode(_component_el_form_item, { label: \"\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_switch, {\n                  modelValue: agentForm.value.isDefault,\n                  \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((agentForm.value.isDefault) = $event))\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\"]),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createVNode(_component_el_button, { onClick: handleClose }, {\n            default: _withCtx(() => [...(_cache[7] || (_cache[7] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: handleAdd,\n            disabled: __props.agents.length > 10\n          }, {\n            default: _withCtx(() => [...(_cache[8] || (_cache[8] = [\n              _createTextVNode(\"  \", -1)\n            ]))]),\n            _: 1\n          }, 8, [\"disabled\"])\n        ])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    title=\"\"\r\n    width=\"500px\"\r\n  >\r\n    <div class=\"coze-settings\">\r\n      <!--  -->\r\n      <div class=\"agents-list\" v-if=\"safeAgents.length\">\r\n        <!--  -->\r\n      </div>\r\n  \r\n      <!--  -->\r\n      <el-form\r\n        ref=\"agentFormRef\"\r\n        :model=\"agentForm\"\r\n        :rules=\"agentRules\"\r\n        label-width=\"100px\"\r\n        class=\"agent-form\"\r\n      >\r\n        <el-form-item label=\"\" prop=\"platform\">\r\n          <el-select v-model=\"agentForm.platform\" placeholder=\"\">\r\n            <el-option label=\"Coze\" value=\"coze\" />\r\n            <el-option label=\"Dify\" value=\"dify\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"name\">\r\n          <el-input v-model=\"agentForm.name\" @keydown.enter.prevent placeholder=\"\" />\r\n        </el-form-item>\r\n        <!--  -->\r\n        <el-form-item :label=\"agentForm.platform === 'coze' ? 'Bot ID' : 'API '\" prop=\"botId\">\r\n          <el-input \r\n            v-model=\"agentForm.botId\" \r\n            @keydown.enter.prevent \r\n            :placeholder=\"agentForm.platform === 'coze' ? ' Bot ID' : ' API '\"\r\n            :type=\"agentForm.platform === 'dify' ? 'password' : 'text'\"\r\n            :show-password=\"agentForm.platform === 'dify'\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"\">\r\n          <el-switch v-model=\"agentForm.isDefault\" />\r\n        </el-form-item>\r\n      </el-form>\r\n  \r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\"></el-button>\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"handleAdd\"\r\n          :disabled=\"agents.length > 10\"\r\n        >\r\n          \r\n        </el-button>\r\n      </div>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { ref, defineProps, defineEmits,watch,computed } from 'vue'\r\n  import { ElMessage,FormItemRule } from 'element-plus'\r\n  import type { CozeAgent } from '@/types/coze'\r\n  import { saveConfig } from '@/api/config'\r\n  \r\n  const props = defineProps<{\r\n  visible: boolean;\r\n  agents: CozeAgent[];\r\n}>()\r\n  \r\n  const emit = defineEmits(['update:visible', 'update:agents'])\r\n  \r\n  const dialogVisible = ref(props.visible)\r\n  const agentFormRef = ref()\r\n  const agentForm = ref({\r\n    name: '',\r\n    botId: '',\r\n    isDefault: false,\r\n    platform: 'coze' //  Coze \r\n  })\r\n  const safeAgents = computed(() => Array.isArray(props.agents) ? props.agents : [])\r\n  type ValidateCallback = (error?: Error | string) => void\r\n  type ValidateRule = {\r\n    field: string\r\n    fullField: string\r\n    type: string\r\n    validator: (rule: any, value: string, callback: ValidateCallback) => void\r\n  }\r\n\r\n  const agentRules = {\r\n  name: [\r\n    { required: true, message: '', trigger: 'blur' }\r\n  ] as FormItemRule[],\r\n  botId: [\r\n    { required: true, message: ' Bot ID', trigger: 'blur' },\r\n    {\r\n      validator: async (rule: any, value: string, callback: ValidateCallback) => {\r\n        if (value && checkBotIdExists(value)) {\r\n          callback(new Error(''))\r\n        } else {\r\n          callback()\r\n        }\r\n      },\r\n      trigger: 'blur'\r\n    }\r\n  ] as FormItemRule[]\r\n}\r\n  \r\n  // \r\n  watch(() => props.visible, (val) => {\r\n    dialogVisible.value = val\r\n  })\r\n  \r\n  watch(() => dialogVisible.value, (val) => {\r\n    emit('update:visible', val)\r\n  })\r\n  //  botId \r\nconst checkBotIdExists = (botId: string): boolean => {\r\n  return safeAgents.value.some(agent => agent.botId === botId)\r\n}\r\nconst handleClose = () => {\r\n  dialogVisible.value = false\r\n  agentFormRef.value?.resetFields()\r\n  agentForm.value.isDefault = false  // \r\n}\r\n  \r\n//  handleAdd \r\nconst handleAdd = async () => {\r\n  if (!agentFormRef.value) return\r\n  \r\n  await agentFormRef.value.validate(async (valid: boolean) => {\r\n    if (valid) {\r\n      if (safeAgents.value.length >= 10) {\r\n        ElMessage.warning('10')\r\n        return\r\n      }\r\n\r\n      //  botId \r\n      if (checkBotIdExists(agentForm.value.botId.trim())) {\r\n        ElMessage.warning('')\r\n        return\r\n      }\r\n\r\n      // \r\n      const newAgent: CozeAgent = {\r\n        name: agentForm.value.name.trim(),\r\n        botId: agentForm.value.botId.trim(),\r\n        isDefault: agentForm.value.isDefault,\r\n        platform: agentForm.value.platform // \r\n      }\r\n      \r\n      //  Dify  ID ID\r\n      if (agentForm.value.platform === 'dify') {\r\n        //  ID\r\n        newAgent.id = `dify-${Date.now()}-${Math.random().toString(36).substring(2, 10)}`\r\n      } else {\r\n        // Coze  botId  ID\r\n        newAgent.id = agentForm.value.botId.trim()\r\n      }\r\n\r\n      // \r\n      const updatedAgents = [...safeAgents.value]\r\n      if (newAgent.isDefault) {\r\n        // \r\n        updatedAgents.forEach(agent => {\r\n          agent.isDefault = false\r\n        })\r\n      } else if (updatedAgents.length === 0) {\r\n        // \r\n        newAgent.isDefault = true\r\n      } else if (!updatedAgents.some(agent => agent.isDefault)) {\r\n        // \r\n        newAgent.isDefault = true\r\n      }\r\n      \r\n      updatedAgents.push(newAgent)\r\n\r\n      try {\r\n        // \r\n        const result = await saveConfig('agents', { agents: updatedAgents })\r\n        if (result.success) {\r\n          emit('update:agents', updatedAgents)\r\n          agentFormRef.value.resetFields()\r\n          ElMessage.success('')\r\n          dialogVisible.value = false\r\n        } else {\r\n          throw new Error(result.error || '')\r\n        }\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .agent-form {\r\n    margin-top: 20px;\r\n  }\r\n  \r\n  .dialog-footer {\r\n    margin-top: 20px;\r\n    text-align: right;\r\n  }\r\n  </style>","import script from \"./CozeAgentConfig.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CozeAgentConfig.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CozeAgentConfig.vue?vue&type=style&index=0&id=438be38a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-438be38a\"]])\n\nexport default __exports__","import { API_BASE_URL, headers } from './config'\r\n\r\nexport interface ExternalApiTestResponse {\r\n  success: boolean\r\n  message: string\r\n  data?: any\r\n}\r\n\r\nexport interface ExternalApiSettings {\r\n  identifier: string\r\n}\r\n\r\n/**\r\n * API\r\n * @param identifier API\r\n * @returns \r\n */\r\nexport const testExternalApiConnection = async (identifier: string): Promise<ExternalApiTestResponse> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/external-api/test-connection`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        identifier\r\n      })\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n    }\r\n    \r\n    const result = await response.json()\r\n    \r\n    return {\r\n      success: result.success || false,\r\n      message: result.message || (result.success ? '' : ''),\r\n      data: result.data\r\n    }\r\n  } catch (error) {\r\n    console.error('API:', error)\r\n    return {\r\n      success: false,\r\n      message: error instanceof Error ? error.message : ''\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * API\r\n * @param settings API\r\n * @returns \r\n */\r\nexport const saveExternalApiSettings = async (settings: ExternalApiSettings): Promise<boolean> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/config/external_api_settings`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(settings)\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n    }\r\n    \r\n    const result = await response.json()\r\n    return result.success || false\r\n  } catch (error) {\r\n    console.error('API:', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n/**\r\n * API\r\n * @returns API\r\n */\r\nexport const getExternalApiSettings = async (): Promise<ExternalApiSettings | null> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/config/external_api_settings`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n    }\r\n    \r\n    const result = await response.json()\r\n    return result.data || null\r\n  } catch (error) {\r\n    console.error('API:', error)\r\n    return null\r\n  }\r\n}","const API_BASE_URL = 'http://127.0.0.1:9922/api';\r\nconst API_KEY = 'yoko_test'; // API\r\n\r\n// \r\nconst headers = {\r\n  'Content-Type': 'application/json',\r\n  'X-API-Key': API_KEY\r\n};\r\ninterface CozeResponse {\r\n  code: number\r\n  data: any\r\n  msg: string\r\n}\r\n\r\ninterface ChatResponse extends CozeResponse {\r\n  data: {\r\n    id: string\r\n    conversation_id: string\r\n    status: string\r\n  }\r\n}\r\n\r\ninterface MessageResponse extends CozeResponse {\r\n  data: Array<{\r\n    content: string\r\n    type: string\r\n    role: string\r\n  }>\r\n}\r\nexport const testAgent = async (agentId: string, platform: string): Promise<any> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/agent/test`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify({\r\n        agent_id: agentId,\r\n        platform: platform\r\n      })\r\n    })\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    return {\r\n      success: false,\r\n      error: error instanceof Error ? error.message : ''\r\n    }\r\n  }\r\n}\r\nexport class CozeService {\r\n    private readonly token: string\r\n    private  polling: boolean\r\n    private readonly maxRetries: number\r\n\r\n    constructor(token: string) {\r\n        this.token = token\r\n        this.polling = false\r\n        this.maxRetries = 60\r\n    }\r\n\r\n  // \r\n  async startChat(botId: string, message: string,sessionId: string): Promise<string> {\r\n    try {\r\n      const chatResponse = await this.initializeChat(botId, message,sessionId)\r\n      if (chatResponse.code !== 0) {\r\n        throw new Error(chatResponse.msg || '')\r\n      }\r\n\r\n      const { id, conversation_id } = chatResponse.data\r\n      \r\n      // \r\n      const completed = await this.pollChatStatus(conversation_id, id)\r\n      if (!completed) {\r\n        throw new Error('')\r\n      }\r\n\r\n      // \r\n      const reply = await this.getChatMessages(conversation_id, id)\r\n      return reply\r\n    } catch (error) {\r\n      console.error('Coze:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // \r\n  private async initializeChat(botId: string, message: string, sessionId: string): Promise<ChatResponse> {\r\n    console.log(\"initializeChat==>token\",this.token);\r\n    const response = await fetch('https://api.coze.cn/v3/chat', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${this.token}`,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        bot_id: botId,\r\n        user_id: `user_${sessionId}`,\r\n        stream: false,\r\n        auto_save_history: true,\r\n        additional_messages: [{\r\n          role: \"user\",\r\n          content: message,\r\n          content_type: \"text\"\r\n        }]\r\n      })\r\n    })\r\n\r\n    return await response.json()\r\n  }\r\n\r\n  // \r\n  private async pollChatStatus(conversationId: string, chatId: string): Promise<boolean> {\r\n    let retries = 0\r\n    this.polling = true\r\n\r\n    while (this.polling && retries < this.maxRetries) {\r\n      try {\r\n        const response = await fetch(\r\n          `https://api.coze.cn/v3/chat/retrieve?conversation_id=${conversationId}&chat_id=${chatId}`,\r\n          {\r\n            headers: {\r\n              'Authorization': `Bearer ${this.token}`,\r\n              'Content-Type': 'application/json'\r\n            },\r\n          }\r\n        )\r\n\r\n        const data = await response.json()\r\n        if (data.code === 0 && data.data.status === 'completed') {\r\n          this.polling = false\r\n          return true\r\n        }\r\n\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        retries++\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        this.polling = false\r\n        throw error\r\n      }\r\n    }\r\n\r\n    this.polling = false\r\n    return false\r\n  }\r\n\r\n  // \r\n  private async getChatMessages(conversationId: string, chatId: string): Promise<string> {\r\n    const response = await fetch(\r\n      `https://api.coze.cn/v3/chat/message/list?conversation_id=${conversationId}&chat_id=${chatId}`,\r\n      {\r\n        headers: {\r\n          'Authorization': `Bearer ${this.token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n      }\r\n    )\r\n\r\n    const data: MessageResponse = await response.json()\r\n    if (data.code !== 0) {\r\n      throw new Error(data.msg || '')\r\n    }\r\n\r\n    //  answer \r\n    const answerMessage = data.data.find(msg => msg.type === 'answer' && msg.role === 'assistant')\r\n    return answerMessage?.content || ''\r\n  }\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, unref as _unref, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"greeting-config\" }\nconst _hoisted_2 = { class: \"header\" }\nconst _hoisted_3 = { class: \"greeting-groups\" }\nconst _hoisted_4 = { class: \"group-header\" }\nconst _hoisted_5 = { class: \"group-content\" }\nconst _hoisted_6 = { class: \"greetings-list\" }\nconst _hoisted_7 = { class: \"greeting-content\" }\nconst _hoisted_8 = { class: \"dialog-footer\" }\nconst _hoisted_9 = { class: \"file-upload\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"selected-file\"\n}\nconst _hoisted_11 = { class: \"agent-option\" }\nconst _hoisted_12 = [\"src\", \"alt\"]\nconst _hoisted_13 = { class: \"dialog-footer\" }\n\nimport { ref, inject, onUnmounted, onMounted } from 'vue'\r\nimport { Delete, Plus } from '@element-plus/icons-vue'\r\nimport type { Emitter } from 'mitt'\r\nimport { ElMessage } from 'element-plus'\r\nimport { uploadFile } from '@/api/autosop'\r\nimport { saveConfig, getConfig } from '@/api/config'\r\nimport type { CozeAgent } from '@/types/coze'\r\n\r\ninterface Greeting {\r\n  type: 'text' | 'file' | 'agent'\r\n  content: string\r\n  filePath?: string\r\n  agentId?: string\r\n  prompt?: string\r\n}\r\n\r\ninterface GreetingGroup {\r\n  name: string\r\n  greetings: Greeting[]\r\n}\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'GreetingConfig',\n  setup(__props) {\n\r\nconst emitter = inject('emitter') as Emitter<any>\r\n\r\nconst activeGroup = ref([])\r\nconst greetingGroups = ref<GreetingGroup[]>([])\r\nconst groupDialogVisible = ref(false)\r\nconst greetingDialogVisible = ref(false)\r\nconst currentGroupIndex = ref<number>(0)\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\n\r\nconst newGroup = ref<GreetingGroup>({\r\n  name: '',\r\n  greetings: []\r\n})\r\n\r\nconst newGreeting = ref<Greeting>({\r\n  type: 'text',\r\n  content: '',\r\n  prompt: ''\r\n})\r\n\r\n// \r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result?.success && result?.data) {\r\n      const agents = Array.isArray(result.data) ? result.data :\r\n        Array.isArray(result.data.agents) ? result.data.agents : []\r\n      \r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst getPlatformIconExtension = (platform?: string) => {\r\n  if (platform === 'dify' || platform === 'yuanqi') return 'png'\r\n  return 'svg'\r\n}\r\n\r\n// \r\nconst getTagType = (type: string) => {\r\n  switch (type) {\r\n    case 'text': return 'success'\r\n    case 'file': return 'warning'\r\n    case 'agent': return 'info'\r\n    default: return 'info'\r\n  }\r\n}\r\n\r\n// \r\nconst getTypeLabel = (type: string) => {\r\n  switch (type) {\r\n    case 'text': return ''\r\n    case 'file': return ''\r\n    case 'agent': return ''\r\n    default: return ''\r\n  }\r\n}\r\n\r\n// \r\nconst loadConfig = async () => {\r\n  try {\r\n    const result = await getConfig('greeting_config')\r\n    if (result?.success && result?.data) {\r\n      //  greeting_config \r\n      const config = result.data?.greeting_config?.greeting_config || result.data?.greeting_config || []\r\n      //  greetings \r\n      greetingGroups.value = Array.isArray(config) ? config.map(group => ({\r\n        ...group,\r\n        greetings: Array.isArray(group.greetings) ? group.greetings : []\r\n      })) : []\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    greetingGroups.value = []\r\n  }\r\n}\r\n  \r\n// \r\nconst saveGreetingConfig = async () => {\r\n  try {\r\n    const config = {\r\n        greeting_config: greetingGroups.value || []\r\n    }\r\n    await saveConfig('greeting_config', config)\r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n  \r\n  // \r\n  const showAddGroupDialog = () => {\r\n    newGroup.value = { name: '', greetings: [] }\r\n    groupDialogVisible.value = true\r\n  }\r\n  \r\n  const addGroup = async () => {\r\n    if (!newGroup.value.name.trim()) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    greetingGroups.value.push({\r\n      name: newGroup.value.name,\r\n      greetings: []\r\n    })\r\n    \r\n    await saveGreetingConfig()\r\n    groupDialogVisible.value = false\r\n  }\r\n  \r\n  const removeGroup = async (index: number) => {\r\n    greetingGroups.value.splice(index, 1)\r\n    await saveGreetingConfig()\r\n  }\r\n  \r\n  // \r\n  const showAddGreetingDialog = (groupIndex: number) => {\r\n    currentGroupIndex.value = groupIndex\r\n    newGreeting.value = { \r\n      type: 'text', \r\n      content: '',\r\n      prompt: ''\r\n    }\r\n    greetingDialogVisible.value = true\r\n  }\r\n  \r\n  onMounted(() => {\r\n    emitter.on('updateGreetingConfig', (config) => {\r\n      let newConfig = []\r\n      if (config?.greeting_config?.greeting_config) {\r\n        newConfig = config.greeting_config.greeting_config\r\n      } else if (config?.greeting_config) {\r\n        newConfig = config.greeting_config\r\n      }\r\n      //  greetings \r\n      greetingGroups.value = Array.isArray(newConfig) ? newConfig.map(group => ({\r\n        ...group,\r\n        greetings: Array.isArray(group.greetings) ? group.greetings : []\r\n      })) : []\r\n    })\r\n    loadConfig()\r\n    loadCozeAgents()\r\n  })\r\n  \r\n  onUnmounted(() => {\r\n    emitter.off('updateGreetingConfig')\r\n  }) \r\n  \r\n  const addGreeting = async () => {\r\n  if (newGreeting.value.type === 'text' && !newGreeting.value.content.trim()) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  if (newGreeting.value.type === 'file' && !newGreeting.value.filePath) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  if (newGreeting.value.type === 'agent') {\r\n    if (!newGreeting.value.agentId) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    if (!newGreeting.value.prompt?.trim()) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n  }\r\n  \r\n  // \r\n  let greetingData: Greeting\r\n  \r\n  if (newGreeting.value.type === 'text') {\r\n    greetingData = {\r\n      type: 'text',\r\n      content: newGreeting.value.content\r\n    }\r\n  } else if (newGreeting.value.type === 'file') {\r\n    greetingData = {\r\n      type: 'file',\r\n      content: newGreeting.value.content,\r\n      filePath: newGreeting.value.filePath\r\n    }\r\n  } else if (newGreeting.value.type === 'agent') {\r\n    greetingData = {\r\n      type: 'agent',\r\n      content: newGreeting.value.content,\r\n      agentId: newGreeting.value.agentId,\r\n      prompt: newGreeting.value.prompt\r\n    }\r\n  } else {\r\n    greetingData = { ...newGreeting.value }\r\n  }\r\n  \r\n  greetingGroups.value[currentGroupIndex.value].greetings.push(greetingData)\r\n  await saveGreetingConfig()\r\n  greetingDialogVisible.value = false\r\n}\r\n  \r\n  const removeGreeting = async (groupIndex: number, greetingIndex: number) => {\r\n    greetingGroups.value[groupIndex].greetings.splice(greetingIndex, 1)\r\n    await saveGreetingConfig()\r\n  }\r\n  \r\n  const getGreetingContent = (greeting: Greeting) => {\r\n    if (greeting.type === 'text') return greeting.content\r\n    if (greeting.type === 'file') return greeting.filePath || ''\r\n    if (greeting.type === 'agent') {\r\n      const agent = cozeAgents.value.find(a => a.botId === greeting.agentId)\r\n      return `${agent?.name || ''} - ${greeting.prompt || ''}`\r\n    }\r\n    return ''\r\n  }\r\n  \r\n  const handleSelectFile = async () => {\r\n    try {\r\n      const input = document.createElement('input')\r\n      input.type = 'file'\r\n      input.accept = '*/*'\r\n      \r\n      input.onchange = async (e) => {\r\n        const file = (e.target as HTMLInputElement).files?.[0]\r\n        if (!file) return\r\n        \r\n        try {\r\n          const result = await uploadFile(file)\r\n          newGreeting.value.content = result.filename\r\n          newGreeting.value.filePath = result.filepath\r\n          ElMessage.success('')\r\n        } catch (error) {\r\n          ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n        }\r\n      }\r\n      \r\n      input.click()\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n  }\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_collapse_item = _resolveComponent(\"el-collapse-item\")!\n  const _component_el_collapse = _resolveComponent(\"el-collapse\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n  const _component_el_radio = _resolveComponent(\"el-radio\")!\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[11] || (_cache[11] = _createElementVNode(\"h4\", null, \"\", -1)),\n      _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: showAddGroupDialog,\n        disabled: greetingGroups.value.length >= 30\n      }, {\n        default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n          _createTextVNode(\"  \", -1)\n        ]))]),\n        _: 1\n      }, 8, [\"disabled\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createVNode(_component_el_collapse, {\n        modelValue: activeGroup.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((activeGroup).value = $event))\n      }, {\n        default: _withCtx(() => [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(greetingGroups.value, (group, groupIndex) => {\n            return (_openBlock(), _createBlock(_component_el_collapse_item, {\n              key: groupIndex,\n              name: groupIndex\n            }, {\n              title: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_4, [\n                  _createElementVNode(\"span\", null, _toDisplayString(group.name), 1),\n                  _createVNode(_component_el_button, {\n                    type: \"danger\",\n                    size: \"small\",\n                    onClick: _withModifiers(($event: any) => (removeGroup(groupIndex)), [\"stop\"])\n                  }, {\n                    default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n                      _createTextVNode(\"  \", -1)\n                    ]))]),\n                    _: 1\n                  }, 8, [\"onClick\"])\n                ])\n              ]),\n              default: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_5, [\n                  _createElementVNode(\"div\", _hoisted_6, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.greetings, (item, index) => {\n                      return (_openBlock(), _createElementBlock(\"div\", {\n                        key: index,\n                        class: \"greeting-item\"\n                      }, [\n                        _createVNode(_component_el_tag, {\n                          type: getTagType(item.type)\n                        }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(getTypeLabel(item.type)), 1)\n                          ]),\n                          _: 2\n                        }, 1032, [\"type\"]),\n                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(getGreetingContent(item)), 1),\n                        _createVNode(_component_el_button, {\n                          type: \"danger\",\n                          size: \"small\",\n                          circle: \"\",\n                          onClick: ($event: any) => (removeGreeting(groupIndex, index))\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_icon, null, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(Delete))\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"onClick\"])\n                      ]))\n                    }), 128))\n                  ]),\n                  _createVNode(_component_el_button, {\n                    plain: \"\",\n                    type: \"info\",\n                    class: \"add-content-btn\",\n                    onClick: ($event: any) => (showAddGreetingDialog(groupIndex)),\n                    disabled: group.greetings.length >= 5\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_icon, { class: \"add-icon\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(Plus))\n                        ]),\n                        _: 1\n                      }),\n                      _cache[13] || (_cache[13] = _createTextVNode(\"  \", -1))\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\", \"disabled\"])\n                ])\n              ]),\n              _: 2\n            }, 1032, [\"name\"]))\n          }), 128))\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"])\n    ]),\n    _createVNode(_component_el_dialog, {\n      modelValue: groupDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((groupDialogVisible).value = $event)),\n      title: \"\",\n      width: \"400px\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_8, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (groupDialogVisible.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: addGroup\n          }, {\n            default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_el_form, {\n          model: newGroup.value,\n          \"label-width\": \"80px\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, {\n              label: \"\",\n              required: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: newGroup.value.name,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((newGroup.value.name) = $event)),\n                  placeholder: \"\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\"])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: greetingDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((greetingDialogVisible).value = $event)),\n      title: \"\",\n      width: \"500px\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_13, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[8] || (_cache[8] = ($event: any) => (greetingDialogVisible.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[20] || (_cache[20] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: addGreeting\n          }, {\n            default: _withCtx(() => [...(_cache[21] || (_cache[21] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_el_form, {\n          model: newGreeting.value,\n          \"label-width\": \"80px\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, { label: \"\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_radio_group, {\n                  modelValue: newGreeting.value.type,\n                  \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((newGreeting.value.type) = $event))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_radio, { label: \"text\" }, {\n                      default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n                        _createTextVNode(\"\", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_radio, { label: \"file\" }, {\n                      default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                        _createTextVNode(\"\", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_radio, { label: \"agent\" }, {\n                      default: _withCtx(() => [...(_cache[18] || (_cache[18] = [\n                        _createTextVNode(\"\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            (newGreeting.value.type === 'text')\n              ? (_openBlock(), _createBlock(_component_el_form_item, {\n                  key: 0,\n                  label: \"\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_input, {\n                      modelValue: newGreeting.value.content,\n                      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((newGreeting.value.content) = $event)),\n                      type: \"textarea\",\n                      rows: 4,\n                      maxlength: 300,\n                      \"show-word-limit\": \"\",\n                      placeholder: \"\"\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }))\n              : (newGreeting.value.type === 'file')\n                ? (_openBlock(), _createBlock(_component_el_form_item, {\n                    key: 1,\n                    label: \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_9, [\n                        _createVNode(_component_el_button, {\n                          type: \"primary\",\n                          onClick: handleSelectFile\n                        }, {\n                          default: _withCtx(() => [...(_cache[19] || (_cache[19] = [\n                            _createTextVNode(\"\", -1)\n                          ]))]),\n                          _: 1\n                        }),\n                        (newGreeting.value.content)\n                          ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \" : \" + _toDisplayString(newGreeting.value.content), 1))\n                          : _createCommentVNode(\"\", true)\n                      ])\n                    ]),\n                    _: 1\n                  }))\n                : (newGreeting.value.type === 'agent')\n                  ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_select, {\n                            modelValue: newGreeting.value.agentId,\n                            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((newGreeting.value.agentId) = $event)),\n                            placeholder: \"\"\n                          }, {\n                            default: _withCtx(() => [\n                              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cozeAgents.value, (agent) => {\n                                return (_openBlock(), _createBlock(_component_el_option, {\n                                  key: agent.botId,\n                                  label: agent.name,\n                                  value: agent.botId\n                                }, {\n                                  default: _withCtx(() => [\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                      _createElementVNode(\"img\", {\n                                        src: `/icon/${agent.platform || 'coze'}.${getPlatformIconExtension(agent.platform)}`,\n                                        alt: agent.platform || 'coze',\n                                        class: \"agent-icon\"\n                                      }, null, 8, _hoisted_12),\n                                      _createTextVNode(\" \" + _toDisplayString(agent.name), 1)\n                                    ])\n                                  ]),\n                                  _: 2\n                                }, 1032, [\"label\", \"value\"]))\n                              }), 128))\n                            ]),\n                            _: 1\n                          }, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input, {\n                            modelValue: newGreeting.value.prompt,\n                            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((newGreeting.value.prompt) = $event)),\n                            type: \"textarea\",\n                            rows: 3,\n                            maxlength: 500,\n                            \"show-word-limit\": \"\",\n                            placeholder: \"\"\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      })\n                    ], 64))\n                  : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }, 8, [\"model\"])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"greeting-config\">\r\n    <div class=\"header\">\r\n      <h4></h4>\r\n      <el-button type=\"primary\" @click=\"showAddGroupDialog\" :disabled=\"greetingGroups.length >= 30\">\r\n        \r\n      </el-button>\r\n    </div>\r\n\r\n    <div class=\"greeting-groups\">\r\n      <el-collapse v-model=\"activeGroup\">\r\n        <el-collapse-item v-for=\"(group, groupIndex) in greetingGroups\" :key=\"groupIndex\" :name=\"groupIndex\">\r\n          <template #title>\r\n            <div class=\"group-header\">\r\n              <span>{{ group.name }}</span>\r\n              <el-button type=\"danger\" size=\"small\" @click.stop=\"removeGroup(groupIndex)\">\r\n                \r\n              </el-button>\r\n            </div>\r\n          </template>\r\n\r\n          <div class=\"group-content\">\r\n            <div class=\"greetings-list\">\r\n              <div v-for=\"(item, index) in group.greetings\" :key=\"index\" class=\"greeting-item\">\r\n                <el-tag :type=\"getTagType(item.type)\">\r\n                  {{ getTypeLabel(item.type) }}\r\n                </el-tag>\r\n                <span class=\"greeting-content\">{{ getGreetingContent(item) }}</span>\r\n                <el-button \r\n                  type=\"danger\" \r\n                  size=\"small\" \r\n                  circle\r\n                  @click=\"removeGreeting(groupIndex, index)\"\r\n                >\r\n                  <el-icon><Delete /></el-icon>\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n            \r\n            <el-button \r\n              plain\r\n              type=\"info\" \r\n              class=\"add-content-btn\"\r\n              @click=\"showAddGreetingDialog(groupIndex)\"\r\n              :disabled=\"group.greetings.length >= 5\"\r\n          >\r\n              <el-icon class=\"add-icon\"><Plus /></el-icon>\r\n              \r\n          </el-button>\r\n          </div>\r\n        </el-collapse-item>\r\n      </el-collapse>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"groupDialogVisible\"\r\n      title=\"\"\r\n      width=\"400px\"\r\n    >\r\n      <el-form :model=\"newGroup\" label-width=\"80px\">\r\n        <el-form-item label=\"\" required>\r\n          <el-input v-model=\"newGroup.name\" placeholder=\"\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"groupDialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"addGroup\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"greetingDialogVisible\"\r\n      title=\"\"\r\n      width=\"500px\"\r\n    >\r\n      <el-form :model=\"newGreeting\" label-width=\"80px\">\r\n        <el-form-item label=\"\">\r\n          <el-radio-group v-model=\"newGreeting.type\">\r\n            <el-radio label=\"text\"></el-radio>\r\n            <el-radio label=\"file\"></el-radio>\r\n            <el-radio label=\"agent\"></el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <el-form-item v-if=\"newGreeting.type === 'text'\" label=\"\">\r\n          <el-input\r\n            v-model=\"newGreeting.content\"\r\n            type=\"textarea\"\r\n            :rows=\"4\"\r\n            :maxlength=\"300\"\r\n            show-word-limit\r\n            placeholder=\"\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item v-else-if=\"newGreeting.type === 'file'\" label=\"\">\r\n          <div class=\"file-upload\">\r\n            <el-button type=\"primary\" @click=\"handleSelectFile\"></el-button>\r\n            <span v-if=\"newGreeting.content\" class=\"selected-file\">\r\n              : {{ newGreeting.content }}\r\n            </span>\r\n          </div>\r\n        </el-form-item>\r\n\r\n        <!--  -->\r\n        <template v-else-if=\"newGreeting.type === 'agent'\">\r\n          <el-form-item label=\"\">\r\n            <el-select v-model=\"newGreeting.agentId\" placeholder=\"\">\r\n              <el-option\r\n                v-for=\"agent in cozeAgents\"\r\n                :key=\"agent.botId\"\r\n                :label=\"agent.name\"\r\n                :value=\"agent.botId\"\r\n              >\r\n                <div class=\"agent-option\">\r\n                  <img\r\n                    :src=\"`/icon/${agent.platform || 'coze'}.${getPlatformIconExtension(agent.platform)}`\"\r\n                    :alt=\"agent.platform || 'coze'\"\r\n                    class=\"agent-icon\"\r\n                  />\r\n                  {{ agent.name }}\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          \r\n          <el-form-item label=\"\">\r\n            <el-input\r\n              v-model=\"newGreeting.prompt\"\r\n              type=\"textarea\"\r\n              :rows=\"3\"\r\n              :maxlength=\"500\"\r\n              show-word-limit\r\n              placeholder=\"\"\r\n            />\r\n          </el-form-item>\r\n        </template>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"greetingDialogVisible = false\"></el-button>\r\n          <el-button type=\"primary\" @click=\"addGreeting\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, inject, onUnmounted, onMounted } from 'vue'\r\nimport { Delete, Plus } from '@element-plus/icons-vue'\r\nimport type { Emitter } from 'mitt'\r\nimport { ElMessage } from 'element-plus'\r\nimport { uploadFile } from '@/api/autosop'\r\nimport { saveConfig, getConfig } from '@/api/config'\r\nimport type { CozeAgent } from '@/types/coze'\r\n\r\nconst emitter = inject('emitter') as Emitter<any>\r\n\r\ninterface Greeting {\r\n  type: 'text' | 'file' | 'agent'\r\n  content: string\r\n  filePath?: string\r\n  agentId?: string\r\n  prompt?: string\r\n}\r\n\r\ninterface GreetingGroup {\r\n  name: string\r\n  greetings: Greeting[]\r\n}\r\n\r\nconst activeGroup = ref([])\r\nconst greetingGroups = ref<GreetingGroup[]>([])\r\nconst groupDialogVisible = ref(false)\r\nconst greetingDialogVisible = ref(false)\r\nconst currentGroupIndex = ref<number>(0)\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\n\r\nconst newGroup = ref<GreetingGroup>({\r\n  name: '',\r\n  greetings: []\r\n})\r\n\r\nconst newGreeting = ref<Greeting>({\r\n  type: 'text',\r\n  content: '',\r\n  prompt: ''\r\n})\r\n\r\n// \r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result?.success && result?.data) {\r\n      const agents = Array.isArray(result.data) ? result.data :\r\n        Array.isArray(result.data.agents) ? result.data.agents : []\r\n      \r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst getPlatformIconExtension = (platform?: string) => {\r\n  if (platform === 'dify' || platform === 'yuanqi') return 'png'\r\n  return 'svg'\r\n}\r\n\r\n// \r\nconst getTagType = (type: string) => {\r\n  switch (type) {\r\n    case 'text': return 'success'\r\n    case 'file': return 'warning'\r\n    case 'agent': return 'info'\r\n    default: return 'info'\r\n  }\r\n}\r\n\r\n// \r\nconst getTypeLabel = (type: string) => {\r\n  switch (type) {\r\n    case 'text': return ''\r\n    case 'file': return ''\r\n    case 'agent': return ''\r\n    default: return ''\r\n  }\r\n}\r\n\r\n// \r\nconst loadConfig = async () => {\r\n  try {\r\n    const result = await getConfig('greeting_config')\r\n    if (result?.success && result?.data) {\r\n      //  greeting_config \r\n      const config = result.data?.greeting_config?.greeting_config || result.data?.greeting_config || []\r\n      //  greetings \r\n      greetingGroups.value = Array.isArray(config) ? config.map(group => ({\r\n        ...group,\r\n        greetings: Array.isArray(group.greetings) ? group.greetings : []\r\n      })) : []\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    greetingGroups.value = []\r\n  }\r\n}\r\n  \r\n// \r\nconst saveGreetingConfig = async () => {\r\n  try {\r\n    const config = {\r\n        greeting_config: greetingGroups.value || []\r\n    }\r\n    await saveConfig('greeting_config', config)\r\n    ElMessage.success('')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n  \r\n  // \r\n  const showAddGroupDialog = () => {\r\n    newGroup.value = { name: '', greetings: [] }\r\n    groupDialogVisible.value = true\r\n  }\r\n  \r\n  const addGroup = async () => {\r\n    if (!newGroup.value.name.trim()) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    greetingGroups.value.push({\r\n      name: newGroup.value.name,\r\n      greetings: []\r\n    })\r\n    \r\n    await saveGreetingConfig()\r\n    groupDialogVisible.value = false\r\n  }\r\n  \r\n  const removeGroup = async (index: number) => {\r\n    greetingGroups.value.splice(index, 1)\r\n    await saveGreetingConfig()\r\n  }\r\n  \r\n  // \r\n  const showAddGreetingDialog = (groupIndex: number) => {\r\n    currentGroupIndex.value = groupIndex\r\n    newGreeting.value = { \r\n      type: 'text', \r\n      content: '',\r\n      prompt: ''\r\n    }\r\n    greetingDialogVisible.value = true\r\n  }\r\n  \r\n  onMounted(() => {\r\n    emitter.on('updateGreetingConfig', (config) => {\r\n      let newConfig = []\r\n      if (config?.greeting_config?.greeting_config) {\r\n        newConfig = config.greeting_config.greeting_config\r\n      } else if (config?.greeting_config) {\r\n        newConfig = config.greeting_config\r\n      }\r\n      //  greetings \r\n      greetingGroups.value = Array.isArray(newConfig) ? newConfig.map(group => ({\r\n        ...group,\r\n        greetings: Array.isArray(group.greetings) ? group.greetings : []\r\n      })) : []\r\n    })\r\n    loadConfig()\r\n    loadCozeAgents()\r\n  })\r\n  \r\n  onUnmounted(() => {\r\n    emitter.off('updateGreetingConfig')\r\n  }) \r\n  \r\n  const addGreeting = async () => {\r\n  if (newGreeting.value.type === 'text' && !newGreeting.value.content.trim()) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  if (newGreeting.value.type === 'file' && !newGreeting.value.filePath) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  if (newGreeting.value.type === 'agent') {\r\n    if (!newGreeting.value.agentId) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    if (!newGreeting.value.prompt?.trim()) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n  }\r\n  \r\n  // \r\n  let greetingData: Greeting\r\n  \r\n  if (newGreeting.value.type === 'text') {\r\n    greetingData = {\r\n      type: 'text',\r\n      content: newGreeting.value.content\r\n    }\r\n  } else if (newGreeting.value.type === 'file') {\r\n    greetingData = {\r\n      type: 'file',\r\n      content: newGreeting.value.content,\r\n      filePath: newGreeting.value.filePath\r\n    }\r\n  } else if (newGreeting.value.type === 'agent') {\r\n    greetingData = {\r\n      type: 'agent',\r\n      content: newGreeting.value.content,\r\n      agentId: newGreeting.value.agentId,\r\n      prompt: newGreeting.value.prompt\r\n    }\r\n  } else {\r\n    greetingData = { ...newGreeting.value }\r\n  }\r\n  \r\n  greetingGroups.value[currentGroupIndex.value].greetings.push(greetingData)\r\n  await saveGreetingConfig()\r\n  greetingDialogVisible.value = false\r\n}\r\n  \r\n  const removeGreeting = async (groupIndex: number, greetingIndex: number) => {\r\n    greetingGroups.value[groupIndex].greetings.splice(greetingIndex, 1)\r\n    await saveGreetingConfig()\r\n  }\r\n  \r\n  const getGreetingContent = (greeting: Greeting) => {\r\n    if (greeting.type === 'text') return greeting.content\r\n    if (greeting.type === 'file') return greeting.filePath || ''\r\n    if (greeting.type === 'agent') {\r\n      const agent = cozeAgents.value.find(a => a.botId === greeting.agentId)\r\n      return `${agent?.name || ''} - ${greeting.prompt || ''}`\r\n    }\r\n    return ''\r\n  }\r\n  \r\n  const handleSelectFile = async () => {\r\n    try {\r\n      const input = document.createElement('input')\r\n      input.type = 'file'\r\n      input.accept = '*/*'\r\n      \r\n      input.onchange = async (e) => {\r\n        const file = (e.target as HTMLInputElement).files?.[0]\r\n        if (!file) return\r\n        \r\n        try {\r\n          const result = await uploadFile(file)\r\n          newGreeting.value.content = result.filename\r\n          newGreeting.value.filePath = result.filepath\r\n          ElMessage.success('')\r\n        } catch (error) {\r\n          ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n        }\r\n      }\r\n      \r\n      input.click()\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n.greeting-config {\r\n  margin-top: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.add-content-btn {\r\n  width: 100%;\r\n  border-style: dashed;\r\n  height: 40px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n  color: #909399;\r\n}\r\n\r\n.add-content-btn:not(:disabled):hover {\r\n  color: #409EFF;\r\n  border-color: #409EFF;\r\n}\r\n\r\n.add-icon {\r\n  font-size: 16px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header h4 {\r\n  margin: 0;\r\n}\r\n\r\n.group-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n}\r\n\r\n.group-content {\r\n  padding: 16px;\r\n}\r\n\r\n.greetings-list {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.greeting-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-bottom: 8px;\r\n  padding: 8px;\r\n  background: #f8f9fa;\r\n  border-radius: 4px;\r\n}\r\n\r\n.greeting-groups {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.greeting-content {\r\n  flex: 1;\r\n  word-break: break-all;\r\n}\r\n\r\n.file-upload {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.selected-file {\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n\r\n.agent-option {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.agent-icon {\r\n  width: 16px;\r\n  height: 16px;\r\n}\r\n</style>","import script from \"./GreetingConfig.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GreetingConfig.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GreetingConfig.vue?vue&type=style&index=0&id=621a7709&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-621a7709\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, vShow as _vShow, withDirectives as _withDirectives, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, withKeys as _withKeys, unref as _unref, createCommentVNode as _createCommentVNode, createBlock as _createBlock, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = { class: \"settings-page-container\" }\nconst _hoisted_2 = { class: \"settings-nav\" }\nconst _hoisted_3 = { class: \"nav-items\" }\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = { class: \"setting-section\" }\nconst _hoisted_6 = { class: \"platform-title\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"token-reminder\"\n}\nconst _hoisted_8 = { class: \"setting-section\" }\nconst _hoisted_9 = { class: \"card-header\" }\nconst _hoisted_10 = { class: \"agents-list\" }\nconst _hoisted_11 = { class: \"agent-info\" }\nconst _hoisted_12 = [\"src\", \"alt\"]\nconst _hoisted_13 = { class: \"agent-details\" }\nconst _hoisted_14 = { class: \"agent-name\" }\nconst _hoisted_15 = { class: \"agent-botid\" }\nconst _hoisted_16 = { class: \"agent-actions\" }\nconst _hoisted_17 = { class: \"actions\" }\nconst _hoisted_18 = { class: \"setting-section\" }\nconst _hoisted_19 = { class: \"actions\" }\nconst _hoisted_20 = { class: \"setting-section\" }\nconst _hoisted_21 = { class: \"form-item-content\" }\nconst _hoisted_22 = { class: \"form-item-content\" }\nconst _hoisted_23 = { class: \"form-item-content\" }\nconst _hoisted_24 = { class: \"transfer-content\" }\nconst _hoisted_25 = { class: \"config-section\" }\nconst _hoisted_26 = { class: \"section-header\" }\nconst _hoisted_27 = { class: \"form-item\" }\nconst _hoisted_28 = { class: \"phrases-list\" }\nconst _hoisted_29 = { class: \"setting-section\" }\nconst _hoisted_30 = { class: \"api-description\" }\nconst _hoisted_31 = { class: \"custom-info-box\" }\nconst _hoisted_32 = { class: \"info-icon\" }\nconst _hoisted_33 = { class: \"api-identifier-container\" }\nconst _hoisted_34 = { class: \"api-identifier-input\" }\nconst _hoisted_35 = { class: \"connection-status-container\" }\nconst _hoisted_36 = { class: \"setting-section\" }\nconst _hoisted_37 = { class: \"api-description\" }\nconst _hoisted_38 = { class: \"custom-info-box\" }\nconst _hoisted_39 = { class: \"info-icon\" }\nconst _hoisted_40 = { class: \"alert-container\" }\nconst _hoisted_41 = { class: \"alert-container\" }\nconst _hoisted_42 = { class: \"alert-container\" }\nconst _hoisted_43 = { class: \"setting-section\" }\nconst _hoisted_44 = { class: \"api-description\" }\nconst _hoisted_45 = { class: \"custom-info-box\" }\nconst _hoisted_46 = { class: \"info-icon\" }\nconst _hoisted_47 = { class: \"rest-time-display\" }\nconst _hoisted_48 = { class: \"current-setting\" }\nconst _hoisted_49 = { class: \"setting-value\" }\nconst _hoisted_50 = { class: \"timeline-container\" }\nconst _hoisted_51 = { class: \"timeline-track\" }\nconst _hoisted_52 = { class: \"time-inputs\" }\nconst _hoisted_53 = { class: \"time-input-group\" }\nconst _hoisted_54 = { class: \"time-input-group\" }\nconst _hoisted_55 = { class: \"task-selection\" }\nconst _hoisted_56 = { class: \"task-options\" }\nconst _hoisted_57 = [\"checked\", \"onChange\"]\nconst _hoisted_58 = { class: \"task-icon\" }\nconst _hoisted_59 = { class: \"task-name\" }\nconst _hoisted_60 = {\n  key: 0,\n  class: \"applied-badge\"\n}\nconst _hoisted_61 = { style: {\"display\":\"flex\",\"align-items\":\"center\"} }\nconst _hoisted_62 = [\"src\", \"alt\"]\nconst _hoisted_63 = { class: \"dialog-footer\" }\nconst _hoisted_64 = { class: \"clear-cache-content\" }\nconst _hoisted_65 = { class: \"dialog-footer\" }\n\nimport { ref, onMounted,onUnmounted,onBeforeMount,nextTick,computed, provide  } from 'vue'\r\n  import { QuestionFilled,Connection, SuccessFilled, CircleCloseFilled } from '@element-plus/icons-vue'\r\n  import { ElMessage,ElMessageBox } from 'element-plus'\r\n  import CozeAgentConfig from '@/components/settings/CozeAgentConfig.vue'\r\n  import { testExternalApiConnection } from '@/api/external-api'\r\n  import type { CozeAgent } from '@/types/coze'\r\n  import { useRouter } from 'vue-router'\r\n  import { saveConfig, getConfig } from '@/api/config'\r\n  import { testAgent } from '@/api/coze'\r\n  import GreetingConfig from '@/components/settings/GreetingConfig.vue'\r\n  import { debounce } from 'lodash'\r\n  // \r\n  import mitt from 'mitt'\r\ninterface CozeSettings {\r\n    token: string\r\n    tokenLastUpdated?: string\r\n  }\r\n  interface RestTimeSettings {\r\n    startTime: number\r\n    endTime: number\r\n    selectedTasks: string[]\r\n  }\r\n  // \r\n  type PlatformType = 'DeepSeek' | '' | '';\r\n\r\n  interface ModelSettings {\r\n    platform: PlatformType;\r\n    platformConfigs: {\r\n      [key in PlatformType]: PlatformConfig;\r\n    };\r\n  }\r\n  interface ChatHistorySettings {\r\n    autoSave: boolean\r\n    includeContext: boolean\r\n    contextCount : number\r\n    includeUserInfo: boolean\r\n    // \r\n    messageMerge: {\r\n      mode: 'none' | 'context' | 'concat'  // \r\n      interval: number  // ()\r\n    }\r\n    // \r\n    transferConfig: {\r\n      phrases: string[]\r\n      notifyWechat: string\r\n    }\r\n  }\r\n\r\n  // \r\n  interface MomentSettings {\r\n    agentId: string\r\n    commentLimit: number\r\n    perFriendLimit: number\r\n    autoLike: boolean\r\n    interactionMode: string\r\n    prompt: string\r\n    blacklist: string\r\n  }\r\n  interface PlatformConfig {\r\n    baseUrl: string;\r\n    apiKey: string;\r\n    modelName: string;\r\n  }\r\n  const totalIntervals = 96\r\n\r\n// \r\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\r\n    name: 'SettingsPage'\r\n  },\n  __name: 'SettingsPage',\n  setup(__props) {\n\r\n  \r\n  const difySettings = ref({\r\n    baseUrl: ''\r\n  })\r\n  const testAgentDialogVisible = ref(false)\r\n    const testAgentForm = ref({\r\n      agentId: ''\r\n  })\r\n  // \r\n  const clearCacheDialogVisible = ref(false)\r\n  const clearingCache = ref(false)\r\n  // \r\n  const phraseInputVisible = ref(false)\r\n  const phraseInputValue = ref('')\r\n  const phraseInputRef = ref<HTMLInputElement | null>(null)\r\n  const showTestAgentDialog = () => {\r\n  if (!cozeAgents.value?.length) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  // \r\n  const defaultAgent = cozeAgents.value.find(agent => agent.isDefault)\r\n    if (defaultAgent) {\r\n      testAgentForm.value.agentId = defaultAgent.botId\r\n    } else {\r\n      testAgentForm.value.agentId = cozeAgents.value[0].botId\r\n    }\r\n    \r\n    testAgentDialogVisible.value = true\r\n  }\r\n  // API\r\n  const externalApiSettings = ref({\r\n    identifier: ''\r\n  })\r\n  const testingConnection = ref(false)\r\n  const connectionStatus = ref<{success: boolean, message: string} | null>(null)\r\n  //  Dify \r\n  const autoSaveDifySettings = debounce(async () => {\r\n    try {\r\n      await saveConfig('dify_settings', difySettings.value)\r\n      ElMessage.success('Dify')\r\n    } catch (error) {\r\n      console.error('Dify:', error)\r\n      ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n    }\r\n  }, 500)\r\n  //  Coze \r\n  const autoSaveCozeSettings = debounce(async () => {\r\n    try {\r\n      // \r\n      cozeSettings.value.tokenLastUpdated = new Date().toISOString()\r\n      await saveConfig('coze_settings', \r\n      {\r\n        \"coze_settings\": {\r\n          \"token\": cozeSettings.value.token,\r\n          \"tokenLastUpdated\": cozeSettings.value.tokenLastUpdated,\r\n      }})\r\n      ElMessage.success('Coze')\r\n    } catch (error) {\r\n      console.error('Coze:', error)\r\n      ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n    }\r\n  }, 500)\r\n  // \r\n  const navItems = [\r\n  { id: 'ai-settings', name: 'AI' },\r\n  { id: 'agent-settings', name: '' },\r\n  { id: 'moment-settings', name: '' },\r\n  { id: 'greeting-settings', name: '' },\r\n  { id: 'chat-history-settings', name: 'AI' } ,\r\n  { id: 'external-api-settings', name: 'API' },\r\n  { id: 'feishu-settings', name: '' },\r\n  { id: 'rest-time-settings', name: '' }\r\n]\r\n\r\n//  ID \r\nconst formatId = (id: string) => {\r\n  if (!id || id.length <= 10) return id;\r\n  return `${id.substring(0, 5)}******${id.substring(id.length - 5)}`;\r\n}\r\nconst isNarrowScreen = ref(window.innerWidth <= 650)\r\nconst activeSection = ref('ai-settings')\r\nconst contentRef = ref<HTMLElement | null>(null)\r\nconst isScrollingProgrammatically = ref(false) // \r\n// \r\nconst scrollToSection = (sectionId: string) => {\r\n  isScrollingProgrammatically.value = true // \r\n  activeSection.value = sectionId\r\n  const element = document.getElementById(sectionId)\r\n  if (element) {\r\n    const offset = 20 // \r\n    const elementPosition = element.getBoundingClientRect().top + window.pageYOffset\r\n    const offsetPosition = elementPosition - offset\r\n    \r\n    contentRef.value?.scrollTo({\r\n      top: offsetPosition,\r\n      behavior: 'smooth'\r\n    })\r\n    \r\n    // \r\n    setTimeout(() => {\r\n      isScrollingProgrammatically.value = false\r\n    }, 800) // \r\n  } else {\r\n    isScrollingProgrammatically.value = false\r\n  }\r\n}\r\n// \r\nconst handleResize = () => {\r\n  isNarrowScreen.value = window.innerWidth <= 650\r\n}\r\n// \r\nconst handleScroll = () => {\r\n  if (!contentRef.value || isScrollingProgrammatically.value) return // \r\n  \r\n  const sections = navItems.map(item => ({\r\n    id: item.id,\r\n    element: document.getElementById(item.id)\r\n  }))\r\n  // \r\n  const viewportHeight = window.innerHeight\r\n  \r\n  // \r\n  let currentSection = sections[0]\r\n  let minDistance = Infinity\r\n  \r\n  sections.forEach(section => {\r\n    if (!section.element) return\r\n    const rect = section.element.getBoundingClientRect()\r\n    // \r\n    const distance = Math.abs(rect.top)\r\n    \r\n    // \r\n    if (rect.top <= viewportHeight / 3 && distance < minDistance) {\r\n      minDistance = distance\r\n      currentSection = section\r\n    }\r\n  })\r\n  \r\n  if (currentSection) {\r\n    activeSection.value = currentSection.id\r\n  }\r\n}\r\n  // \r\n  const feishuSettings = ref({\r\n    appId: '',\r\n    appSecret: '',\r\n    phone: ''\r\n  })\r\n  // Token\r\n  const initialCozeToken = ref<string>('');\r\n  const initialCozeTokenLastUpdated = ref<string | undefined>(undefined);\r\n  // \r\n  const momentSettings = ref<MomentSettings>({\r\n    agentId: '',\r\n    commentLimit: 100,\r\n    perFriendLimit: 2,\r\n    autoLike: false,\r\n    interactionMode: 'like_and_comment',\r\n    blacklist: '', \r\n    prompt: ``\r\n  })\r\n  // \r\n  const chatHistorySettings = ref<ChatHistorySettings>({\r\n    autoSave: false,\r\n    includeContext: false,\r\n    contextCount:5,\r\n    includeUserInfo: false,\r\n    // \r\n    messageMerge: {\r\n      mode: 'none',\r\n      interval: 5\r\n    },\r\n    // \r\n    transferConfig: {\r\n      phrases: [],\r\n      notifyWechat: \"\"\r\n    }\r\n  })\r\n  // \r\n  const router = useRouter()\r\n  const testing = ref(false)\r\n  // \r\n  router.beforeEach(async (to, from, next) => {\r\n    if (to.name === 'settings') {\r\n      await loadSettings()\r\n    }\r\n    next()\r\n  })\r\n  const saveFeishuSettings = async () => {\r\n    try {\r\n      const result = await saveConfig('feishu_settings', { feishu_settings: feishuSettings.value })\r\n      if (result.success) {\r\n        ElMessage.success('')\r\n      } else {\r\n        throw new Error('')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  const handleFeishuAppIdBlur = async () => {\r\n    const val = (feishuSettings.value.appId || '').trim()\r\n    if (!val.startsWith('cli_')) {\r\n      ElMessage.warning('APP ID  cli_ ')\r\n      return\r\n    }\r\n    await saveFeishuSettings()\r\n  }\r\n  const handleFeishuSecretBlur = async () => {\r\n    const val = (feishuSettings.value.appSecret || '').trim()\r\n    if (val.length <= 10) {\r\n      ElMessage.warning('App Secret  10')\r\n      return\r\n    }\r\n    await saveFeishuSettings()\r\n  }\r\n  const handleFeishuPhoneInput = () => {\r\n    feishuSettings.value.phone = (feishuSettings.value.phone || '').replace(/\\D/g, '').slice(0, 11)\r\n  }\r\n  const handleFeishuPhoneBlur = async () => {\r\n    const val = (feishuSettings.value.phone || '').trim()\r\n    if (!/^\\d{11}$/.test(val)) {\r\n      ElMessage.warning(' 11 ')\r\n      return\r\n    }\r\n    await saveFeishuSettings()\r\n  }\r\n  // \r\n  const addPhraseItem = () => {\r\n    if (chatHistorySettings.value.transferConfig.phrases.length < 3) {\r\n      phraseInputVisible.value = true\r\n      nextTick(() => {\r\n        phraseInputRef.value?.focus()\r\n      })\r\n    }\r\n  }\r\n  // \r\n  const confirmPhrase = () => {\r\n    if (phraseInputValue.value.trim()) {\r\n      if (!chatHistorySettings.value.transferConfig.phrases.includes(phraseInputValue.value.trim())) {\r\n        chatHistorySettings.value.transferConfig.phrases.push(phraseInputValue.value.trim())\r\n        saveChatHistorySettings()\r\n      }\r\n    }\r\n    phraseInputVisible.value = false\r\n    phraseInputValue.value = ''\r\n  }\r\n  // \r\n  const removePhraseItem = (index: number) => {\r\n    chatHistorySettings.value.transferConfig.phrases.splice(index, 1)\r\n    saveChatHistorySettings()\r\n  }\r\n  // \r\n  const testCozeAgent = async () => {\r\n    if (!testAgentForm.value.agentId) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    // \r\n    const selectedAgent = cozeAgents.value.find(agent => agent.botId === testAgentForm.value.agentId)\r\n    if (!selectedAgent) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    // \r\n    if (selectedAgent.platform === 'coze' && !cozeSettings.value.token) {\r\n      ElMessage.warning(' Coze Token')\r\n      return\r\n    }\r\n    \r\n    testing.value = true\r\n    try {\r\n      // \r\n      const result = await testAgent(selectedAgent.botId, selectedAgent.platform || 'coze')\r\n      \r\n      if (result.success) {\r\n        ElMessage.success('')\r\n        testAgentDialogVisible.value = false\r\n      } else {\r\n        ElMessage.error(result.error || '')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error(error instanceof Error ? error.message : '')\r\n    } finally {\r\n      testing.value = false\r\n    }\r\n  }\r\nconst saveMomentSettings = async () => {\r\n  try {\r\n    const result = await saveConfig('moment_settings', { moment_settings: momentSettings.value })\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n    } else {\r\n      throw new Error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n  // \r\n  const setDefaultAgent = async (agent: CozeAgent) => {\r\n  try {\r\n    // \r\n    const updatedAgents = cozeAgents.value.map(a => ({\r\n      ...a,\r\n      isDefault: a.botId === agent.botId ? true : false //  isDefault  false\r\n    }))\r\n    \r\n    const result = await saveConfig('agents', { agents: updatedAgents })\r\n    if (result.success) {\r\n      cozeAgents.value = updatedAgents\r\n      ElMessage.success('')\r\n    } else {\r\n      throw new Error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\nconst restTimeSettings = ref<RestTimeSettings>({\r\n  startTime: 0, // 0:00 (in 15-min intervals from 0:00)\r\n  endTime: 28, // 7:00\r\n  selectedTasks: ['', ''] // \r\n})\r\n\r\nconst isDragging = ref<string | null>(null)\r\nconst timelineRef = ref<HTMLElement | null>(null)\r\nconst startTimeDisplay = ref('')\r\nconst endTimeDisplay = ref('')\r\n\r\n// \r\nconst taskOptions = [\r\n  { id: 'moment_comment', name: '', icon: '' },\r\n  { id: 'add_friend', name: '', icon: '' },\r\n  { id: 'accept_friend', name: '', icon: '' }\r\n]\r\n\r\n// 9615 (24 * 4)\r\nconst intervalToTime = (interval: number): string => {\r\n  const hours = Math.floor(interval / 4)\r\n  const minutes = (interval % 4) * 15\r\n  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`\r\n}\r\n\r\n// \r\nconst timeToInterval = (timeStr: string): number => {\r\n  const [hours, minutes] = timeStr.split(':').map(Number)\r\n  return hours * 4 + minutes / 15\r\n}\r\n\r\n// \r\nconst getPosition = (interval: number): number => {\r\n  return (interval / (totalIntervals - 1)) * 100\r\n}\r\n\r\n// \r\nconst disabledRange = computed(() => {\r\n  const start = restTimeSettings.value.startTime\r\n  const end = restTimeSettings.value.endTime\r\n  \r\n  if (start <= end) {\r\n    return {\r\n      start: getPosition(start),\r\n      width: getPosition(end) - getPosition(start)\r\n    }\r\n  } else {\r\n    // \r\n    return [\r\n      { start: 0, width: getPosition(end) },\r\n      { start: getPosition(start), width: 100 - getPosition(start) }\r\n    ]\r\n  }\r\n})\r\n\r\n// \r\nconst handleTaskToggle = (taskName: string) => {\r\n  const tasks = restTimeSettings.value.selectedTasks\r\n  if (tasks.includes(taskName)) {\r\n    restTimeSettings.value.selectedTasks = tasks.filter(t => t !== taskName)\r\n  } else {\r\n    restTimeSettings.value.selectedTasks = [...tasks, taskName]\r\n  }\r\n  saveRestTimeSettings()\r\n}\r\n\r\n// \r\nconst handleMouseDown = (type: string, e: MouseEvent) => {\r\n  e.preventDefault()\r\n  isDragging.value = type\r\n}\r\n\r\nconst handleMouseMove = (e: MouseEvent) => {\r\n  if (!isDragging.value || !timelineRef.value) return\r\n\r\n  const rect = timelineRef.value.getBoundingClientRect()\r\n  const x = Math.max(0, Math.min(e.clientX - rect.left, rect.width))\r\n  const interval = Math.round((x / rect.width) * (totalIntervals - 1))\r\n\r\n  if (isDragging.value === 'start') {\r\n    restTimeSettings.value.startTime = interval\r\n    startTimeDisplay.value = intervalToTime(interval)\r\n  } else if (isDragging.value === 'end') {\r\n    restTimeSettings.value.endTime = interval\r\n    endTimeDisplay.value = intervalToTime(interval)\r\n  }\r\n  saveRestTimeSettings()\r\n}\r\n\r\nconst handleMouseUp = () => {\r\n  isDragging.value = null\r\n}\r\n\r\n// \r\nconst handleStartTimeChange = (timeStr: string) => {\r\n  restTimeSettings.value.startTime = timeToInterval(timeStr)\r\n  saveRestTimeSettings()\r\n}\r\n\r\nconst handleEndTimeChange = (timeStr: string) => {\r\n  restTimeSettings.value.endTime = timeToInterval(timeStr)\r\n  saveRestTimeSettings()\r\n}\r\n\r\n// \r\nconst setQuickTime = (start: number, end: number) => {\r\n  restTimeSettings.value.startTime = start\r\n  restTimeSettings.value.endTime = end\r\n  startTimeDisplay.value = intervalToTime(start)\r\n  endTimeDisplay.value = intervalToTime(end)\r\n  saveRestTimeSettings()\r\n}\r\n\r\n// \r\nconst saveRestTimeSettings = async () => {\r\n  try {\r\n    const result = await saveConfig('rest_time_settings', {\r\n      rest_time_settings: restTimeSettings.value\r\n    })\r\n    if (result.success) {\r\n      console.log('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst formatIdentifierDisplay = (value: string) => {\r\n  if (!value || value.length <= 8) return value\r\n  return value.substring(0, 4) + '*'.repeat(value.length - 8) + value.substring(value.length - 4)\r\n}\r\n\r\n// \r\nconst parseIdentifierInput = (value: string) => {\r\n  return value\r\n}\r\n\r\n//  - \r\nconst handleIdentifierChange = debounce(async (value: string) => {\r\n  // \r\n  const trimmedValue = value.trim()\r\n  externalApiSettings.value.identifier = trimmedValue\r\n  \r\n  // \r\n  try {\r\n    await saveConfig('external_api_settings', {\r\n      identifier: trimmedValue\r\n    })\r\n    connectionStatus.value = null // \r\n    \r\n    // \r\n    if (!trimmedValue) {\r\n      ElMessage.info('API')\r\n    }\r\n  } catch (error) {\r\n    console.error('API:', error)\r\n    ElMessage.error('')\r\n  }\r\n}, 1000)\r\n// API\r\nconst testApiConnection = async () => {\r\n  if (!externalApiSettings.value.identifier) return\r\n  \r\n  testingConnection.value = true\r\n  connectionStatus.value = null\r\n  \r\n  try {\r\n    const result = await testExternalApiConnection(externalApiSettings.value.identifier)\r\n    \r\n    connectionStatus.value = {\r\n      success: result.success,\r\n      message: result.message\r\n    }\r\n    \r\n    if (result.success) {\r\n      ElMessage.success('API')\r\n    } else {\r\n      ElMessage.error(`: ${result.message}`)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    connectionStatus.value = {\r\n      success: false,\r\n      message: ''\r\n    }\r\n    ElMessage.error('')\r\n  } finally {\r\n    testingConnection.value = false\r\n  }\r\n}\r\n// \r\nconst saveChatHistorySettings = async () => {\r\n  try {\r\n    const result = await saveConfig('chat_history_settings', { \r\n      chat_history_settings: chatHistorySettings.value \r\n    })\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n    } else {\r\n      throw new Error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n\r\nconst deleteAgent = async (agent: CozeAgent) => {\r\n  if (agent.isDefault) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    await ElMessageBox.confirm('', '', {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'warning'\r\n    })\r\n    \r\n    const updatedAgents = cozeAgents.value.filter(a => a.botId !== agent.botId)\r\n    const result = await saveConfig('agents', { agents: updatedAgents })\r\n    \r\n    if (result.success) {\r\n      cozeAgents.value = updatedAgents\r\n      ElMessage.success('')\r\n    } else {\r\n      throw new Error('')\r\n    }\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n}\r\n  \r\n  // \r\n  const cozeSettings = ref<CozeSettings>({\r\n    token: '',\r\n    tokenLastUpdated: undefined\r\n  })\r\n  \r\n  const modelSettings = ref<ModelSettings>({\r\n  platform: 'DeepSeek',\r\n  platformConfigs: {\r\n    'DeepSeek': { baseUrl: '', apiKey: '', modelName: '' },\r\n    '': { baseUrl: '', apiKey: '', modelName: '' },\r\n    '': { baseUrl: '', apiKey: '', modelName: '' }\r\n  }\r\n})\r\n\r\n  const agentConfigVisible = ref(false)\r\n  const cozeAgents = ref<CozeAgent[]>([])\r\n\r\n  // \r\n  const showAgentConfig = () => {\r\n    agentConfigVisible.value = true\r\n  }\r\n  \r\n// \r\nconst loadSettings = async () => {\r\n  try {\r\n    console.debug('...')\r\n    const [agentsResult, cozeResult, modelResult,momentResult, greetingResult,chatHistoryResult,feishuConfig,difyResult,apiResult] = await Promise.all([\r\n      getConfig('agents'),\r\n      getConfig('coze_settings'),\r\n      getConfig('model_settings'),\r\n      getConfig('moment_settings'),\r\n      getConfig('greeting_config'),\r\n      getConfig('chat_history_settings'),\r\n      getConfig('feishu_settings'),\r\n      getConfig('dify_settings'),\r\n      getConfig('external_api_settings')\r\n    ])\r\n    //  Dify \r\n    if (difyResult?.success && difyResult?.data) {\r\n          difySettings.value = {\r\n            baseUrl: difyResult.data.baseUrl\r\n          }\r\n        }\r\n    /// \r\n    if (agentsResult.success && agentsResult.data) {\r\n      const agents = Array.isArray(agentsResult.data) ? agentsResult.data : \r\n                    Array.isArray(agentsResult.data.agents) ? agentsResult.data.agents : []\r\n      \r\n      // \r\n      const uniqueAgents = new Map()\r\n      agents.forEach((agent: { \r\n        name?: string, \r\n        botId?: string, \r\n        isDefault?: boolean,\r\n        id?: string ,\r\n        platform?: string\r\n      }) => {\r\n        if (agent.botId && !uniqueAgents.has(agent.botId)) {\r\n          uniqueAgents.set(agent.botId, {\r\n            name: agent.name || '',\r\n            botId: agent.botId,\r\n            isDefault: Boolean(agent.isDefault),\r\n            id: agent.id,\r\n            platform: agent.platform || 'coze'\r\n          })\r\n        }\r\n      })\r\n      \r\n      cozeAgents.value = Array.from(uniqueAgents.values())\r\n        .filter((agent: CozeAgent) => agent.name && agent.botId)\r\n      \r\n      // \r\n      const defaultAgents = cozeAgents.value.filter(agent => agent.isDefault)\r\n      if (defaultAgents.length > 1) {\r\n        // \r\n        cozeAgents.value = cozeAgents.value.map((agent, index) => ({\r\n          ...agent,\r\n          isDefault: defaultAgents[0].botId === agent.botId\r\n        }))\r\n      } else if (cozeAgents.value.length > 0 && !cozeAgents.value.some(agent => agent.isDefault)) {\r\n        // \r\n        cozeAgents.value[0].isDefault = true\r\n      }\r\n    }\r\n\r\n    //  Coze \r\n    if (cozeResult?.success && cozeResult?.data?.coze_settings) {\r\n      cozeSettings.value = {\r\n        token: cozeResult.data.coze_settings.token || '',\r\n        tokenLastUpdated: cozeResult.data.coze_settings.tokenLastUpdated // \r\n      };\r\n      initialCozeToken.value = cozeSettings.value.token;\r\n      initialCozeTokenLastUpdated.value = cozeSettings.value.tokenLastUpdated;\r\n    }\r\n\r\n    if (apiResult?.success && apiResult?.data?.identifier) {\r\n      externalApiSettings.value.identifier = apiResult.data.identifier\r\n    }\r\n    // \r\n    if (modelResult.success && modelResult.data) {\r\n      const savedSettings = modelResult.data.model_settings || {}\r\n      \r\n      // \r\n      if (savedSettings.platformConfigs) {\r\n        modelSettings.value = {\r\n          platform: savedSettings.platform || 'DeepSeek',\r\n          platformConfigs: {\r\n            'DeepSeek': { baseUrl: '', apiKey: '', modelName: '' },\r\n            '': { baseUrl: '', apiKey: '', modelName: '' },\r\n            '': { baseUrl: '', apiKey: '', modelName: '' },\r\n            ...savedSettings.platformConfigs\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n     // \r\n     if (momentResult.success && momentResult.data) {\r\n      momentSettings.value = {\r\n        ...momentSettings.value,\r\n        ...momentResult.data.moment_settings\r\n      }\r\n    }\r\n    // \r\n    if (greetingResult.success && greetingResult.data) {\r\n      // console.debug(\"\",greetingResult)\r\n      //  provide/inject  GreetingConfig \r\n      //  GreetingConfig \r\n      emitter.emit('updateGreetingConfig', greetingResult.data)\r\n    }\r\n     // \r\n     if (chatHistoryResult.success && chatHistoryResult.data) {\r\n      chatHistorySettings.value = {\r\n        ...chatHistorySettings.value,\r\n        ...chatHistoryResult.data.chat_history_settings\r\n      }\r\n    }\r\n\r\n    // \r\n    if (feishuConfig?.success && feishuConfig?.data?.feishu_settings) {\r\n      feishuSettings.value = {\r\n        appId: feishuConfig.data.feishu_settings.appId || '',\r\n        appSecret: feishuConfig.data.feishu_settings.appSecret || '',\r\n        phone: feishuConfig.data.feishu_settings.phone || ''\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n  onBeforeMount(() => {\r\n  loadSettings()\r\n})\r\nconst emitter = mitt()\r\n//  emitter \r\nprovide('emitter', emitter)\r\n// \r\nconst getPlatformIconExtension = (platform?: string) => {\r\n  if (platform === 'dify') return 'png'\r\n  if (platform === 'yuanqi') return 'png'\r\n  return 'svg'\r\n}\r\n\r\n// ID\r\nconst getPlatformIdLabel = (platform?: string) => {\r\n  if (platform === 'dify') return 'API '\r\n  return 'Bot ID'\r\n}\r\n// Token\r\nconst daysTokenBound = computed(() => {\r\n  if (cozeSettings.value.token && cozeSettings.value.tokenLastUpdated) {\r\n    const lastUpdated = new Date(cozeSettings.value.tokenLastUpdated);\r\n    const current = new Date();\r\n\r\n    // \r\n    const lastUpdatedStartOfDay = new Date(lastUpdated.getFullYear(), lastUpdated.getMonth(), lastUpdated.getDate());\r\n    const currentStartOfDay = new Date(current.getFullYear(), current.getMonth(), current.getDate());\r\n\r\n    const diffTime = currentStartOfDay.getTime() - lastUpdatedStartOfDay.getTime();\r\n    // \r\n    const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24)); \r\n\r\n    return diffDays + 1; //  \"x\"\r\n  }\r\n  return 0; // token0\r\n});\r\n\r\n// \r\nconst showClearCacheDialog = () => {\r\n  clearCacheDialogVisible.value = true\r\n}\r\n\r\nconst handleClearCacheDialogClose = () => {\r\n  clearCacheDialogVisible.value = false\r\n}\r\n\r\nconst clearCozeCache = async () => {\r\n  try {\r\n    clearingCache.value = true\r\n    \r\n    // API\r\n    const response = await fetch('/api/coze/clear-cache', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-API-Key': 'yoko_test'\r\n      }\r\n    })\r\n    \r\n    const result = await response.json()\r\n    \r\n    if (result.success) {\r\n      ElMessage.success('Coze')\r\n      clearCacheDialogVisible.value = false\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    clearingCache.value = false\r\n  }\r\n}\r\n  // \r\n  onMounted(async () => {\r\n    try {\r\n      contentRef.value?.addEventListener('scroll', handleScroll)\r\n      await loadSettings()\r\n      await nextTick()\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n    handleResize()\r\n    window.addEventListener('resize', handleResize)\r\n    // \r\n    document.addEventListener('mousemove', handleMouseMove)\r\n    document.addEventListener('mouseup', handleMouseUp)\r\n    // \r\n    startTimeDisplay.value = intervalToTime(restTimeSettings.value.startTime)\r\n    endTimeDisplay.value = intervalToTime(restTimeSettings.value.endTime)\r\n    \r\n    // \r\n    try {\r\n      const restTimeResult = await getConfig('rest_time_settings')\r\n      if (restTimeResult.success && restTimeResult.data) {\r\n        restTimeSettings.value = {\r\n          ...restTimeSettings.value,\r\n          ...restTimeResult.data.rest_time_settings\r\n        }\r\n        startTimeDisplay.value = intervalToTime(restTimeSettings.value.startTime)\r\n        endTimeDisplay.value = intervalToTime(restTimeSettings.value.endTime)\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n  })\r\n    // \r\n  onUnmounted(() => {\r\n    contentRef.value?.removeEventListener('scroll', handleScroll)\r\n    window.removeEventListener('resize', handleResize)\r\n    document.removeEventListener('mousemove', handleMouseMove)\r\n    document.removeEventListener('mouseup', handleMouseUp)\r\n  })\r\n  \r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_Delete = _resolveComponent(\"Delete\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n  const _component_el_input_number = _resolveComponent(\"el-input-number\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_InfoFilled = _resolveComponent(\"InfoFilled\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _withDirectives(_createElementVNode(\"div\", _hoisted_2, [\n        _cache[37] || (_cache[37] = _createElementVNode(\"div\", { class: \"nav-title\" }, \"\", -1)),\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_openBlock(), _createElementBlock(_Fragment, null, _renderList(navItems, (item) => {\n            return _createElementVNode(\"div\", {\n              key: item.id,\n              class: _normalizeClass([\"nav-item\", { active: activeSection.value === item.id }]),\n              onClick: ($event: any) => (scrollToSection(item.id))\n            }, _toDisplayString(item.name), 11, _hoisted_4)\n          }), 64))\n        ])\n      ], 512), [\n        [_vShow, !isNarrowScreen.value]\n      ]),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"settings-content\", { 'full-width': isNarrowScreen.value }]),\n        ref_key: \"contentRef\",\n        ref: contentRef\n      }, [\n        _createVNode(_component_el_card, {\n          class: \"setting-card\",\n          id: \"ai-settings\"\n        }, {\n          header: _withCtx(() => [...(_cache[38] || (_cache[38] = [\n            _createElementVNode(\"div\", { class: \"card-header\" }, [\n              _createElementVNode(\"span\", null, \"AI\")\n            ], -1)\n          ]))]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createElementVNode(\"h4\", _hoisted_6, [\n                _cache[40] || (_cache[40] = _createElementVNode(\"img\", {\n                  src: \"/icon/coze.svg\",\n                  alt: \"Coze\",\n                  class: \"platform-icon\"\n                }, null, -1)),\n                _cache[41] || (_cache[41] = _createTextVNode(\" Coze \", -1)),\n                _createVNode(_component_el_button, {\n                  type: \"info\",\n                  size: \"small\",\n                  plain: \"\",\n                  class: \"clear-cache-btn\",\n                  onClick: showClearCacheDialog\n                }, {\n                  default: _withCtx(() => [...(_cache[39] || (_cache[39] = [\n                    _createTextVNode(\"  \", -1)\n                  ]))]),\n                  _: 1\n                })\n              ]),\n              _createVNode(_component_el_form, {\n                model: cozeSettings.value,\n                \"label-width\": \"120px\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_form_item, { label: \"Coze Token\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_input, {\n                        modelValue: cozeSettings.value.token,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((cozeSettings.value.token) = $event)),\n                        type: \"password\",\n                        \"show-password\": \"\",\n                        onKeydown: _cache[1] || (_cache[1] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"])),\n                        placeholder: \"Coze Token\",\n                        onInput: _unref(autoSaveCozeSettings)\n                      }, null, 8, [\"modelValue\", \"onInput\"]),\n                      (cozeSettings.value.token && cozeSettings.value.tokenLastUpdated)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" token \" + _toDisplayString(daysTokenBound.value) + \"  \", 1))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"model\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_8, [\n              _cache[42] || (_cache[42] = _createElementVNode(\"h4\", { class: \"platform-title\" }, [\n                _createElementVNode(\"img\", {\n                  src: \"/icon/dify.png\",\n                  alt: \"Dify\",\n                  class: \"platform-icon\"\n                }),\n                _createTextVNode(\" Dify \")\n              ], -1)),\n              _createVNode(_component_el_form, {\n                model: difySettings.value,\n                \"label-width\": \"120px\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_form_item, { label: \"\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_input, {\n                        modelValue: difySettings.value.baseUrl,\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((difySettings.value.baseUrl) = $event)),\n                        placeholder: \"http://localhost/v1\",\n                        onInput: _unref(autoSaveDifySettings)\n                      }, null, 8, [\"modelValue\", \"onInput\"])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"model\"])\n            ]),\n            _createVNode(CozeAgentConfig, {\n              visible: agentConfigVisible.value,\n              \"onUpdate:visible\": _cache[3] || (_cache[3] = ($event: any) => ((agentConfigVisible).value = $event)),\n              agents: cozeAgents.value,\n              \"onUpdate:agents\": _cache[4] || (_cache[4] = ($event: any) => ((cozeAgents).value = $event))\n            }, null, 8, [\"visible\", \"agents\"])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_card, {\n          class: \"setting-card\",\n          id: \"agent-settings\"\n        }, {\n          header: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_9, [\n              _cache[44] || (_cache[44] = _createElementVNode(\"span\", null, \"\", -1)),\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                size: \"small\",\n                loading: testing.value,\n                onClick: showTestAgentDialog\n              }, {\n                default: _withCtx(() => [...(_cache[43] || (_cache[43] = [\n                  _createTextVNode(\"  \", -1)\n                ]))]),\n                _: 1\n              }, 8, [\"loading\"])\n            ])\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_10, [\n              (cozeAgents.value.length)\n                ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(cozeAgents.value, (agent) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                      key: agent.botId,\n                      class: \"agent-item\"\n                    }, [\n                      _createElementVNode(\"div\", _hoisted_11, [\n                        _createElementVNode(\"img\", {\n                          src: `/icon/${agent.platform || 'coze'}.${getPlatformIconExtension(agent.platform)}`,\n                          alt: agent.platform || 'coze',\n                          class: \"platform-icon\"\n                        }, null, 8, _hoisted_12),\n                        _createElementVNode(\"div\", _hoisted_13, [\n                          _createElementVNode(\"span\", _hoisted_14, _toDisplayString(agent.name), 1),\n                          _createElementVNode(\"span\", _hoisted_15, _toDisplayString(getPlatformIdLabel(agent.platform)) + \": \" + _toDisplayString(formatId(agent.botId)), 1)\n                        ])\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_16, [\n                        (agent.isDefault)\n                          ? (_openBlock(), _createBlock(_component_el_tag, {\n                              key: 0,\n                              size: \"small\",\n                              type: \"success\",\n                              class: \"default-tag\"\n                            }, {\n                              default: _withCtx(() => [...(_cache[45] || (_cache[45] = [\n                                _createTextVNode(\"  \", -1)\n                              ]))]),\n                              _: 1\n                            }))\n                          : _createCommentVNode(\"\", true),\n                        (!agent.isDefault)\n                          ? (_openBlock(), _createBlock(_component_el_button, {\n                              key: 1,\n                              type: \"primary\",\n                              link: \"\",\n                              onClick: ($event: any) => (setDefaultAgent(agent))\n                            }, {\n                              default: _withCtx(() => [...(_cache[46] || (_cache[46] = [\n                                _createTextVNode(\"  \", -1)\n                              ]))]),\n                              _: 1\n                            }, 8, [\"onClick\"]))\n                          : _createCommentVNode(\"\", true),\n                        _createVNode(_component_el_button, {\n                          type: \"danger\",\n                          link: \"\",\n                          onClick: ($event: any) => (deleteAgent(agent))\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_icon, null, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_Delete)\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"onClick\"])\n                      ])\n                    ]))\n                  }), 128))\n                : (_openBlock(), _createBlock(_component_el_empty, {\n                    key: 1,\n                    description: \"\"\n                  }))\n            ]),\n            _createElementVNode(\"div\", _hoisted_17, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                onClick: showAgentConfig\n              }, {\n                default: _withCtx(() => [...(_cache[47] || (_cache[47] = [\n                  _createTextVNode(\"  \", -1)\n                ]))]),\n                _: 1\n              })\n            ])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_card, {\n          class: \"setting-card\",\n          id: \"moment-settings\"\n        }, {\n          header: _withCtx(() => [...(_cache[48] || (_cache[48] = [\n            _createElementVNode(\"div\", { class: \"card-header\" }, [\n              _createElementVNode(\"span\", null, \"\")\n            ], -1)\n          ]))]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_18, [\n              _createVNode(_component_el_form, {\n                model: momentSettings.value,\n                \"label-width\": \"120px\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_form_item, { label: \"\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_input_number, {\n                        modelValue: momentSettings.value.commentLimit,\n                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((momentSettings.value.commentLimit) = $event)),\n                        min: 1,\n                        max: 1000,\n                        placeholder: \"\",\n                        onKeydown: _cache[6] || (_cache[6] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"]))\n                      }, null, 8, [\"modelValue\"])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_form_item, { label: \"\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_input_number, {\n                        modelValue: momentSettings.value.perFriendLimit,\n                        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((momentSettings.value.perFriendLimit) = $event)),\n                        min: 1,\n                        max: 10,\n                        \"default-value\": 2,\n                        placeholder: \"\",\n                        onKeydown: _cache[8] || (_cache[8] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"]))\n                      }, null, 8, [\"modelValue\"])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_form_item, { label: \"\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_select, {\n                        modelValue: momentSettings.value.interactionMode,\n                        \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((momentSettings.value.interactionMode) = $event)),\n                        placeholder: \"\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_option, {\n                            label: \"\",\n                            value: \"like_only\"\n                          }),\n                          _createVNode(_component_el_option, {\n                            label: \"\",\n                            value: \"comment_only\"\n                          }),\n                          _createVNode(_component_el_option, {\n                            label: \"&\",\n                            value: \"like_and_comment\"\n                          })\n                        ]),\n                        _: 1\n                      }, 8, [\"modelValue\"])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_form_item, { label: \"\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_select, {\n                        modelValue: momentSettings.value.agentId,\n                        \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((momentSettings.value.agentId) = $event)),\n                        placeholder: \"\"\n                      }, {\n                        default: _withCtx(() => [\n                          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cozeAgents.value, (agent) => {\n                            return (_openBlock(), _createBlock(_component_el_option, {\n                              key: agent.botId,\n                              label: agent.name,\n                              value: agent.botId\n                            }, null, 8, [\"label\", \"value\"]))\n                          }), 128))\n                        ]),\n                        _: 1\n                      }, 8, [\"modelValue\"])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_form_item, { label: \"\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_input, {\n                        modelValue: momentSettings.value.blacklist,\n                        \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((momentSettings.value.blacklist) = $event)),\n                        type: \"textarea\",\n                        rows: 4,\n                        placeholder: \"\"\n                      }, null, 8, [\"modelValue\"])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"model\"]),\n              _createElementVNode(\"div\", _hoisted_19, [\n                _createVNode(_component_el_button, {\n                  type: \"primary\",\n                  onClick: saveMomentSettings\n                }, {\n                  default: _withCtx(() => [...(_cache[49] || (_cache[49] = [\n                    _createTextVNode(\"\", -1)\n                  ]))]),\n                  _: 1\n                })\n              ])\n            ])\n          ]),\n          _: 1\n        }),\n        _createVNode(CozeAgentConfig, {\n          visible: agentConfigVisible.value,\n          \"onUpdate:visible\": _cache[12] || (_cache[12] = ($event: any) => ((agentConfigVisible).value = $event)),\n          agents: cozeAgents.value,\n          \"onUpdate:agents\": _cache[13] || (_cache[13] = ($event: any) => ((cozeAgents).value = $event))\n        }, null, 8, [\"visible\", \"agents\"]),\n        _createVNode(_component_el_card, {\n          class: \"setting-card\",\n          id: \"greeting-settings\"\n        }, {\n          header: _withCtx(() => [...(_cache[50] || (_cache[50] = [\n            _createElementVNode(\"div\", { class: \"card-header\" }, [\n              _createElementVNode(\"span\", null, \"\")\n            ], -1)\n          ]))]),\n          default: _withCtx(() => [\n            _createVNode(GreetingConfig)\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_card, {\n          class: \"setting-card\",\n          id: \"chat-history-settings\"\n        }, {\n          header: _withCtx(() => [...(_cache[51] || (_cache[51] = [\n            _createElementVNode(\"div\", { class: \"card-header\" }, [\n              _createElementVNode(\"span\", null, \"AI\")\n            ], -1),\n            _createElementVNode(\"div\", { class: \"tip-text\" }, \"data\", -1)\n          ]))]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_20, [\n              _createVNode(_component_el_form, {\n                model: chatHistorySettings.value,\n                \"label-width\": \"0px\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_form_item, { class: \"chat-history-form-item\" }, {\n                    default: _withCtx(() => [\n                      _cache[52] || (_cache[52] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"\", -1)),\n                      _createElementVNode(\"div\", _hoisted_21, [\n                        _createVNode(_component_el_select, {\n                          modelValue: chatHistorySettings.value.messageMerge.mode,\n                          \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event: any) => ((chatHistorySettings.value.messageMerge.mode) = $event)),\n                          onChange: saveChatHistorySettings,\n                          class: \"merge-mode-select\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_option, {\n                              label: \"\",\n                              value: \"none\"\n                            }),\n                            _createVNode(_component_el_option, {\n                              label: \"\",\n                              value: \"concat\"\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"modelValue\"]),\n                        _createVNode(_component_el_tooltip, {\n                          content: \"\",\n                          placement: \"left\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_icon, { class: \"help-icon\" }, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(QuestionFilled))\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        })\n                      ])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_form_item, { class: \"chat-history-form-item\" }, {\n                    default: _withCtx(() => [\n                      _cache[53] || (_cache[53] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"()\", -1)),\n                      _createElementVNode(\"div\", _hoisted_22, [\n                        _createVNode(_component_el_input_number, {\n                          modelValue: chatHistorySettings.value.messageMerge.interval,\n                          \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((chatHistorySettings.value.messageMerge.interval) = $event)),\n                          min: 4,\n                          max: 20,\n                          step: 1,\n                          onChange: saveChatHistorySettings,\n                          class: \"interval-input\",\n                          onKeydown: _cache[16] || (_cache[16] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"]))\n                        }, null, 8, [\"modelValue\"]),\n                        _createVNode(_component_el_tooltip, {\n                          content: \"5\",\n                          placement: \"left\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_el_icon, { class: \"help-icon\" }, {\n                              default: _withCtx(() => [\n                                _createVNode(_unref(QuestionFilled))\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        })\n                      ])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_form_item, { class: \"chat-history-form-item\" }, {\n                    default: _withCtx(() => [\n                      _cache[54] || (_cache[54] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"AI\", -1)),\n                      _createVNode(_component_el_switch, {\n                        modelValue: chatHistorySettings.value.includeContext,\n                        \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => ((chatHistorySettings.value.includeContext) = $event)),\n                        \"active-text\": \"\",\n                        \"inactive-text\": \"\",\n                        onChange: saveChatHistorySettings\n                      }, null, 8, [\"modelValue\"])\n                    ]),\n                    _: 1\n                  }),\n                  (chatHistorySettings.value.includeContext)\n                    ? (_openBlock(), _createBlock(_component_el_form_item, {\n                        key: 0,\n                        class: \"chat-history-form-item\"\n                      }, {\n                        default: _withCtx(() => [\n                          _cache[55] || (_cache[55] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"\", -1)),\n                          _createElementVNode(\"div\", _hoisted_23, [\n                            _createVNode(_component_el_input_number, {\n                              modelValue: chatHistorySettings.value.contextCount,\n                              \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event: any) => ((chatHistorySettings.value.contextCount) = $event)),\n                              min: 3,\n                              max: 15,\n                              step: 1,\n                              onChange: saveChatHistorySettings,\n                              class: \"context-count-input\",\n                              onKeydown: _cache[19] || (_cache[19] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"]))\n                            }, null, 8, [\"modelValue\"]),\n                            _createVNode(_component_el_tooltip, {\n                              content: \"AI3-10\",\n                              placement: \"left\"\n                            }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_el_icon, { class: \"help-icon\" }, {\n                                  default: _withCtx(() => [\n                                    _createVNode(_unref(QuestionFilled))\n                                  ]),\n                                  _: 1\n                                })\n                              ]),\n                              _: 1\n                            })\n                          ])\n                        ]),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true),\n                  _createVNode(_component_el_form_item, { class: \"transfer-form-item\" }, {\n                    default: _withCtx(() => [\n                      _cache[59] || (_cache[59] = _createElementVNode(\"div\", { class: \"transfer-title\" }, [\n                        _createElementVNode(\"span\", { class: \"form-item-label\" }, \"\")\n                      ], -1)),\n                      _createElementVNode(\"div\", _hoisted_24, [\n                        _createElementVNode(\"div\", _hoisted_25, [\n                          _createElementVNode(\"div\", _hoisted_26, [\n                            _cache[57] || (_cache[57] = _createElementVNode(\"h3\", null, \"\", -1)),\n                            _createVNode(_component_el_button, {\n                              type: \"primary\",\n                              size: \"small\",\n                              onClick: addPhraseItem,\n                              disabled: chatHistorySettings.value.transferConfig.phrases.length >= 3\n                            }, {\n                              default: _withCtx(() => [...(_cache[56] || (_cache[56] = [\n                                _createTextVNode(\" + \", -1)\n                              ]))]),\n                              _: 1\n                            }, 8, [\"disabled\"])\n                          ]),\n                          _cache[58] || (_cache[58] = _createElementVNode(\"p\", { class: \"description\" }, \"AI\", -1)),\n                          _createElementVNode(\"div\", _hoisted_27, [\n                            _createElementVNode(\"div\", _hoisted_28, [\n                              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(chatHistorySettings.value.transferConfig.phrases, (phrase, index) => {\n                                return (_openBlock(), _createBlock(_component_el_tag, {\n                                  key: index,\n                                  closable: \"\",\n                                  onClose: ($event: any) => (removePhraseItem(index))\n                                }, {\n                                  default: _withCtx(() => [\n                                    _createTextVNode(_toDisplayString(phrase), 1)\n                                  ]),\n                                  _: 2\n                                }, 1032, [\"onClose\"]))\n                              }), 128)),\n                              (phraseInputVisible.value)\n                                ? (_openBlock(), _createBlock(_component_el_input, {\n                                    key: 0,\n                                    ref_key: \"phraseInputRef\",\n                                    ref: phraseInputRef,\n                                    modelValue: phraseInputValue.value,\n                                    \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event: any) => ((phraseInputValue).value = $event)),\n                                    class: \"phrase-input\",\n                                    size: \"small\",\n                                    placeholder: \"\",\n                                    onKeyup: _withKeys(confirmPhrase, [\"enter\"]),\n                                    onBlur: confirmPhrase\n                                  }, null, 8, [\"modelValue\"]))\n                                : _createCommentVNode(\"\", true)\n                            ])\n                          ])\n                        ])\n                      ])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"model\"])\n            ])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_card, {\n          class: \"setting-card\",\n          id: \"external-api-settings\"\n        }, {\n          header: _withCtx(() => [...(_cache[60] || (_cache[60] = [\n            _createElementVNode(\"div\", { class: \"card-header\" }, [\n              _createElementVNode(\"span\", null, \"API\")\n            ], -1)\n          ]))]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_29, [\n              _createElementVNode(\"div\", _hoisted_30, [\n                _createElementVNode(\"div\", _hoisted_31, [\n                  _createElementVNode(\"div\", _hoisted_32, [\n                    _createVNode(_component_el_icon, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_InfoFilled)\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _cache[61] || (_cache[61] = _createElementVNode(\"div\", { class: \"info-content\" }, [\n                    _createElementVNode(\"div\", { class: \"info-text\" }, \"API\")\n                  ], -1))\n                ])\n              ]),\n              _createVNode(_component_el_form, {\n                model: externalApiSettings.value,\n                \"label-width\": \"0\",\n                class: \"external-api-form\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_form_item, { class: \"api-identifier-form-item\" }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_33, [\n                        _cache[63] || (_cache[63] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"API\", -1)),\n                        _createElementVNode(\"div\", _hoisted_34, [\n                          _createVNode(_component_el_input, {\n                            modelValue: externalApiSettings.value.identifier,\n                            \"onUpdate:modelValue\": _cache[21] || (_cache[21] = ($event: any) => ((externalApiSettings.value.identifier) = $event)),\n                            placeholder: \"API\",\n                            onInput: _unref(handleIdentifierChange),\n                            formatter: formatIdentifierDisplay,\n                            parser: parseIdentifierInput,\n                            maxlength: \"50\"\n                          }, null, 8, [\"modelValue\", \"onInput\"]),\n                          _createVNode(_component_el_button, {\n                            type: \"primary\",\n                            icon: _unref(Connection),\n                            loading: testingConnection.value,\n                            disabled: !externalApiSettings.value.identifier || externalApiSettings.value.identifier.length < 4,\n                            onClick: testApiConnection,\n                            class: \"test-connection-btn\"\n                          }, {\n                            default: _withCtx(() => [...(_cache[62] || (_cache[62] = [\n                              _createTextVNode(\"  \", -1)\n                            ]))]),\n                            _: 1\n                          }, 8, [\"icon\", \"loading\", \"disabled\"])\n                        ])\n                      ])\n                    ]),\n                    _: 1\n                  }),\n                  (connectionStatus.value)\n                    ? (_openBlock(), _createBlock(_component_el_form_item, {\n                        key: 0,\n                        class: \"connection-status-form-item\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createElementVNode(\"div\", _hoisted_35, [\n                            _cache[64] || (_cache[64] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"\", -1)),\n                            _createVNode(_component_el_tag, {\n                              type: connectionStatus.value.success ? 'success' : 'danger',\n                              icon: connectionStatus.value.success ? _unref(SuccessFilled) : _unref(CircleCloseFilled)\n                            }, {\n                              default: _withCtx(() => [\n                                _createTextVNode(_toDisplayString(connectionStatus.value.message), 1)\n                              ]),\n                              _: 1\n                            }, 8, [\"type\", \"icon\"])\n                          ])\n                        ]),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _: 1\n              }, 8, [\"model\"])\n            ])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_card, {\n          class: \"setting-card\",\n          id: \"feishu-settings\"\n        }, {\n          header: _withCtx(() => [...(_cache[65] || (_cache[65] = [\n            _createElementVNode(\"div\", { class: \"card-header\" }, [\n              _createElementVNode(\"span\", null, \"\")\n            ], -1)\n          ]))]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_36, [\n              _createElementVNode(\"div\", _hoisted_37, [\n                _createElementVNode(\"div\", _hoisted_38, [\n                  _createElementVNode(\"div\", _hoisted_39, [\n                    _createVNode(_component_el_icon, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_InfoFilled)\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _cache[66] || (_cache[66] = _createElementVNode(\"div\", { class: \"info-content\" }, [\n                    _createElementVNode(\"div\", { class: \"info-text\" }, \"\")\n                  ], -1))\n                ])\n              ]),\n              _createVNode(_component_el_form, {\n                model: feishuSettings.value,\n                \"label-width\": \"0\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_form_item, { class: \"feishu-form-item\" }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_40, [\n                        _cache[67] || (_cache[67] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"APP ID\", -1)),\n                        _createVNode(_component_el_input, {\n                          modelValue: feishuSettings.value.appId,\n                          \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event: any) => ((feishuSettings.value.appId) = $event)),\n                          placeholder: \"cli_a9bfed9574f8dcd5\",\n                          onBlur: handleFeishuAppIdBlur,\n                          onKeydown: _cache[23] || (_cache[23] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"])),\n                          class: \"alert-input\"\n                        }, null, 8, [\"modelValue\"])\n                      ])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_form_item, { class: \"feishu-form-item\" }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_41, [\n                        _cache[68] || (_cache[68] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"App Secret\", -1)),\n                        _createVNode(_component_el_input, {\n                          modelValue: feishuSettings.value.appSecret,\n                          \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event: any) => ((feishuSettings.value.appSecret) = $event)),\n                          type: \"password\",\n                          \"show-password\": \"\",\n                          placeholder: \"10\",\n                          onBlur: handleFeishuSecretBlur,\n                          onKeydown: _cache[25] || (_cache[25] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"])),\n                          class: \"alert-input\"\n                        }, null, 8, [\"modelValue\"])\n                      ])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_form_item, { class: \"feishu-form-item\" }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_42, [\n                        _cache[70] || (_cache[70] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"\", -1)),\n                        _createVNode(_component_el_input, {\n                          modelValue: feishuSettings.value.phone,\n                          \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event: any) => ((feishuSettings.value.phone) = $event)),\n                          placeholder: \"\",\n                          maxlength: \"11\",\n                          onInput: handleFeishuPhoneInput,\n                          onBlur: handleFeishuPhoneBlur,\n                          onKeydown: _cache[27] || (_cache[27] = _withKeys(_withModifiers(() => {}, [\"prevent\"]), [\"enter\"])),\n                          class: \"alert-input\"\n                        }, {\n                          prepend: _withCtx(() => [...(_cache[69] || (_cache[69] = [\n                            _createTextVNode(\"+86\", -1)\n                          ]))]),\n                          _: 1\n                        }, 8, [\"modelValue\"])\n                      ])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"model\"])\n            ])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_card, {\n          class: \"setting-card\",\n          id: \"rest-time-settings\"\n        }, {\n          header: _withCtx(() => [...(_cache[71] || (_cache[71] = [\n            _createElementVNode(\"div\", { class: \"card-header\" }, [\n              _createElementVNode(\"span\", null, \"\")\n            ], -1)\n          ]))]),\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_43, [\n              _createElementVNode(\"div\", _hoisted_44, [\n                _createElementVNode(\"div\", _hoisted_45, [\n                  _createElementVNode(\"div\", _hoisted_46, [\n                    _createVNode(_component_el_icon, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_InfoFilled)\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _cache[72] || (_cache[72] = _createElementVNode(\"div\", { class: \"info-content\" }, [\n                    _createElementVNode(\"div\", { class: \"info-text\" }, \"\")\n                  ], -1))\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_47, [\n                _createElementVNode(\"div\", _hoisted_48, [\n                  _cache[73] || (_cache[73] = _createElementVNode(\"div\", { class: \"setting-indicator\" }, null, -1)),\n                  _cache[74] || (_cache[74] = _createElementVNode(\"span\", { class: \"setting-label\" }, \"\", -1)),\n                  _createElementVNode(\"span\", _hoisted_49, _toDisplayString(intervalToTime(restTimeSettings.value.startTime)) + \" - \" + _toDisplayString(intervalToTime(restTimeSettings.value.endTime)), 1)\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_50, [\n                _createElementVNode(\"div\", {\n                  class: \"timeline-wrapper\",\n                  ref_key: \"timelineRef\",\n                  ref: timelineRef\n                }, [\n                  _createElementVNode(\"div\", _hoisted_51, [\n                    _cache[75] || (_cache[75] = _createElementVNode(\"div\", { class: \"enabled-range\" }, null, -1)),\n                    (Array.isArray(disabledRange.value))\n                      ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(disabledRange.value, (range, index) => {\n                          return (_openBlock(), _createElementBlock(\"div\", {\n                            key: index,\n                            class: \"disabled-range\",\n                            style: _normalizeStyle({\r\n                      left: `${range.start}%`,\r\n                      width: `${range.width}%`\r\n                    })\n                          }, null, 4))\n                        }), 128))\n                      : (_openBlock(), _createElementBlock(\"div\", {\n                          key: 1,\n                          class: \"disabled-range\",\n                          style: _normalizeStyle({\r\n                    left: `${disabledRange.value.start}%`,\r\n                    width: `${disabledRange.value.width}%`\r\n                  })\n                        }, null, 4)),\n                    _createElementVNode(\"div\", {\n                      class: \"time-control start-control\",\n                      style: _normalizeStyle({ left: `${getPosition(restTimeSettings.value.startTime)}%` }),\n                      onMousedown: _cache[28] || (_cache[28] = (e) => handleMouseDown('start', e))\n                    }, null, 36),\n                    _createElementVNode(\"div\", {\n                      class: \"time-control end-control\",\n                      style: _normalizeStyle({ left: `${getPosition(restTimeSettings.value.endTime)}%` }),\n                      onMousedown: _cache[29] || (_cache[29] = (e) => handleMouseDown('end', e))\n                    }, null, 36)\n                  ])\n                ], 512)\n              ]),\n              _createElementVNode(\"div\", _hoisted_52, [\n                _createElementVNode(\"div\", _hoisted_53, [\n                  _createVNode(_component_el_select, {\n                    modelValue: startTimeDisplay.value,\n                    \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event: any) => ((startTimeDisplay).value = $event)),\n                    onChange: handleStartTimeChange,\n                    placeholder: \" \",\n                    class: \"time-select\"\n                  }, {\n                    default: _withCtx(() => [\n                      (_openBlock(), _createElementBlock(_Fragment, null, _renderList(96, (i) => {\n                        return _createVNode(_component_el_option, {\n                          key: i-1,\n                          value: intervalToTime(i-1),\n                          label: intervalToTime(i-1)\n                        }, null, 8, [\"value\", \"label\"])\n                      }), 64))\n                    ]),\n                    _: 1\n                  }, 8, [\"modelValue\"])\n                ]),\n                _createElementVNode(\"div\", _hoisted_54, [\n                  _createVNode(_component_el_select, {\n                    modelValue: endTimeDisplay.value,\n                    \"onUpdate:modelValue\": _cache[31] || (_cache[31] = ($event: any) => ((endTimeDisplay).value = $event)),\n                    onChange: handleEndTimeChange,\n                    placeholder: \" \",\n                    class: \"time-select\"\n                  }, {\n                    default: _withCtx(() => [\n                      (_openBlock(), _createElementBlock(_Fragment, null, _renderList(96, (i) => {\n                        return _createVNode(_component_el_option, {\n                          key: i-1,\n                          value: intervalToTime(i-1),\n                          label: intervalToTime(i-1)\n                        }, null, 8, [\"value\", \"label\"])\n                      }), 64))\n                    ]),\n                    _: 1\n                  }, 8, [\"modelValue\"])\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_55, [\n                _createElementVNode(\"div\", _hoisted_56, [\n                  (_openBlock(), _createElementBlock(_Fragment, null, _renderList(taskOptions, (task) => {\n                    return _createElementVNode(\"label\", {\n                      key: task.id,\n                      class: \"task-option\"\n                    }, [\n                      _createElementVNode(\"input\", {\n                        type: \"checkbox\",\n                        checked: restTimeSettings.value.selectedTasks.includes(task.name),\n                        onChange: ($event: any) => (handleTaskToggle(task.name)),\n                        class: \"task-checkbox\"\n                      }, null, 40, _hoisted_57),\n                      _createElementVNode(\"span\", _hoisted_58, _toDisplayString(task.icon), 1),\n                      _createElementVNode(\"span\", _hoisted_59, _toDisplayString(task.name), 1),\n                      (restTimeSettings.value.selectedTasks.includes(task.name))\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_60, \"  \"))\n                        : _createCommentVNode(\"\", true)\n                    ])\n                  }), 64))\n                ]),\n                _cache[76] || (_cache[76] = _createElementVNode(\"p\", { class: \"task-description\" }, \"  \", -1))\n              ])\n            ])\n          ]),\n          _: 1\n        })\n      ], 2)\n    ]),\n    _createVNode(_component_el_dialog, {\n      modelValue: testAgentDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event: any) => ((testAgentDialogVisible).value = $event)),\n      title: \"\",\n      width: \"60%\",\n      \"close-on-click-modal\": false\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_63, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[33] || (_cache[33] = ($event: any) => (testAgentDialogVisible.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[77] || (_cache[77] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            loading: testing.value,\n            onClick: testCozeAgent\n          }, {\n            default: _withCtx(() => [...(_cache[78] || (_cache[78] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }, 8, [\"loading\"])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_el_form, {\n          model: testAgentForm.value,\n          \"label-width\": \"100px\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, { label: \"\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_select, {\n                  modelValue: testAgentForm.value.agentId,\n                  \"onUpdate:modelValue\": _cache[32] || (_cache[32] = ($event: any) => ((testAgentForm.value.agentId) = $event)),\n                  placeholder: \"\"\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cozeAgents.value, (agent) => {\n                      return (_openBlock(), _createBlock(_component_el_option, {\n                        key: agent.botId,\n                        label: agent.name,\n                        value: agent.botId\n                      }, {\n                        default: _withCtx(() => [\n                          _createElementVNode(\"div\", _hoisted_61, [\n                            _createElementVNode(\"img\", {\n                              src: `/icon/${agent.platform || 'coze'}.${getPlatformIconExtension(agent.platform)}`,\n                              alt: agent.platform || 'coze',\n                              style: {\"width\":\"20px\",\"margin-right\":\"8px\"}\n                            }, null, 8, _hoisted_62),\n                            _createTextVNode(\" \" + _toDisplayString(agent.name), 1)\n                          ])\n                        ]),\n                        _: 2\n                      }, 1032, [\"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\"])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: clearCacheDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[36] || (_cache[36] = ($event: any) => ((clearCacheDialogVisible).value = $event)),\n      title: \"Coze\",\n      width: \"500px\",\n      \"before-close\": handleClearCacheDialogClose\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_65, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[35] || (_cache[35] = ($event: any) => (clearCacheDialogVisible.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[80] || (_cache[80] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            loading: clearingCache.value,\n            onClick: clearCozeCache\n          }, {\n            default: _withCtx(() => [...(_cache[81] || (_cache[81] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }, 8, [\"loading\"])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_64, [\n          _createVNode(_component_el_alert, {\n            type: \"warning\",\n            \"show-icon\": \"\",\n            closable: false,\n            class: \"cache-warning-banner\"\n          }, {\n            default: _withCtx(() => [...(_cache[79] || (_cache[79] = [\n              _createElementVNode(\"span\", { class: \"cache-warning-text\" }, \" CozeCozeCozeCoze \", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n  <div class=\"settings-page-container\">\r\n    <!--  -->\r\n    <div class=\"settings-nav\" v-show=\"!isNarrowScreen\">\r\n      <div class=\"nav-title\"></div>\r\n      <div class=\"nav-items\">\r\n        <div \r\n          v-for=\"item in navItems\" \r\n          :key=\"item.id\"\r\n          class=\"nav-item\"\r\n          :class=\"{ active: activeSection === item.id }\"\r\n          @click=\"scrollToSection(item.id)\">\r\n          {{ item.name }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"settings-content\" ref=\"contentRef\" :class=\"{ 'full-width': isNarrowScreen }\">\r\n      <!-- AI -->\r\n      <el-card class=\"setting-card\" id=\"ai-settings\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span>AI</span>\r\n          </div>\r\n        </template>\r\n        \r\n        <!-- Coze -->\r\n        <div class=\"setting-section\">\r\n          <h4 class=\"platform-title\">\r\n            <img src=\"/icon/coze.svg\" alt=\"Coze\" class=\"platform-icon\" />\r\n            Coze\r\n            <el-button \r\n              type=\"info\" \r\n              size=\"small\" \r\n              plain\r\n              class=\"clear-cache-btn\"\r\n              @click=\"showClearCacheDialog\"\r\n            >\r\n              \r\n            </el-button>\r\n          </h4>\r\n          <el-form :model=\"cozeSettings\" label-width=\"120px\">\r\n            <el-form-item label=\"Coze Token\">\r\n              <el-input \r\n                v-model=\"cozeSettings.token\" \r\n                type=\"password\" \r\n                show-password \r\n                @keydown.enter.prevent\r\n                placeholder=\"Coze Token\"\r\n                @input=\"autoSaveCozeSettings\"\r\n              />\r\n              <div v-if=\"cozeSettings.token && cozeSettings.tokenLastUpdated\" class=\"token-reminder\">\r\n                token {{ daysTokenBound }} \r\n              </div>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n\r\n        <!-- Dify -->\r\n        <div class=\"setting-section\">\r\n          <h4 class=\"platform-title\">\r\n            <img src=\"/icon/dify.png\" alt=\"Dify\" class=\"platform-icon\" />\r\n            Dify\r\n          </h4>\r\n          <el-form :model=\"difySettings\" label-width=\"120px\">\r\n            <el-form-item label=\"\">\r\n              <el-input \r\n                v-model=\"difySettings.baseUrl\" \r\n                placeholder=\"http://localhost/v1\"\r\n                @input=\"autoSaveDifySettings\"\r\n              />\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n        <!--  -->\r\n        <coze-agent-config\r\n          v-model:visible=\"agentConfigVisible\"\r\n          v-model:agents=\"cozeAgents\"\r\n        /> \r\n      </el-card>\r\n\r\n      <!--  -->\r\n    <el-card class=\"setting-card\" id=\"agent-settings\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span></span>\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            :loading=\"testing\"\r\n            @click=\"showTestAgentDialog\"\r\n          >\r\n            \r\n          </el-button>\r\n        </div>\r\n      </template>\r\n\r\n      <!--  -->\r\n      <div class=\"agents-list\">\r\n        <template v-if=\"cozeAgents.length\">\r\n          <div v-for=\"agent in cozeAgents\" :key=\"agent.botId\" class=\"agent-item\">\r\n            <div class=\"agent-info\">\r\n              <!--  -->\r\n              <img \r\n                :src=\"`/icon/${agent.platform || 'coze'}.${getPlatformIconExtension(agent.platform)}`\" \r\n                :alt=\"agent.platform || 'coze'\" \r\n                class=\"platform-icon\" \r\n              />\r\n              <div class=\"agent-details\">\r\n                <span class=\"agent-name\">{{ agent.name }}</span>\r\n                <span class=\"agent-botid\">{{ getPlatformIdLabel(agent.platform) }}: {{ formatId(agent.botId) }}</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"agent-actions\">\r\n              <!--  -->\r\n              <el-tag \r\n                size=\"small\" \r\n                type=\"success\" \r\n                v-if=\"agent.isDefault\"\r\n                class=\"default-tag\"\r\n              >\r\n                \r\n              </el-tag>\r\n              <el-button \r\n                v-if=\"!agent.isDefault\"\r\n                type=\"primary\" \r\n                link \r\n                @click=\"setDefaultAgent(agent)\"\r\n              >\r\n                \r\n              </el-button>\r\n              <el-button \r\n                type=\"danger\" \r\n                link \r\n                @click=\"deleteAgent(agent)\"\r\n              >\r\n              <el-icon><Delete /></el-icon>\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </template>\r\n        <el-empty v-else description=\"\" />\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"actions\">\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"showAgentConfig\"\r\n        >\r\n          \r\n        </el-button>\r\n      </div>\r\n    </el-card>\r\n    <el-card class=\"setting-card\" id=\"moment-settings\"> \r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span></span>\r\n        </div>\r\n      </template>\r\n  \r\n      <div class=\"setting-section\">\r\n        <el-form :model=\"momentSettings\" label-width=\"120px\">\r\n          <el-form-item label=\"\">\r\n            <el-input-number \r\n              v-model=\"momentSettings.commentLimit\" \r\n              :min=\"1\" \r\n              :max=\"1000\" \r\n              placeholder=\"\"\r\n              @keydown.enter.prevent\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-input-number \r\n              v-model=\"momentSettings.perFriendLimit\" \r\n              :min=\"1\" \r\n              :max=\"10\" \r\n              :default-value=\"2\"\r\n              placeholder=\"\"\r\n              @keydown.enter.prevent\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-select v-model=\"momentSettings.interactionMode\" placeholder=\"\">\r\n              <el-option label=\"\" value=\"like_only\" />\r\n              <el-option label=\"\" value=\"comment_only\" />\r\n              <el-option label=\"&\" value=\"like_and_comment\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-select \r\n              v-model=\"momentSettings.agentId\" \r\n              placeholder=\"\"\r\n            >\r\n              <el-option\r\n                v-for=\"agent in cozeAgents\"\r\n                :key=\"agent.botId\"\r\n                :label=\"agent.name\"\r\n                :value=\"agent.botId\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-input \r\n              v-model=\"momentSettings.blacklist\" \r\n              type=\"textarea\" \r\n              :rows=\"4\"\r\n              placeholder=\"\"\r\n            />\r\n          </el-form-item>\r\n        </el-form>\r\n        <div class=\"actions\">\r\n          <el-button type=\"primary\" @click=\"saveMomentSettings\"></el-button>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n\r\n      <!--  -->\r\n      <coze-agent-config\r\n        v-model:visible=\"agentConfigVisible\"\r\n        v-model:agents=\"cozeAgents\"\r\n      />\r\n          <!--  -->\r\n      <el-card class=\"setting-card\" id=\"greeting-settings\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <greeting-config />\r\n      </el-card>\r\n\r\n      <!--  -->\r\n      <el-card class=\"setting-card\" id=\"chat-history-settings\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span>AI</span>\r\n          </div>\r\n          <div class=\"tip-text\">data</div>\r\n        </template>\r\n        <div class=\"setting-section\">\r\n          <el-form :model=\"chatHistorySettings\" label-width=\"0px\">\r\n              <!--  -->\r\n            <el-form-item class=\"chat-history-form-item\">\r\n              <span class=\"form-item-label\"></span>\r\n              <div class=\"form-item-content\">\r\n                <el-select\r\n                  v-model=\"chatHistorySettings.messageMerge.mode\"\r\n                  @change=\"saveChatHistorySettings\"\r\n                  class=\"merge-mode-select\"\r\n                >\r\n                  <el-option label=\"\" value=\"none\" />\r\n                  <!-- <el-option label=\"\" value=\"context\" /> -->\r\n                  <el-option label=\"\" value=\"concat\" />\r\n                </el-select>\r\n                <el-tooltip\r\n                  content=\"\"\r\n                  placement=\"left\">\r\n                  <el-icon class=\"help-icon\"><QuestionFilled /></el-icon>\r\n                </el-tooltip>\r\n              </div>\r\n            </el-form-item>\r\n            \r\n            <!--  -->\r\n            <el-form-item class=\"chat-history-form-item\">\r\n              <span class=\"form-item-label\">()</span>\r\n              <div class=\"form-item-content\">\r\n                <el-input-number\r\n                  v-model=\"chatHistorySettings.messageMerge.interval\"\r\n                  :min=\"4\"\r\n                  :max=\"20\"\r\n                  :step=\"1\"\r\n                  @change=\"saveChatHistorySettings\"\r\n                  class=\"interval-input\"\r\n                  @keydown.enter.prevent\r\n                />\r\n                <el-tooltip\r\n                  content=\"5\"\r\n                  placement=\"left\">\r\n                  <el-icon class=\"help-icon\"><QuestionFilled /></el-icon>\r\n                </el-tooltip>\r\n              </div>\r\n            </el-form-item>\r\n            <el-form-item class=\"chat-history-form-item\">\r\n              <span class=\"form-item-label\">AI</span>\r\n              <el-switch\r\n                v-model=\"chatHistorySettings.includeContext\"\r\n                active-text=\"\"\r\n                inactive-text=\"\"\r\n                @change=\"saveChatHistorySettings\"\r\n              />\r\n            </el-form-item>\r\n            <!--  -->\r\n            <el-form-item class=\"chat-history-form-item\" v-if=\"chatHistorySettings.includeContext\">\r\n              <span class=\"form-item-label\"></span>\r\n              <div class=\"form-item-content\">\r\n                <el-input-number\r\n                  v-model=\"chatHistorySettings.contextCount\"\r\n                  :min=\"3\"\r\n                  :max=\"15\"\r\n                  :step=\"1\"\r\n                  @change=\"saveChatHistorySettings\"\r\n                  class=\"context-count-input\"\r\n                  @keydown.enter.prevent\r\n                />\r\n                <el-tooltip\r\n                  content=\"AI3-10\"\r\n                  placement=\"left\">\r\n                  <el-icon class=\"help-icon\"><QuestionFilled /></el-icon>\r\n                </el-tooltip>\r\n              </div>\r\n            </el-form-item>\r\n            <!--  -->\r\n            <el-form-item class=\"transfer-form-item\">\r\n              <div class=\"transfer-title\">\r\n                <span class=\"form-item-label\"></span>\r\n                <!-- <p class=\"transfer-description\">AI</p> -->\r\n              </div>\r\n              <div class=\"transfer-content\">\r\n                <div class=\"config-section\">\r\n                  <div class=\"section-header\">\r\n                    <h3></h3>\r\n                    <el-button \r\n                      type=\"primary\" \r\n                      size=\"small\"\r\n                      @click=\"addPhraseItem\"\r\n                      :disabled=\"chatHistorySettings.transferConfig.phrases.length >= 3\"\r\n                    >\r\n                      +\r\n                    </el-button>\r\n                  </div>\r\n                  <p class=\"description\">AI</p>\r\n                  <div class=\"form-item\">\r\n                    <div class=\"phrases-list\">\r\n                      <el-tag\r\n                        v-for=\"(phrase, index) in chatHistorySettings.transferConfig.phrases\"\r\n                        :key=\"index\"\r\n                        closable\r\n                        @close=\"removePhraseItem(index)\"\r\n                      >\r\n                        {{ phrase }}\r\n                      </el-tag>\r\n                      <el-input\r\n                        v-if=\"phraseInputVisible\"\r\n                        ref=\"phraseInputRef\"\r\n                        v-model=\"phraseInputValue\"\r\n                        class=\"phrase-input\"\r\n                        size=\"small\"\r\n                        placeholder=\"\"\r\n                        @keyup.enter=\"confirmPhrase\"\r\n                        @blur=\"confirmPhrase\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <!-- <div class=\"config-section\">\r\n                  <div class=\"section-header\">\r\n                    <h3></h3>\r\n                  </div>\r\n                  <p class=\"description\"></p>\r\n                  <div class=\"form-item\">\r\n                    <el-input \r\n                      v-model=\"chatHistorySettings.transferConfig.notifyWechat\" \r\n                      placeholder=\"\"\r\n                      @change=\"saveChatHistorySettings\"\r\n                      @keydown.enter.prevent\r\n                    />\r\n                  </div>\r\n                </div> -->\r\n              </div>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n       <!-- API -->\r\n      <el-card class=\"setting-card\" id=\"external-api-settings\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>API</span>\r\n            </div>\r\n          </template>\r\n          \r\n          <div class=\"setting-section\">\r\n          <div class=\"api-description\">\r\n            <div class=\"custom-info-box\">\r\n              <div class=\"info-icon\">\r\n                <el-icon><InfoFilled /></el-icon>\r\n              </div>\r\n              <div class=\"info-content\">\r\n                <!-- <div class=\"info-title\"></div> -->\r\n                <div class=\"info-text\">API</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n            \r\n          <el-form :model=\"externalApiSettings\" label-width=\"0\" class=\"external-api-form\">\r\n            <el-form-item class=\"api-identifier-form-item\">\r\n              <div class=\"api-identifier-container\">\r\n                <span class=\"form-item-label\">API</span>\r\n                <div class=\"api-identifier-input\">\r\n                  <el-input \r\n                    v-model=\"externalApiSettings.identifier\" \r\n                    placeholder=\"API\"\r\n                    @input=\"handleIdentifierChange\"\r\n                    :formatter=\"formatIdentifierDisplay\"\r\n                    :parser=\"parseIdentifierInput\"\r\n                    maxlength=\"50\"\r\n                  />\r\n                  <el-button \r\n                    type=\"primary\" \r\n                    :icon=\"Connection\"\r\n                    :loading=\"testingConnection\"\r\n                    :disabled=\"!externalApiSettings.identifier || externalApiSettings.identifier.length < 4\"\r\n                    @click=\"testApiConnection\"\r\n                    class=\"test-connection-btn\"\r\n                  >\r\n                    \r\n                  </el-button>\r\n                </div>\r\n              </div>\r\n            </el-form-item>\r\n            \r\n            <!--  -->\r\n            <el-form-item v-if=\"connectionStatus\" class=\"connection-status-form-item\">\r\n              <div class=\"connection-status-container\">\r\n                <span class=\"form-item-label\"></span>\r\n                <el-tag \r\n                  :type=\"connectionStatus.success ? 'success' : 'danger'\"\r\n                  :icon=\"connectionStatus.success ? SuccessFilled : CircleCloseFilled\"\r\n                >\r\n                  {{ connectionStatus.message }}\r\n                </el-tag>\r\n              </div>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n      <!--  -->\r\n      <el-card class=\"setting-card\" id=\"feishu-settings\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"setting-section\">\r\n          <div class=\"api-description\">\r\n            <div class=\"custom-info-box\">\r\n              <div class=\"info-icon\">\r\n                <el-icon><InfoFilled /></el-icon>\r\n              </div>\r\n              <div class=\"info-content\">\r\n                <div class=\"info-text\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <el-form :model=\"feishuSettings\" label-width=\"0\">\r\n            <el-form-item class=\"feishu-form-item\">\r\n              <div class=\"alert-container\">\r\n                <span class=\"form-item-label\">APP ID</span>\r\n                <el-input\r\n                  v-model=\"feishuSettings.appId\"\r\n                  placeholder=\"cli_a9bfed9574f8dcd5\"\r\n                  @blur=\"handleFeishuAppIdBlur\"\r\n                  @keydown.enter.prevent\r\n                  class=\"alert-input\"\r\n                />\r\n              </div>\r\n            </el-form-item>\r\n            <el-form-item class=\"feishu-form-item\">\r\n              <div class=\"alert-container\">\r\n                <span class=\"form-item-label\">App Secret</span>\r\n                <el-input\r\n                  v-model=\"feishuSettings.appSecret\"\r\n                  type=\"password\"\r\n                  show-password\r\n                  placeholder=\"10\"\r\n                  @blur=\"handleFeishuSecretBlur\"\r\n                  @keydown.enter.prevent\r\n                  class=\"alert-input\"\r\n                />\r\n              </div>\r\n            </el-form-item>\r\n            <el-form-item class=\"feishu-form-item\">\r\n              <div class=\"alert-container\">\r\n                <span class=\"form-item-label\"></span>\r\n                <el-input\r\n                  v-model=\"feishuSettings.phone\"\r\n                  placeholder=\"\"\r\n                  maxlength=\"11\"\r\n                  @input=\"handleFeishuPhoneInput\"\r\n                  @blur=\"handleFeishuPhoneBlur\"\r\n                  @keydown.enter.prevent\r\n                  class=\"alert-input\"\r\n                >\r\n                  <template #prepend>+86</template>\r\n                </el-input>\r\n              </div>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n      <!--  -->\r\n      <el-card class=\"setting-card\" id=\"rest-time-settings\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span></span>\r\n          </div>\r\n        </template>\r\n        <div class=\"setting-section\">\r\n          <div class=\"api-description\">\r\n            <div class=\"custom-info-box\">\r\n              <div class=\"info-icon\">\r\n                <el-icon><InfoFilled /></el-icon>\r\n              </div>\r\n              <div class=\"info-content\">\r\n                <div class=\"info-text\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!--  -->\r\n          <div class=\"rest-time-display\">\r\n            <div class=\"current-setting\">\r\n              <div class=\"setting-indicator\"></div>\r\n              <span class=\"setting-label\"></span>\r\n              <span class=\"setting-value\">\r\n                {{ intervalToTime(restTimeSettings.startTime) }} - {{ intervalToTime(restTimeSettings.endTime) }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"timeline-container\">\r\n            <!--  -->\r\n            <div class=\"timeline-wrapper\" ref=\"timelineRef\">\r\n              <!--  -->\r\n              <div class=\"timeline-track\">\r\n                <!--  -->\r\n                <div class=\"enabled-range\"></div>\r\n                \r\n                <!--  -->\r\n                <template v-if=\"Array.isArray(disabledRange)\">\r\n                  <div \r\n                    v-for=\"(range, index) in disabledRange\" \r\n                    :key=\"index\"\r\n                    class=\"disabled-range\"\r\n                    :style=\"{\r\n                      left: `${range.start}%`,\r\n                      width: `${range.width}%`\r\n                    }\"\r\n                  />\r\n                </template>\r\n                <div \r\n                  v-else\r\n                  class=\"disabled-range\"\r\n                  :style=\"{\r\n                    left: `${disabledRange.start}%`,\r\n                    width: `${disabledRange.width}%`\r\n                  }\"\r\n                />\r\n\r\n                <!--  -->\r\n                <div\r\n                  class=\"time-control start-control\"\r\n                  :style=\"{ left: `${getPosition(restTimeSettings.startTime)}%` }\"\r\n                  @mousedown=\"(e: MouseEvent) => handleMouseDown('start', e)\"\r\n                >\r\n                  <!-- <div class=\"time-tooltip\">\r\n                    {{ intervalToTime(restTimeSettings.startTime) }}\r\n                  </div> -->\r\n                </div>\r\n\r\n                <!--  -->\r\n                <div\r\n                  class=\"time-control end-control\"\r\n                  :style=\"{ left: `${getPosition(restTimeSettings.endTime)}%` }\"\r\n                  @mousedown=\"(e: MouseEvent) => handleMouseDown('end', e)\"\r\n                >\r\n                  <!-- <div class=\"time-tooltip\">\r\n                    {{ intervalToTime(restTimeSettings.endTime) }}\r\n                  </div> -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  -->\r\n          <div class=\"time-inputs\">\r\n            <div class=\"time-input-group\">\r\n              <el-select\r\n                v-model=\"startTimeDisplay\"\r\n                @change=\"handleStartTimeChange\"\r\n                placeholder=\" \"\r\n                class=\"time-select\"\r\n              >\r\n                <el-option\r\n                  v-for=\"i in 96\"\r\n                  :key=\"i-1\"\r\n                  :value=\"intervalToTime(i-1)\"\r\n                  :label=\"intervalToTime(i-1)\"\r\n                />\r\n              </el-select>\r\n            </div>\r\n            <div class=\"time-input-group\">\r\n              <el-select\r\n                v-model=\"endTimeDisplay\"\r\n                @change=\"handleEndTimeChange\"\r\n                placeholder=\" \"\r\n                class=\"time-select\"\r\n              >\r\n                <el-option\r\n                  v-for=\"i in 96\"\r\n                  :key=\"i-1\"\r\n                  :value=\"intervalToTime(i-1)\"\r\n                  :label=\"intervalToTime(i-1)\"\r\n                />\r\n              </el-select>\r\n            </div>\r\n          </div>\r\n          <!--  -->\r\n          <div class=\"task-selection\">\r\n            <!-- <h4 class=\"selection-title\"></h4> -->\r\n            <div class=\"task-options\">\r\n              <label \r\n                v-for=\"task in taskOptions\" \r\n                :key=\"task.id\"\r\n                class=\"task-option\"\r\n              >\r\n                <input\r\n                  type=\"checkbox\"\r\n                  :checked=\"restTimeSettings.selectedTasks.includes(task.name)\"\r\n                  @change=\"handleTaskToggle(task.name)\"\r\n                  class=\"task-checkbox\"\r\n                />\r\n                <span class=\"task-icon\">{{ task.icon }}</span>\r\n                <span class=\"task-name\">{{ task.name }}</span>\r\n                <span \r\n                  v-if=\"restTimeSettings.selectedTasks.includes(task.name)\" \r\n                  class=\"applied-badge\"\r\n                >\r\n                  \r\n                </span>\r\n              </label>\r\n            </div>\r\n            <p class=\"task-description\">\r\n              \r\n            </p>\r\n          </div>\r\n          <!--  -->\r\n          <!-- <div class=\"quick-settings\">\r\n            <span class=\"quick-label\"></span>\r\n            <el-button \r\n              size=\"small\" \r\n              @click=\"setQuickTime(0, 32)\"\r\n              class=\"quick-btn\"\r\n            >\r\n               (00:00-08:00)\r\n            </el-button>\r\n            <el-button \r\n              size=\"small\" \r\n              @click=\"setQuickTime(48, 80)\"\r\n              class=\"quick-btn\"\r\n            >\r\n               (12:00-20:00)\r\n            </el-button>\r\n            <el-button \r\n              size=\"small\" \r\n              @click=\"setQuickTime(84, 28)\"\r\n              class=\"quick-btn\"\r\n            >\r\n               (21:00-07:00)\r\n            </el-button>\r\n          </div> -->\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n    </div>\r\n      <!--  -->\r\n      <el-dialog\r\n        v-model=\"testAgentDialogVisible\"\r\n        title=\"\"\r\n        width=\"60%\"\r\n        :close-on-click-modal=\"false\"\r\n      >\r\n        <el-form :model=\"testAgentForm\" label-width=\"100px\">\r\n          <el-form-item label=\"\">\r\n            <el-select v-model=\"testAgentForm.agentId\" placeholder=\"\">\r\n              <el-option\r\n                v-for=\"agent in cozeAgents\"\r\n                :key=\"agent.botId\"\r\n                :label=\"agent.name\"\r\n                :value=\"agent.botId\"\r\n              >\r\n                <div style=\"display: flex; align-items: center;\">\r\n                  <img \r\n                    :src=\"`/icon/${agent.platform || 'coze'}.${getPlatformIconExtension(agent.platform)}`\" \r\n                    :alt=\"agent.platform || 'coze'\" \r\n                    style=\"width: 20px; margin-right: 8px;\"\r\n                  />\r\n                  {{ agent.name }}\r\n                </div>\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n        <template #footer>\r\n          <span class=\"dialog-footer\">\r\n            <el-button @click=\"testAgentDialogVisible = false\"></el-button>\r\n            <el-button type=\"primary\" :loading=\"testing\" @click=\"testCozeAgent\"></el-button>\r\n          </span>\r\n        </template>\r\n      </el-dialog>\r\n\r\n      <!--  -->\r\n      <el-dialog\r\n        v-model=\"clearCacheDialogVisible\"\r\n        title=\"Coze\"\r\n        width=\"500px\"\r\n        :before-close=\"handleClearCacheDialogClose\"\r\n      >\r\n        <div class=\"clear-cache-content\">\r\n           <el-alert\r\n             type=\"warning\"\r\n             show-icon\r\n             :closable=\"false\"\r\n             class=\"cache-warning-banner\"\r\n           >\r\n             <span class=\"cache-warning-text\">\r\n               CozeCozeCozeCoze\r\n             </span>\r\n           </el-alert>\r\n         </div>\r\n        <template #footer>\r\n          <span class=\"dialog-footer\">\r\n            <el-button @click=\"clearCacheDialogVisible = false\"></el-button>\r\n            <el-button type=\"primary\" :loading=\"clearingCache\" @click=\"clearCozeCache\"></el-button>\r\n          </span>\r\n        </template>\r\n      </el-dialog>\r\n  </template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { ref, onMounted,onUnmounted,onBeforeMount,nextTick,computed, provide  } from 'vue'\r\n  import { QuestionFilled,Connection, SuccessFilled, CircleCloseFilled } from '@element-plus/icons-vue'\r\n  import { ElMessage,ElMessageBox } from 'element-plus'\r\n  import CozeAgentConfig from '@/components/settings/CozeAgentConfig.vue'\r\n  import { testExternalApiConnection } from '@/api/external-api'\r\n  import type { CozeAgent } from '@/types/coze'\r\n  import { useRouter } from 'vue-router'\r\n  import { saveConfig, getConfig } from '@/api/config'\r\n  import { testAgent } from '@/api/coze'\r\n  import GreetingConfig from '@/components/settings/GreetingConfig.vue'\r\n  import { debounce } from 'lodash'\r\n  // \r\n  defineOptions({\r\n    name: 'SettingsPage'\r\n  })\r\n  const difySettings = ref({\r\n    baseUrl: ''\r\n  })\r\n  const testAgentDialogVisible = ref(false)\r\n    const testAgentForm = ref({\r\n      agentId: ''\r\n  })\r\n  // \r\n  const clearCacheDialogVisible = ref(false)\r\n  const clearingCache = ref(false)\r\n  // \r\n  const phraseInputVisible = ref(false)\r\n  const phraseInputValue = ref('')\r\n  const phraseInputRef = ref<HTMLInputElement | null>(null)\r\n  const showTestAgentDialog = () => {\r\n  if (!cozeAgents.value?.length) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  // \r\n  const defaultAgent = cozeAgents.value.find(agent => agent.isDefault)\r\n    if (defaultAgent) {\r\n      testAgentForm.value.agentId = defaultAgent.botId\r\n    } else {\r\n      testAgentForm.value.agentId = cozeAgents.value[0].botId\r\n    }\r\n    \r\n    testAgentDialogVisible.value = true\r\n  }\r\n  // API\r\n  const externalApiSettings = ref({\r\n    identifier: ''\r\n  })\r\n  const testingConnection = ref(false)\r\n  const connectionStatus = ref<{success: boolean, message: string} | null>(null)\r\n  //  Dify \r\n  const autoSaveDifySettings = debounce(async () => {\r\n    try {\r\n      await saveConfig('dify_settings', difySettings.value)\r\n      ElMessage.success('Dify')\r\n    } catch (error) {\r\n      console.error('Dify:', error)\r\n      ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n    }\r\n  }, 500)\r\n  //  Coze \r\n  const autoSaveCozeSettings = debounce(async () => {\r\n    try {\r\n      // \r\n      cozeSettings.value.tokenLastUpdated = new Date().toISOString()\r\n      await saveConfig('coze_settings', \r\n      {\r\n        \"coze_settings\": {\r\n          \"token\": cozeSettings.value.token,\r\n          \"tokenLastUpdated\": cozeSettings.value.tokenLastUpdated,\r\n      }})\r\n      ElMessage.success('Coze')\r\n    } catch (error) {\r\n      console.error('Coze:', error)\r\n      ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n    }\r\n  }, 500)\r\n  // \r\n  const navItems = [\r\n  { id: 'ai-settings', name: 'AI' },\r\n  { id: 'agent-settings', name: '' },\r\n  { id: 'moment-settings', name: '' },\r\n  { id: 'greeting-settings', name: '' },\r\n  { id: 'chat-history-settings', name: 'AI' } ,\r\n  { id: 'external-api-settings', name: 'API' },\r\n  { id: 'feishu-settings', name: '' },\r\n  { id: 'rest-time-settings', name: '' }\r\n]\r\n\r\n//  ID \r\nconst formatId = (id: string) => {\r\n  if (!id || id.length <= 10) return id;\r\n  return `${id.substring(0, 5)}******${id.substring(id.length - 5)}`;\r\n}\r\nconst isNarrowScreen = ref(window.innerWidth <= 650)\r\nconst activeSection = ref('ai-settings')\r\nconst contentRef = ref<HTMLElement | null>(null)\r\nconst isScrollingProgrammatically = ref(false) // \r\n// \r\nconst scrollToSection = (sectionId: string) => {\r\n  isScrollingProgrammatically.value = true // \r\n  activeSection.value = sectionId\r\n  const element = document.getElementById(sectionId)\r\n  if (element) {\r\n    const offset = 20 // \r\n    const elementPosition = element.getBoundingClientRect().top + window.pageYOffset\r\n    const offsetPosition = elementPosition - offset\r\n    \r\n    contentRef.value?.scrollTo({\r\n      top: offsetPosition,\r\n      behavior: 'smooth'\r\n    })\r\n    \r\n    // \r\n    setTimeout(() => {\r\n      isScrollingProgrammatically.value = false\r\n    }, 800) // \r\n  } else {\r\n    isScrollingProgrammatically.value = false\r\n  }\r\n}\r\n// \r\nconst handleResize = () => {\r\n  isNarrowScreen.value = window.innerWidth <= 650\r\n}\r\n// \r\nconst handleScroll = () => {\r\n  if (!contentRef.value || isScrollingProgrammatically.value) return // \r\n  \r\n  const sections = navItems.map(item => ({\r\n    id: item.id,\r\n    element: document.getElementById(item.id)\r\n  }))\r\n  // \r\n  const viewportHeight = window.innerHeight\r\n  \r\n  // \r\n  let currentSection = sections[0]\r\n  let minDistance = Infinity\r\n  \r\n  sections.forEach(section => {\r\n    if (!section.element) return\r\n    const rect = section.element.getBoundingClientRect()\r\n    // \r\n    const distance = Math.abs(rect.top)\r\n    \r\n    // \r\n    if (rect.top <= viewportHeight / 3 && distance < minDistance) {\r\n      minDistance = distance\r\n      currentSection = section\r\n    }\r\n  })\r\n  \r\n  if (currentSection) {\r\n    activeSection.value = currentSection.id\r\n  }\r\n}\r\n  // \r\n  interface CozeSettings {\r\n    token: string\r\n    tokenLastUpdated?: string\r\n  }\r\n  interface RestTimeSettings {\r\n    startTime: number\r\n    endTime: number\r\n    selectedTasks: string[]\r\n  }\r\n  // \r\n  type PlatformType = 'DeepSeek' | '' | '';\r\n\r\n  interface ModelSettings {\r\n    platform: PlatformType;\r\n    platformConfigs: {\r\n      [key in PlatformType]: PlatformConfig;\r\n    };\r\n  }\r\n  interface ChatHistorySettings {\r\n    autoSave: boolean\r\n    includeContext: boolean\r\n    contextCount : number\r\n    includeUserInfo: boolean\r\n    // \r\n    messageMerge: {\r\n      mode: 'none' | 'context' | 'concat'  // \r\n      interval: number  // ()\r\n    }\r\n    // \r\n    transferConfig: {\r\n      phrases: string[]\r\n      notifyWechat: string\r\n    }\r\n  }\r\n\r\n  // \r\n  interface MomentSettings {\r\n    agentId: string\r\n    commentLimit: number\r\n    perFriendLimit: number\r\n    autoLike: boolean\r\n    interactionMode: string\r\n    prompt: string\r\n    blacklist: string\r\n  }\r\n  interface PlatformConfig {\r\n    baseUrl: string;\r\n    apiKey: string;\r\n    modelName: string;\r\n  }\r\n  const feishuSettings = ref({\r\n    appId: '',\r\n    appSecret: '',\r\n    phone: ''\r\n  })\r\n  // Token\r\n  const initialCozeToken = ref<string>('');\r\n  const initialCozeTokenLastUpdated = ref<string | undefined>(undefined);\r\n  // \r\n  const momentSettings = ref<MomentSettings>({\r\n    agentId: '',\r\n    commentLimit: 100,\r\n    perFriendLimit: 2,\r\n    autoLike: false,\r\n    interactionMode: 'like_and_comment',\r\n    blacklist: '', \r\n    prompt: ``\r\n  })\r\n  // \r\n  const chatHistorySettings = ref<ChatHistorySettings>({\r\n    autoSave: false,\r\n    includeContext: false,\r\n    contextCount:5,\r\n    includeUserInfo: false,\r\n    // \r\n    messageMerge: {\r\n      mode: 'none',\r\n      interval: 5\r\n    },\r\n    // \r\n    transferConfig: {\r\n      phrases: [],\r\n      notifyWechat: \"\"\r\n    }\r\n  })\r\n  // \r\n  const router = useRouter()\r\n  const testing = ref(false)\r\n  // \r\n  router.beforeEach(async (to, from, next) => {\r\n    if (to.name === 'settings') {\r\n      await loadSettings()\r\n    }\r\n    next()\r\n  })\r\n  const saveFeishuSettings = async () => {\r\n    try {\r\n      const result = await saveConfig('feishu_settings', { feishu_settings: feishuSettings.value })\r\n      if (result.success) {\r\n        ElMessage.success('')\r\n      } else {\r\n        throw new Error('')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  const handleFeishuAppIdBlur = async () => {\r\n    const val = (feishuSettings.value.appId || '').trim()\r\n    if (!val.startsWith('cli_')) {\r\n      ElMessage.warning('APP ID  cli_ ')\r\n      return\r\n    }\r\n    await saveFeishuSettings()\r\n  }\r\n  const handleFeishuSecretBlur = async () => {\r\n    const val = (feishuSettings.value.appSecret || '').trim()\r\n    if (val.length <= 10) {\r\n      ElMessage.warning('App Secret  10')\r\n      return\r\n    }\r\n    await saveFeishuSettings()\r\n  }\r\n  const handleFeishuPhoneInput = () => {\r\n    feishuSettings.value.phone = (feishuSettings.value.phone || '').replace(/\\D/g, '').slice(0, 11)\r\n  }\r\n  const handleFeishuPhoneBlur = async () => {\r\n    const val = (feishuSettings.value.phone || '').trim()\r\n    if (!/^\\d{11}$/.test(val)) {\r\n      ElMessage.warning(' 11 ')\r\n      return\r\n    }\r\n    await saveFeishuSettings()\r\n  }\r\n  // \r\n  const addPhraseItem = () => {\r\n    if (chatHistorySettings.value.transferConfig.phrases.length < 3) {\r\n      phraseInputVisible.value = true\r\n      nextTick(() => {\r\n        phraseInputRef.value?.focus()\r\n      })\r\n    }\r\n  }\r\n  // \r\n  const confirmPhrase = () => {\r\n    if (phraseInputValue.value.trim()) {\r\n      if (!chatHistorySettings.value.transferConfig.phrases.includes(phraseInputValue.value.trim())) {\r\n        chatHistorySettings.value.transferConfig.phrases.push(phraseInputValue.value.trim())\r\n        saveChatHistorySettings()\r\n      }\r\n    }\r\n    phraseInputVisible.value = false\r\n    phraseInputValue.value = ''\r\n  }\r\n  // \r\n  const removePhraseItem = (index: number) => {\r\n    chatHistorySettings.value.transferConfig.phrases.splice(index, 1)\r\n    saveChatHistorySettings()\r\n  }\r\n  // \r\n  const testCozeAgent = async () => {\r\n    if (!testAgentForm.value.agentId) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    // \r\n    const selectedAgent = cozeAgents.value.find(agent => agent.botId === testAgentForm.value.agentId)\r\n    if (!selectedAgent) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    // \r\n    if (selectedAgent.platform === 'coze' && !cozeSettings.value.token) {\r\n      ElMessage.warning(' Coze Token')\r\n      return\r\n    }\r\n    \r\n    testing.value = true\r\n    try {\r\n      // \r\n      const result = await testAgent(selectedAgent.botId, selectedAgent.platform || 'coze')\r\n      \r\n      if (result.success) {\r\n        ElMessage.success('')\r\n        testAgentDialogVisible.value = false\r\n      } else {\r\n        ElMessage.error(result.error || '')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error(error instanceof Error ? error.message : '')\r\n    } finally {\r\n      testing.value = false\r\n    }\r\n  }\r\nconst saveMomentSettings = async () => {\r\n  try {\r\n    const result = await saveConfig('moment_settings', { moment_settings: momentSettings.value })\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n    } else {\r\n      throw new Error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n  // \r\n  const setDefaultAgent = async (agent: CozeAgent) => {\r\n  try {\r\n    // \r\n    const updatedAgents = cozeAgents.value.map(a => ({\r\n      ...a,\r\n      isDefault: a.botId === agent.botId ? true : false //  isDefault  false\r\n    }))\r\n    \r\n    const result = await saveConfig('agents', { agents: updatedAgents })\r\n    if (result.success) {\r\n      cozeAgents.value = updatedAgents\r\n      ElMessage.success('')\r\n    } else {\r\n      throw new Error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\nconst restTimeSettings = ref<RestTimeSettings>({\r\n  startTime: 0, // 0:00 (in 15-min intervals from 0:00)\r\n  endTime: 28, // 7:00\r\n  selectedTasks: ['', ''] // \r\n})\r\n\r\nconst isDragging = ref<string | null>(null)\r\nconst timelineRef = ref<HTMLElement | null>(null)\r\nconst startTimeDisplay = ref('')\r\nconst endTimeDisplay = ref('')\r\n\r\n// \r\nconst taskOptions = [\r\n  { id: 'moment_comment', name: '', icon: '' },\r\n  { id: 'add_friend', name: '', icon: '' },\r\n  { id: 'accept_friend', name: '', icon: '' }\r\n]\r\n\r\n// 9615 (24 * 4)\r\nconst totalIntervals = 96\r\n\r\n// \r\nconst intervalToTime = (interval: number): string => {\r\n  const hours = Math.floor(interval / 4)\r\n  const minutes = (interval % 4) * 15\r\n  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`\r\n}\r\n\r\n// \r\nconst timeToInterval = (timeStr: string): number => {\r\n  const [hours, minutes] = timeStr.split(':').map(Number)\r\n  return hours * 4 + minutes / 15\r\n}\r\n\r\n// \r\nconst getPosition = (interval: number): number => {\r\n  return (interval / (totalIntervals - 1)) * 100\r\n}\r\n\r\n// \r\nconst disabledRange = computed(() => {\r\n  const start = restTimeSettings.value.startTime\r\n  const end = restTimeSettings.value.endTime\r\n  \r\n  if (start <= end) {\r\n    return {\r\n      start: getPosition(start),\r\n      width: getPosition(end) - getPosition(start)\r\n    }\r\n  } else {\r\n    // \r\n    return [\r\n      { start: 0, width: getPosition(end) },\r\n      { start: getPosition(start), width: 100 - getPosition(start) }\r\n    ]\r\n  }\r\n})\r\n\r\n// \r\nconst handleTaskToggle = (taskName: string) => {\r\n  const tasks = restTimeSettings.value.selectedTasks\r\n  if (tasks.includes(taskName)) {\r\n    restTimeSettings.value.selectedTasks = tasks.filter(t => t !== taskName)\r\n  } else {\r\n    restTimeSettings.value.selectedTasks = [...tasks, taskName]\r\n  }\r\n  saveRestTimeSettings()\r\n}\r\n\r\n// \r\nconst handleMouseDown = (type: string, e: MouseEvent) => {\r\n  e.preventDefault()\r\n  isDragging.value = type\r\n}\r\n\r\nconst handleMouseMove = (e: MouseEvent) => {\r\n  if (!isDragging.value || !timelineRef.value) return\r\n\r\n  const rect = timelineRef.value.getBoundingClientRect()\r\n  const x = Math.max(0, Math.min(e.clientX - rect.left, rect.width))\r\n  const interval = Math.round((x / rect.width) * (totalIntervals - 1))\r\n\r\n  if (isDragging.value === 'start') {\r\n    restTimeSettings.value.startTime = interval\r\n    startTimeDisplay.value = intervalToTime(interval)\r\n  } else if (isDragging.value === 'end') {\r\n    restTimeSettings.value.endTime = interval\r\n    endTimeDisplay.value = intervalToTime(interval)\r\n  }\r\n  saveRestTimeSettings()\r\n}\r\n\r\nconst handleMouseUp = () => {\r\n  isDragging.value = null\r\n}\r\n\r\n// \r\nconst handleStartTimeChange = (timeStr: string) => {\r\n  restTimeSettings.value.startTime = timeToInterval(timeStr)\r\n  saveRestTimeSettings()\r\n}\r\n\r\nconst handleEndTimeChange = (timeStr: string) => {\r\n  restTimeSettings.value.endTime = timeToInterval(timeStr)\r\n  saveRestTimeSettings()\r\n}\r\n\r\n// \r\nconst setQuickTime = (start: number, end: number) => {\r\n  restTimeSettings.value.startTime = start\r\n  restTimeSettings.value.endTime = end\r\n  startTimeDisplay.value = intervalToTime(start)\r\n  endTimeDisplay.value = intervalToTime(end)\r\n  saveRestTimeSettings()\r\n}\r\n\r\n// \r\nconst saveRestTimeSettings = async () => {\r\n  try {\r\n    const result = await saveConfig('rest_time_settings', {\r\n      rest_time_settings: restTimeSettings.value\r\n    })\r\n    if (result.success) {\r\n      console.log('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst formatIdentifierDisplay = (value: string) => {\r\n  if (!value || value.length <= 8) return value\r\n  return value.substring(0, 4) + '*'.repeat(value.length - 8) + value.substring(value.length - 4)\r\n}\r\n\r\n// \r\nconst parseIdentifierInput = (value: string) => {\r\n  return value\r\n}\r\n\r\n//  - \r\nconst handleIdentifierChange = debounce(async (value: string) => {\r\n  // \r\n  const trimmedValue = value.trim()\r\n  externalApiSettings.value.identifier = trimmedValue\r\n  \r\n  // \r\n  try {\r\n    await saveConfig('external_api_settings', {\r\n      identifier: trimmedValue\r\n    })\r\n    connectionStatus.value = null // \r\n    \r\n    // \r\n    if (!trimmedValue) {\r\n      ElMessage.info('API')\r\n    }\r\n  } catch (error) {\r\n    console.error('API:', error)\r\n    ElMessage.error('')\r\n  }\r\n}, 1000)\r\n// API\r\nconst testApiConnection = async () => {\r\n  if (!externalApiSettings.value.identifier) return\r\n  \r\n  testingConnection.value = true\r\n  connectionStatus.value = null\r\n  \r\n  try {\r\n    const result = await testExternalApiConnection(externalApiSettings.value.identifier)\r\n    \r\n    connectionStatus.value = {\r\n      success: result.success,\r\n      message: result.message\r\n    }\r\n    \r\n    if (result.success) {\r\n      ElMessage.success('API')\r\n    } else {\r\n      ElMessage.error(`: ${result.message}`)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    connectionStatus.value = {\r\n      success: false,\r\n      message: ''\r\n    }\r\n    ElMessage.error('')\r\n  } finally {\r\n    testingConnection.value = false\r\n  }\r\n}\r\n// \r\nconst saveChatHistorySettings = async () => {\r\n  try {\r\n    const result = await saveConfig('chat_history_settings', { \r\n      chat_history_settings: chatHistorySettings.value \r\n    })\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n    } else {\r\n      throw new Error('')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n\r\nconst deleteAgent = async (agent: CozeAgent) => {\r\n  if (agent.isDefault) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  \r\n  try {\r\n    await ElMessageBox.confirm('', '', {\r\n      confirmButtonText: '',\r\n      cancelButtonText: '',\r\n      type: 'warning'\r\n    })\r\n    \r\n    const updatedAgents = cozeAgents.value.filter(a => a.botId !== agent.botId)\r\n    const result = await saveConfig('agents', { agents: updatedAgents })\r\n    \r\n    if (result.success) {\r\n      cozeAgents.value = updatedAgents\r\n      ElMessage.success('')\r\n    } else {\r\n      throw new Error('')\r\n    }\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n}\r\n  \r\n  // \r\n  const cozeSettings = ref<CozeSettings>({\r\n    token: '',\r\n    tokenLastUpdated: undefined\r\n  })\r\n  \r\n  const modelSettings = ref<ModelSettings>({\r\n  platform: 'DeepSeek',\r\n  platformConfigs: {\r\n    'DeepSeek': { baseUrl: '', apiKey: '', modelName: '' },\r\n    '': { baseUrl: '', apiKey: '', modelName: '' },\r\n    '': { baseUrl: '', apiKey: '', modelName: '' }\r\n  }\r\n})\r\n\r\n  const agentConfigVisible = ref(false)\r\n  const cozeAgents = ref<CozeAgent[]>([])\r\n\r\n  // \r\n  const showAgentConfig = () => {\r\n    agentConfigVisible.value = true\r\n  }\r\n  \r\n// \r\nconst loadSettings = async () => {\r\n  try {\r\n    console.debug('...')\r\n    const [agentsResult, cozeResult, modelResult,momentResult, greetingResult,chatHistoryResult,feishuConfig,difyResult,apiResult] = await Promise.all([\r\n      getConfig('agents'),\r\n      getConfig('coze_settings'),\r\n      getConfig('model_settings'),\r\n      getConfig('moment_settings'),\r\n      getConfig('greeting_config'),\r\n      getConfig('chat_history_settings'),\r\n      getConfig('feishu_settings'),\r\n      getConfig('dify_settings'),\r\n      getConfig('external_api_settings')\r\n    ])\r\n    //  Dify \r\n    if (difyResult?.success && difyResult?.data) {\r\n          difySettings.value = {\r\n            baseUrl: difyResult.data.baseUrl\r\n          }\r\n        }\r\n    /// \r\n    if (agentsResult.success && agentsResult.data) {\r\n      const agents = Array.isArray(agentsResult.data) ? agentsResult.data : \r\n                    Array.isArray(agentsResult.data.agents) ? agentsResult.data.agents : []\r\n      \r\n      // \r\n      const uniqueAgents = new Map()\r\n      agents.forEach((agent: { \r\n        name?: string, \r\n        botId?: string, \r\n        isDefault?: boolean,\r\n        id?: string ,\r\n        platform?: string\r\n      }) => {\r\n        if (agent.botId && !uniqueAgents.has(agent.botId)) {\r\n          uniqueAgents.set(agent.botId, {\r\n            name: agent.name || '',\r\n            botId: agent.botId,\r\n            isDefault: Boolean(agent.isDefault),\r\n            id: agent.id,\r\n            platform: agent.platform || 'coze'\r\n          })\r\n        }\r\n      })\r\n      \r\n      cozeAgents.value = Array.from(uniqueAgents.values())\r\n        .filter((agent: CozeAgent) => agent.name && agent.botId)\r\n      \r\n      // \r\n      const defaultAgents = cozeAgents.value.filter(agent => agent.isDefault)\r\n      if (defaultAgents.length > 1) {\r\n        // \r\n        cozeAgents.value = cozeAgents.value.map((agent, index) => ({\r\n          ...agent,\r\n          isDefault: defaultAgents[0].botId === agent.botId\r\n        }))\r\n      } else if (cozeAgents.value.length > 0 && !cozeAgents.value.some(agent => agent.isDefault)) {\r\n        // \r\n        cozeAgents.value[0].isDefault = true\r\n      }\r\n    }\r\n\r\n    //  Coze \r\n    if (cozeResult?.success && cozeResult?.data?.coze_settings) {\r\n      cozeSettings.value = {\r\n        token: cozeResult.data.coze_settings.token || '',\r\n        tokenLastUpdated: cozeResult.data.coze_settings.tokenLastUpdated // \r\n      };\r\n      initialCozeToken.value = cozeSettings.value.token;\r\n      initialCozeTokenLastUpdated.value = cozeSettings.value.tokenLastUpdated;\r\n    }\r\n\r\n    if (apiResult?.success && apiResult?.data?.identifier) {\r\n      externalApiSettings.value.identifier = apiResult.data.identifier\r\n    }\r\n    // \r\n    if (modelResult.success && modelResult.data) {\r\n      const savedSettings = modelResult.data.model_settings || {}\r\n      \r\n      // \r\n      if (savedSettings.platformConfigs) {\r\n        modelSettings.value = {\r\n          platform: savedSettings.platform || 'DeepSeek',\r\n          platformConfigs: {\r\n            'DeepSeek': { baseUrl: '', apiKey: '', modelName: '' },\r\n            '': { baseUrl: '', apiKey: '', modelName: '' },\r\n            '': { baseUrl: '', apiKey: '', modelName: '' },\r\n            ...savedSettings.platformConfigs\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n     // \r\n     if (momentResult.success && momentResult.data) {\r\n      momentSettings.value = {\r\n        ...momentSettings.value,\r\n        ...momentResult.data.moment_settings\r\n      }\r\n    }\r\n    // \r\n    if (greetingResult.success && greetingResult.data) {\r\n      // console.debug(\"\",greetingResult)\r\n      //  provide/inject  GreetingConfig \r\n      //  GreetingConfig \r\n      emitter.emit('updateGreetingConfig', greetingResult.data)\r\n    }\r\n     // \r\n     if (chatHistoryResult.success && chatHistoryResult.data) {\r\n      chatHistorySettings.value = {\r\n        ...chatHistorySettings.value,\r\n        ...chatHistoryResult.data.chat_history_settings\r\n      }\r\n    }\r\n\r\n    // \r\n    if (feishuConfig?.success && feishuConfig?.data?.feishu_settings) {\r\n      feishuSettings.value = {\r\n        appId: feishuConfig.data.feishu_settings.appId || '',\r\n        appSecret: feishuConfig.data.feishu_settings.appSecret || '',\r\n        phone: feishuConfig.data.feishu_settings.phone || ''\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n  onBeforeMount(() => {\r\n  loadSettings()\r\n})\r\nimport mitt from 'mitt'\r\nconst emitter = mitt()\r\n//  emitter \r\nprovide('emitter', emitter)\r\n// \r\nconst getPlatformIconExtension = (platform?: string) => {\r\n  if (platform === 'dify') return 'png'\r\n  if (platform === 'yuanqi') return 'png'\r\n  return 'svg'\r\n}\r\n\r\n// ID\r\nconst getPlatformIdLabel = (platform?: string) => {\r\n  if (platform === 'dify') return 'API '\r\n  return 'Bot ID'\r\n}\r\n// Token\r\nconst daysTokenBound = computed(() => {\r\n  if (cozeSettings.value.token && cozeSettings.value.tokenLastUpdated) {\r\n    const lastUpdated = new Date(cozeSettings.value.tokenLastUpdated);\r\n    const current = new Date();\r\n\r\n    // \r\n    const lastUpdatedStartOfDay = new Date(lastUpdated.getFullYear(), lastUpdated.getMonth(), lastUpdated.getDate());\r\n    const currentStartOfDay = new Date(current.getFullYear(), current.getMonth(), current.getDate());\r\n\r\n    const diffTime = currentStartOfDay.getTime() - lastUpdatedStartOfDay.getTime();\r\n    // \r\n    const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24)); \r\n\r\n    return diffDays + 1; //  \"x\"\r\n  }\r\n  return 0; // token0\r\n});\r\n\r\n// \r\nconst showClearCacheDialog = () => {\r\n  clearCacheDialogVisible.value = true\r\n}\r\n\r\nconst handleClearCacheDialogClose = () => {\r\n  clearCacheDialogVisible.value = false\r\n}\r\n\r\nconst clearCozeCache = async () => {\r\n  try {\r\n    clearingCache.value = true\r\n    \r\n    // API\r\n    const response = await fetch('/api/coze/clear-cache', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-API-Key': 'yoko_test'\r\n      }\r\n    })\r\n    \r\n    const result = await response.json()\r\n    \r\n    if (result.success) {\r\n      ElMessage.success('Coze')\r\n      clearCacheDialogVisible.value = false\r\n    } else {\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  } finally {\r\n    clearingCache.value = false\r\n  }\r\n}\r\n  // \r\n  onMounted(async () => {\r\n    try {\r\n      contentRef.value?.addEventListener('scroll', handleScroll)\r\n      await loadSettings()\r\n      await nextTick()\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n    handleResize()\r\n    window.addEventListener('resize', handleResize)\r\n    // \r\n    document.addEventListener('mousemove', handleMouseMove)\r\n    document.addEventListener('mouseup', handleMouseUp)\r\n    // \r\n    startTimeDisplay.value = intervalToTime(restTimeSettings.value.startTime)\r\n    endTimeDisplay.value = intervalToTime(restTimeSettings.value.endTime)\r\n    \r\n    // \r\n    try {\r\n      const restTimeResult = await getConfig('rest_time_settings')\r\n      if (restTimeResult.success && restTimeResult.data) {\r\n        restTimeSettings.value = {\r\n          ...restTimeSettings.value,\r\n          ...restTimeResult.data.rest_time_settings\r\n        }\r\n        startTimeDisplay.value = intervalToTime(restTimeSettings.value.startTime)\r\n        endTimeDisplay.value = intervalToTime(restTimeSettings.value.endTime)\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n    }\r\n  })\r\n    // \r\n  onUnmounted(() => {\r\n    contentRef.value?.removeEventListener('scroll', handleScroll)\r\n    window.removeEventListener('resize', handleResize)\r\n    document.removeEventListener('mousemove', handleMouseMove)\r\n    document.removeEventListener('mouseup', handleMouseUp)\r\n  })\r\n  \r\n  </script>\r\n  \r\n  <style scoped>\r\n  \r\n  .setting-card {\r\n  margin-bottom: 24px;\r\n}\r\n.setting-card :deep(.el-card__header) {\r\n  padding: 0;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n.setting-card:last-child {\r\n  margin-bottom: 0;\r\n}\r\n  /*  */\r\n.agents-list {\r\n  margin-bottom: 20px;\r\n}\r\n.agent-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px;\r\n  border-bottom: 1px solid #EBEEF5;\r\n}\r\n.agent-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n}\r\n.prompt-textarea :deep(.el-textarea__inner) {\r\n  font-size: 14px;\r\n  line-height: 1.6;\r\n  padding: 12px;\r\n}\r\n.el-select {\r\n  width: 100%;\r\n}\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n.card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background-color: #f5f7fa;\r\n  padding: 15px 20px;\r\n}\r\n\r\n.card-header span {\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  color: #303133;\r\n}\r\n.el-tabs {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-tab-pane {\r\n  padding: 20px 0;\r\n}\r\n.agent-name {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #303133;\r\n}\r\n.agent-item:last-child {\r\n  border-bottom: none;\r\n}\r\n.settings-page-container {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.settings-nav {\r\n  width: 200px;\r\n  min-width: 200px;\r\n  padding: 12px;\r\n  border-right: 1px solid #eee;\r\n  background: #fff;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n}\r\n\r\n.settings-nav::-webkit-scrollbar {\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\n\r\n.nav-title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-bottom: 16px;\r\n  color: #303133;\r\n}\r\n\r\n.nav-items {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.nav-item {\r\n  padding: 12px;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.nav-item:hover {\r\n  background: #f5f7fa;\r\n}\r\n\r\n.nav-item.active {\r\n  background: #ecf5ff;\r\n  color: #409eff;\r\n}\r\n.settings-page-container::-webkit-scrollbar {\r\n  width: 0;\r\n  height: 0;\r\n}\r\n.settings-title {\r\n  margin-bottom: 40px;\r\n}\r\n.settings-page-container::-webkit-scrollbar-thumb {\r\n  background-color: transparent;\r\n}\r\n.nav-hidden {\r\n  transform: translateX(-100%);\r\n}\r\n.settings-content {\r\n  flex: 1;\r\n  padding: 12px;\r\n  overflow-y: auto;\r\n  height: 100%;\r\n  transition: all 0.3s ease;\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n}\r\n.settings-content::-webkit-scrollbar {\r\n  width: 0;\r\n  height: 0;\r\n}\r\n/*  */\r\n.narrow-screen .settings-content {\r\n  padding: 10px;\r\n  width: 100%;\r\n}\r\n.narrow-screen .settings-nav {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 10;\r\n  background: #fff;\r\n  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);\r\n}\r\n.agent-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.agent-botid {\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n.agent-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n  .card-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  }\r\n  \r\n  .setting-section {\r\n    padding: 5px;\r\n  }\r\n  \r\n  .setting-section h3 {\r\n    margin-bottom: 20px;\r\n    color: #606266;\r\n  }\r\n\r\n  .setting-section h4 {\r\n    font-weight: 600;\r\n    font-size: 15px;\r\n    color: #303133;\r\n    margin-bottom: 16px;\r\n    background-color: #f5f7fa;\r\n    padding: 12px 16px;\r\n    margin: -5px -5px 5px -5px;\r\n    border-bottom: 1px solid #ebeef5;\r\n  }\r\n  \r\n  .actions {\r\n    text-align: right;\r\n    margin-top: 20px;\r\n  }\r\n  .tip-text {\r\n  font-size: 14px;\r\n  color: #909399;\r\n  margin-top: 4px;\r\n  margin-bottom: 4px;\r\n  margin-left: 15px;\r\n}\r\n.chat-history-form-item {\r\n  display: flex;\r\n  align-items: center; /*  */\r\n  width: 100%; /*  */\r\n}\r\n.setting-card .el-form-item {\r\n  margin-bottom: 18px; /*  */\r\n}\r\n.chat-history-form-item .el-switch {\r\n  margin-left: auto; /*  flex  */\r\n}\r\n.token-reminder {\r\n  color: red;\r\n  font-size: 12px;\r\n  margin-top: 5px;\r\n  line-height: 1.2; /*  */\r\n}\r\n.alert-form-item {\r\n  width: 100%;\r\n}\r\n\r\n.alert-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  width: 100%;\r\n}\r\n.alert-container .form-item-label {\r\n  flex-shrink: 0;\r\n  min-width: 80px;\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.alert-container .alert-input {\r\n  flex: 1;\r\n}\r\n.transfer-form-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch; /*  stretch  */\r\n  margin-bottom: 20px;\r\n  width: 100%;\r\n}\r\n.transfer-title {\r\n  width: 100%;\r\n}\r\n.transfer-title .form-item-label{\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.transfer-description {\r\n  margin: 8px 0 0;\r\n  font-size: 14px;\r\n  color: #909399;\r\n  line-height: 1.4;\r\n}\r\n\r\n.transfer-content {\r\n  width: 100%;\r\n}\r\n.config-section {\r\n  margin-bottom: 10px;\r\n  padding: 12px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n.config-section:last-child {\r\n  margin-bottom: 0;\r\n}\r\n.phrases-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center; /*  */\r\n  margin-bottom: 8px; /*  */\r\n}\r\n.section-header h3 {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  color: #303133;\r\n  line-height: 1.2;\r\n}\r\n.title-group {\r\n  flex: 1;\r\n}\r\n.title-group h3 {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  color: #303133;\r\n  line-height: 1.2;\r\n}\r\n.description {\r\n  margin: 0 0 16px; /*  */\r\n  font-size: 14px;\r\n  color: #909399;\r\n  line-height: 1.4;\r\n  width: 100%; /*  */\r\n}\r\n.form-item {\r\n  margin-top: 16px;\r\n}\r\n\r\n.phrases-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n.phrase-input {\r\n  width: 200px;\r\n  margin-right: 8px;\r\n  vertical-align: bottom;\r\n}\r\n\r\n.alert-form-item .form-item-label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.alert-form-item .alert-input {\r\n  width: 70%;\r\n}\r\n.form-item-content {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  flex: 1;\r\n  margin-left: 8px;\r\n}\r\n\r\n.context-count-input {\r\n  width: 120px;\r\n  margin-right: 8px;\r\n}\r\n.platform-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 16px;\r\n  justify-content: space-between;\r\n}\r\n\r\n.platform-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  object-fit: contain;\r\n}\r\n\r\n.clear-cache-btn {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  border-color: #d3d4d6;\r\n  margin-left: auto;\r\n}\r\n\r\n.clear-cache-btn:hover {\r\n  color: #606266;\r\n  border-color: #c0c4cc;\r\n}\r\n\r\n.clear-cache-content {\r\n   padding: 16px 0;\r\n }\r\n \r\n .cache-warning-banner {\r\n   margin-bottom: 0;\r\n }\r\n \r\n .cache-warning-text {\r\n   line-height: 1.6;\r\n   font-size: 14px;\r\n   color: #E6A23C;\r\n }\r\n.help-icon {\r\n  color: #909399;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  &:hover {\r\n    color: #409EFF;\r\n  }\r\n}\r\n.default-tag {\r\n  margin-right: 8px;\r\n  height: 22px;\r\n  line-height: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.full-width {\r\n  padding: 10px;\r\n  width: 100%;\r\n}\r\n/* api*/\r\n.external-api-form {\r\n  width: 100%;\r\n}\r\n\r\n.api-identifier-form-item {\r\n  width: 100%;\r\n}\r\n.api-identifier-form-item .el-form-item__content {\r\n  margin-left: 0 !important;\r\n}\r\n.api-identifier-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  width: 100%;\r\n}\r\n.api-identifier-container .form-item-label {\r\n  flex-shrink: 0;\r\n  min-width: 70px;\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n.api-identifier-input {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\n.api-identifier-input .el-input {\r\n  flex: 1;\r\n}\r\n\r\n.test-connection-btn {\r\n  min-width: 40px;\r\n  padding: 8px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.api-description {\r\n  margin-bottom: 16px;\r\n}\r\n.connection-status-form-item {\r\n  width: 100%;\r\n}\r\n\r\n.connection-status-form-item .el-form-item__content {\r\n  margin-left: 0 !important;\r\n}\r\n\r\n.connection-status-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  width: 100%;\r\n}\r\n\r\n.connection-status-container .form-item-label {\r\n  flex-shrink: 0;\r\n  min-width: 80px;\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n/*  */\r\n.custom-info-box {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 12px;\r\n  padding: 16px;\r\n  background-color: #f0f9ff;\r\n  border: 1px solid #b3d8ff;\r\n  border-radius: 6px;\r\n  color: #606266;\r\n}\r\n.merge-mode-select {\r\n  width: 150px;\r\n  margin-right: 8px;\r\n}\r\n\r\n.interval-input {\r\n  width: 120px;\r\n  margin-right: 8px;\r\n}\r\n.info-icon {\r\n  color: #409eff;\r\n  font-size: 16px;\r\n  margin-top: 2px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.info-content {\r\n  flex: 1;\r\n  text-align: left;\r\n}\r\n\r\n.info-title {\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n  color: #303133;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.info-text {\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n  color: #606266;\r\n}\r\n.rest-time-display {\r\n  margin: 16px 0;\r\n}\r\n\r\n.current-setting {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 12px 16px;\r\n  background: linear-gradient(to right, #e3f2fd, #f3e5f5);\r\n  border-radius: 8px;\r\n}\r\n\r\n.setting-indicator {\r\n  width: 12px;\r\n  height: 12px;\r\n  background-color: #f44336;\r\n  border-radius: 50%;\r\n}\r\n\r\n.setting-label {\r\n  font-size: 14px;\r\n  color: #666;\r\n}\r\n\r\n.setting-value {\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.timeline-container {\r\n  margin: 8px 0;\r\n}\r\n\r\n.timeline-wrapper {\r\n  position: relative;\r\n  margin: 12px 0;\r\n}\r\n\r\n.timeline-track {\r\n  position: relative;\r\n  height: 20px; /*  64px  20px */\r\n  background-color: #f5f5f5;\r\n  border-radius: 10px; /*  32px  10px */\r\n  cursor: pointer;\r\n}\r\n\r\n.enabled-range {\r\n  position: absolute;\r\n  inset: 0;\r\n  background: linear-gradient(to right, #4caf50, #66bb6a);\r\n  border-radius: 10px; /*  32px  10px */\r\n  opacity: 0.8;\r\n}\r\n\r\n.disabled-range {\r\n  position: absolute;\r\n  top: 0;\r\n  height: 100%;\r\n  background: linear-gradient(to right, #f44336, #ef5350);\r\n  border-radius: 10px; /*  32px  10px */\r\n}\r\n\r\n\r\n\r\n.time-control {\r\n  position: absolute;\r\n  top: 50%;\r\n  width: 16px; /*  24px  16px */\r\n  height: 16px; /*  24px  16px */\r\n  background-color: white;\r\n  border: 2px solid #f44336; /*  3px  2px */\r\n  border-radius: 50%;\r\n  cursor: grab;\r\n  transform: translate(-50%, -50%);\r\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15); /*  */\r\n  transition: transform 0.2s;\r\n  z-index: 10;\r\n}\r\n\r\n.time-control:hover {\r\n  transform: translate(-50%, -50%) scale(1.1);\r\n}\r\n\r\n.time-control:active {\r\n  cursor: grabbing;\r\n}\r\n\r\n/* .time-tooltip {\r\n  position: absolute;\r\n  top: -28px; \r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background-color: #333;\r\n  color: white;\r\n  font-size: 11px; \r\n  padding: 3px 6px; \r\n  border-radius: 3px; \r\n  white-space: nowrap;\r\n} */\r\n\r\n\r\n.task-selection {\r\n  margin: 16px 0; /*  24px  16px */\r\n}\r\n\r\n.selection-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.task-options {\r\n  display: grid;\r\n  gap: 12px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.task-option {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 12px;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.task-option:hover {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n.task-checkbox {\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-right: 12px;\r\n}\r\n\r\n.task-icon {\r\n  font-size: 20px;\r\n  margin-right: 12px;\r\n}\r\n\r\n.task-name {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #333;\r\n  flex: 1;\r\n}\r\n\r\n.applied-badge {\r\n  font-size: 12px;\r\n  color: #2196f3;\r\n  background-color: #e3f2fd;\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n}\r\n\r\n.task-description {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-top: 12px;\r\n}\r\n\r\n.time-inputs {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 24px;\r\n  margin: 24px 0;\r\n}\r\n\r\n.time-input-group {\r\n  background-color: #f9f9f9;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.time-select {\r\n  width: 100%;\r\n}\r\n\r\n.quick-settings {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin: 24px 0;\r\n}\r\n\r\n.quick-label {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.quick-btn {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n/*  */\r\n@media screen and (max-width: 650px) {\r\n  .settings-content {\r\n    padding: 10px;\r\n  }\r\n}\r\n  </style>\r\n","import script from \"./SettingsPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsPage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsPage.vue?vue&type=style&index=0&id=194f8cd9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-194f8cd9\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"ops-bar\" }\nconst _hoisted_2 = { class: \"filters\" }\nconst _hoisted_3 = { class: \"actions\" }\n\nimport { ref, watch, onMounted, onUnmounted, computed } from 'vue'\r\n  import { ElMessage, ElMessageBox } from 'element-plus'\r\n  import { getFriendList, deleteFriendFromList, exportFriendListPath, openLocalFolder, batchDeleteFriendFromList } from '@/api/autosop'\r\n  type MessageBoxAction = 'confirm' | 'cancel' | 'close'\r\n  interface FriendListItem {\r\n    wxid: string\r\n    remark: string\r\n    tags: string\r\n    status: string\r\n  }\r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'FriendListDialog',\n  props: {\n    visible: { type: Boolean }\n  },\n  emits: [\"update:visible\", \"refresh\"],\n  setup(__props: any, { emit: __emit }) {\n\r\n  const windowWidth = ref(window.innerWidth)\r\n  const props = __props\r\n  const handleResize = () => {\r\n    windowWidth.value = window.innerWidth\r\n  }\r\n  const emit = __emit\r\n  onMounted(() => {\r\n    window.addEventListener('resize', handleResize)\r\n  })\r\n  \r\n  onUnmounted(() => {\r\n    window.removeEventListener('resize', handleResize)\r\n  })\r\n  const dialogVisible = ref(props.visible)\r\n  const friendList = ref<FriendListItem[]>([])\r\n  const allFriendList = ref<FriendListItem[]>([])\r\n  const selectedStatus = ref('__ALL__')\r\n  const selectedTag = ref('__ALL__')\r\n  const tagOptions = computed(() => {\r\n    const set = new Set<string>()\r\n    allFriendList.value.forEach((row: any) => {\r\n      const t = String(row.tags || '').trim()\r\n      if (!t) return\r\n      t.split(',').map(s => s.trim()).filter(Boolean).forEach(tag => set.add(tag))\r\n    })\r\n    return Array.from(set)\r\n  })\r\n  const filteredFriendList = computed<FriendListItem[]>(() => {\r\n    let list: FriendListItem[] = allFriendList.value.slice()\r\n    if (selectedStatus.value !== '__ALL__') {\r\n      list = list.filter(row => String(row.status || '') === selectedStatus.value)\r\n    }\r\n    if (selectedTag.value !== '__ALL__') {\r\n      list = list.filter(row => {\r\n        const t = String(row.tags || '')\r\n        const tag = selectedTag.value\r\n        return t === tag || t.startsWith(`${tag},`) || t.includes(`,${tag},`) || t.endsWith(`,${tag}`)\r\n      })\r\n    }\r\n    return list\r\n  })\r\n  \r\n  watch(() => props.visible, (val) => {\r\n    dialogVisible.value = val\r\n    if (val) {\r\n      loadFriendList()\r\n    }\r\n  })\r\n  \r\n  watch(() => dialogVisible.value, (val) => {\r\n    emit('update:visible', val)\r\n  })\r\n  \r\n  const loadFriendList = async () => {\r\n    try {\r\n      const result = await getFriendList()\r\n      if (result.success) {\r\n        allFriendList.value = result.data || []\r\n        friendList.value = filteredFriendList.value\r\n      } else {\r\n        ElMessage.error('')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  const applyFilters = async () => {\r\n    friendList.value = filteredFriendList.value\r\n  }\r\n  \r\n  const handleDelete = async (wxid: string) => {\r\n    try {\r\n      const result = await deleteFriendFromList(wxid)\r\n      if (result.success) {\r\n        ElMessage.success('')\r\n        await loadFriendList()\r\n        emit('refresh')\r\n      } else {\r\n        ElMessage.error('')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  const handleBatchDelete = async () => {\r\n    if (filteredFriendList.value.length === 0) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    try {\r\n      await ElMessageBox.confirm('', '', { type: 'warning' })\r\n      const wxids = filteredFriendList.value.map((row: any) => String(row.wxid))\r\n      const res = await batchDeleteFriendFromList(wxids)\r\n      if (res && res.success) {\r\n        ElMessage.success('')\r\n        await loadFriendList()\r\n        emit('refresh')\r\n      } else {\r\n        ElMessage.error(res?.error || '')\r\n      }\r\n    } catch {\r\n    }\r\n  }\r\n  const handleExport = async () => {\r\n    try {\r\n      const status = selectedStatus.value === '__ALL__' ? '' : selectedStatus.value\r\n      const tag = selectedTag.value === '__ALL__' ? '' : selectedTag.value\r\n      const path = await exportFriendListPath(status, tag)\r\n      await ElMessageBox({\r\n        title: '',\r\n        message: `${path}`,\r\n        showCancelButton: true,\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        callback: async (action: MessageBoxAction) => {\r\n          if (action === 'confirm') {\r\n            const dirPath = path.replace(/\\\\\\\\/g, '\\\\').replace(/\\\\/g, '/')\r\n            const lastSlash = dirPath.lastIndexOf('/')\r\n            const folder = lastSlash > -1 ? dirPath.substring(0, lastSlash) : dirPath\r\n            await openLocalFolder(folder)\r\n          }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  \r\n  const getStatusType = (status: string) => {\r\n    const statusMap: Record<string, 'success' | 'warning' | 'info' | 'danger'> = {\r\n      'pending': 'info',\r\n      'added': 'success',\r\n      'failed': 'danger',\r\n      'unknown': 'warning',\r\n      'already': 'warning'\r\n    }\r\n    return statusMap[status] || 'info'\r\n  }\r\n  \r\n  const getStatusText = (status: string) => {\r\n    const statusMap: Record<string, string> = {\r\n      'pending': '',\r\n      'added': '',\r\n      'failed': '',\r\n      'unknown': '',\r\n      'already': ''\r\n    }\r\n    return statusMap[status] || status\r\n  }\r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((dialogVisible).value = $event)),\n    title: \"\",\n    width: windowWidth.value <= 700 ? '95%' : '600px'\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createVNode(_component_el_select, {\n            modelValue: selectedStatus.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedStatus).value = $event)),\n            placeholder: \"\",\n            size: \"small\",\n            class: \"filter-select\",\n            onChange: applyFilters\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_option, {\n                label: \"\",\n                value: \"__ALL__\"\n              }),\n              _createVNode(_component_el_option, {\n                label: \"\",\n                value: \"pending\"\n              }),\n              _createVNode(_component_el_option, {\n                label: \"\",\n                value: \"added\"\n              }),\n              _createVNode(_component_el_option, {\n                label: \"\",\n                value: \"failed\"\n              }),\n              _createVNode(_component_el_option, {\n                label: \"\",\n                value: \"unknown\"\n              }),\n              _createVNode(_component_el_option, {\n                label: \"\",\n                value: \"already\"\n              })\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"]),\n          _createVNode(_component_el_select, {\n            modelValue: selectedTag.value,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedTag).value = $event)),\n            placeholder: \"\",\n            size: \"small\",\n            class: \"filter-select\",\n            filterable: \"\",\n            onChange: applyFilters\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_option, {\n                label: \"\",\n                value: \"__ALL__\"\n              }),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(tagOptions.value, (tag) => {\n                return (_openBlock(), _createBlock(_component_el_option, {\n                  key: tag,\n                  label: tag,\n                  value: tag\n                }, null, 8, [\"label\", \"value\"]))\n              }), 128))\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ]),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            plain: \"\",\n            size: \"small\",\n            onClick: handleExport\n          }, {\n            default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            size: \"small\",\n            onClick: handleBatchDelete,\n            disabled: filteredFriendList.value.length === 0\n          }, {\n            default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }, 8, [\"disabled\"])\n        ])\n      ]),\n      _createVNode(_component_el_table, {\n        data: friendList.value,\n        style: {\"width\":\"100%\"}\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_table_column, {\n            prop: \"wxid\",\n            label: \"\",\n            width: \"120\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"remark\",\n            label: \"\",\n            width: \"120\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"tags\",\n            label: \"\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"status\",\n            label: \"\"\n          }, {\n            default: _withCtx(({ row }) => [\n              _createVNode(_component_el_tag, {\n                type: getStatusType(row.status)\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(getStatusText(row.status)), 1)\n                ]),\n                _: 2\n              }, 1032, [\"type\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_table_column, {\n            label: \"\",\n            width: \"100\"\n          }, {\n            default: _withCtx(({ row }) => [\n              _createVNode(_component_el_button, {\n                type: \"danger\",\n                size: \"small\",\n                onClick: ($event: any) => (handleDelete(row.wxid))\n              }, {\n                default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                  _createTextVNode(\"  \", -1)\n                ]))]),\n                _: 1\n              }, 8, [\"onClick\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"data\"])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\", \"width\"]))\n}\n}\n\n})","  <template>\r\n    <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      title=\"\"\r\n      :width=\"windowWidth <= 700 ? '95%' : '600px'\"\r\n    >\r\n      <div class=\"ops-bar\">\r\n        <div class=\"filters\">\r\n          <el-select v-model=\"selectedStatus\" placeholder=\"\" size=\"small\" class=\"filter-select\" @change=\"applyFilters\">\r\n            <el-option label=\"\" value=\"__ALL__\" />\r\n            <el-option label=\"\" value=\"pending\" />\r\n            <el-option label=\"\" value=\"added\" />\r\n            <el-option label=\"\" value=\"failed\" />\r\n            <el-option label=\"\" value=\"unknown\" />\r\n            <el-option label=\"\" value=\"already\" />\r\n          </el-select>\r\n          <el-select v-model=\"selectedTag\" placeholder=\"\" size=\"small\" class=\"filter-select\" filterable @change=\"applyFilters\">\r\n            <el-option label=\"\" value=\"__ALL__\" />\r\n            <el-option\r\n              v-for=\"tag in tagOptions\"\r\n              :key=\"tag\"\r\n              :label=\"tag\"\r\n              :value=\"tag\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n        <div class=\"actions\">\r\n          <el-button type=\"primary\" plain size=\"small\" @click=\"handleExport\"></el-button>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"handleBatchDelete\" :disabled=\"filteredFriendList.length === 0\"></el-button>\r\n        </div>\r\n      </div>\r\n      <el-table :data=\"friendList\" style=\"width: 100%\">\r\n        <el-table-column prop=\"wxid\" label=\"\" width=\"120\" />\r\n        <el-table-column prop=\"remark\" label=\"\" width=\"120\" />\r\n        <el-table-column prop=\"tags\" label=\"\" />\r\n        <el-table-column prop=\"status\" label=\"\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag :type=\"getStatusType(row.status)\">\r\n              {{ getStatusText(row.status) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"\" width=\"100\">\r\n          <template #default=\"{ row }\">\r\n            <el-button\r\n              type=\"danger\"\r\n              size=\"small\"\r\n              @click=\"handleDelete(row.wxid)\"\r\n            >\r\n              \r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-dialog>\r\n  </template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { ref, watch, onMounted, onUnmounted, computed } from 'vue'\r\n  import { ElMessage, ElMessageBox } from 'element-plus'\r\n  type MessageBoxAction = 'confirm' | 'cancel' | 'close'\r\n  import { getFriendList, deleteFriendFromList, exportFriendListPath, openLocalFolder, batchDeleteFriendFromList } from '@/api/autosop'\r\n  const windowWidth = ref(window.innerWidth)\r\n  const props = defineProps<{\r\n    visible: boolean\r\n  }>()\r\n  const handleResize = () => {\r\n    windowWidth.value = window.innerWidth\r\n  }\r\n  const emit = defineEmits<{\r\n    (e: 'update:visible', value: boolean): void\r\n    (e: 'refresh'): void\r\n  }>()\r\n  onMounted(() => {\r\n    window.addEventListener('resize', handleResize)\r\n  })\r\n  \r\n  onUnmounted(() => {\r\n    window.removeEventListener('resize', handleResize)\r\n  })\r\n  interface FriendListItem {\r\n    wxid: string\r\n    remark: string\r\n    tags: string\r\n    status: string\r\n  }\r\n  const dialogVisible = ref(props.visible)\r\n  const friendList = ref<FriendListItem[]>([])\r\n  const allFriendList = ref<FriendListItem[]>([])\r\n  const selectedStatus = ref('__ALL__')\r\n  const selectedTag = ref('__ALL__')\r\n  const tagOptions = computed(() => {\r\n    const set = new Set<string>()\r\n    allFriendList.value.forEach((row: any) => {\r\n      const t = String(row.tags || '').trim()\r\n      if (!t) return\r\n      t.split(',').map(s => s.trim()).filter(Boolean).forEach(tag => set.add(tag))\r\n    })\r\n    return Array.from(set)\r\n  })\r\n  const filteredFriendList = computed<FriendListItem[]>(() => {\r\n    let list: FriendListItem[] = allFriendList.value.slice()\r\n    if (selectedStatus.value !== '__ALL__') {\r\n      list = list.filter(row => String(row.status || '') === selectedStatus.value)\r\n    }\r\n    if (selectedTag.value !== '__ALL__') {\r\n      list = list.filter(row => {\r\n        const t = String(row.tags || '')\r\n        const tag = selectedTag.value\r\n        return t === tag || t.startsWith(`${tag},`) || t.includes(`,${tag},`) || t.endsWith(`,${tag}`)\r\n      })\r\n    }\r\n    return list\r\n  })\r\n  \r\n  watch(() => props.visible, (val) => {\r\n    dialogVisible.value = val\r\n    if (val) {\r\n      loadFriendList()\r\n    }\r\n  })\r\n  \r\n  watch(() => dialogVisible.value, (val) => {\r\n    emit('update:visible', val)\r\n  })\r\n  \r\n  const loadFriendList = async () => {\r\n    try {\r\n      const result = await getFriendList()\r\n      if (result.success) {\r\n        allFriendList.value = result.data || []\r\n        friendList.value = filteredFriendList.value\r\n      } else {\r\n        ElMessage.error('')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  const applyFilters = async () => {\r\n    friendList.value = filteredFriendList.value\r\n  }\r\n  \r\n  const handleDelete = async (wxid: string) => {\r\n    try {\r\n      const result = await deleteFriendFromList(wxid)\r\n      if (result.success) {\r\n        ElMessage.success('')\r\n        await loadFriendList()\r\n        emit('refresh')\r\n      } else {\r\n        ElMessage.error('')\r\n      }\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  const handleBatchDelete = async () => {\r\n    if (filteredFriendList.value.length === 0) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    try {\r\n      await ElMessageBox.confirm('', '', { type: 'warning' })\r\n      const wxids = filteredFriendList.value.map((row: any) => String(row.wxid))\r\n      const res = await batchDeleteFriendFromList(wxids)\r\n      if (res && res.success) {\r\n        ElMessage.success('')\r\n        await loadFriendList()\r\n        emit('refresh')\r\n      } else {\r\n        ElMessage.error(res?.error || '')\r\n      }\r\n    } catch {\r\n    }\r\n  }\r\n  const handleExport = async () => {\r\n    try {\r\n      const status = selectedStatus.value === '__ALL__' ? '' : selectedStatus.value\r\n      const tag = selectedTag.value === '__ALL__' ? '' : selectedTag.value\r\n      const path = await exportFriendListPath(status, tag)\r\n      await ElMessageBox({\r\n        title: '',\r\n        message: `${path}`,\r\n        showCancelButton: true,\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        callback: async (action: MessageBoxAction) => {\r\n          if (action === 'confirm') {\r\n            const dirPath = path.replace(/\\\\\\\\/g, '\\\\').replace(/\\\\/g, '/')\r\n            const lastSlash = dirPath.lastIndexOf('/')\r\n            const folder = lastSlash > -1 ? dirPath.substring(0, lastSlash) : dirPath\r\n            await openLocalFolder(folder)\r\n          }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n  \r\n  const getStatusType = (status: string) => {\r\n    const statusMap: Record<string, 'success' | 'warning' | 'info' | 'danger'> = {\r\n      'pending': 'info',\r\n      'added': 'success',\r\n      'failed': 'danger',\r\n      'unknown': 'warning',\r\n      'already': 'warning'\r\n    }\r\n    return statusMap[status] || 'info'\r\n  }\r\n  \r\n  const getStatusText = (status: string) => {\r\n    const statusMap: Record<string, string> = {\r\n      'pending': '',\r\n      'added': '',\r\n      'failed': '',\r\n      'unknown': '',\r\n      'already': ''\r\n    }\r\n    return statusMap[status] || status\r\n  }\r\n  </script>\r\n  <style scoped>\r\n  .ops-bar {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n  }\r\n  .filters {\r\n    display: flex;\r\n    gap: 8px;\r\n  }\r\n  .actions {\r\n    display: flex;\r\n    gap: 8px;\r\n  }\r\n  .filter-select {\r\n    min-width: 140px;\r\n  }\r\n  </style>","import script from \"./FriendListDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FriendListDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FriendListDialog.vue?vue&type=style&index=0&id=69ce074c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-69ce074c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"import-tip\" }\nconst _hoisted_2 = { class: \"tip-content\" }\nconst _hoisted_3 = { class: \"agent-import-tip\" }\nconst _hoisted_4 = { class: \"tip-content\" }\nconst _hoisted_5 = { class: \"agent-select-container\" }\nconst _hoisted_6 = { class: \"api-import-tip\" }\nconst _hoisted_7 = { class: \"tip-content\" }\nconst _hoisted_8 = { class: \"api-status-container\" }\nconst _hoisted_9 = { class: \"api-status-item\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"status-value configured\"\n}\nconst _hoisted_11 = {\n  key: 1,\n  class: \"status-value not-configured\"\n}\nconst _hoisted_12 = { class: \"dialog-footer\" }\n\nimport { ref, watch } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { InfoFilled } from '@element-plus/icons-vue'\r\nimport type { CozeAgent } from '@/types/coze'\r\nimport { getExternalApiSettings } from '@/api/external-api'\r\nimport { syncFriendListByApi } from '@/api/autosop'\r\n\r\nconst TEMPLATE_URL = 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/file/%E5%90%8D%E5%8D%95%E6%A8%A1%E6%9D%BF%20.xlsx'\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ImportFriendListDialog',\n  props: {\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  cozeAgents: {\r\n    type: Array as () => CozeAgent[],\r\n    default: () => []\r\n  }\r\n},\n  emits: ['update:visible', 'import', 'importByAgent', 'importByApi'],\n  setup(__props, { emit: __emit }) {\n\r\nconst props = __props\r\n\r\nconst emit = __emit\r\n\r\nconst dialogVisible = ref(false)\r\nconst uploading = ref(false)\r\nconst fileList = ref<File[]>([])\r\nconst importType = ref('excel')\r\nconst selectedAgentId = ref('')\r\nconst apiIdentifier = ref('')\r\n\r\nconst copyTemplateUrl = async () => {\r\n  try {\r\n    await navigator.clipboard.writeText(TEMPLATE_URL)\r\n    ElMessage.success('')\r\n  } catch (err) {\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// API\r\nconst formatApiIdentifier = (identifier: string) => {\r\n  if (identifier.length <= 8) return identifier\r\n  return identifier.substring(0, 4) + '****' + identifier.substring(identifier.length - 4)\r\n}\r\n\r\n// \r\nconst getButtonText = () => {\r\n  switch (importType.value) {\r\n    case 'api':\r\n      return ''\r\n    case 'agent':\r\n      return ''\r\n    default:\r\n      return ''\r\n  }\r\n}\r\n\r\n// API\r\nconst loadApiSettings = async () => {\r\n  try {\r\n    const settings = await getExternalApiSettings()\r\n    if (settings && settings.identifier) {\r\n      apiIdentifier.value = settings.identifier\r\n    } else {\r\n      apiIdentifier.value = ''\r\n    }\r\n  } catch (error) {\r\n    console.error('API:', error)\r\n    apiIdentifier.value = ''\r\n  }\r\n}\r\n\r\nwatch(() => props.visible, (val) => {\r\n  dialogVisible.value = val\r\n  if (val) {\r\n    // API\r\n    loadApiSettings()\r\n  }\r\n})\r\n\r\nwatch(() => dialogVisible.value, (val) => {\r\n  if (!val) {\r\n    emit('update:visible', false)\r\n  }\r\n})\r\n\r\n// \r\nwatch(() => props.cozeAgents, (agents) => {\r\n  if (agents && agents.length > 0 && !selectedAgentId.value) {\r\n    selectedAgentId.value = agents[0].botId\r\n  }\r\n}, { immediate: true })\r\n\r\nconst beforeUpload = (file: File) => {\r\n  const isExcel = file.type === 'application/vnd.ms-excel' || \r\n                  file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||\r\n                  file.name.endsWith('.csv')\r\n  if (!isExcel) {\r\n    ElMessage.error(' Excel/CSV !')\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nconst handleFileChange = (file: any) => {\r\n  fileList.value = [file.raw]\r\n}\r\n\r\nconst handleUpload = async () => {\r\n  if (importType.value === 'excel') {\r\n    if (fileList.value.length === 0) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    uploading.value = true\r\n    try {\r\n      emit('import', fileList.value[0])\r\n      dialogVisible.value = false\r\n    } catch (error) {\r\n      ElMessage.error('')\r\n    } finally {\r\n      uploading.value = false\r\n    }\r\n  } else if (importType.value === 'agent') {\r\n    if (!selectedAgentId.value) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    uploading.value = true\r\n    try {\r\n      emit('importByAgent', selectedAgentId.value)\r\n      dialogVisible.value = false\r\n    } catch (error) {\r\n      ElMessage.error('')\r\n    } finally {\r\n      uploading.value = false\r\n    }\r\n  } else if (importType.value === 'api') {\r\n    if (!apiIdentifier.value) {\r\n      ElMessage.warning('API')\r\n      return\r\n    }\r\n    \r\n    uploading.value = true\r\n    try {\r\n      const result = await syncFriendListByApi()\r\n      if (result.success) {\r\n        ElMessage.success(` ${result.count} `)\r\n        emit('importByApi', result)\r\n        dialogVisible.value = false\r\n      } else {\r\n        ElMessage.error('')\r\n      }\r\n    } catch (error) {\r\n      console.error('API:', error)\r\n      const errorMessage = error instanceof Error ? error.message : 'API'\r\n      // if (errorMessage.includes('') || errorMessage.includes('')) {\r\n      //   ElMessage.warning('API')\r\n      // } else {\r\n      ElMessage.error(errorMessage)\r\n      // }\r\n    } finally {\r\n      uploading.value = false\r\n    }\r\n  }\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_upload = _resolveComponent(\"el-upload\")!\n  const _component_el_tab_pane = _resolveComponent(\"el-tab-pane\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_tabs = _resolveComponent(\"el-tabs\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    title: \"/\",\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((dialogVisible).value = $event)),\n    width: \"500px\"\n  }, {\n    footer: _withCtx(() => [\n      _createElementVNode(\"span\", _hoisted_12, [\n        _createVNode(_component_el_button, {\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (dialogVisible.value = false))\n        }, {\n          default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n            _createTextVNode(\"\", -1)\n          ]))]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: handleUpload,\n          loading: uploading.value,\n          disabled: importType.value === 'api' && !apiIdentifier.value\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(getButtonText()), 1)\n          ]),\n          _: 1\n        }, 8, [\"loading\", \"disabled\"])\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_component_el_tabs, {\n        modelValue: importType.value,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((importType).value = $event))\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_tab_pane, {\n            label: \"Excel\",\n            name: \"excel\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                  _createVNode(_component_el_icon, { class: \"info-icon\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(InfoFilled))\n                    ]),\n                    _: 1\n                  }),\n                  _cache[5] || (_cache[5] = _createElementVNode(\"p\", null, \"\", -1)),\n                  _createVNode(_component_el_button, {\n                    type: \"primary\",\n                    link: \"\",\n                    onClick: copyTemplateUrl,\n                    class: \"template-btn\"\n                  }, {\n                    default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                      _createTextVNode(\"  \", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ])\n              ]),\n              _createVNode(_component_el_upload, {\n                class: \"upload-demo\",\n                action: '',\n                \"auto-upload\": false,\n                \"on-change\": handleFileChange,\n                \"before-upload\": beforeUpload,\n                accept: \".xlsx,.xls,.csv\"\n              }, {\n                trigger: _withCtx(() => [\n                  _createVNode(_component_el_button, { plain: \"\" }, {\n                    default: _withCtx(() => [...(_cache[6] || (_cache[6] = [\n                      _createTextVNode(\"\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                tip: _withCtx(() => [...(_cache[7] || (_cache[7] = [\n                  _createElementVNode(\"div\", { class: \"el-upload__tip\" }, \"  xlsxxlscsv  \", -1)\n                ]))]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_tab_pane, {\n            label: \"\",\n            name: \"agent\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_3, [\n                _createElementVNode(\"div\", _hoisted_4, [\n                  _createVNode(_component_el_icon, { class: \"info-icon\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(InfoFilled))\n                    ]),\n                    _: 1\n                  }),\n                  _cache[8] || (_cache[8] = _createElementVNode(\"p\", null, \"\", -1))\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_5, [\n                _createVNode(_component_el_form, { \"label-width\": \"0px\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_form_item, { class: \"agent-select-form-item\" }, {\n                      default: _withCtx(() => [\n                        _cache[9] || (_cache[9] = _createElementVNode(\"span\", { class: \"form-item-label\" }, \"\", -1)),\n                        _createVNode(_component_el_select, {\n                          modelValue: selectedAgentId.value,\n                          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedAgentId).value = $event)),\n                          placeholder: \"\",\n                          class: \"agent-select\"\n                        }, {\n                          default: _withCtx(() => [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.cozeAgents, (agent) => {\n                              return (_openBlock(), _createBlock(_component_el_option, {\n                                key: agent.botId,\n                                label: agent.name,\n                                value: agent.botId\n                              }, null, 8, [\"label\", \"value\"]))\n                            }), 128))\n                          ]),\n                          _: 1\n                        }, 8, [\"modelValue\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_tab_pane, {\n            label: \"API\",\n            name: \"api\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_6, [\n                _createElementVNode(\"div\", _hoisted_7, [\n                  _createVNode(_component_el_icon, { class: \"info-icon\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_unref(InfoFilled))\n                    ]),\n                    _: 1\n                  }),\n                  _cache[10] || (_cache[10] = _createElementVNode(\"p\", null, \"\", -1))\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_8, [\n                _createElementVNode(\"div\", _hoisted_9, [\n                  _cache[11] || (_cache[11] = _createElementVNode(\"span\", { class: \"status-label\" }, \"API\", -1)),\n                  (apiIdentifier.value)\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString(formatApiIdentifier(apiIdentifier.value)) + \" \", 1))\n                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"  \"))\n                ])\n              ])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    title=\"/\"\r\n    v-model=\"dialogVisible\"\r\n    width=\"500px\"\r\n  >\r\n    <!--  -->\r\n    <el-tabs v-model=\"importType\">\r\n      <el-tab-pane label=\"Excel\" name=\"excel\">\r\n        <div class=\"import-tip\">\r\n          <div class=\"tip-content\">\r\n            <el-icon class=\"info-icon\"><InfoFilled /></el-icon>\r\n            <p></p>\r\n            <el-button \r\n              type=\"primary\" \r\n              link \r\n              @click=\"copyTemplateUrl\"\r\n              class=\"template-btn\"\r\n            >\r\n              \r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      \r\n        <el-upload\r\n          class=\"upload-demo\"\r\n          :action=\"''\"\r\n          :auto-upload=\"false\"\r\n          :on-change=\"handleFileChange\"\r\n          :before-upload=\"beforeUpload\"\r\n          accept=\".xlsx,.xls,.csv\"\r\n        >\r\n          <template #trigger>\r\n            <el-button plain></el-button>\r\n          </template>\r\n          <template #tip>\r\n            <div class=\"el-upload__tip\">\r\n               xlsxxlscsv \r\n            </div>\r\n          </template>\r\n        </el-upload>\r\n      </el-tab-pane>\r\n      \r\n      <el-tab-pane label=\"\" name=\"agent\">\r\n        <div class=\"agent-import-tip\">\r\n          <div class=\"tip-content\">\r\n            <el-icon class=\"info-icon\"><InfoFilled /></el-icon>\r\n            <p></p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"agent-select-container\">\r\n          <el-form label-width=\"0px\">\r\n            <el-form-item class=\"agent-select-form-item\">\r\n              <span class=\"form-item-label\"></span>\r\n              <el-select \r\n                v-model=\"selectedAgentId\" \r\n                placeholder=\"\"\r\n                class=\"agent-select\"\r\n              >\r\n                <el-option\r\n                  v-for=\"agent in cozeAgents\"\r\n                  :key=\"agent.botId\"\r\n                  :label=\"agent.name\"\r\n                  :value=\"agent.botId\"\r\n                />\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-tab-pane>\r\n      \r\n      <el-tab-pane label=\"API\" name=\"api\">\r\n        <div class=\"api-import-tip\">\r\n          <div class=\"tip-content\">\r\n            <el-icon class=\"info-icon\"><InfoFilled /></el-icon>\r\n            <p></p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"api-status-container\">\r\n          <div class=\"api-status-item\">\r\n            <span class=\"status-label\">API</span>\r\n            <span v-if=\"apiIdentifier\" class=\"status-value configured\">\r\n              {{ formatApiIdentifier(apiIdentifier) }}\r\n            </span>\r\n            <span v-else class=\"status-value not-configured\">\r\n              \r\n            </span>\r\n          </div>\r\n        </div>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\"></el-button>\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"handleUpload\" \r\n          :loading=\"uploading\"\r\n          :disabled=\"importType === 'api' && !apiIdentifier\"\r\n        >\r\n          {{ getButtonText() }}\r\n        </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, watch } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { InfoFilled } from '@element-plus/icons-vue'\r\nimport type { CozeAgent } from '@/types/coze'\r\nimport { getExternalApiSettings } from '@/api/external-api'\r\nimport { syncFriendListByApi } from '@/api/autosop'\r\n\r\nconst TEMPLATE_URL = 'https://healthyeveryday.oss-cn-shanghai.aliyuncs.com/file/%E5%90%8D%E5%8D%95%E6%A8%A1%E6%9D%BF%20.xlsx'\r\n\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  cozeAgents: {\r\n    type: Array as () => CozeAgent[],\r\n    default: () => []\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['update:visible', 'import', 'importByAgent', 'importByApi'])\r\n\r\nconst dialogVisible = ref(false)\r\nconst uploading = ref(false)\r\nconst fileList = ref<File[]>([])\r\nconst importType = ref('excel')\r\nconst selectedAgentId = ref('')\r\nconst apiIdentifier = ref('')\r\n\r\nconst copyTemplateUrl = async () => {\r\n  try {\r\n    await navigator.clipboard.writeText(TEMPLATE_URL)\r\n    ElMessage.success('')\r\n  } catch (err) {\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// API\r\nconst formatApiIdentifier = (identifier: string) => {\r\n  if (identifier.length <= 8) return identifier\r\n  return identifier.substring(0, 4) + '****' + identifier.substring(identifier.length - 4)\r\n}\r\n\r\n// \r\nconst getButtonText = () => {\r\n  switch (importType.value) {\r\n    case 'api':\r\n      return ''\r\n    case 'agent':\r\n      return ''\r\n    default:\r\n      return ''\r\n  }\r\n}\r\n\r\n// API\r\nconst loadApiSettings = async () => {\r\n  try {\r\n    const settings = await getExternalApiSettings()\r\n    if (settings && settings.identifier) {\r\n      apiIdentifier.value = settings.identifier\r\n    } else {\r\n      apiIdentifier.value = ''\r\n    }\r\n  } catch (error) {\r\n    console.error('API:', error)\r\n    apiIdentifier.value = ''\r\n  }\r\n}\r\n\r\nwatch(() => props.visible, (val) => {\r\n  dialogVisible.value = val\r\n  if (val) {\r\n    // API\r\n    loadApiSettings()\r\n  }\r\n})\r\n\r\nwatch(() => dialogVisible.value, (val) => {\r\n  if (!val) {\r\n    emit('update:visible', false)\r\n  }\r\n})\r\n\r\n// \r\nwatch(() => props.cozeAgents, (agents) => {\r\n  if (agents && agents.length > 0 && !selectedAgentId.value) {\r\n    selectedAgentId.value = agents[0].botId\r\n  }\r\n}, { immediate: true })\r\n\r\nconst beforeUpload = (file: File) => {\r\n  const isExcel = file.type === 'application/vnd.ms-excel' || \r\n                  file.type === 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' ||\r\n                  file.name.endsWith('.csv')\r\n  if (!isExcel) {\r\n    ElMessage.error(' Excel/CSV !')\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nconst handleFileChange = (file: any) => {\r\n  fileList.value = [file.raw]\r\n}\r\n\r\nconst handleUpload = async () => {\r\n  if (importType.value === 'excel') {\r\n    if (fileList.value.length === 0) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    uploading.value = true\r\n    try {\r\n      emit('import', fileList.value[0])\r\n      dialogVisible.value = false\r\n    } catch (error) {\r\n      ElMessage.error('')\r\n    } finally {\r\n      uploading.value = false\r\n    }\r\n  } else if (importType.value === 'agent') {\r\n    if (!selectedAgentId.value) {\r\n      ElMessage.warning('')\r\n      return\r\n    }\r\n    \r\n    uploading.value = true\r\n    try {\r\n      emit('importByAgent', selectedAgentId.value)\r\n      dialogVisible.value = false\r\n    } catch (error) {\r\n      ElMessage.error('')\r\n    } finally {\r\n      uploading.value = false\r\n    }\r\n  } else if (importType.value === 'api') {\r\n    if (!apiIdentifier.value) {\r\n      ElMessage.warning('API')\r\n      return\r\n    }\r\n    \r\n    uploading.value = true\r\n    try {\r\n      const result = await syncFriendListByApi()\r\n      if (result.success) {\r\n        ElMessage.success(` ${result.count} `)\r\n        emit('importByApi', result)\r\n        dialogVisible.value = false\r\n      } else {\r\n        ElMessage.error('')\r\n      }\r\n    } catch (error) {\r\n      console.error('API:', error)\r\n      const errorMessage = error instanceof Error ? error.message : 'API'\r\n      // if (errorMessage.includes('') || errorMessage.includes('')) {\r\n      //   ElMessage.warning('API')\r\n      // } else {\r\n      ElMessage.error(errorMessage)\r\n      // }\r\n    } finally {\r\n      uploading.value = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.import-tip, .agent-import-tip, .api-import-tip {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.import-tip a {\r\n  color: var(--el-color-primary);\r\n  margin-left: 10px;\r\n}\r\n\r\n.upload-demo {\r\n  margin: 20px 0;\r\n}\r\n\r\n.tip-content {\r\n  background-color: var(--el-fill-color-light);\r\n  border-radius: 8px;\r\n  padding: 16px;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 8px;\r\n}\r\n\r\n.info-icon {\r\n  color: var(--el-color-primary);\r\n  font-size: 16px;\r\n  margin-top: 3px;\r\n}\r\n\r\n.tip-content p {\r\n  margin: 0;\r\n  flex: 1;\r\n  color: var(--el-text-color-regular);\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.template-btn {\r\n  padding: 0;\r\n  height: auto;\r\n  margin-left: 16px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.agent-select-container {\r\n  margin: 20px 0;\r\n}\r\n\r\n.api-status-container {\r\n  margin: 20px 0;\r\n  padding: 16px;\r\n  background-color: var(--el-fill-color-lighter);\r\n  border-radius: 8px;\r\n}\r\n\r\n.api-status-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.status-label {\r\n  font-size: 14px;\r\n  color: var(--el-text-color-regular);\r\n  font-weight: 500;\r\n}\r\n\r\n.status-value {\r\n  font-size: 14px;\r\n}\r\n\r\n.status-value.configured {\r\n  color: var(--el-color-success);\r\n  font-weight: 500;\r\n}\r\n\r\n.status-value.not-configured {\r\n  color: var(--el-color-danger);\r\n  font-weight: 500;\r\n}\r\n\r\n:deep(.el-select) {\r\n  width: 100%;\r\n}\r\n.agent-select-form-item {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n.agent-select-form-item .form-item-label {\r\n  flex-shrink: 0;\r\n  min-width: 70px;\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-right: 12px;\r\n  text-align: left;\r\n}\r\n.agent-select {\r\n  flex: 1;\r\n  max-width: 300px;\r\n}\r\n:deep(.agent-select-form-item .el-form-item__content) {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  margin: 0 !important;\r\n}\r\n.upload-demo :deep(.el-upload-list) {\r\n  margin-top: 10px;\r\n}\r\n</style>","import script from \"./ImportFriendListDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ImportFriendListDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ImportFriendListDialog.vue?vue&type=style&index=0&id=34f2ff2a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-34f2ff2a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\"\n\nconst _hoisted_1 = { class: \"mass-sending-panel\" }\nconst _hoisted_2 = { class: \"section-title\" }\nconst _hoisted_3 = { class: \"header-actions\" }\nconst _hoisted_4 = { class: \"task-list\" }\nconst _hoisted_5 = { class: \"task-info\" }\nconst _hoisted_6 = { class: \"task-row task-header\" }\nconst _hoisted_7 = { class: \"task-time\" }\nconst _hoisted_8 = { class: \"task-row task-tags\" }\nconst _hoisted_9 = { class: \"tag-list\" }\nconst _hoisted_10 = { class: \"task-row task-group\" }\nconst _hoisted_11 = { class: \"group-name\" }\nconst _hoisted_12 = {\n  key: 0,\n  class: \"task-row task-progress\"\n}\nconst _hoisted_13 = {\n  key: 1,\n  class: \"task-row task-actions\"\n}\n\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\nimport { Clock } from '@element-plus/icons-vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { createMassSendingTask, cancelMassSendingTask, getMassSendingTasks, cancelAllMassSendingTasks } from '@/api/autosop'\nimport CreateTaskDialog from '@/components/sop/CreateTaskDialog.vue'\n\n// Props\ninterface ActivateTask {\n  id: string\n  sendTime: string\n  tagId: string\n  selectedFriends?: string[]\n  tagName: string[]\n  greetingGroupId: string\n  greetingGroupName: string\n  contentType: string\n  agentId?: string\n  status: 'pending' | 'running' | 'scheduled' | 'paused' | 'completed' | 'failed' | 'cancelled'\n  progress?: number\n  total?: number\n  error?: string\n}\n\n// State\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MassSendingPanel',\n  props: {\n    greetingGroups: {},\n    currentInstanceNickname: {}\n  },\n  setup(__props: any) {\n\n\n\n// Types\nconst activateTasks = ref<ActivateTask[]>([])\nconst createTaskVisible = ref(false)\n\nconst pendingTaskCount = computed(() => {\n  return activateTasks.value.filter(task => task.status === 'pending' || task.status === 'scheduled').length\n})\n\n// Methods\nconst showCreateTaskDialog = () => {\n  createTaskVisible.value = true\n}\n\nconst formatTaskTime = (time: string) => {\n  try {\n    return new Date(time).toLocaleString('zh-CN', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    })\n  } catch (error) {\n    return ''\n  }\n}\n\nconst getTaskStatusType = (status: string): 'success' | 'warning' | 'info' | 'primary' | 'danger' => {\n  const statusMap: Record<string, 'success' | 'warning' | 'info' | 'primary' | 'danger'> = {\n    pending: 'info',\n    running: 'warning',\n    scheduled: 'info',\n    paused: 'info',\n    completed: 'success',\n    failed: 'danger',\n    cancelled: 'info'\n  }\n  return statusMap[status] || 'info'\n}\n\nconst getTaskStatusText = (status: string) => {\n  const statusMap: Record<string, string> = {\n    pending: '',\n    running: '',\n    scheduled: '',\n    paused: '',\n    completed: '',\n    failed: '',\n    cancelled: ''\n  }\n  return statusMap[status] || status\n}\n\nconst formatSelectedFriends = (friends: string[]) => {\n  if (!friends || friends.length === 0) return '';\n  \n  if (friends.length <= 2) {\n    return friends.join('');\n  }\n  \n  return `${friends[0]}${friends[1]}..${friends.length}`;\n}\n\nconst formatTasks = (tasks: any[]): ActivateTask[] => {\n  return tasks.map(task => {\n    const p = task?.params?.task_params || task?.params || {}\n    return {\n      id: task.task_id || task.id,\n      sendTime: task.next_run_time || task.schedule_time || task.sendTime || new Date().toISOString(),\n      tagId: p.tagIds || task.tagId || [],\n      tagName: p.tagIds || task.tagName || [],\n      selectedFriends: p.selectedFriends || task.selectedFriends || [],\n      greetingGroupId: p.greetingGroupId || task.greetingGroupId || '',\n      greetingGroupName: p.greetingGroupId || task.greetingGroupName || '',\n      contentType: p.contentType || task.contentType || 'greeting',\n      agentId: p.agentId || task.agentId || '',\n      status: task.status || 'pending',\n      progress: task.progress || 0,\n      total: task.total || 0,\n      error: task.error\n    }\n  });\n}\n\nconst loadMassSendingTasks = async () => {\n  try {\n    const result = await getMassSendingTasks()\n    if (result.success) {\n      console.debug(':', result?.data)\n      const { pending, running } = result.data || {}\n      //  pending  running  running\n      const runningTasks = formatTasks(running || [])\n      const pendingTasks = formatTasks(pending || [])\n      \n      // running \n      activateTasks.value = [...runningTasks, ...pendingTasks]\n    } else {\n      console.error(':', result.error)\n    }\n  } catch (error) {\n    console.error(':', error)\n  }\n}\n\nconst handleCreateTask = async (taskData: any) => {\n  try {\n    // contentType\n    const payload = {\n      ...taskData,\n      // agentIdpayload\n      ...(taskData.contentType === 'agent' ? { agentId: taskData.agentId } : {})\n    }\n    \n    const result = await createMassSendingTask(payload)\n    console.debug(\"\", result);\n    await loadMassSendingTasks();\n    ElMessage.success('')\n  } catch (error) {\n    console.error(':', error)\n    ElMessage.error('')\n  }\n}\n\nconst cancelTask = async (taskId: string) => {\n  try {\n    await cancelMassSendingTask(taskId)\n    // \n    await loadMassSendingTasks()\n    ElMessage.success('')\n  } catch (error) {\n    ElMessage.error('')\n  }\n}\n\nconst handleCancelAllTasks = async () => {\n  try {\n    await ElMessageBox.confirm(\n      '',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning',\n      }\n    )\n    \n    const result = await cancelAllMassSendingTasks()\n    if (result.success) {\n      ElMessage.success(result.message || '')\n      await loadMassSendingTasks()\n    } else {\n      ElMessage.error(result.error || '')\n    }\n  } catch (error) {\n    if (error !== 'cancel') {\n      console.error(':', error)\n      ElMessage.error('')\n    }\n  }\n}\n\n// WebSocket Listeners\nconst handleTaskStatusUpdate = (event: CustomEvent) => {\n  const taskUpdate = event.detail;\n  \n  // \n  if (taskUpdate.type === 'mass_sending_list_update') {\n    console.debug('...');\n    loadMassSendingTasks();\n    return;\n  }\n\n  // \n  if (taskUpdate.type === 'mass_sending') {\n     if (taskUpdate.status === 'running' && taskUpdate.task_id) {\n       // \n       const task = activateTasks.value.find(t => t.id === taskUpdate.task_id);\n       if (task) {\n         task.progress = taskUpdate.progress;\n         task.total = taskUpdate.total;\n         // \n         if (task.status !== 'running') {\n            task.status = 'running';\n         }\n       }\n     } else {\n       // \n       console.debug(`(${taskUpdate.status})...`);\n       loadMassSendingTasks();\n     }\n  }\n}\n\nonMounted(() => {\n  loadMassSendingTasks();\n  // \n  // window.addEventListener('massSendingTasks', handleMassSendingTasksUpdate as EventListener);\n  window.addEventListener('taskStatus', handleTaskStatusUpdate as EventListener);\n})\n\nonUnmounted(() => {\n  // window.removeEventListener('massSendingTasks', handleMassSendingTasksUpdate as EventListener);\n  window.removeEventListener('taskStatus', handleTaskStatusUpdate as EventListener);\n})\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[3] || (_cache[3] = _createElementVNode(\"span\", null, \"\", -1)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        (pendingTaskCount.value > 3)\n          ? (_openBlock(), _createBlock(_component_el_button, {\n              key: 0,\n              type: \"danger\",\n              link: \"\",\n              onClick: handleCancelAllTasks\n            }, {\n              default: _withCtx(() => [...(_cache[1] || (_cache[1] = [\n                _createTextVNode(\"  \", -1)\n              ]))]),\n              _: 1\n            }))\n          : _createCommentVNode(\"\", true),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          class: \"create-task-btn\",\n          onClick: showCreateTaskDialog\n        }, {\n          default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n            _createTextVNode(\"  \", -1)\n          ]))]),\n          _: 1\n        })\n      ])\n    ]),\n    _createVNode(_component_el_scrollbar, { height: \"calc(100vh - 100px)\" }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_4, [\n          (activateTasks.value.length === 0)\n            ? (_openBlock(), _createBlock(_component_el_empty, {\n                key: 0,\n                description: \"\"\n              }))\n            : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(activateTasks.value, (task) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  key: task.id,\n                  class: \"task-item\"\n                }, [\n                  _createElementVNode(\"div\", _hoisted_5, [\n                    _createElementVNode(\"div\", _hoisted_6, [\n                      _createElementVNode(\"span\", _hoisted_7, [\n                        _createVNode(_component_el_icon, null, {\n                          default: _withCtx(() => [\n                            _createVNode(_unref(Clock))\n                          ]),\n                          _: 1\n                        }),\n                        _createTextVNode(\" \" + _toDisplayString(formatTaskTime(task.sendTime)), 1)\n                      ]),\n                      _createVNode(_component_el_tag, {\n                        type: getTaskStatusType(task.status),\n                        size: \"small\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(getTaskStatusText(task.status)), 1)\n                        ]),\n                        _: 2\n                      }, 1032, [\"type\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                      _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"label\" }, \"\", -1)),\n                      _createElementVNode(\"div\", _hoisted_9, [\n                        (task.selectedFriends && task.selectedFriends.length)\n                          ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                              _createTextVNode(_toDisplayString(formatSelectedFriends(task.selectedFriends)), 1)\n                            ], 64))\n                          : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(task.tagName, (tagName) => {\n                              return (_openBlock(), _createBlock(_component_el_tag, {\n                                size: \"small\",\n                                key: tagName\n                              }, {\n                                default: _withCtx(() => [\n                                  _createTextVNode(_toDisplayString(tagName), 1)\n                                ]),\n                                _: 2\n                              }, 1024))\n                            }), 128))\n                      ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_10, [\n                      _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"label\" }, \"\", -1)),\n                      _createElementVNode(\"span\", _hoisted_11, _toDisplayString(task.contentType === 'agent' ? '' : ''), 1)\n                    ]),\n                    (task.status === 'running' || (task.progress && task.total))\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, \" : \" + _toDisplayString(task.progress || 0) + \"/\" + _toDisplayString(task.total || 0), 1))\n                      : _createCommentVNode(\"\", true),\n                    (task.status === 'pending' || task.status === 'scheduled')\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                          _createVNode(_component_el_button, {\n                            type: \"danger\",\n                            size: \"small\",\n                            onClick: _withModifiers(($event: any) => (cancelTask(task.id)), [\"stop\"])\n                          }, {\n                            default: _withCtx(() => [...(_cache[6] || (_cache[6] = [\n                              _createTextVNode(\"  \", -1)\n                            ]))]),\n                            _: 1\n                          }, 8, [\"onClick\"])\n                        ]))\n                      : _createCommentVNode(\"\", true)\n                  ])\n                ]))\n              }), 128))\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(CreateTaskDialog, {\n      visible: createTaskVisible.value,\n      \"onUpdate:visible\": _cache[0] || (_cache[0] = ($event: any) => ((createTaskVisible).value = $event)),\n      \"greeting-groups\": __props.greetingGroups,\n      \"wechat-nickname\": __props.currentInstanceNickname,\n      \"is-from-sop\": true,\n      onCreate: handleCreateTask\n    }, null, 8, [\"visible\", \"greeting-groups\", \"wechat-nickname\"])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"mass-sending-panel\">\n    <div class=\"section-title\">\n      <span></span>\n      <div class=\"header-actions\">\n        <el-button \n          v-if=\"pendingTaskCount > 3\"\n          type=\"danger\" \n          link\n          @click=\"handleCancelAllTasks\"\n        >\n          \n        </el-button>\n        <el-button type=\"primary\" class=\"create-task-btn\" @click=\"showCreateTaskDialog\">\n          \n        </el-button>\n      </div>\n    </div>\n    <el-scrollbar height=\"calc(100vh - 100px)\">\n      <!--  -->\n      <div class=\"task-list\">\n        <el-empty\n          v-if=\"activateTasks.length === 0\"\n          description=\"\"\n        />\n        <div v-else v-for=\"task in activateTasks\" :key=\"task.id\" class=\"task-item\">\n          <div class=\"task-info\">\n            <!--  -->\n            <div class=\"task-row task-header\">\n              <span class=\"task-time\">\n                <el-icon><Clock /></el-icon>\n                {{ formatTaskTime(task.sendTime) }}\n              </span>\n              <el-tag :type=\"getTaskStatusType(task.status)\" size=\"small\">\n                {{ getTaskStatusText(task.status) }}\n              </el-tag>\n            </div>\n            \n            <!--  -->\n            <div class=\"task-row task-tags\">\n              <span class=\"label\"></span>\n              <div class=\"tag-list\">\n                <template v-if=\"task.selectedFriends && task.selectedFriends.length\">\n                  {{ formatSelectedFriends(task.selectedFriends) }}\n                </template>\n                <template v-else>\n                  <el-tag size=\"small\" v-for=\"tagName in task.tagName\" :key=\"tagName\">\n                    {{ tagName }}\n                  </el-tag>\n                </template>\n              </div>\n            </div>\n            \n            <!--  -->\n            <div class=\"task-row task-group\">\n              <span class=\"label\"></span>\n              <span class=\"group-name\">{{ task.contentType === 'agent' ? '' : '' }}</span>\n            </div>\n            \n            <!--  -->\n            <div class=\"task-row task-progress\" v-if=\"task.status === 'running' || (task.progress && task.total)\">\n              : {{ task.progress || 0 }}/{{ task.total || 0 }}\n            </div>\n            \n            <!--  -->\n            <div class=\"task-row task-actions\" v-if=\"task.status === 'pending' || task.status === 'scheduled'\">\n              <el-button\n                type=\"danger\"\n                size=\"small\"\n                @click.stop=\"cancelTask(task.id)\"\n              >\n                \n              </el-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </el-scrollbar>\n\n    <CreateTaskDialog\n      v-model:visible=\"createTaskVisible\"\n      :greeting-groups=\"greetingGroups\"\n      :wechat-nickname=\"currentInstanceNickname\"\n      :is-from-sop=\"true\"\n      @create=\"handleCreateTask\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\nimport { Clock } from '@element-plus/icons-vue'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { createMassSendingTask, cancelMassSendingTask, getMassSendingTasks, cancelAllMassSendingTasks } from '@/api/autosop'\nimport CreateTaskDialog from '@/components/sop/CreateTaskDialog.vue'\n\n// Props\ndefineProps<{\n  greetingGroups: any[]\n  currentInstanceNickname: string\n}>()\n\n// Types\ninterface ActivateTask {\n  id: string\n  sendTime: string\n  tagId: string\n  selectedFriends?: string[]\n  tagName: string[]\n  greetingGroupId: string\n  greetingGroupName: string\n  contentType: string\n  agentId?: string\n  status: 'pending' | 'running' | 'scheduled' | 'paused' | 'completed' | 'failed' | 'cancelled'\n  progress?: number\n  total?: number\n  error?: string\n}\n\n// State\nconst activateTasks = ref<ActivateTask[]>([])\nconst createTaskVisible = ref(false)\n\nconst pendingTaskCount = computed(() => {\n  return activateTasks.value.filter(task => task.status === 'pending' || task.status === 'scheduled').length\n})\n\n// Methods\nconst showCreateTaskDialog = () => {\n  createTaskVisible.value = true\n}\n\nconst formatTaskTime = (time: string) => {\n  try {\n    return new Date(time).toLocaleString('zh-CN', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    })\n  } catch (error) {\n    return ''\n  }\n}\n\nconst getTaskStatusType = (status: string): 'success' | 'warning' | 'info' | 'primary' | 'danger' => {\n  const statusMap: Record<string, 'success' | 'warning' | 'info' | 'primary' | 'danger'> = {\n    pending: 'info',\n    running: 'warning',\n    scheduled: 'info',\n    paused: 'info',\n    completed: 'success',\n    failed: 'danger',\n    cancelled: 'info'\n  }\n  return statusMap[status] || 'info'\n}\n\nconst getTaskStatusText = (status: string) => {\n  const statusMap: Record<string, string> = {\n    pending: '',\n    running: '',\n    scheduled: '',\n    paused: '',\n    completed: '',\n    failed: '',\n    cancelled: ''\n  }\n  return statusMap[status] || status\n}\n\nconst formatSelectedFriends = (friends: string[]) => {\n  if (!friends || friends.length === 0) return '';\n  \n  if (friends.length <= 2) {\n    return friends.join('');\n  }\n  \n  return `${friends[0]}${friends[1]}..${friends.length}`;\n}\n\nconst formatTasks = (tasks: any[]): ActivateTask[] => {\n  return tasks.map(task => {\n    const p = task?.params?.task_params || task?.params || {}\n    return {\n      id: task.task_id || task.id,\n      sendTime: task.next_run_time || task.schedule_time || task.sendTime || new Date().toISOString(),\n      tagId: p.tagIds || task.tagId || [],\n      tagName: p.tagIds || task.tagName || [],\n      selectedFriends: p.selectedFriends || task.selectedFriends || [],\n      greetingGroupId: p.greetingGroupId || task.greetingGroupId || '',\n      greetingGroupName: p.greetingGroupId || task.greetingGroupName || '',\n      contentType: p.contentType || task.contentType || 'greeting',\n      agentId: p.agentId || task.agentId || '',\n      status: task.status || 'pending',\n      progress: task.progress || 0,\n      total: task.total || 0,\n      error: task.error\n    }\n  });\n}\n\nconst loadMassSendingTasks = async () => {\n  try {\n    const result = await getMassSendingTasks()\n    if (result.success) {\n      console.debug(':', result?.data)\n      const { pending, running } = result.data || {}\n      //  pending  running  running\n      const runningTasks = formatTasks(running || [])\n      const pendingTasks = formatTasks(pending || [])\n      \n      // running \n      activateTasks.value = [...runningTasks, ...pendingTasks]\n    } else {\n      console.error(':', result.error)\n    }\n  } catch (error) {\n    console.error(':', error)\n  }\n}\n\nconst handleCreateTask = async (taskData: any) => {\n  try {\n    // contentType\n    const payload = {\n      ...taskData,\n      // agentIdpayload\n      ...(taskData.contentType === 'agent' ? { agentId: taskData.agentId } : {})\n    }\n    \n    const result = await createMassSendingTask(payload)\n    console.debug(\"\", result);\n    await loadMassSendingTasks();\n    ElMessage.success('')\n  } catch (error) {\n    console.error(':', error)\n    ElMessage.error('')\n  }\n}\n\nconst cancelTask = async (taskId: string) => {\n  try {\n    await cancelMassSendingTask(taskId)\n    // \n    await loadMassSendingTasks()\n    ElMessage.success('')\n  } catch (error) {\n    ElMessage.error('')\n  }\n}\n\nconst handleCancelAllTasks = async () => {\n  try {\n    await ElMessageBox.confirm(\n      '',\n      '',\n      {\n        confirmButtonText: '',\n        cancelButtonText: '',\n        type: 'warning',\n      }\n    )\n    \n    const result = await cancelAllMassSendingTasks()\n    if (result.success) {\n      ElMessage.success(result.message || '')\n      await loadMassSendingTasks()\n    } else {\n      ElMessage.error(result.error || '')\n    }\n  } catch (error) {\n    if (error !== 'cancel') {\n      console.error(':', error)\n      ElMessage.error('')\n    }\n  }\n}\n\n// WebSocket Listeners\nconst handleTaskStatusUpdate = (event: CustomEvent) => {\n  const taskUpdate = event.detail;\n  \n  // \n  if (taskUpdate.type === 'mass_sending_list_update') {\n    console.debug('...');\n    loadMassSendingTasks();\n    return;\n  }\n\n  // \n  if (taskUpdate.type === 'mass_sending') {\n     if (taskUpdate.status === 'running' && taskUpdate.task_id) {\n       // \n       const task = activateTasks.value.find(t => t.id === taskUpdate.task_id);\n       if (task) {\n         task.progress = taskUpdate.progress;\n         task.total = taskUpdate.total;\n         // \n         if (task.status !== 'running') {\n            task.status = 'running';\n         }\n       }\n     } else {\n       // \n       console.debug(`(${taskUpdate.status})...`);\n       loadMassSendingTasks();\n     }\n  }\n}\n\nonMounted(() => {\n  loadMassSendingTasks();\n  // \n  // window.addEventListener('massSendingTasks', handleMassSendingTasksUpdate as EventListener);\n  window.addEventListener('taskStatus', handleTaskStatusUpdate as EventListener);\n})\n\nonUnmounted(() => {\n  // window.removeEventListener('massSendingTasks', handleMassSendingTasksUpdate as EventListener);\n  window.removeEventListener('taskStatus', handleTaskStatusUpdate as EventListener);\n})\n</script>\n\n<style scoped>\n.mass-sending-panel {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.section-title {\n  height: 48px;\n  line-height: 48px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 16px;\n  font-size: 16px;\n  font-weight: 600;\n  border-bottom: 1px solid #ebeef5;\n  color: #303133;\n}\n\n.header-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.task-list {\n  padding: 10px;\n}\n\n.task-item {\n  padding: 12px;\n  margin-bottom: 10px;\n  border-radius: 8px;\n  background: #f8f9fa;\n  border: 1px solid #e4e7ed;\n  transition: all 0.3s ease;\n}\n\n.task-item:hover {\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n}\n\n.task-info {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.task-row {\n  display: flex;\n  align-items: center;\n}\n\n.task-header {\n  justify-content: space-between;\n}\n\n.task-time {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  color: #606266;\n  font-size: 14px;\n}\n\n.task-tags, .task-group {\n  font-size: 14px;\n}\n\n.tag-list {\n  display: flex;\n  gap: 4px;\n  flex-wrap: wrap;\n}\n\n.label {\n  color: #909399;\n  min-width: 70px;\n  font-size: 14px;\n}\n\n.group-name {\n  color: #606266;\n}\n\n.task-progress {\n  color: #409EFF;\n  font-size: 14px;\n  margin-top: 4px;\n}\n\n.task-actions {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px solid #ebeef5;\n}\n\n.el-button {\n  margin-left: auto;\n}\n</style>\n","import script from \"./MassSendingPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MassSendingPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MassSendingPanel.vue?vue&type=style&index=0&id=1b1c8390&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1b1c8390\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, vShow as _vShow, withDirectives as _withDirectives, Transition as _Transition, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"auto-follow-task-list\" }\nconst _hoisted_2 = { class: \"section-title\" }\nconst _hoisted_3 = { class: \"task-count\" }\nconst _hoisted_4 = { class: \"title-buttons\" }\nconst _hoisted_5 = { class: \"filter-item\" }\nconst _hoisted_6 = { class: \"filter-item\" }\nconst _hoisted_7 = { class: \"task-list\" }\nconst _hoisted_8 = {\n  key: 0,\n  class: \"task-checkbox\"\n}\nconst _hoisted_9 = { class: \"task-info\" }\nconst _hoisted_10 = { class: \"task-row task-header\" }\nconst _hoisted_11 = { class: \"friend-info\" }\nconst _hoisted_12 = { class: \"friend-name\" }\nconst _hoisted_13 = { class: \"friend-wxid\" }\nconst _hoisted_14 = { class: \"task-row task-time\" }\nconst _hoisted_15 = { class: \"time\" }\nconst _hoisted_16 = { class: \"task-row task-next\" }\nconst _hoisted_17 = { class: \"time\" }\nconst _hoisted_18 = { class: \"task-row task-agent\" }\nconst _hoisted_19 = { class: \"agent-name\" }\nconst _hoisted_20 = { class: \"task-row task-stats\" }\nconst _hoisted_21 = { class: \"stats-text\" }\nconst _hoisted_22 = { class: \"stats-detail\" }\nconst _hoisted_23 = { class: \"batch-operations fixed\" }\nconst _hoisted_24 = { class: \"batch-left\" }\nconst _hoisted_25 = { class: \"select-all\" }\nconst _hoisted_26 = { class: \"selected-count\" }\nconst _hoisted_27 = { class: \"batch-right\" }\nconst _hoisted_28 = { class: \"dialog-item\" }\nconst _hoisted_29 = { class: \"dialog-footer\" }\n\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { getAutoFollowTasks, cancelAutoFollowTask } from '../api/autosop'\r\nimport { getConfig } from '@/api/config'\r\nimport { getAutoFollowTasksByStartDate, batchCancelAutoFollowTasks, batchUpdateAutoFollowAgent } from '@/api/contact'\r\n\r\ninterface AutoFollowTask {\r\n  task_info: {\r\n    task_id: string\r\n    task_type: string\r\n    created_at: string\r\n    updated_at: string\r\n  }\r\n  friend_info: {\r\n    wxid: string\r\n    name: string\r\n    account_id: string\r\n  }\r\n  execution_strategy: {\r\n    follow_scenario: string\r\n    follow_days: number\r\n    follow_frequency: string\r\n    time_range_start: string\r\n    time_range_end: string\r\n    start_date: string\r\n    end_date: string\r\n    max_executions: number\r\n  }\r\n  execution_stats: {\r\n    execution_count: number\r\n    last_execution_time: string\r\n    next_execution_day: number\r\n    total_success: number\r\n    total_failed: number\r\n  }\r\n  task_config: {\r\n    agent_id: string\r\n    ai_service_type: string\r\n  }\r\n  task_status: string\r\n  execution_history: any[]\r\n  schedule_info?: {\r\n    schedule_id: string\r\n    next_fire_time: string | null\r\n    is_paused: boolean\r\n  }\r\n  selected?: boolean // \r\n}\r\n\r\ninterface CozeAgent { name: string; botId: string; isDefault?: boolean }\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AutoFollowTaskList',\n  setup(__props, { expose: __expose }) {\n\r\nconst tasks = ref<AutoFollowTask[]>([])\r\nconst cancelingTasks = ref(new Set<string>())\r\nconst loading = ref(false)\r\n// \r\nconst cozeAgents = ref<CozeAgent[]>([])\r\n\r\n// \r\nconst isEditMode = ref(false)\r\nconst filterAgentId = ref<string>('')\r\nconst filterDate = ref('')\r\nconst filterPanel = ref<HTMLElement | null>(null)\r\nconst selectedCount = ref(0)\r\nconst isBatchCanceling = ref(false)\r\nconst isBatchModifyDialogVisible = ref(false)\r\nconst selectedAgentIdForModify = ref<string>('')\r\n\r\n// \r\nconst isAllSelected = computed({\r\n  get: () => {\r\n    return tasks.value.length > 0 && tasks.value.every(task => task.selected)\r\n  },\r\n  set: (value) => {\r\n    tasks.value.forEach(task => task.selected = value)\r\n    updateSelectedCount()\r\n  }\r\n})\r\n\r\n// \r\nconst toggleEditMode = () => {\r\n  isEditMode.value = !isEditMode.value\r\n  \r\n  // \r\n  if (!isEditMode.value) {\r\n    resetFilters()\r\n    resetSelection()\r\n  }\r\n}\r\n\r\n// \r\nconst resetFilters = () => {\r\n  filterAgentId.value = ''\r\n  filterDate.value = ''\r\n  loadTasks() // \r\n}\r\n\r\n// \r\nconst resetSelection = () => {\r\n  tasks.value.forEach(task => task.selected = false)\r\n  updateSelectedCount()\r\n}\r\n\r\n// \r\nconst updateSelectedCount = () => {\r\n  selectedCount.value = tasks.value.filter(task => task.selected).length\r\n}\r\n\r\n// \r\nconst applyFilter = async () => {\r\n  try {\r\n    loading.value = true\r\n    // \r\n    if (filterDate.value || filterAgentId.value) {\r\n      const result = await getAutoFollowTasksByStartDate(\r\n        filterDate.value || undefined,\r\n        filterAgentId.value || undefined\r\n      )\r\n      if (result && Array.isArray(result)) {\r\n        tasks.value = result.map((task: AutoFollowTask) => ({ ...task, selected: false }))\r\n      } else {\r\n        tasks.value = []\r\n      }\r\n    } else {\r\n      await loadTasks()\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n//  -> \r\nconst handleFilterChange = async () => {\r\n  await applyFilter()\r\n}\r\n\r\n// \r\nconst batchCancelTasks = async () => {\r\n  const selectedTasks = tasks.value.filter(task => task.selected)\r\n  if (selectedTasks.length === 0) return\r\n  \r\n  try {\r\n    await ElMessageBox.confirm(\r\n      ` ${selectedTasks.length} `,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning',\r\n      }\r\n    )\r\n    \r\n    isBatchCanceling.value = true\r\n    const taskIds = selectedTasks.map(task => task.task_info.task_id)\r\n    await batchCancelAutoFollowTasks(taskIds)\r\n    ElMessage.success('')\r\n    \r\n    // \r\n    await applyFilter()\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error(':', error)\r\n      ElMessage.error(error instanceof Error ? error.message : '')\r\n    }\r\n  } finally {\r\n    isBatchCanceling.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst batchModifyTasks = () => {\r\n  const selectedTasks = tasks.value.filter(task => task.selected)\r\n  if (selectedTasks.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  selectedAgentIdForModify.value = ''\r\n  isBatchModifyDialogVisible.value = true\r\n}\r\n\r\n// \r\nconst loadAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if ((result as any).success && (result as any).data) {\r\n      const agents = Array.isArray((result as any).data) ? (result as any).data :\r\n                    Array.isArray((result as any).data.agents) ? (result as any).data.agents : []\r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n//  agent_id \r\nconst getAgentName = (agentId?: string) => {\r\n  if (!agentId) return ''\r\n  const agent = cozeAgents.value.find(a => a.botId === agentId)\r\n  return agent?.name || ''\r\n}\r\n\r\n// \r\nconst loadTasks = async () => {\r\n  try {\r\n    loading.value = true\r\n    const result = await getAutoFollowTasks()\r\n    tasks.value = (result || []).map((task: AutoFollowTask) => ({ ...task, selected: false }))\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst handleCancelTask = async (task: AutoFollowTask) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      ` ${task.friend_info.name} `,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning',\r\n      }\r\n    )\r\n    \r\n    cancelingTasks.value.add(task.friend_info.wxid)\r\n    await cancelAutoFollowTask(task.task_info.task_id)\r\n    ElMessage.success('')\r\n    \r\n    // \r\n    await loadTasks()\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error(':', error)\r\n      ElMessage.error(error instanceof Error ? error.message : '')\r\n    }\r\n  } finally {\r\n    cancelingTasks.value.delete(task.friend_info.wxid)\r\n  }\r\n}\r\n\r\n// \r\nconst handleSettings = () => {\r\n  ElMessage.info('...')\r\n}\r\n\r\n// \r\nconst formatTime = (timeStr: string) => {\r\n  if (!timeStr) return '--'\r\n  try {\r\n    const date = new Date(timeStr)\r\n    const month = String(date.getMonth() + 1).padStart(2, '0')\r\n    const day = String(date.getDate()).padStart(2, '0')\r\n    const hours = String(date.getHours()).padStart(2, '0')\r\n    const minutes = String(date.getMinutes()).padStart(2, '0')\r\n    return `${month}${day} ${hours}:${minutes}`\r\n  } catch {\r\n    return '--'\r\n  }\r\n}\r\n\r\n// \r\nconst formatNextTime = (timeStr?: string | null) => {\r\n  if (!timeStr) return '...'\r\n  return formatTime(timeStr)\r\n}\r\n\r\nonMounted(() => {\r\n  loadAgents()\r\n  loadTasks()\r\n})\r\n\r\n// \r\n__expose({\r\n  refresh: loadTasks\r\n})\r\n\r\nconst confirmBatchModify = async () => {\r\n  if (!selectedAgentIdForModify.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  const selectedTasks = tasks.value.filter(task => task.selected)\r\n  if (selectedTasks.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  try {\r\n    loading.value = true\r\n    const taskIds = selectedTasks.map(task => task.task_info.task_id)\r\n    const result = await batchUpdateAutoFollowAgent(taskIds, selectedAgentIdForModify.value)\r\n    if (result && result.success) {\r\n      ElMessage.success('')\r\n    } else {\r\n      ElMessage.error(result?.error || '')\r\n    }\r\n    isBatchModifyDialogVisible.value = false\r\n    await applyFilter()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst closeBatchModifyDialog = () => {\r\n  isBatchModifyDialogVisible.value = false\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\")!\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"\", -1)),\n      _createElementVNode(\"span\", _hoisted_3, _toDisplayString(tasks.value.length) + \"\", 1),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_el_button, {\n          type: \"text\",\n          class: \"settings-btn\",\n          onClick: handleSettings\n        }, {\n          default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n            _createTextVNode(\"  \", -1)\n          ]))]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"text\",\n          class: _normalizeClass([\"edit-btn\", { 'active': isEditMode.value }]),\n          onClick: toggleEditMode\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(isEditMode.value ? '' : ''), 1)\n          ]),\n          _: 1\n        }, 8, [\"class\"])\n      ])\n    ]),\n    _createVNode(_Transition, { name: \"slide-fade\" }, {\n      default: _withCtx(() => [\n        _withDirectives(_createElementVNode(\"div\", {\n          class: \"filter-panel\",\n          ref_key: \"filterPanel\",\n          ref: filterPanel\n        }, [\n          _createElementVNode(\"div\", _hoisted_5, [\n            _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"filter-label\" }, \"\", -1)),\n            _createVNode(_component_el_select, {\n              modelValue: filterAgentId.value,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((filterAgentId).value = $event)),\n              placeholder: \"\",\n              onChange: handleFilterChange,\n              clearable: \"\",\n              style: {\"width\":\"160px\"}\n            }, {\n              default: _withCtx(() => [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cozeAgents.value, (agent) => {\n                  return (_openBlock(), _createBlock(_component_el_option, {\n                    key: agent.botId,\n                    label: agent.name,\n                    value: agent.botId\n                  }, null, 8, [\"label\", \"value\"]))\n                }), 128))\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_6, [\n            _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"filter-label\" }, \"\", -1)),\n            _createVNode(_component_el_date_picker, {\n              modelValue: filterDate.value,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((filterDate).value = $event)),\n              type: \"date\",\n              placeholder: \"\",\n              format: \"YYYY-MM-DD\",\n              \"value-format\": \"YYYY-MM-DD\",\n              onChange: handleFilterChange,\n              clearable: \"\",\n              style: {\"width\":\"160px\"}\n            }, null, 8, [\"modelValue\"])\n          ])\n        ], 512), [\n          [_vShow, isEditMode.value]\n        ])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_scrollbar, { height: \"calc(100vh - 100px)\" }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_7, [\n          (tasks.value.length === 0)\n            ? (_openBlock(), _createBlock(_component_el_empty, {\n                key: 0,\n                description: \"\",\n                \"image-size\": 80\n              }))\n            : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(tasks.value, (task) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  key: task.task_info.task_id,\n                  class: \"task-item\"\n                }, [\n                  (isEditMode.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                        _createVNode(_component_el_checkbox, {\n                          modelValue: task.selected,\n                          \"onUpdate:modelValue\": ($event: any) => ((task.selected) = $event),\n                          onChange: updateSelectedCount\n                        }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"])\n                      ]))\n                    : _createCommentVNode(\"\", true),\n                  _createElementVNode(\"div\", _hoisted_9, [\n                    _createElementVNode(\"div\", _hoisted_10, [\n                      _createElementVNode(\"div\", _hoisted_11, [\n                        _createElementVNode(\"span\", _hoisted_12, _toDisplayString(task.friend_info.name), 1),\n                        _createElementVNode(\"span\", _hoisted_13, _toDisplayString(task.friend_info.wxid), 1)\n                      ]),\n                      (!isEditMode.value)\n                        ? (_openBlock(), _createBlock(_component_el_button, {\n                            key: 0,\n                            type: \"danger\",\n                            size: \"small\",\n                            text: \"\",\n                            onClick: ($event: any) => (handleCancelTask(task)),\n                            loading: cancelingTasks.value.has(task.friend_info.wxid)\n                          }, {\n                            default: _withCtx(() => [...(_cache[9] || (_cache[9] = [\n                              _createTextVNode(\"  \", -1)\n                            ]))]),\n                            _: 1\n                          }, 8, [\"onClick\", \"loading\"]))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_14, [\n                      _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"label\" }, \"\", -1)),\n                      _createElementVNode(\"span\", _hoisted_15, _toDisplayString(formatTime(task.task_info.created_at)), 1)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_16, [\n                      _cache[11] || (_cache[11] = _createElementVNode(\"span\", { class: \"label\" }, \"\", -1)),\n                      _createElementVNode(\"span\", _hoisted_17, _toDisplayString(formatNextTime(task.schedule_info?.next_fire_time)), 1)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_18, [\n                      _cache[12] || (_cache[12] = _createElementVNode(\"span\", { class: \"label\" }, \"\", -1)),\n                      _createElementVNode(\"span\", _hoisted_19, _toDisplayString(getAgentName(task.task_config?.agent_id)), 1)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_20, [\n                      _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"label stats-label\" }, \"\", -1)),\n                      _createElementVNode(\"span\", _hoisted_21, [\n                        _createTextVNode(\" \" + _toDisplayString(task.execution_stats?.execution_count || 0) + \" \", 1),\n                        _createElementVNode(\"span\", _hoisted_22, \" \" + _toDisplayString(task.execution_stats?.total_success || 0) + \" \", 1)\n                      ])\n                    ])\n                  ])\n                ]))\n              }), 128))\n        ]),\n        _createVNode(_Transition, { name: \"slide-fade\" }, {\n          default: _withCtx(() => [\n            _withDirectives(_createElementVNode(\"div\", _hoisted_23, [\n              _createElementVNode(\"div\", _hoisted_24, [\n                _createElementVNode(\"div\", _hoisted_25, [\n                  _createVNode(_component_el_checkbox, {\n                    modelValue: isAllSelected.value,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((isAllSelected).value = $event))\n                  }, {\n                    default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                      _createTextVNode(\"  \", -1)\n                    ]))]),\n                    _: 1\n                  }, 8, [\"modelValue\"])\n                ]),\n                _createElementVNode(\"div\", _hoisted_26, \"\" + _toDisplayString(selectedCount.value) + \"\", 1)\n              ]),\n              _createElementVNode(\"div\", _hoisted_27, [\n                _createVNode(_component_el_button, {\n                  type: \"danger\",\n                  size: \"small\",\n                  onClick: batchCancelTasks,\n                  disabled: selectedCount.value === 0,\n                  loading: isBatchCanceling.value\n                }, {\n                  default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n                    _createTextVNode(\"  \", -1)\n                  ]))]),\n                  _: 1\n                }, 8, [\"disabled\", \"loading\"]),\n                _createVNode(_component_el_button, {\n                  type: \"primary\",\n                  size: \"small\",\n                  onClick: batchModifyTasks,\n                  disabled: selectedCount.value === 0\n                }, {\n                  default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n                    _createTextVNode(\"  \", -1)\n                  ]))]),\n                  _: 1\n                }, 8, [\"disabled\"])\n              ])\n            ], 512), [\n              [_vShow, isEditMode.value]\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_dialog, {\n      modelValue: isBatchModifyDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((isBatchModifyDialogVisible).value = $event)),\n      title: \"\",\n      width: \"480px\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_29, [\n          _createVNode(_component_el_button, { onClick: closeBatchModifyDialog }, {\n            default: _withCtx(() => [...(_cache[18] || (_cache[18] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            disabled: !selectedAgentIdForModify.value,\n            onClick: confirmBatchModify\n          }, {\n            default: _withCtx(() => [...(_cache[19] || (_cache[19] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }, 8, [\"disabled\"])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"dialog-subtitle\" }, \"\", -1)),\n        _createElementVNode(\"div\", _hoisted_28, [\n          _cache[17] || (_cache[17] = _createElementVNode(\"span\", { class: \"filter-label\" }, \"\", -1)),\n          _createVNode(_component_el_select, {\n            modelValue: selectedAgentIdForModify.value,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((selectedAgentIdForModify).value = $event)),\n            placeholder: \"\",\n            style: {\"width\":\"240px\"}\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cozeAgents.value, (agent) => {\n                return (_openBlock(), _createBlock(_component_el_option, {\n                  key: agent.botId,\n                  label: agent.name,\n                  value: agent.botId\n                }, null, 8, [\"label\", \"value\"]))\n              }), 128))\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"auto-follow-task-list\">\r\n    <div class=\"section-title\">\r\n      <span></span>\r\n      <span class=\"task-count\">{{ tasks.length }}</span>\r\n      <div class=\"title-buttons\">\r\n        <el-button type=\"text\" class=\"settings-btn\" @click=\"handleSettings\">\r\n          \r\n        </el-button>\r\n        <el-button \r\n          type=\"text\" \r\n          class=\"edit-btn\" \r\n          @click=\"toggleEditMode\"\r\n          :class=\"{ 'active': isEditMode }\"\r\n        >\r\n          {{ isEditMode ? '' : '' }}\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n    \r\n    <!--  -->\r\n    <transition name=\"slide-fade\">\r\n      <!--  -->\r\n      <div class=\"filter-panel\" v-show=\"isEditMode\" ref=\"filterPanel\">\r\n        <div class=\"filter-item\">\r\n          <span class=\"filter-label\"></span>\r\n          <el-select v-model=\"filterAgentId\" placeholder=\"\" @change=\"handleFilterChange\" clearable style=\"width: 160px\">\r\n            <el-option\r\n              v-for=\"agent in cozeAgents\"\r\n              :key=\"agent.botId\"\r\n              :label=\"agent.name\"\r\n              :value=\"agent.botId\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n        <div class=\"filter-item\">\r\n          <span class=\"filter-label\"></span>\r\n          <el-date-picker\r\n            v-model=\"filterDate\"\r\n            type=\"date\"\r\n            placeholder=\"\"\r\n            format=\"YYYY-MM-DD\"\r\n            value-format=\"YYYY-MM-DD\"\r\n            @change=\"handleFilterChange\"\r\n            clearable\r\n            style=\"width: 160px\"\r\n          />\r\n        </div>\r\n        <!--  filter-actions  -->\r\n      </div>\r\n    </transition>\r\n    \r\n    <el-scrollbar height=\"calc(100vh - 100px)\">\r\n      <div class=\"task-list\">\r\n        <el-empty\r\n          v-if=\"tasks.length === 0\"\r\n          description=\"\"\r\n          :image-size=\"80\"\r\n        />\r\n        <div v-else v-for=\"task in tasks\" :key=\"task.task_info.task_id\" class=\"task-item\">\r\n          <!--  -->\r\n          <div class=\"task-checkbox\" v-if=\"isEditMode\">\r\n            <el-checkbox \r\n              v-model=\"task.selected\" \r\n              @change=\"updateSelectedCount\"\r\n            />\r\n          </div>\r\n          <div class=\"task-info\">\r\n            <!--  -->\r\n            <div class=\"task-row task-header\">\r\n              <div class=\"friend-info\">\r\n                <span class=\"friend-name\">{{ task.friend_info.name }}</span>\r\n                <span class=\"friend-wxid\">{{ task.friend_info.wxid }}</span>\r\n              </div>\r\n              <el-button \r\n                type=\"danger\" \r\n                size=\"small\" \r\n                text \r\n                @click=\"handleCancelTask(task)\"\r\n                :loading=\"cancelingTasks.has(task.friend_info.wxid)\"\r\n                v-if=\"!isEditMode\"\r\n              >\r\n                \r\n              </el-button>\r\n            </div>\r\n            \r\n            <!--  -->\r\n            <div class=\"task-row task-time\">\r\n              <span class=\"label\"></span>\r\n              <span class=\"time\">{{ formatTime(task.task_info.created_at) }}</span>\r\n            </div>\r\n            \r\n            <!--  -->\r\n            <div class=\"task-row task-next\">\r\n              <span class=\"label\"></span>\r\n              <span class=\"time\">{{ formatNextTime(task.schedule_info?.next_fire_time) }}</span>\r\n            </div>\r\n\r\n            <!--  -->\r\n            <div class=\"task-row task-agent\">\r\n              <span class=\"label\"></span>\r\n              <span class=\"agent-name\">{{ getAgentName(task.task_config?.agent_id) }}</span>\r\n            </div>\r\n            \r\n            <!--  -->\r\n            <div class=\"task-row task-stats\">\r\n              <span class=\"label stats-label\"></span>\r\n              <span class=\"stats-text\">\r\n                {{ task.execution_stats?.execution_count || 0 }}\r\n                <span class=\"stats-detail\">\r\n                  {{ task.execution_stats?.total_success || 0 }}\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!--  -->\r\n      <transition name=\"slide-fade\">\r\n        <div class=\"batch-operations fixed\" v-show=\"isEditMode\">\r\n          <div class=\"batch-left\">\r\n            <div class=\"select-all\">\r\n              <el-checkbox \r\n                v-model=\"isAllSelected\" \r\n              >\r\n                \r\n              </el-checkbox>\r\n            </div>\r\n            <div class=\"selected-count\">{{ selectedCount }}</div>\r\n          </div>\r\n          <div class=\"batch-right\">\r\n            <el-button \r\n              type=\"danger\" \r\n              size=\"small\" \r\n              @click=\"batchCancelTasks\"\r\n              :disabled=\"selectedCount === 0\"\r\n              :loading=\"isBatchCanceling\"\r\n            >\r\n              \r\n            </el-button>\r\n            <el-button \r\n              type=\"primary\" \r\n              size=\"small\" \r\n              @click=\"batchModifyTasks\"\r\n              :disabled=\"selectedCount === 0\"\r\n            >\r\n              \r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n    </el-scrollbar>\r\n\r\n    <!--  -->\r\n    <el-dialog v-model=\"isBatchModifyDialogVisible\" title=\"\" width=\"480px\">\r\n      <div class=\"dialog-subtitle\"></div>\r\n      <div class=\"dialog-item\">\r\n        <span class=\"filter-label\"></span>\r\n        <el-select v-model=\"selectedAgentIdForModify\" placeholder=\"\" style=\"width: 240px\">\r\n          <el-option\r\n            v-for=\"agent in cozeAgents\"\r\n            :key=\"agent.botId\"\r\n            :label=\"agent.name\"\r\n            :value=\"agent.botId\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"closeBatchModifyDialog\"></el-button>\r\n          <el-button type=\"primary\" :disabled=\"!selectedAgentIdForModify\" @click=\"confirmBatchModify\"></el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, onUnmounted, computed } from 'vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { getAutoFollowTasks, cancelAutoFollowTask } from '../api/autosop'\r\nimport { getConfig } from '@/api/config'\r\nimport { getAutoFollowTasksByStartDate, batchCancelAutoFollowTasks, batchUpdateAutoFollowAgent } from '@/api/contact'\r\n\r\ninterface AutoFollowTask {\r\n  task_info: {\r\n    task_id: string\r\n    task_type: string\r\n    created_at: string\r\n    updated_at: string\r\n  }\r\n  friend_info: {\r\n    wxid: string\r\n    name: string\r\n    account_id: string\r\n  }\r\n  execution_strategy: {\r\n    follow_scenario: string\r\n    follow_days: number\r\n    follow_frequency: string\r\n    time_range_start: string\r\n    time_range_end: string\r\n    start_date: string\r\n    end_date: string\r\n    max_executions: number\r\n  }\r\n  execution_stats: {\r\n    execution_count: number\r\n    last_execution_time: string\r\n    next_execution_day: number\r\n    total_success: number\r\n    total_failed: number\r\n  }\r\n  task_config: {\r\n    agent_id: string\r\n    ai_service_type: string\r\n  }\r\n  task_status: string\r\n  execution_history: any[]\r\n  schedule_info?: {\r\n    schedule_id: string\r\n    next_fire_time: string | null\r\n    is_paused: boolean\r\n  }\r\n  selected?: boolean // \r\n}\r\n\r\nconst tasks = ref<AutoFollowTask[]>([])\r\nconst cancelingTasks = ref(new Set<string>())\r\nconst loading = ref(false)\r\n// \r\ninterface CozeAgent { name: string; botId: string; isDefault?: boolean }\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\n\r\n// \r\nconst isEditMode = ref(false)\r\nconst filterAgentId = ref<string>('')\r\nconst filterDate = ref('')\r\nconst filterPanel = ref<HTMLElement | null>(null)\r\nconst selectedCount = ref(0)\r\nconst isBatchCanceling = ref(false)\r\nconst isBatchModifyDialogVisible = ref(false)\r\nconst selectedAgentIdForModify = ref<string>('')\r\n\r\n// \r\nconst isAllSelected = computed({\r\n  get: () => {\r\n    return tasks.value.length > 0 && tasks.value.every(task => task.selected)\r\n  },\r\n  set: (value) => {\r\n    tasks.value.forEach(task => task.selected = value)\r\n    updateSelectedCount()\r\n  }\r\n})\r\n\r\n// \r\nconst toggleEditMode = () => {\r\n  isEditMode.value = !isEditMode.value\r\n  \r\n  // \r\n  if (!isEditMode.value) {\r\n    resetFilters()\r\n    resetSelection()\r\n  }\r\n}\r\n\r\n// \r\nconst resetFilters = () => {\r\n  filterAgentId.value = ''\r\n  filterDate.value = ''\r\n  loadTasks() // \r\n}\r\n\r\n// \r\nconst resetSelection = () => {\r\n  tasks.value.forEach(task => task.selected = false)\r\n  updateSelectedCount()\r\n}\r\n\r\n// \r\nconst updateSelectedCount = () => {\r\n  selectedCount.value = tasks.value.filter(task => task.selected).length\r\n}\r\n\r\n// \r\nconst applyFilter = async () => {\r\n  try {\r\n    loading.value = true\r\n    // \r\n    if (filterDate.value || filterAgentId.value) {\r\n      const result = await getAutoFollowTasksByStartDate(\r\n        filterDate.value || undefined,\r\n        filterAgentId.value || undefined\r\n      )\r\n      if (result && Array.isArray(result)) {\r\n        tasks.value = result.map((task: AutoFollowTask) => ({ ...task, selected: false }))\r\n      } else {\r\n        tasks.value = []\r\n      }\r\n    } else {\r\n      await loadTasks()\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n//  -> \r\nconst handleFilterChange = async () => {\r\n  await applyFilter()\r\n}\r\n\r\n// \r\nconst batchCancelTasks = async () => {\r\n  const selectedTasks = tasks.value.filter(task => task.selected)\r\n  if (selectedTasks.length === 0) return\r\n  \r\n  try {\r\n    await ElMessageBox.confirm(\r\n      ` ${selectedTasks.length} `,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning',\r\n      }\r\n    )\r\n    \r\n    isBatchCanceling.value = true\r\n    const taskIds = selectedTasks.map(task => task.task_info.task_id)\r\n    await batchCancelAutoFollowTasks(taskIds)\r\n    ElMessage.success('')\r\n    \r\n    // \r\n    await applyFilter()\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error(':', error)\r\n      ElMessage.error(error instanceof Error ? error.message : '')\r\n    }\r\n  } finally {\r\n    isBatchCanceling.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst batchModifyTasks = () => {\r\n  const selectedTasks = tasks.value.filter(task => task.selected)\r\n  if (selectedTasks.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  selectedAgentIdForModify.value = ''\r\n  isBatchModifyDialogVisible.value = true\r\n}\r\n\r\n// \r\nconst loadAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if ((result as any).success && (result as any).data) {\r\n      const agents = Array.isArray((result as any).data) ? (result as any).data :\r\n                    Array.isArray((result as any).data.agents) ? (result as any).data.agents : []\r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n//  agent_id \r\nconst getAgentName = (agentId?: string) => {\r\n  if (!agentId) return ''\r\n  const agent = cozeAgents.value.find(a => a.botId === agentId)\r\n  return agent?.name || ''\r\n}\r\n\r\n// \r\nconst loadTasks = async () => {\r\n  try {\r\n    loading.value = true\r\n    const result = await getAutoFollowTasks()\r\n    tasks.value = (result || []).map((task: AutoFollowTask) => ({ ...task, selected: false }))\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst handleCancelTask = async (task: AutoFollowTask) => {\r\n  try {\r\n    await ElMessageBox.confirm(\r\n      ` ${task.friend_info.name} `,\r\n      '',\r\n      {\r\n        confirmButtonText: '',\r\n        cancelButtonText: '',\r\n        type: 'warning',\r\n      }\r\n    )\r\n    \r\n    cancelingTasks.value.add(task.friend_info.wxid)\r\n    await cancelAutoFollowTask(task.task_info.task_id)\r\n    ElMessage.success('')\r\n    \r\n    // \r\n    await loadTasks()\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error(':', error)\r\n      ElMessage.error(error instanceof Error ? error.message : '')\r\n    }\r\n  } finally {\r\n    cancelingTasks.value.delete(task.friend_info.wxid)\r\n  }\r\n}\r\n\r\n// \r\nconst handleSettings = () => {\r\n  ElMessage.info('...')\r\n}\r\n\r\n// \r\nconst formatTime = (timeStr: string) => {\r\n  if (!timeStr) return '--'\r\n  try {\r\n    const date = new Date(timeStr)\r\n    const month = String(date.getMonth() + 1).padStart(2, '0')\r\n    const day = String(date.getDate()).padStart(2, '0')\r\n    const hours = String(date.getHours()).padStart(2, '0')\r\n    const minutes = String(date.getMinutes()).padStart(2, '0')\r\n    return `${month}${day} ${hours}:${minutes}`\r\n  } catch {\r\n    return '--'\r\n  }\r\n}\r\n\r\n// \r\nconst formatNextTime = (timeStr?: string | null) => {\r\n  if (!timeStr) return '...'\r\n  return formatTime(timeStr)\r\n}\r\n\r\nonMounted(() => {\r\n  loadAgents()\r\n  loadTasks()\r\n})\r\n\r\n// \r\ndefineExpose({\r\n  refresh: loadTasks\r\n})\r\n\r\nconst confirmBatchModify = async () => {\r\n  if (!selectedAgentIdForModify.value) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  const selectedTasks = tasks.value.filter(task => task.selected)\r\n  if (selectedTasks.length === 0) {\r\n    ElMessage.warning('')\r\n    return\r\n  }\r\n  try {\r\n    loading.value = true\r\n    const taskIds = selectedTasks.map(task => task.task_info.task_id)\r\n    const result = await batchUpdateAutoFollowAgent(taskIds, selectedAgentIdForModify.value)\r\n    if (result && result.success) {\r\n      ElMessage.success('')\r\n    } else {\r\n      ElMessage.error(result?.error || '')\r\n    }\r\n    isBatchModifyDialogVisible.value = false\r\n    await applyFilter()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst closeBatchModifyDialog = () => {\r\n  isBatchModifyDialogVisible.value = false\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.auto-follow-task-list {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  /*  */\r\n  padding-bottom: 80px;\r\n}\r\n\r\n.section-title {\r\n  height: 48px;\r\n  line-height: 48px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 16px;\r\n  border-bottom: 1px solid #ebeef5;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n\r\n.title-buttons {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.task-count {\r\n  color: #909399;\r\n  font-size: 14px;\r\n  font-weight: normal;\r\n  margin-left: 8px;\r\n}\r\n\r\n.settings-btn {\r\n  color: #409eff;\r\n  font-size: 14px;\r\n  padding: 0;\r\n  margin-right: 12px;\r\n}\r\n\r\n.edit-btn {\r\n  color: #67c23a;\r\n  font-size: 14px;\r\n  padding: 0;\r\n}\r\n\r\n.edit-btn.active {\r\n  color: #f56c6c;\r\n}\r\n\r\n/*  */\r\n.filter-panel {\r\n  padding: 12px 16px;\r\n  background-color: #f5f7fa;\r\n  border-bottom: 1px solid #ebeef5;\r\n  overflow: hidden;\r\n  transition: all 0.3s ease-in-out;\r\n}\r\n\r\n/*  */\r\n.slide-fade-enter-active,\r\n.slide-fade-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n.slide-fade-enter-from,\r\n.slide-fade-leave-to {\r\n  transform: translateY(-20px);\r\n  opacity: 0;\r\n  max-height: 0;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n}\r\n.slide-fade-enter-to,\r\n.slide-fade-leave-from {\r\n  transform: translateY(0);\r\n  opacity: 1;\r\n  max-height: 100px;\r\n}\r\n\r\n.filter-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 12px;\r\n  gap: 8px;\r\n}\r\n\r\n.filter-label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-right: 8px;\r\n  width: 80px;\r\n  white-space: nowrap; /*  */\r\n}\r\n\r\n.filter-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.task-list {\r\n  flex: 1;\r\n  padding: 0 15px;\r\n  margin-top: 8px;\r\n}\r\n\r\n.task-item {\r\n  display: flex;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 8px;\r\n  margin-bottom: 12px;\r\n  background: #fff;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.task-item:hover {\r\n  border-color: #c6e2ff;\r\n  box-shadow: 0 2px 8px rgba(64, 158, 255, 0.1);\r\n}\r\n\r\n.task-checkbox {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0 12px;\r\n  border-right: 1px solid #ebeef5;\r\n}\r\n\r\n.task-info {\r\n  padding: 10px 12px;\r\n  flex: 1;\r\n}\r\n\r\n.task-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.task-row:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.task-header {\r\n  justify-content: space-between;\r\n}\r\n\r\n.friend-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.friend-name {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n\r\n.friend-wxid {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  background: #f5f7fa;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-right: 8px;\r\n}\r\n\r\n.time {\r\n  font-size: 14px;\r\n  color: #303133;\r\n}\r\n\r\n.task-time .time {\r\n  color: #909399;\r\n}\r\n\r\n.task-next .time {\r\n  color: #409eff;\r\n  font-weight: 500;\r\n}\r\n\r\n.stats-text {\r\n  font-size: 14px;\r\n  color: #303133;\r\n}\r\n.agent-name{\r\n  font-size: 14px;\r\n  color: #303133;\r\n}\r\n\r\n.stats-detail {\r\n  color: #909399;\r\n  font-size: 12px;\r\n  margin-left: 4px;\r\n}\r\n\r\n/*  */\r\n.task-stats {\r\n  align-items: flex-start;\r\n}\r\n\r\n.stats-label {\r\n  white-space: nowrap;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.stats-text {\r\n  flex: 1;\r\n  word-wrap: break-word;\r\n  word-break: break-all;\r\n  line-height: 1.4;\r\n}\r\n\r\n/*  */\r\n.batch-operations.fixed {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  padding: 12px 20px;\r\n  background-color: #f5f7fa;\r\n  border-top: 1px solid #ebeef5;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center; /*  */\r\n  z-index: 1000;\r\n}\r\n\r\n.batch-left {\r\n  display: flex;\r\n  flex-direction: row; /*  */\r\n  align-items: center;\r\n  gap: 12px; /*  */\r\n}\r\n\r\n.batch-right {\r\n  display: flex;\r\n  flex-direction: row; /*  */\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-left: auto; /*  */\r\n}\r\n\r\n.select-all {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.selected-count {\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.operation-buttons {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n.dialog-subtitle {\r\n  color: #909399;\r\n  font-size: 13px;\r\n  margin-bottom: 12px;\r\n}\r\n.dialog-item {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.dialog-footer {\r\n  display: inline-flex;\r\n  gap: 8px;\r\n}\r\n</style>","import script from \"./AutoFollowTaskList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AutoFollowTaskList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AutoFollowTaskList.vue?vue&type=style&index=0&id=689993da&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-689993da\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"auto-follow-logs\" }\nconst _hoisted_2 = { class: \"logs-container\" }\nconst _hoisted_3 = { class: \"log-header\" }\nconst _hoisted_4 = { class: \"friend-info\" }\nconst _hoisted_5 = { class: \"friend-details\" }\nconst _hoisted_6 = { class: \"friend-name\" }\nconst _hoisted_7 = { class: \"friend-wxid\" }\nconst _hoisted_8 = { class: \"status-text\" }\nconst _hoisted_9 = { class: \"log-time\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"log-content\"\n}\nconst _hoisted_11 = { class: \"content-text\" }\nconst _hoisted_12 = { class: \"content-main\" }\nconst _hoisted_13 = {\n  key: 0,\n  class: \"content-actions\"\n}\n\nimport { ref, onMounted, onUnmounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { getAutoFollowLogs } from '../api/autosop'\r\n\r\ninterface AutoFollowLog {\r\n  id: string\r\n  friend_name: string\r\n  friend_wxid: string\r\n  execution_time: string\r\n  message_content: string\r\n  status: 'success' | 'failed' | 'pending'\r\n  error_message?: string\r\n}\r\n\r\nconst CONTENT_LIMIT = 30\r\n\r\n// \r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AutoFollowLogs',\n  setup(__props, { expose: __expose }) {\n\r\nconst logs = ref<AutoFollowLog[]>([])\r\nconst loading = ref(false)\r\nconst expandedItems = ref<Set<string>>(new Set())\r\n\r\n// \r\nconst loadLogs = async () => {\r\n  try {\r\n    loading.value = true\r\n    const result = await getAutoFollowLogs()\r\n    logs.value = result || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst formatLogTime = (timeStr: string) => {\r\n  if (!timeStr) return '--'\r\n  try {\r\n    const date = new Date(timeStr)\r\n    const month = String(date.getMonth() + 1).padStart(2, '0')\r\n    const day = String(date.getDate()).padStart(2, '0')\r\n    const hours = String(date.getHours()).padStart(2, '0')\r\n    const minutes = String(date.getMinutes()).padStart(2, '0')\r\n    const seconds = String(date.getSeconds()).padStart(2, '0')\r\n    return `${month}-${day} ${hours}:${minutes}:${seconds}`\r\n  } catch {\r\n    return '--'\r\n  }\r\n}\r\n\r\n// 2\r\nconst getDisplayContent = (content: string, itemId: string) => {\r\n  if (!content) return '--'\r\n  \r\n  const cleanContent = content.replace(/\\n+/g, ' ').replace(/\\s+/g, ' ').trim()\r\n  \r\n  if (isExpanded(itemId) || cleanContent.length <= CONTENT_LIMIT) {\r\n    return cleanContent\r\n  }\r\n  \r\n  return cleanContent.substring(0, CONTENT_LIMIT) + '...'\r\n}\r\n\r\n// /\r\nconst shouldShowToggle = (content: string) => {\r\n  if (!content) return false\r\n  const cleanContent = content.replace(/\\n+/g, ' ').replace(/\\s+/g, ' ').trim()\r\n  return cleanContent.length > CONTENT_LIMIT\r\n}\r\n\r\n// \r\nconst isExpanded = (itemId: string) => {\r\n  return expandedItems.value.has(itemId)\r\n}\r\n\r\n// /\r\nconst toggleContent = (itemId: string) => {\r\n  if (expandedItems.value.has(itemId)) {\r\n    expandedItems.value.delete(itemId)\r\n  } else {\r\n    expandedItems.value.add(itemId)\r\n  }\r\n}\r\n\r\n// \r\nconst getStatusClass = (status: string) => {\r\n  switch (status) {\r\n    case 'success':\r\n      return 'status-success'\r\n    case 'failed':\r\n      return 'status-failed'\r\n    case 'pending':\r\n      return 'status-pending'\r\n    default:\r\n      return 'status-unknown'\r\n  }\r\n}\r\n\r\n// \r\nconst getStatusText = (status: string) => {\r\n  switch (status) {\r\n    case 'success':\r\n      return ''\r\n    case 'failed':\r\n      return ''\r\n    case 'pending':\r\n      return ''\r\n    default:\r\n      return ''\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  loadLogs()\r\n})\r\n\r\n// \r\n__expose({\r\n  refresh: loadLogs\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_el_scrollbar, { height: \"calc(100vh - 100px)\" }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_2, [\n          (logs.value.length === 0 && !loading.value)\n            ? (_openBlock(), _createBlock(_component_el_empty, {\n                key: 0,\n                description: \"\",\n                \"image-size\": 80\n              }))\n            : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(logs.value, (log) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  key: log.id,\n                  class: _normalizeClass([\"log-item\", { 'failed-item': log.status === 'failed' }])\n                }, [\n                  _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"div\", _hoisted_4, [\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"span\", _hoisted_6, _toDisplayString(log.friend_name), 1),\n                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(log.friend_wxid), 1)\n                      ]),\n                      _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"log-status\", getStatusClass(log.status)])\n                      }, [\n                        _createElementVNode(\"span\", _hoisted_8, _toDisplayString(getStatusText(log.status)), 1)\n                      ], 2)\n                    ])\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_9, \":\" + _toDisplayString(formatLogTime(log.execution_time)), 1),\n                  (log.status !== 'failed')\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                        _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"content-label\" }, \"\", -1)),\n                        _createElementVNode(\"div\", _hoisted_11, [\n                          _createElementVNode(\"div\", _hoisted_12, _toDisplayString(getDisplayContent(log.message_content, log.id)), 1),\n                          (shouldShowToggle(log.message_content))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                                _createVNode(_component_el_button, {\n                                  type: \"text\",\n                                  size: \"small\",\n                                  class: \"toggle-btn\",\n                                  onClick: ($event: any) => (toggleContent(log.id))\n                                }, {\n                                  default: _withCtx(() => [\n                                    _createTextVNode(_toDisplayString(isExpanded(log.id) ? '' : ''), 1)\n                                  ]),\n                                  _: 2\n                                }, 1032, [\"onClick\"])\n                              ]))\n                            : _createCommentVNode(\"\", true)\n                        ])\n                      ]))\n                    : _createCommentVNode(\"\", true)\n                ], 2))\n              }), 128))\n        ])\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"auto-follow-logs\">\r\n    <el-scrollbar height=\"calc(100vh - 100px)\">\r\n      <div class=\"logs-container\">\r\n        <el-empty\r\n          v-if=\"logs.length === 0 && !loading\"\r\n          description=\"\"\r\n          :image-size=\"80\"\r\n        />\r\n        <div\r\n          v-else\r\n          v-for=\"log in logs\"\r\n          :key=\"log.id\"\r\n          class=\"log-item\"\r\n          :class=\"{ 'failed-item': log.status === 'failed' }\"\r\n        >\r\n          <div class=\"log-header\">\r\n            <div class=\"friend-info\">\r\n              <div class=\"friend-details\">\r\n                <span class=\"friend-name\">{{ log.friend_name }}</span>\r\n                <span class=\"friend-wxid\">{{ log.friend_wxid }}</span>\r\n              </div>\r\n              <div class=\"log-status\" :class=\"getStatusClass(log.status)\">\r\n                <span class=\"status-text\">{{ getStatusText(log.status) }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"log-time\">:{{ formatLogTime(log.execution_time) }}</div>\r\n          \r\n          <div class=\"log-content\" v-if=\"log.status !== 'failed'\">\r\n            <div class=\"content-label\"></div>\r\n            <div class=\"content-text\">\r\n              <div class=\"content-main\">\r\n                {{ getDisplayContent(log.message_content, log.id) }}\r\n              </div>\r\n              <div class=\"content-actions\" v-if=\"shouldShowToggle(log.message_content)\">\r\n                <el-button \r\n                  type=\"text\" \r\n                  size=\"small\" \r\n                  class=\"toggle-btn\"\r\n                  @click=\"toggleContent(log.id)\"\r\n                >\r\n                  {{ isExpanded(log.id) ? '' : '' }}\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-scrollbar>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { getAutoFollowLogs } from '../api/autosop'\r\n\r\ninterface AutoFollowLog {\r\n  id: string\r\n  friend_name: string\r\n  friend_wxid: string\r\n  execution_time: string\r\n  message_content: string\r\n  status: 'success' | 'failed' | 'pending'\r\n  error_message?: string\r\n}\r\n\r\nconst logs = ref<AutoFollowLog[]>([])\r\nconst loading = ref(false)\r\nconst expandedItems = ref<Set<string>>(new Set())\r\n\r\n// \r\nconst loadLogs = async () => {\r\n  try {\r\n    loading.value = true\r\n    const result = await getAutoFollowLogs()\r\n    logs.value = result || []\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// \r\nconst formatLogTime = (timeStr: string) => {\r\n  if (!timeStr) return '--'\r\n  try {\r\n    const date = new Date(timeStr)\r\n    const month = String(date.getMonth() + 1).padStart(2, '0')\r\n    const day = String(date.getDate()).padStart(2, '0')\r\n    const hours = String(date.getHours()).padStart(2, '0')\r\n    const minutes = String(date.getMinutes()).padStart(2, '0')\r\n    const seconds = String(date.getSeconds()).padStart(2, '0')\r\n    return `${month}-${day} ${hours}:${minutes}:${seconds}`\r\n  } catch {\r\n    return '--'\r\n  }\r\n}\r\n\r\n// 2\r\nconst CONTENT_LIMIT = 30\r\n\r\n// \r\nconst getDisplayContent = (content: string, itemId: string) => {\r\n  if (!content) return '--'\r\n  \r\n  const cleanContent = content.replace(/\\n+/g, ' ').replace(/\\s+/g, ' ').trim()\r\n  \r\n  if (isExpanded(itemId) || cleanContent.length <= CONTENT_LIMIT) {\r\n    return cleanContent\r\n  }\r\n  \r\n  return cleanContent.substring(0, CONTENT_LIMIT) + '...'\r\n}\r\n\r\n// /\r\nconst shouldShowToggle = (content: string) => {\r\n  if (!content) return false\r\n  const cleanContent = content.replace(/\\n+/g, ' ').replace(/\\s+/g, ' ').trim()\r\n  return cleanContent.length > CONTENT_LIMIT\r\n}\r\n\r\n// \r\nconst isExpanded = (itemId: string) => {\r\n  return expandedItems.value.has(itemId)\r\n}\r\n\r\n// /\r\nconst toggleContent = (itemId: string) => {\r\n  if (expandedItems.value.has(itemId)) {\r\n    expandedItems.value.delete(itemId)\r\n  } else {\r\n    expandedItems.value.add(itemId)\r\n  }\r\n}\r\n\r\n// \r\nconst getStatusClass = (status: string) => {\r\n  switch (status) {\r\n    case 'success':\r\n      return 'status-success'\r\n    case 'failed':\r\n      return 'status-failed'\r\n    case 'pending':\r\n      return 'status-pending'\r\n    default:\r\n      return 'status-unknown'\r\n  }\r\n}\r\n\r\n// \r\nconst getStatusText = (status: string) => {\r\n  switch (status) {\r\n    case 'success':\r\n      return ''\r\n    case 'failed':\r\n      return ''\r\n    case 'pending':\r\n      return ''\r\n    default:\r\n      return ''\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  loadLogs()\r\n})\r\n\r\n// \r\ndefineExpose({\r\n  refresh: loadLogs\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.auto-follow-logs {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #fff;\r\n}\r\n\r\n.logs-container {\r\n  flex: 1;\r\n  padding: 8px 10px;\r\n}\r\n\r\n.log-item {\r\n  background: #fff;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 6px;\r\n  margin-bottom: 12px;\r\n  padding: 6px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.log-item:hover {\r\n  border-color: #c6e2ff;\r\n  box-shadow: 0 2px 8px rgba(64, 158, 255, 0.1);\r\n}\r\n\r\n.log-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.friend-info {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  gap: 4px;\r\n}\r\n\r\n.friend-details {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.friend-name {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #303133;\r\n}\r\n\r\n.friend-wxid {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  background: #f5f7fa;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.log-time {\r\n  font-size: 14px;\r\n  color: #909399;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.log-content {\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.content-label {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.content-text {\r\n  background: #f8f9fa;\r\n  padding: 8px 12px;\r\n  border-radius: 6px;\r\n  border-left: 3px solid #409eff;\r\n}\r\n\r\n.content-main {\r\n  font-size: 14px;\r\n  color: #303133;\r\n  line-height: 1.5;\r\n  word-break: break-word;\r\n  white-space: normal;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.content-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.toggle-btn {\r\n  font-size: 12px;\r\n  color: #409eff;\r\n  padding: 0;\r\n  height: auto;\r\n  line-height: 1;\r\n}\r\n\r\n.log-status {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.status-text {\r\n  font-size: 12px;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-success .status-text {\r\n  background: #f0f9ff;\r\n  color: #67c23a;\r\n  border: 1px solid #b3e19d;\r\n}\r\n\r\n.status-failed .status-text {\r\n  background: #fef0f0;\r\n  color: #f56c6c;\r\n  border: 1px solid #fbc4c4;\r\n}\r\n\r\n.status-pending .status-text {\r\n  background: #fdf6ec;\r\n  color: #e6a23c;\r\n  border: 1px solid #f5dab1;\r\n}\r\n\r\n.status-unknown .status-text {\r\n  background: #f4f4f5;\r\n  color: #909399;\r\n  border: 1px solid #d3d4d6;\r\n}\r\n\r\n/*  */\r\n.failed-item {\r\n  background: #f5f5f5;\r\n  border-color: #e0e0e0;\r\n}\r\n\r\n/*  */\r\n.failed-item .toggle-btn {\r\n  color: #606266;\r\n}\r\n.failed-item .toggle-btn:hover {\r\n  color: #4c4c4c;\r\n}\r\n</style>","import script from \"./AutoFollowLogs.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AutoFollowLogs.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AutoFollowLogs.vue?vue&type=style&index=0&id=6c6d9c38&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6c6d9c38\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"cosmic-toggle\">\r\n      <input type=\"checkbox\" class=\"toggle\" :id=\"id\" v-model=\"localValue\" @change=\"handleChange\" />\r\n      <label :for=\"id\" class=\"slider\">\r\n        <div class=\"cosmos\"></div>\r\n        <div class=\"toggle-orb\">\r\n          <div class=\"inner-orb\">\r\n            <div class=\"ring\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"particles\">\r\n          <div class=\"particle\" style=\"--angle: 0deg\"></div>\r\n          <div class=\"particle\" style=\"--angle: 60deg\"></div>\r\n          <div class=\"particle\" style=\"--angle: 120deg\"></div>\r\n          <div class=\"particle\" style=\"--angle: 180deg\"></div>\r\n          <div class=\"particle\" style=\"--angle: 240deg\"></div>\r\n          <div class=\"particle\" style=\"--angle: 300deg\"></div>\r\n        </div>\r\n      </label>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, watch, computed } from 'vue';\r\n  import { v4 as uuidv4 } from 'uuid'; // uuidnpm install uuid\r\n  \r\n  // props\r\n  const props = defineProps({\r\n    modelValue: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    activeText: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    inactiveText: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  });\r\n  \r\n  // \r\n  const emit = defineEmits(['update:modelValue', 'change']);\r\n  \r\n  // ID\r\n  const id = computed(() => `cosmic-switch-${uuidv4().substring(0, 8)}`);\r\n  \r\n  // \r\n  const localValue = ref(props.modelValue);\r\n  \r\n  // props\r\n  watch(() => props.modelValue, (newVal) => {\r\n    localValue.value = newVal;\r\n  });\r\n  \r\n  // \r\n  watch(localValue, (newVal) => {\r\n    emit('update:modelValue', newVal);\r\n  });\r\n  \r\n  // \r\n  const handleChange = () => {\r\n    if (props.loading) {\r\n      // \r\n      localValue.value = props.modelValue;\r\n      return;\r\n    }\r\n    emit('change', localValue.value);\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  /* Uiverse.io by manish-sherawatYokoWebot */ \r\n  .cosmic-toggle {\r\n    position: relative;\r\n    width: 95px;\r\n    height: 34px;\r\n    transform-style: preserve-3d;\r\n    perspective: 500px;\r\n    display: inline-block;\r\n  }\r\n  \r\n  .toggle {\r\n    opacity: 0;\r\n    width: 0;\r\n    height: 0;\r\n  }\r\n  \r\n  .slider {\r\n    position: absolute;\r\n    cursor: pointer;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: linear-gradient(45deg, #DCDFE6, #F2F6FC); /*  */\r\n    border-radius: 16px;\r\n    transition: 0.5s;\r\n    transform-style: preserve-3d;\r\n    box-shadow:\r\n      0 0 10px rgba(0, 0, 0, 0.1),\r\n      inset 0 0 5px rgba(255, 255, 255, 0.1);\r\n    overflow: hidden;\r\n    border: 1px solid #C0C4CC;\r\n  }\r\n  \r\n  .slider::before {\r\n    content: attr(data-inactive-text, \"\");\r\n    position: absolute;\r\n    right: 9px;\r\n    top: 50%; /* 50% */\r\n    transform: translateY(-50%); /*  */\r\n    font-size: 12px;\r\n    color: #409EFF;\r\n    font-weight: 500;\r\n    z-index: 1;\r\n    }\r\n  \r\n  .toggle:checked + .slider::before {\r\n    content: attr(data-active-text, \"\");\r\n    left: 9px;\r\n    right: auto;\r\n    color: white;\r\n  }\r\n  \r\n  .cosmos {\r\n    position: absolute;\r\n    inset: 0;\r\n    background: radial-gradient(1px 1px at 10% 10%, #ffffff 100%, transparent),\r\n      radial-gradient(1px 1px at 20% 20%, #ffffff 100%, transparent),\r\n      radial-gradient(2px 2px at 30% 30%, #ffffff 100%, transparent),\r\n      radial-gradient(1px 1px at 40% 40%, #ffffff 100%, transparent),\r\n      radial-gradient(2px 2px at 50% 50%, #ffffff 100%, transparent),\r\n      radial-gradient(1px 1px at 60% 60%, #ffffff 100%, transparent),\r\n      radial-gradient(2px 2px at 70% 70%, #ffffff 100%, transparent),\r\n      radial-gradient(1px 1px at 80% 80%, #ffffff 100%, transparent),\r\n      radial-gradient(1px 1px at 90% 90%, #ffffff 100%, transparent);\r\n    background-size: 200% 200%;\r\n    opacity: 0; /*  */\r\n    transition: 0.5s;\r\n  }\r\n  \r\n  .toggle-orb {\r\n    position: absolute;\r\n    height: 28px;\r\n    width: 28px;\r\n    left: 2px;\r\n    bottom: 2px;\r\n    background: linear-gradient(145deg, #DCDFE6, #F2F6FC); /*  */\r\n    border-radius: 50%;\r\n    transition: 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\r\n    transform-style: preserve-3d;\r\n    z-index: 2;\r\n    border: 1px solid #C0C4CC;\r\n  }\r\n  \r\n  .inner-orb {\r\n    position: absolute;\r\n    inset: 3px;\r\n    border-radius: 50%;\r\n    background: linear-gradient(\r\n      145deg,\r\n      #ffffff,\r\n      #e6e6e6\r\n    ); /*  */\r\n    transition: 0.5s;\r\n    overflow: hidden;\r\n  }\r\n  \r\n  .inner-orb::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    inset: 0;\r\n    background: repeating-conic-gradient(\r\n      from 0deg,\r\n      transparent 0deg,\r\n      rgba(0, 0, 0, 0.1) 10deg,\r\n      transparent 20deg\r\n    );\r\n    animation: none; /*  */\r\n  }\r\n  \r\n  .ring {\r\n    position: absolute;\r\n    inset: -2px;\r\n    border: 1px solid rgba(64, 158, 255, 0.3); /*  */\r\n    border-radius: 50%;\r\n    transition: 0.5s;\r\n  }\r\n  \r\n  /*  */\r\n  .toggle:checked + .slider {\r\n    background: linear-gradient(\r\n      45deg,\r\n      #409EFF,\r\n      #79bbff\r\n    ); /*  */\r\n  }\r\n  \r\n  .toggle:checked + .slider .toggle-orb {\r\n    transform: translateX(63px) rotate(360deg);\r\n    background: linear-gradient(\r\n      145deg,\r\n      #409EFF,\r\n      #79bbff\r\n    ); /*  */\r\n  }\r\n  \r\n  .toggle:checked + .slider .inner-orb {\r\n    background: linear-gradient(\r\n      145deg,\r\n      #e6e6e6,\r\n      #ffffff\r\n    ); /*  */\r\n    transform: scale(0.9);\r\n  }\r\n  \r\n  .toggle:checked + .slider .ring {\r\n    border-color: rgba(255, 255, 255, 0.5); /*  */\r\n    animation: ringPulse 2s infinite;\r\n  }\r\n  \r\n  /*  */\r\n  .toggle:checked + .slider .cosmos {\r\n    opacity: 0.2;\r\n    animation: cosmosPan 20s linear infinite;\r\n  }\r\n  \r\n  .toggle:checked + .slider .inner-orb::before {\r\n    animation: patternRotate 10s linear infinite;\r\n  }\r\n  \r\n  .particles {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  \r\n  .particle {\r\n    position: absolute;\r\n    width: 2px;\r\n    height: 2px;\r\n    background: #409EFF; /*  */\r\n    border-radius: 50%;\r\n    opacity: 0;\r\n  }\r\n  \r\n  .toggle:checked + .slider .particle {\r\n    animation: particleBurst 1s ease-out infinite;\r\n  }\r\n  \r\n  .particle:nth-child(1) {\r\n    left: 20%;\r\n    animation-delay: 0s;\r\n  }\r\n  .particle:nth-child(2) {\r\n    left: 40%;\r\n    animation-delay: 0.2s;\r\n  }\r\n  .particle:nth-child(3) {\r\n    left: 60%;\r\n    animation-delay: 0.4s;\r\n  }\r\n  .particle:nth-child(4) {\r\n    left: 80%;\r\n    animation-delay: 0.6s;\r\n  }\r\n  .particle:nth-child(5) {\r\n    left: 30%;\r\n    animation-delay: 0.8s;\r\n  }\r\n  .particle:nth-child(6) {\r\n    left: 70%;\r\n    animation-delay: 1s;\r\n  }\r\n  \r\n  /*  */\r\n  @keyframes ringPulse {\r\n    0%,\r\n    100% {\r\n      transform: scale(1);\r\n      opacity: 0.3;\r\n    }\r\n    50% {\r\n      transform: scale(1.1);\r\n      opacity: 0.6;\r\n    }\r\n  }\r\n  \r\n  @keyframes patternRotate {\r\n    0% {\r\n      transform: rotate(0deg);\r\n    }\r\n    100% {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n  \r\n  @keyframes particleBurst {\r\n    0% {\r\n      transform: translate(0, 0) scale(1);\r\n      opacity: 1;\r\n    }\r\n    100% {\r\n      transform: translate(\r\n          calc(cos(var(--angle)) * 25px),\r\n          calc(sin(var(--angle)) * 25px)\r\n        )\r\n        scale(0);\r\n      opacity: 0;\r\n    }\r\n  }\r\n  \r\n  @keyframes cosmosPan {\r\n    0% {\r\n      background-position: 0% 0%;\r\n    }\r\n    100% {\r\n      background-position: 200% 200%;\r\n    }\r\n  }\r\n  \r\n  /*  */\r\n  .toggle:active + .slider .toggle-orb {\r\n    transform: scale(0.95);\r\n  }\r\n  \r\n  /*  */\r\n  .toggle:checked + .slider::after {\r\n    content: \"\";\r\n    position: absolute;\r\n    inset: 0;\r\n    background: radial-gradient(\r\n      circle at var(--x) var(--y),\r\n      rgba(255, 255, 255, 0.2),\r\n      transparent 50%\r\n    );\r\n    opacity: 0;\r\n    animation: glowFollow 2s linear infinite;\r\n  }\r\n  \r\n  @keyframes glowFollow {\r\n    0%,\r\n    100% {\r\n      opacity: 0.2;\r\n    }\r\n    50% {\r\n      opacity: 0.5;\r\n    }\r\n  }\r\n  \r\n  /*  */\r\n  .cosmic-toggle.loading .toggle-orb {\r\n    animation: loadingPulse 1.5s infinite;\r\n  }\r\n  \r\n  @keyframes loadingPulse {\r\n    0%, 100% {\r\n      opacity: 1;\r\n    }\r\n    50% {\r\n      opacity: 0.6;\r\n    }\r\n  }\r\n  </style>","import script from \"./CosmicSwitch.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CosmicSwitch.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CosmicSwitch.vue?vue&type=style&index=0&id=ad99a1d2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ad99a1d2\"]])\n\nexport default __exports__","import axios, { AxiosRequestConfig, AxiosResponse } from 'axios'\r\nimport { ElMessage } from 'element-plus'\r\nimport { API_BASE_URL, headers } from './config'\r\n\r\n//  axios \r\nconst service = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 15000,\r\n  headers\r\n})\r\n\r\n// \r\nservice.interceptors.response.use(\r\n  (response: AxiosResponse) => {\r\n    return response.data\r\n  },\r\n  error => {\r\n    console.error(':', error)\r\n    ElMessage.error(error.message || '')\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// \r\nexport const request = async <T>(config: AxiosRequestConfig): Promise<T> => {\r\n  try {\r\n    const response = await service(config)\r\n    //  response.data\r\n    return response as unknown as T\r\n  } catch (error) {\r\n    throw error\r\n  }\r\n}","import { request } from './request'\r\n\r\nexport const listMomentPlans = async () => {\r\n  return await request<{ success: boolean; plans: string[]; base: string }>({\r\n    url: '/api/moment-material/plans',\r\n    method: 'GET'\r\n  })\r\n}\r\n\r\nexport const listMomentGroups = async (planName: string) => {\r\n  return await request<{ success: boolean; groups: string[] }>({\r\n    url: '/api/moment-material/groups',\r\n    method: 'GET',\r\n    params: { plan_name: planName }\r\n  })\r\n}\r\n\r\nexport const selectMomentFolder = async () => {\r\n  return await request<{ success: boolean; selected?: string; groups?: string[]; error?: string }>({\r\n    url: '/api/moment-material/select-folder',\r\n    method: 'GET'\r\n  })\r\n}\r\n\r\nexport const openFolder = async (path: string) => {\r\n  return await request<{ success: boolean; error?: string }>({\r\n    url: '/api/moment-material/open-folder',\r\n    method: 'GET',\r\n    params: { path }\r\n  })\r\n}\r\n\r\nexport interface Instance {\r\n  account_id: string\r\n  nickname: string\r\n  is_active?: boolean\r\n}\r\n\r\nexport const getActiveInstances = async () => {\r\n  return await request<{ success: boolean; instances: Instance[] }>({\r\n    url: '/api/instances/active',\r\n    method: 'GET'\r\n  })\r\n}\r\n\r\nexport interface CreateMomentPostPayload {\r\n  name: string\r\n  execMode: 'fixed' | 'range'\r\n  fixedTime?: string | Date\r\n  rangeStart?: string | Date\r\n  rangeEnd?: string | Date\r\n  postCount?: number\r\n  cycle: 'daily' | 'weekly'\r\n  weekDays?: string[]\r\n  materialFolder: string\r\n  publishMode: 'sequence' | 'random'\r\n  account: string\r\n}\r\n\r\nexport const createMomentPostTask = async (payload: CreateMomentPostPayload) => {\r\n  return await request<{ success: boolean; task_ids?: string[]; error?: string }>({\r\n    url: '/api/moment/post-task',\r\n    method: 'POST',\r\n    data: payload\r\n  })\r\n}\r\n\r\nexport const getMomentPostTasks = async () => {\r\n  return await request<{ success: boolean; tasks: { id: string; name: string; createdAt: string; account: string; sentCount: number; nextRunAt: string; ruleDesc: string }[] }>({\r\n    url: '/api/moment/post-tasks',\r\n    method: 'GET'\r\n  })\r\n}\r\n\r\nexport const cancelMomentPostTask = async (taskId: string) => {\r\n  return await request<{ success: boolean }>({\r\n    url: '/api/moment/post-task/cancel',\r\n    method: 'POST',\r\n    data: { task_id: taskId }\r\n  })\r\n}\r\n\r\nexport interface MomentPostLog {\r\n  id: string\r\n  timestamp: string\r\n  type: string\r\n  status: string\r\n  folder_path: string\r\n  text: string\r\n  media_count: number\r\n  account: string\r\n  error?: string\r\n}\r\n\r\nexport const getMomentPostLogs = async () => {\r\n  return await request<{ success: boolean; logs: MomentPostLog[] }>({\r\n    url: '/api/moment/post-logs',\r\n    method: 'GET'\r\n  })\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, normalizeClass as _normalizeClass, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, resolveDirective as _resolveDirective, createVNode as _createVNode, withDirectives as _withDirectives, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { class: \"auto-sop-container\" }\nconst _hoisted_2 = { class: \"function-section\" }\nconst _hoisted_3 = { class: \"function-list\" }\nconst _hoisted_4 = { class: \"function-icon\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = { class: \"function-icon\" }\nconst _hoisted_7 = [\"src\"]\nconst _hoisted_8 = { class: \"function-icon\" }\nconst _hoisted_9 = [\"src\"]\nconst _hoisted_10 = { class: \"function-icon\" }\nconst _hoisted_11 = [\"src\"]\nconst _hoisted_12 = { class: \"function-icon\" }\nconst _hoisted_13 = [\"src\"]\nconst _hoisted_14 = { class: \"content-wrapper\" }\nconst _hoisted_15 = { class: \"config-section\" }\nconst _hoisted_16 = { class: \"config-content\" }\nconst _hoisted_17 = { style: {\"background\":\"linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%)\",\"border\":\"1px solid #e1bee7\",\"padding\":\"6px 8px\",\"border-radius\":\"8px\",\"color\":\"#4a148c\",\"font-weight\":\"500\",\"box-shadow\":\"0 2px 6px rgba(74, 20, 140, 0.1)\",\"position\":\"relative\",\"overflow\":\"hidden\"} }\nconst _hoisted_18 = { style: {\"position\":\"relative\",\"z-index\":\"1\"} }\nconst _hoisted_19 = {\n  key: 0,\n  style: {\"font-size\":\"13px\"}\n}\nconst _hoisted_20 = {\n  key: 1,\n  style: {\"font-size\":\"13px\"}\n}\nconst _hoisted_21 = { class: \"comment-action\" }\nconst _hoisted_22 = {\n  key: 0,\n  class: \"comment-tip\"\n}\nconst _hoisted_23 = {\n  key: 0,\n  class: \"config-tip\"\n}\nconst _hoisted_24 = { class: \"config-content\" }\nconst _hoisted_25 = { class: \"section-title\" }\nconst _hoisted_26 = { class: \"button-group\" }\nconst _hoisted_27 = { class: \"remaining-count\" }\nconst _hoisted_28 = {\n  key: 0,\n  class: \"config-tip\"\n}\nconst _hoisted_29 = { class: \"config-content\" }\nconst _hoisted_30 = { class: \"log-content\" }\nconst _hoisted_31 = { class: \"log-time\" }\nconst _hoisted_32 = { class: \"log-info\" }\nconst _hoisted_33 = { class: \"publisher\" }\nconst _hoisted_34 = { class: \"moment-content\" }\nconst _hoisted_35 = { class: \"comment-info\" }\nconst _hoisted_36 = {\n  key: 0,\n  class: \"like-action\"\n}\nconst _hoisted_37 = {\n  key: 1,\n  class: \"comment-action\"\n}\nconst _hoisted_38 = { class: \"comment-text\" }\nconst _hoisted_39 = {\n  key: 1,\n  class: \"empty-state\"\n}\nconst _hoisted_40 = { class: \"log-header\" }\nconst _hoisted_41 = { class: \"log-status-time\" }\nconst _hoisted_42 = { class: \"log-time\" }\nconst _hoisted_43 = { class: \"log-info\" }\nconst _hoisted_44 = { class: \"task-details\" }\nconst _hoisted_45 = {\n  key: 0,\n  class: \"task-progress\"\n}\nconst _hoisted_46 = { class: \"task-group\" }\nconst _hoisted_47 = {\n  key: 1,\n  class: \"task-schedule\"\n}\nconst _hoisted_48 = {\n  key: 0,\n  class: \"task-error\"\n}\nconst _hoisted_49 = {\n  key: 1,\n  class: \"empty-state\"\n}\nconst _hoisted_50 = { class: \"log-header\" }\nconst _hoisted_51 = { class: \"log-status-time\" }\nconst _hoisted_52 = { class: \"log-time\" }\nconst _hoisted_53 = { class: \"log-info\" }\nconst _hoisted_54 = { class: \"task-details\" }\nconst _hoisted_55 = { class: \"friend-count\" }\nconst _hoisted_56 = {\n  key: 0,\n  class: \"friend-tag\"\n}\nconst _hoisted_57 = {\n  key: 1,\n  class: \"empty-state\"\n}\nconst _hoisted_58 = { class: \"log-header\" }\nconst _hoisted_59 = { class: \"log-status-time\" }\nconst _hoisted_60 = { class: \"log-time\" }\nconst _hoisted_61 = { class: \"log-info\" }\nconst _hoisted_62 = { class: \"task-details\" }\nconst _hoisted_63 = { class: \"friend-info\" }\nconst _hoisted_64 = {\n  key: 0,\n  class: \"friend-tags\"\n}\nconst _hoisted_65 = { class: \"greeting-text\" }\nconst _hoisted_66 = {\n  key: 1,\n  class: \"empty-state\"\n}\nconst _hoisted_67 = { class: \"auth-dialog-content\" }\nconst _hoisted_68 = { class: \"auth-actions\" }\nconst _hoisted_69 = { class: \"tag-selection-content\" }\nconst _hoisted_70 = { class: \"tag-name\" }\nconst _hoisted_71 = { class: \"tag-count\" }\nconst _hoisted_72 = { class: \"dialog-footer-custom\" }\nconst _hoisted_73 = { class: \"action-buttons\" }\n\nimport { ref,onMounted,computed,onUnmounted ,watch, onActivated} from 'vue'\r\nimport {User, Warning,PriceTag, InfoFilled} from '@element-plus/icons-vue'\r\nimport FriendListDialog from '@/components/sop/FriendListDialog.vue'\r\nimport ImportFriendListDialog from '@/components/sop/ImportFriendListDialog.vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { getConfig, saveConfig } from '@/api/config'\r\nimport type { CozeAgent } from '@/types/coze' \r\nimport {getTaskLogs,toggleAutoAddFriend,getFriendRequestLogs,getRemainingFriendCount,\r\n  toggleAutoAddNewFriend,importFriendList,toggleAutoComment,importFriendListByAgent,getAddFriendLogs} from '@/api/autosop'\r\nimport MassSendingPanel from '@/components/sop/MassSendingPanel.vue'\r\nimport AutoFollowTaskList from '@/components/AutoFollowTaskList.vue'\r\nimport AutoFollowLogs from '@/components/AutoFollowLogs.vue'\r\nimport { getContactTags ,getGroups, Tag} from '@/api/contact'\r\nimport { useRoute } from 'vue-router'\r\nimport CosmicSwitch from '@/components/ui/CosmicSwitch.vue'\r\nimport { useSvgLoader } from '@/composables/useSvgLoader'\r\nimport { getActiveInstances, type Instance } from '@/api/moments'\r\ninterface LogParams {\r\n  content?: string\r\n  scheduleTime?: string\r\n  contentType?: string\r\n  progress?: number\r\n  total?: number\r\n  greetingGroupId?: string\r\n  timestamp?: string\r\n}\r\ninterface RestTimeSettings {\r\n  startTime: number\r\n  endTime: number\r\n  selectedTasks: string[]\r\n}\r\ninterface AddFriendLog {\r\n  task_id: string\r\n  time: string  // \r\n  processed_count: number  // \r\n  attempt_count: number  // \r\n  tag: string  // \r\n}\r\ninterface MomentLog {\r\n  type: string[]\r\n  publisher: string\r\n  content: string\r\n  publish_time: string\r\n  comment_content: string\r\n  timestamp: string\r\n}\r\ninterface GreetingGroup {\r\n  id: string\r\n  name: string\r\n  greetings: Array<{\r\n    type: 'text' | 'file'\r\n    content: string\r\n    filePath?: string\r\n  }>\r\n}\r\n// \r\ninterface MomentLog {\r\n  id: string;\r\n  timestamp: string;\r\n  publisher: string;\r\n  content: string;\r\n  comment_content: string;\r\n}\r\n\r\n// \r\nexport interface FriendConfig {\r\n  maxFriendsPerDay: number\r\n  checkInterval: number\r\n  maxProcessPerTime: number\r\n  greetingGroupId: string\r\n  targetGroup:string\r\n  tag: string\r\n  enabled: boolean\r\n}\r\n// \r\ninterface FriendLog {\r\n  task_id: string\r\n  time: string\r\n  processed_count: number\r\n  tag?: string\r\n  status: string\r\n  error?: string\r\n}\r\n\r\n// \r\ninterface ChatCollectionTask {\r\n  id: string\r\n  agentId: string\r\n  agentName?: string\r\n  status: 'pending' | 'running' | 'completed' | 'failed' | 'cancelled'\r\n  scheduleTime?: string\r\n  createTime?: string\r\n  processedSessions?: number\r\n  totalSessions?: number\r\n  maxSessions?: number\r\n  error?: string\r\n}\r\n// SVG\r\ninterface LogItem {\r\n  id: string\r\n  timestamp: number\r\n  taskType: string\r\n  description: string\r\n  status: string\r\n  progress?: number\r\n  total?: number\r\n  error?: string | null\r\n  publisher?: string\r\n  content?: string\r\n  comment_content?: string\r\n  params?: {\r\n    content?: string\r\n    scheduleTime?: string\r\n    progress?: number\r\n    total?: number\r\n    greetingGroupId?: string\r\n    contentType?: string\r\n  }\r\n}\r\n\r\n// \r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AutoSOP',\n  setup(__props) {\n\r\nconst route = useRoute()\r\nconst groupList = ref<any[]>([])\r\n// \r\nconst commentConfig = ref({\r\n  commentLimit: 10,\r\n  perFriendLimit: 2,\r\n  autoLike: false,\r\n  interactionMode:'like_and_comment',\r\n  checkInterval: 120, // 120\r\n  reachLastPosition: 'stop', // \r\n  blacklist: '',\r\n  agentId: '',\r\n  enabled: false,\r\n  multiCycleEnabled: false,\r\n  selectedAccounts: [] as string[],\r\n  selectedTags:[] as string[], // ID\r\n  selectedTagNames: [] as string[] // \r\n})\r\nconst addFriendConfig = ref({\r\n  maxFriendsPerDay: 10,\r\n  interval: 30,\r\n  batchSize: 1,\r\n  targetGroup: '',\r\n  verifyMessage:'',\r\n  enabled: false,\r\n  multiCycleEnabled: false,\r\n  selectedAccounts: [] as string[]\r\n})\r\nconst restTimeSettings = ref<RestTimeSettings>({\r\n  startTime: 0,\r\n  endTime: 28,\r\n  selectedTasks: []\r\n})\r\nconst addFriendLogs = ref<AddFriendLog[]>([])\r\nconst remainingCount = ref(0)\r\nconst todayAddedCount = ref(0)\r\nconst importDialogVisible = ref(false)\r\nconst friendListVisible = ref(false)\r\n// \r\n// const showCountdown = ref(false)\r\n// \r\nconst autoFollowTaskListRef = ref()\r\nconst autoFollowLogsRef = ref()\r\n// \r\nconst createChatCollectionVisible = ref(false)\r\nconst chatCollectionTasks = ref<ChatCollectionTask[]>([])\r\n// \r\nconst { getIconPath, handleImageLoad, handleImageError, preloadImages } = useSvgLoader({\r\n  comment: {\r\n    path: '/icon/wechat_moment.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  activate: {\r\n    path: '/icon/activate_icon.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  addFriend: {\r\n    path: '/icon/friend_request.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  addNewFriend: {\r\n    path: '/icon/add_new_friend_icon.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  autoFollow: {\r\n    path: '/icon/follow_up_icon.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  chatAnalysis: {\r\n    path: '/icon/collect_message.svg',\r\n    fallback: '/icon/empty.svg'\r\n  }\r\n})\r\n\r\n// \r\nconst friendConfig = ref<FriendConfig>({\r\n  maxFriendsPerDay: 100,\r\n  checkInterval: 10,\r\n  maxProcessPerTime: 5,\r\n  tag: '',\r\n  targetGroup:'',\r\n  greetingGroupId: '',\r\n  enabled: false\r\n})\r\nconst showImportDialog = () => {\r\n  importDialogVisible.value = true\r\n}\r\n// \r\nconst authDialogVisible = ref(false)\r\nconst authUrl = ref('')\r\nconst hasClickedAuth = ref(false)\r\n// \r\nconst openAuthUrl = () => {\r\n  if (authUrl.value) {\r\n    window.open(authUrl.value, '_blank')\r\n    hasClickedAuth.value = true\r\n  }\r\n}\r\n// \r\nconst friendRequestExecutionTime = computed(() => {\r\n  if (!restTimeSettings.value.selectedTasks.includes('')) {\r\n    return null // \r\n  }\r\n  return formatExecutionTime(restTimeSettings.value.startTime, restTimeSettings.value.endTime)\r\n})\r\n\r\nconst addFriendExecutionTime = computed(() => {\r\n  if (!restTimeSettings.value.selectedTasks.includes('')) {\r\n    return null // \r\n  }\r\n  return formatExecutionTime(restTimeSettings.value.startTime, restTimeSettings.value.endTime)\r\n})\r\n\r\n// \r\nconst formatExecutionTime = (startTime: number, endTime: number) => {\r\n  const formatInterval = (interval: number) => {\r\n    const hour = Math.floor(interval / 4)\r\n    const minute = (interval % 4) * 15\r\n    return `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`\r\n  }\r\n  \r\n  const startTimeStr = formatInterval(startTime)\r\n  const endTimeStr = formatInterval(endTime)\r\n  \r\n  if (startTime <= endTime) {\r\n    return `${startTimeStr}-${endTimeStr}`\r\n  } else {\r\n    return `${startTimeStr}-${endTimeStr}`\r\n  }\r\n}\r\n\r\n// \r\nconst loadRestTimeSettings = async () => {\r\n  try {\r\n    const result = await getConfig('rest_time_settings')\r\n    if (result.success && result.data?.rest_time_settings) {\r\n      restTimeSettings.value = {\r\n        startTime: result.data.rest_time_settings.startTime || 0,\r\n        endTime: result.data.rest_time_settings.endTime || 28,\r\n        selectedTasks: result.data.rest_time_settings.selectedTasks || []\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n// \r\nconst handleImportByAgent = async (agentId: string) => {\r\n  try {\r\n    ElMessage.info('...')\r\n    const result = await importFriendListByAgent(agentId)\r\n    \r\n    // \r\n    if (result.needsAuth && result.authUrl) {\r\n      authUrl.value = result.authUrl\r\n      authDialogVisible.value = true\r\n      return\r\n    }\r\n    \r\n    if (result.success) {\r\n      ElMessage.success(`${result.count}${result.remaining}`)\r\n      remainingCount.value = result.remaining\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n  }\r\n}\r\nconst showFriendList = () => {\r\n  friendListVisible.value = true\r\n}\r\nconst saveAddFriendConfig = () => {\r\n  try {\r\n    localStorage.setItem('addFriendConfig', JSON.stringify(addFriendConfig.value))\r\n    saveSopCache('addFriendConfig')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n// \r\nconst loadGroupList = async () => {\r\n  if (groupList.value.length === 0) {\r\n    try {\r\n      groupList.value = await getGroups()\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n}\r\nconst activeInstances = ref<Instance[]>([])\r\nconst loadActiveInstancesForAddFriend = async () => {\r\n  try {\r\n    const result = await getActiveInstances()\r\n    if (result.success) {\r\n      activeInstances.value = result.instances || []\r\n      if (addFriendConfig.value.multiCycleEnabled && addFriendConfig.value.selectedAccounts.length === 0 && activeInstances.value.length > 0) {\r\n        addFriendConfig.value.selectedAccounts = [activeInstances.value[0].account_id]\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.error(':', e)\r\n  }\r\n}\r\nconst onMultiCycleToggle = async (val: any) => {\r\n  if (addFriendConfig.value.enabled) {\r\n    return\r\n  }\r\n  if (Boolean(val)) {\r\n    await loadActiveInstancesForAddFriend()\r\n    if (addFriendConfig.value.selectedAccounts.length === 0 && activeInstances.value.length > 0) {\r\n      addFriendConfig.value.selectedAccounts = [activeInstances.value[0].account_id]\r\n    }\r\n  }\r\n  saveAddFriendConfig()\r\n}\r\n\r\nconst loadActiveInstancesForComment = async () => {\r\n  try {\r\n    const result = await getActiveInstances()\r\n    if (result.success) {\r\n      activeInstances.value = result.instances || []\r\n      if (commentConfig.value.multiCycleEnabled && commentConfig.value.selectedAccounts.length === 0 && activeInstances.value.length > 0) {\r\n        commentConfig.value.selectedAccounts = [activeInstances.value[0].account_id]\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.error(':', e)\r\n  }\r\n}\r\n\r\nconst onCommentMultiCycleToggle = async (val: any) => {\r\n  if (commentConfig.value.enabled) {\r\n    return\r\n  }\r\n  if (Boolean(val)) {\r\n    await loadActiveInstancesForComment()\r\n    if (commentConfig.value.selectedAccounts.length === 0 && activeInstances.value.length > 0) {\r\n      commentConfig.value.selectedAccounts = [activeInstances.value[0].account_id]\r\n    }\r\n  }\r\n  saveCommentConfig()\r\n}\r\nconst handleAddFriendSwitchChange = async (val: string | number | boolean) => {\r\n  const value = Boolean(val)  // \r\n  try {\r\n    const result = await toggleAutoAddNewFriend(value, addFriendConfig.value)\r\n    if (result.success) {\r\n      ElMessage.success(value ? '' : '')\r\n    } else {\r\n      addFriendConfig.value.enabled = !value\r\n      ElMessage.error(result.error || '')\r\n    }\r\n    saveAddFriendConfig()//\r\n  } catch (error) {\r\n    addFriendConfig.value.enabled = !value\r\n    ElMessage.error('')\r\n    saveAddFriendConfig()\r\n  }\r\n}\r\nconst handleImportFriendList = async (fileData: any) => {\r\n  try {\r\n    const result = await importFriendList(fileData)\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n      await loadRemainingCount()\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('')\r\n    console.error(\"\",error)\r\n  }\r\n}\r\nconst handleSwitchChange = async (value: boolean) => {\r\n  try {\r\n    await toggleAutoComment(value, value ? commentConfig.value : {})\r\n    saveCommentConfig()\r\n    ElMessage.success(`${value ? '' : ''}`)\r\n  } catch (error) {\r\n    ElMessage.error(`${value ? '' : ''}`)\r\n    commentConfig.value.enabled = !value\r\n    saveCommentConfig()\r\n  }\r\n}\r\n\r\n// \r\nconst validateTag = (value: string) => {\r\n  const regex = /^[a-zA-Z0-9\\u4e00-\\u9fa5]+$/\r\n  if (value && !regex.test(value)) {\r\n    friendConfig.value.tag = value.replace(/[^a-zA-Z0-9\\u4e00-\\u9fa5]/g, '')\r\n    ElMessage.warning('')\r\n  }\r\n}\r\nconst userTags = ref<Tag[]>([])\r\nconst tagDialogVisible = ref(false)\r\nconst tempSelectedTags = ref<string[]>([])\r\n// \r\nconst openTagDialog = async () => {\r\n  try {\r\n    userTags.value = await getContactTags()\r\n    tempSelectedTags.value = [...commentConfig.value.selectedTags]\r\n    tagDialogVisible.value = true\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst resetTagSelection = () => {\r\n  tempSelectedTags.value = []\r\n  commentConfig.value.selectedTags = []\r\n  commentConfig.value.selectedTagNames = []\r\n  saveCommentConfig()\r\n  ElMessage.success('')\r\n}\r\n// \r\nconst confirmTagSelection = () => {\r\n  commentConfig.value.selectedTags = [...tempSelectedTags.value]\r\n  commentConfig.value.selectedTagNames = tempSelectedTags.value.map(tagId => {\r\n    const tag = userTags.value.find(t => t.id === tagId)\r\n    return tag ? tag.name : tagId\r\n  })\r\n  tagDialogVisible.value = false\r\n  saveCommentConfig()\r\n}\r\n\r\n// \r\nconst cancelTagSelection = () => {\r\n  tempSelectedTags.value = [...commentConfig.value.selectedTags]\r\n  tagDialogVisible.value = false\r\n}\r\n// \r\nconst loadUserTags = async () => {\r\n  try {\r\n    userTags.value = await getContactTags()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst getStatusText = (status: string) => {\r\n  const statusMap: Record<string, string> = {\r\n    'pending': '',\r\n    'running': '',\r\n    'completed': '',\r\n    'failed': '',\r\n    'cancelled': ''\r\n  }\r\n  return statusMap[status] || status\r\n}\r\n// \r\nconst getStatusType = (status: string): 'success' | 'warning' | 'info' | 'primary' | 'danger' => {\r\n  const statusMap: Record<string, 'success' | 'warning' | 'info' | 'primary' | 'danger'> = {\r\n    'pending': 'info',\r\n    'running': 'warning',\r\n    'completed': 'success',\r\n    'failed': 'danger',\r\n    'cancelled': 'info'\r\n  }\r\n  return statusMap[status] || 'info'\r\n}\r\n\r\n// \r\nconst formatScheduleTime = (time: string) => {\r\n  try {\r\n    return new Date(time).toLocaleString('zh-CN', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })\r\n  } catch (error) {\r\n    return ''\r\n  }\r\n}\r\nconst friendLogs = ref<FriendLog[]>([])\r\n// \r\nconst loadFriendLogs = async () => {\r\n  try {\r\n    const logs = await getFriendRequestLogs()\r\n    friendLogs.value = logs\r\n    console.debug(':', logs)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n//  filteredLogs computed \r\nconst filteredLogs = computed(() => {\r\n  if (currentFunction.value === 'addFriend') {\r\n    return friendLogs.value.map(log => ({\r\n      id: log.task_id,\r\n      timestamp: log.time,\r\n      processed_count: log.processed_count,\r\n      tag: log.tag,\r\n      status: log.status || 'completed',\r\n      type: 'friend_request',\r\n      error: log.error,\r\n      progress: log.processed_count,\r\n      total: undefined,\r\n      params: {\r\n        content: ` ${log.processed_count} `,\r\n        scheduleTime: undefined,\r\n        progress: log.processed_count,\r\n        total: undefined,\r\n        greetingGroupId: undefined\r\n      } as LogParams\r\n    }))\r\n  } else if (currentFunction.value === 'comment') {\r\n    return momentLogs.value.map((log: MomentLog) => ({\r\n      id: log.timestamp,\r\n      timestamp: new Date(log.timestamp).getTime(),\r\n      taskType: 'comment',\r\n      status: 'completed',\r\n      publisher: log.publisher,\r\n      content: log.content,\r\n      comment_content: log.comment_content,\r\n      description: `${log.publisher} `,\r\n      progress: undefined,\r\n      total: undefined,\r\n      params: {\r\n        content: log.content,\r\n        scheduleTime: undefined,\r\n        progress: undefined,\r\n        total: undefined,\r\n        greetingGroupId: undefined\r\n      } as LogParams,\r\n      error: null\r\n    }))\r\n  } else if (currentFunction.value === 'activate') {\r\n    console.debug(\"\",taskLogs.value)\r\n    return taskLogs.value.map(log => ({\r\n      ...log,\r\n      progress: log.params?.progress,\r\n      total: log.params?.total,\r\n      params: {\r\n        content: log.params?.content || '',\r\n        scheduleTime: log.params?.scheduleTime,\r\n        contentType: log.params?.contentType,\r\n        progress: log.params?.progress,\r\n        total: log.params?.total,\r\n        greetingGroupId: log.params?.greetingGroupId\r\n      } as LogParams\r\n    }))\r\n  } else if (currentFunction.value === 'chatAnalysis') {\r\n    console.debug(\"\", taskLogs.value)\r\n    return taskLogs.value.map(log => ({\r\n      ...log,\r\n      params: {\r\n        total: log.params?.total || 0,\r\n        progress: log.params?.progress || 0\r\n      } as LogParams\r\n    }))\r\n  }\r\n  return taskLogs.value\r\n})\r\n// \r\nconst momentLogs = ref<MomentLog[]>([])\r\n// \r\nconst loadMomentLogs = async () => {\r\n  try {\r\n    const response = await fetch('/api/moment/interactions')\r\n    const result = await response.json()\r\n    if (result.success) {\r\n      console.debug(':', result)\r\n      momentLogs.value = result.data || []\r\n    } else {\r\n      console.error(':', result.error)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\nconst currentFunction = ref('comment')\r\nconst isRunning = ref(false)\r\n// const activateTasks = ref<ActivateTask[]>([])\r\n// const userTags = ref<UserTag[]>([])\r\nconst greetingGroups = ref<GreetingGroup[]>([])\r\nconst taskLogs = ref<LogItem[]>([])\r\n\r\n// \r\nconst loadTaskLogs = async () => {\r\n  try {\r\n    const response = await getTaskLogs()\r\n    taskLogs.value = response;\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    taskLogs.value = []\r\n  }\r\n}\r\n\r\nconst loadGreetingGroups = async () => {\r\n  try {\r\n    const result = await getConfig('greeting_config')\r\n    if (result?.data?.greeting_config?.greeting_config) {\r\n      const config = result.data.greeting_config.greeting_config\r\n      greetingGroups.value = config.map((group: any) => ({\r\n        id: group.name,\r\n        name: group.name,\r\n        greetings: Array.isArray(group.greetings) ? group.greetings : [] //  greetings \r\n      }))\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst handleFriendSwitchChange = async (val: string | number | boolean) => {\r\n  const originalValue = friendConfig.value.enabled  // \r\n  const value = Boolean(val)\r\n  \r\n  try {\r\n    const result = await toggleAutoAddFriend(value, friendConfig.value)\r\n    if (result.success) {\r\n      ElMessage.success(value ? '3' : '')\r\n      friendConfig.value.enabled = value  // \r\n      localStorage.setItem('friendConfig', JSON.stringify(friendConfig.value))\r\n      saveSopCache('friendConfig')\r\n    } else {\r\n      // \r\n      friendConfig.value.enabled = originalValue\r\n      friendConfig.value = { ...friendConfig.value }\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    // \r\n    friendConfig.value.enabled = originalValue\r\n    friendConfig.value = { ...friendConfig.value }\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst isLogVisible = ref(window.innerWidth > 650)\r\nconst handleResize = () => {\r\n  isLogVisible.value = window.innerWidth > 650\r\n}\r\nonMounted(async () => {\r\n  //\r\n  await loadCozeAgents()\r\n  // await loadTaskLogs()\r\n  await loadMomentLogs()\r\n  await loadUserTags()\r\n  await loadGreetingGroups()\r\n  await loadCommentConfig()\r\n\r\n\r\n  await loadFriendConfig()\r\n  await loadAddNewFriendConfig()\r\n  await loadRestTimeSettings()\r\n  handleResize() \r\n  // SVG\r\n  await preloadImages()\r\n  window.addEventListener('resize', handleResize)\r\n  await loadActiveInstancesForAddFriend()\r\n  await loadActiveInstances()\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', handleResize);\r\n})\r\n\r\nconst loadActiveInstances = async () => {\r\n  try {\r\n    const result = await getActiveInstances()\r\n    if (result.success) {\r\n      activeInstances.value = result.instances || []\r\n    }\r\n  } catch (e) {\r\n    console.error(':', e)\r\n  }\r\n}\r\n\r\nonActivated(() => {\r\n  loadActiveInstances()\r\n})\r\n\r\nconst currentInstanceNickname = computed(() => {\r\n  const list = activeInstances.value || []\r\n  const active = list.find(i => i.is_active)\r\n  return active ? active.nickname : (list[0]?.nickname || '')\r\n})\r\n\r\n// \r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result.success && result.data) {\r\n      const agents = Array.isArray(result.data) ? result.data : \r\n                    Array.isArray(result.data.agents) ? result.data.agents : []\r\n      \r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n      \r\n      // \r\n      const defaultAgent = cozeAgents.value.find(agent => agent.isDefault)\r\n      if (defaultAgent) {\r\n        commentConfig.value.agentId = defaultAgent.botId\r\n      } else if (cozeAgents.value.length > 0) {\r\n        commentConfig.value.agentId = cozeAgents.value[0].botId\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst loadCommentConfig = async () => {\r\n  try {\r\n    // \r\n    const savedConfig = localStorage.getItem('commentConfig')\r\n    if (savedConfig) {\r\n      commentConfig.value = JSON.parse(savedConfig)\r\n      return\r\n    }\r\n    await loadSopCache()\r\n    if (sopCache.value?.commentConfig) {\r\n      const cachedConfig = sopCache.value.commentConfig\r\n      //  selectedAccounts\r\n      const { selectedAccounts, ...restConfig } = cachedConfig\r\n      commentConfig.value = { \r\n        ...commentConfig.value,\r\n        ...restConfig,\r\n        enabled: false\r\n      }\r\n      return\r\n    }\r\n    const result = await getConfig('moment_settings')\r\n    if (result.success && result.data?.moment_settings) {\r\n      commentConfig.value = {\r\n        commentLimit: result.data.moment_settings.commentLimit,\r\n        perFriendLimit: result.data.moment_settings.perFriendLimit || 2,\r\n        autoLike: result.data.moment_settings.autoLike,\r\n        interactionMode: result.data.moment_settings.interactionMode || 'like_and_comment',\r\n        blacklist: result.data.moment_settings.blacklist || '',\r\n        agentId: result.data.moment_settings.agentId || commentConfig.value.agentId,\r\n        checkInterval:120,\r\n        reachLastPosition: 'stop',\r\n        enabled: false,\r\n        multiCycleEnabled: commentConfig.value.multiCycleEnabled || false,\r\n        selectedAccounts: Array.isArray(commentConfig.value.selectedAccounts) ? commentConfig.value.selectedAccounts : [],\r\n        selectedTags: [],//\r\n        selectedTagNames: []\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n// SOP\r\nconst sopCache = ref<any>(null)\r\nconst loadSopCache = async () => {\r\n  try {\r\n    if (!sopCache.value) {\r\n      const res = await getConfig('sop_cache')\r\n      if (res.success) {\r\n        sopCache.value = res.data || {}\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.error('SOP:', e)\r\n  }\r\n}\r\nconst saveSopCache = async (key: 'commentConfig' | 'addFriendConfig' | 'friendConfig') => {\r\n  try {\r\n    const res = await getConfig('sop_cache')\r\n    const base = (res.success && res.data) ? res.data : {}\r\n    \r\n    //  selectedAccounts\r\n    let configToCache = {}\r\n    if (key === 'commentConfig') {\r\n      const { selectedAccounts, ...rest } = commentConfig.value\r\n      configToCache = rest\r\n    } else {\r\n      configToCache = key === 'addFriendConfig' ? addFriendConfig.value : friendConfig.value\r\n    }\r\n\r\n    const payload = {\r\n      commentConfig: {\r\n        ...(base.commentConfig || {}),\r\n        ...(key === 'commentConfig' ? configToCache : {}),\r\n        enabled: false\r\n      },\r\n      addFriendConfig: {\r\n        ...(base.addFriendConfig || {}),\r\n        ...(key === 'addFriendConfig' ? addFriendConfig.value : {}),\r\n        enabled: false\r\n      },\r\n      friendConfig: {\r\n        ...(base.friendConfig || {}),\r\n        ...(key === 'friendConfig' ? friendConfig.value : {}),\r\n        enabled: false\r\n      }\r\n    }\r\n    await saveConfig('sop_cache', payload)\r\n  } catch (e) {\r\n    console.error('SOP:', e)\r\n  }\r\n}\r\n// \r\nconst saveCommentConfig = () => {\r\n  try {\r\n    localStorage.setItem('commentConfig', JSON.stringify(commentConfig.value))\r\n    saveSopCache('commentConfig')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst switchFunction = (func: string) => {\r\n  console.debug(':', func)\r\n  currentFunction.value = func\r\n  \r\n  if (func === 'addFriend') {\r\n    loadFriendLogs()\r\n  } else if (func === 'activate') {\r\n    loadTaskLogs()\r\n  } else if (func === 'addNewFriend') {\r\n    loadAddFriendLogs()\r\n    loadRemainingCount()\r\n  } else if (func === 'chatAnalysis') {\r\n    loadTaskLogs()\r\n  }\r\n}\r\n\r\n// \r\nconst loadAddFriendLogs = async () => {\r\n  try {\r\n    const logs = await getAddFriendLogs()\r\n    addFriendLogs.value = logs\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst loadRemainingCount = async () => {\r\n  try {\r\n    const result = await getRemainingFriendCount()\r\n    if (typeof result === 'object' && result !== null) {\r\n      remainingCount.value = result.remaining\r\n      todayAddedCount.value = result.today_added || 0\r\n    } else {\r\n      // \r\n      remainingCount.value = Number(result)\r\n      todayAddedCount.value = 0\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst loadFriendConfig = async () => {\r\n  try {\r\n    const savedConfig = localStorage.getItem('friendConfig')\r\n    if (savedConfig) {\r\n      friendConfig.value = JSON.parse(savedConfig)\r\n      return\r\n    }\r\n    await loadSopCache()\r\n    if (sopCache.value?.friendConfig) {\r\n      friendConfig.value = { ...friendConfig.value, ...sopCache.value.friendConfig, enabled: false }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst loadAddNewFriendConfig = async () => {\r\n  try {\r\n    const savedConfig = localStorage.getItem('addFriendConfig')\r\n    if (savedConfig) {\r\n      addFriendConfig.value = JSON.parse(savedConfig)\r\n      return\r\n    }\r\n    await loadSopCache()\r\n    if (sopCache.value?.addFriendConfig) {\r\n      addFriendConfig.value = { ...addFriendConfig.value, ...sopCache.value.addFriendConfig, enabled: false }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst formatTimestamp = (timestamp: string | undefined) => {\r\n  try {\r\n    if (!timestamp) {\r\n      return ''\r\n    }\r\n\r\n    //  Z UTC \r\n    const timeStr = timestamp.endsWith('Z') ? \r\n      timestamp : \r\n      timestamp + (timestamp.includes('T') ? 'Z' : '')\r\n\r\n    //  UTC  UTC \r\n    const date = new Date(timeStr)\r\n    const utcYear = date.getUTCFullYear()\r\n    const utcMonth = String(date.getUTCMonth() + 1).padStart(2, '0')\r\n    const utcDay = String(date.getUTCDate()).padStart(2, '0')\r\n    const utcHours = String(date.getUTCHours()).padStart(2, '0')\r\n    const utcMinutes = String(date.getUTCMinutes()).padStart(2, '0')\r\n    const utcSeconds = String(date.getUTCSeconds()).padStart(2, '0')\r\n\r\n    return `${utcYear}-${utcMonth}-${utcDay} ${utcHours}:${utcMinutes}:${utcSeconds}`\r\n  } catch (error) {\r\n    console.error(':', error, 'timestamp:', timestamp)\r\n    return timestamp || ''\r\n  }\r\n}\r\n\r\nwatch(\r\n  () => route.query.function,\r\n  (newValue) => {\r\n    console.debug(\"AutoSOP==>watch\", newValue)\r\n    console.debug(\"AutoSOP:\", {\r\n      value: newValue,\r\n      type: typeof newValue,\r\n      isString: typeof newValue === 'string',\r\n      isValid: ['comment', 'activate', 'addFriend', 'autofollow'].includes(newValue as string)\r\n    })\r\n    \r\n    if (newValue && typeof newValue === 'string' && ['comment', 'activate', 'addFriend', 'autofollow'].includes(newValue)) {\r\n      console.debug('AutoSOP')\r\n      try {\r\n        console.debug(':', currentFunction.value)\r\n        // autofollowautoFollow\r\n        const targetFunction = newValue === 'autofollow' ? 'autoFollow' : newValue\r\n        currentFunction.value = targetFunction\r\n        console.debug('AutoSOP:', currentFunction.value)\r\n        \r\n        if (newValue === 'addFriend') {\r\n          console.debug('AutoSOP')\r\n          loadFriendLogs()\r\n        } else if (newValue === 'activate') {\r\n          console.debug('AutoSOP')\r\n          loadTaskLogs()\r\n        } else if (newValue === 'autofollow') {\r\n          console.debug('AutoSOP')\r\n          // \r\n        }\r\n      } catch (error) {\r\n        console.error('AutoSOP:', error)\r\n      }\r\n    } else {\r\n      console.debug('AutoSOP')\r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input_number = _resolveComponent(\"el-input-number\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\")!\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n  const _directive_tooltip = _resolveDirective(\"tooltip\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _cache[52] || (_cache[52] = _createElementVNode(\"div\", { class: \"section-title\" }, \"\", -1)),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"function-item\", { active: currentFunction.value === 'comment' }]),\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (switchFunction('comment'))),\n            \"data-function\": \"comment\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"img\", {\n                src: _unref(getIconPath)('comment'),\n                class: _normalizeClass([\"icon\", { 'active-icon': currentFunction.value === 'comment' }]),\n                onError: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_unref(handleImageError) && _unref(handleImageError)(...args))),\n                onLoad: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_unref(handleImageLoad) && _unref(handleImageLoad)(...args))),\n                alt: \"\"\n              }, null, 42, _hoisted_5)\n            ]),\n            _cache[47] || (_cache[47] = _createElementVNode(\"div\", { class: \"function-tooltip\" }, \"\", -1))\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"function-item\", { active: currentFunction.value === 'activate' }]),\n            onClick: _cache[5] || (_cache[5] = ($event: any) => (switchFunction('activate'))),\n            \"data-function\": \"activate\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_6, [\n              _createElementVNode(\"img\", {\n                src: _unref(getIconPath)('activate'),\n                class: _normalizeClass([\"icon\", { 'active-icon': currentFunction.value === 'activate' }]),\n                onError: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_unref(handleImageError) && _unref(handleImageError)(...args))),\n                onLoad: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_unref(handleImageLoad) && _unref(handleImageLoad)(...args))),\n                alt: \"\"\n              }, null, 42, _hoisted_7)\n            ]),\n            _cache[48] || (_cache[48] = _createElementVNode(\"div\", { class: \"function-tooltip\" }, \"\", -1))\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"function-item\", { active: currentFunction.value === 'addFriend' }]),\n            onClick: _cache[8] || (_cache[8] = ($event: any) => (switchFunction('addFriend'))),\n            \"data-function\": \"addFriend\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_8, [\n              _createElementVNode(\"img\", {\n                src: _unref(getIconPath)('addFriend'),\n                class: _normalizeClass([\"icon\", { 'active-icon': currentFunction.value === 'addFriend' }]),\n                onError: _cache[6] || (_cache[6] = \n//@ts-ignore\n(...args) => (_unref(handleImageError) && _unref(handleImageError)(...args))),\n                onLoad: _cache[7] || (_cache[7] = \n//@ts-ignore\n(...args) => (_unref(handleImageLoad) && _unref(handleImageLoad)(...args))),\n                alt: \"\"\n              }, null, 42, _hoisted_9)\n            ]),\n            _cache[49] || (_cache[49] = _createElementVNode(\"div\", { class: \"function-tooltip\" }, \"\", -1))\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"function-item\", { active: currentFunction.value === 'addNewFriend' }]),\n            onClick: _cache[11] || (_cache[11] = ($event: any) => (switchFunction('addNewFriend'))),\n            \"data-function\": \"addNewFriend\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_10, [\n              _createElementVNode(\"img\", {\n                src: _unref(getIconPath)('addNewFriend'),\n                class: _normalizeClass([\"icon\", { 'active-icon': currentFunction.value === 'addNewFriend' }]),\n                onError: _cache[9] || (_cache[9] = \n//@ts-ignore\n(...args) => (_unref(handleImageError) && _unref(handleImageError)(...args))),\n                onLoad: _cache[10] || (_cache[10] = \n//@ts-ignore\n(...args) => (_unref(handleImageLoad) && _unref(handleImageLoad)(...args))),\n                alt: \"\"\n              }, null, 42, _hoisted_11)\n            ]),\n            _cache[50] || (_cache[50] = _createElementVNode(\"div\", { class: \"function-tooltip\" }, \"\", -1))\n          ], 2),\n          _createElementVNode(\"div\", {\n            class: _normalizeClass([\"function-item\", { active: currentFunction.value === 'autoFollow' }]),\n            onClick: _cache[14] || (_cache[14] = ($event: any) => (switchFunction('autoFollow'))),\n            \"data-function\": \"autoFollow\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_12, [\n              _createElementVNode(\"img\", {\n                src: _unref(getIconPath)('autoFollow'),\n                class: _normalizeClass([\"icon\", { 'active-icon': currentFunction.value === 'autoFollow' }]),\n                onError: _cache[12] || (_cache[12] = \n//@ts-ignore\n(...args) => (_unref(handleImageError) && _unref(handleImageError)(...args))),\n                onLoad: _cache[13] || (_cache[13] = \n//@ts-ignore\n(...args) => (_unref(handleImageLoad) && _unref(handleImageLoad)(...args))),\n                alt: \"\"\n              }, null, 42, _hoisted_13)\n            ]),\n            _cache[51] || (_cache[51] = _createElementVNode(\"div\", { class: \"function-tooltip\" }, \"\", -1))\n          ], 2)\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_14, [\n        _createElementVNode(\"div\", _hoisted_15, [\n          (currentFunction.value === 'activate')\n            ? (_openBlock(), _createBlock(MassSendingPanel, {\n                key: 0,\n                \"greeting-groups\": greetingGroups.value,\n                \"current-instance-nickname\": currentInstanceNickname.value\n              }, null, 8, [\"greeting-groups\", \"current-instance-nickname\"]))\n            : _createCommentVNode(\"\", true),\n          (currentFunction.value === 'comment')\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                _cache[59] || (_cache[59] = _createElementVNode(\"div\", { class: \"section-title\" }, \"\", -1)),\n                _createElementVNode(\"div\", _hoisted_16, [\n                  _createVNode(_component_el_form, {\n                    model: commentConfig.value,\n                    \"label-width\": \"120px\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _withDirectives(_createVNode(_component_el_input_number, {\n                            modelValue: commentConfig.value.commentLimit,\n                            \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((commentConfig.value.commentLimit) = $event)),\n                            min: 1,\n                            max: 1000,\n                            placeholder: \"\"\n                          }, null, 8, [\"modelValue\"]), [\n                            [_directive_tooltip, '']\n                          ])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _withDirectives(_createVNode(_component_el_input_number, {\n                            modelValue: commentConfig.value.perFriendLimit,\n                            \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => ((commentConfig.value.perFriendLimit) = $event)),\n                            min: 1,\n                            max: 10,\n                            placeholder: \"\"\n                          }, null, 8, [\"modelValue\"]), [\n                            [_directive_tooltip, '']\n                          ])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"()\" }, {\n                        default: _withCtx(() => [\n                          _withDirectives(_createVNode(_component_el_input_number, {\n                            modelValue: commentConfig.value.checkInterval,\n                            \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => ((commentConfig.value.checkInterval) = $event)),\n                            min: 1,\n                            max: 1440,\n                            \"default-value\": 120,\n                            placeholder: \"\"\n                          }, null, 8, [\"modelValue\"]), [\n                            [_directive_tooltip, '']\n                          ])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_select, {\n                            modelValue: commentConfig.value.reachLastPosition,\n                            \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event: any) => ((commentConfig.value.reachLastPosition) = $event)),\n                            placeholder: \"\"\n                          }, {\n                            default: _withCtx(() => [\n                              _createVNode(_component_el_option, {\n                                label: \"\",\n                                value: \"stop\"\n                              }),\n                              _createVNode(_component_el_option, {\n                                label: \"\",\n                                value: \"skip\"\n                              })\n                            ]),\n                            _: 1\n                          }, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_select, {\n                            modelValue: commentConfig.value.interactionMode,\n                            \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event: any) => ((commentConfig.value.interactionMode) = $event)),\n                            placeholder: \"\"\n                          }, {\n                            default: _withCtx(() => [\n                              _createVNode(_component_el_option, {\n                                label: \"\",\n                                value: \"like_only\"\n                              }),\n                              _createVNode(_component_el_option, {\n                                label: \"\",\n                                value: \"comment_only\"\n                              }),\n                              _createVNode(_component_el_option, {\n                                label: \"&\",\n                                value: \"like_and_comment\"\n                              })\n                            ]),\n                            _: 1\n                          }, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"()\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_button, {\n                            type: \"default\",\n                            plain: \"\",\n                            onClick: openTagDialog,\n                            style: {\"background\":\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\"border\":\"none\",\"color\":\"white\",\"padding\":\"8px 16px\",\"border-radius\":\"6px\",\"font-weight\":\"500\",\"transition\":\"all 0.3s ease\",\"box-shadow\":\"0 2px 4px rgba(102, 126, 234, 0.3)\"},\n                            onMouseenter: _cache[20] || (_cache[20] = ($event: any) => {$event.target.style.transform = 'translateY(-1px)'; $event.target.style.boxShadow = '0 4px 8px rgba(102, 126, 234, 0.4)'}),\n                            onMouseleave: _cache[21] || (_cache[21] = ($event: any) => {$event.target.style.transform = 'translateY(0)'; $event.target.style.boxShadow = '0 2px 4px rgba(102, 126, 234, 0.3)'})\n                          }, {\n                            default: _withCtx(() => [...(_cache[53] || (_cache[53] = [\n                              _createElementVNode(\"i\", {\n                                class: \"el-icon-price-tag\",\n                                style: {\"margin-right\":\"4px\"}\n                              }, null, -1),\n                              _createTextVNode(\"  \", -1)\n                            ]))]),\n                            _: 1\n                          })\n                        ]),\n                        _: 1\n                      }),\n                      (commentConfig.value.selectedTagNames.length > 0)\n                        ? (_openBlock(), _createBlock(_component_el_form_item, {\n                            key: 0,\n                            label: \"\"\n                          }, {\n                            default: _withCtx(() => [\n                              _createElementVNode(\"div\", _hoisted_17, [\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                  _cache[54] || (_cache[54] = _createElementVNode(\"i\", {\n                                    class: \"el-icon-collection-tag\",\n                                    style: {\"margin-right\":\"6px\",\"color\":\"#7b1fa2\"}\n                                  }, null, -1)),\n                                  _cache[55] || (_cache[55] = _createElementVNode(\"span\", { style: {\"font-size\":\"13px\",\"color\":\"#7b1fa2\",\"margin-right\":\"6px\"} }, \"\", -1)),\n                                  (commentConfig.value.selectedTagNames.length <= 3)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_19, _toDisplayString(commentConfig.value.selectedTagNames.join('')), 1))\n                                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_20, _toDisplayString(commentConfig.value.selectedTagNames.slice(0, 3).join('')) + \"...\" + _toDisplayString(commentConfig.value.selectedTagNames.length) + \" \", 1))\n                                ])\n                              ])\n                            ]),\n                            _: 1\n                          }))\n                        : _createCommentVNode(\"\", true),\n                      _createVNode(_component_el_form_item, {\n                        label: \"\",\n                        class: \"custom-label-form-item last-form-item\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_select, {\n                            modelValue: commentConfig.value.agentId,\n                            \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event: any) => ((commentConfig.value.agentId) = $event)),\n                            placeholder: \"\"\n                          }, {\n                            default: _withCtx(() => [\n                              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cozeAgents.value, (agent) => {\n                                return (_openBlock(), _createBlock(_component_el_option, {\n                                  key: agent.botId,\n                                  label: agent.name,\n                                  value: agent.botId\n                                }, null, 8, [\"label\", \"value\"]))\n                              }), 128))\n                            ]),\n                            _: 1\n                          }, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, {\n                        label: \"\",\n                        class: \"align-right-form-item\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_checkbox, {\n                            modelValue: commentConfig.value.multiCycleEnabled,\n                            \"onUpdate:modelValue\": _cache[23] || (_cache[23] = ($event: any) => ((commentConfig.value.multiCycleEnabled) = $event)),\n                            onChange: onCommentMultiCycleToggle,\n                            disabled: commentConfig.value.enabled\n                          }, {\n                            default: _withCtx(() => [...(_cache[56] || (_cache[56] = [\n                              _createTextVNode(\"  \", -1)\n                            ]))]),\n                            _: 1\n                          }, 8, [\"modelValue\", \"disabled\"])\n                        ]),\n                        _: 1\n                      }),\n                      (commentConfig.value.multiCycleEnabled)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 1,\n                            class: _normalizeClass([\"multi-cycle-box\", { disabled: commentConfig.value.enabled }]),\n                            \"aria-disabled\": \"commentConfig.enabled\"\n                          }, [\n                            _cache[57] || (_cache[57] = _createElementVNode(\"div\", { class: \"multi-cycle-tip\" }, \"\", -1)),\n                            _createVNode(_component_el_checkbox_group, {\n                              modelValue: commentConfig.value.selectedAccounts,\n                              \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event: any) => ((commentConfig.value.selectedAccounts) = $event))\n                            }, {\n                              default: _withCtx(() => [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(activeInstances.value, (inst) => {\n                                  return (_openBlock(), _createBlock(_component_el_checkbox, {\n                                    key: inst.account_id,\n                                    label: inst.account_id,\n                                    class: \"instance-item\",\n                                    disabled: commentConfig.value.enabled\n                                  }, {\n                                    default: _withCtx(() => [\n                                      _createTextVNode(_toDisplayString(inst.nickname), 1)\n                                    ]),\n                                    _: 2\n                                  }, 1032, [\"label\", \"disabled\"]))\n                                }), 128))\n                              ]),\n                              _: 1\n                            }, 8, [\"modelValue\"])\n                          ], 2))\n                        : _createCommentVNode(\"\", true),\n                      _createVNode(_component_el_form_item, null, {\n                        default: _withCtx(() => [\n                          _createElementVNode(\"div\", _hoisted_21, [\n                            _createVNode(CosmicSwitch, {\n                              modelValue: commentConfig.value.enabled,\n                              \"onUpdate:modelValue\": _cache[25] || (_cache[25] = ($event: any) => ((commentConfig.value.enabled) = $event)),\n                              loading: isRunning.value,\n                              onChange: handleSwitchChange,\n                              \"active-text\": \"\",\n                              \"inactive-text\": \"\"\n                            }, null, 8, [\"modelValue\", \"loading\"])\n                          ])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  }, 8, [\"model\"]),\n                  (commentConfig.value.enabled)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                        _createVNode(_component_el_icon, null, {\n                          default: _withCtx(() => [\n                            _createVNode(_unref(InfoFilled))\n                          ]),\n                          _: 1\n                        }),\n                        _cache[58] || (_cache[58] = _createElementVNode(\"span\", null, \"shift\", -1))\n                      ]))\n                    : _createCommentVNode(\"\", true)\n                ])\n              ], 64))\n            : _createCommentVNode(\"\", true),\n          (currentFunction.value === 'addFriend')\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                _cache[60] || (_cache[60] = _createElementVNode(\"div\", { class: \"section-title\" }, \"\", -1)),\n                (friendRequestExecutionTime.value)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [\n                      _createVNode(_component_el_icon, null, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(InfoFilled))\n                        ]),\n                        _: 1\n                      }),\n                      _createElementVNode(\"span\", null, _toDisplayString(friendRequestExecutionTime.value), 1)\n                    ]))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"div\", _hoisted_24, [\n                  _createVNode(_component_el_form, {\n                    model: friendConfig.value,\n                    \"label-width\": \"120px\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input_number, {\n                            modelValue: friendConfig.value.maxFriendsPerDay,\n                            \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event: any) => ((friendConfig.value.maxFriendsPerDay) = $event)),\n                            min: 1,\n                            max: 100,\n                            step: 1\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"()\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input_number, {\n                            modelValue: friendConfig.value.checkInterval,\n                            \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event: any) => ((friendConfig.value.checkInterval) = $event)),\n                            min: 5,\n                            max: 120,\n                            step: 5\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input_number, {\n                            modelValue: friendConfig.value.maxProcessPerTime,\n                            \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event: any) => ((friendConfig.value.maxProcessPerTime) = $event)),\n                            min: 1,\n                            max: 20,\n                            step: 1\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_select, {\n                            modelValue: friendConfig.value.greetingGroupId,\n                            \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event: any) => ((friendConfig.value.greetingGroupId) = $event)),\n                            placeholder: \"\"\n                          }, {\n                            default: _withCtx(() => [\n                              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(greetingGroups.value, (group) => {\n                                return (_openBlock(), _createBlock(_component_el_option, {\n                                  key: group.id,\n                                  label: group.name,\n                                  value: group.id\n                                }, null, 8, [\"label\", \"value\"]))\n                              }), 128))\n                            ]),\n                            _: 1\n                          }, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_select, {\n                            modelValue: friendConfig.value.targetGroup,\n                            \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event: any) => ((friendConfig.value.targetGroup) = $event)),\n                            placeholder: \"\",\n                            filterable: \"\",\n                            onFocus: loadGroupList\n                          }, {\n                            default: _withCtx(() => [\n                              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(groupList.value, (group) => {\n                                return (_openBlock(), _createBlock(_component_el_option, {\n                                  key: group.name,\n                                  label: group.name,\n                                  value: group.name\n                                }, null, 8, [\"label\", \"value\"]))\n                              }), 128))\n                            ]),\n                            _: 1\n                          }, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, {\n                        label: \"\",\n                        class: \"friend-tag-input\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input, {\n                            modelValue: friendConfig.value.tag,\n                            \"onUpdate:modelValue\": _cache[31] || (_cache[31] = ($event: any) => ((friendConfig.value.tag) = $event)),\n                            placeholder: \"\",\n                            maxlength: 20,\n                            onInput: validateTag\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, null, {\n                        default: _withCtx(() => [\n                          _createVNode(CosmicSwitch, {\n                            modelValue: friendConfig.value.enabled,\n                            \"onUpdate:modelValue\": _cache[32] || (_cache[32] = ($event: any) => ((friendConfig.value.enabled) = $event)),\n                            loading: isRunning.value,\n                            \"active-text\": \"\",\n                            \"inactive-text\": \"\",\n                            onChange: handleFriendSwitchChange\n                          }, null, 8, [\"modelValue\", \"loading\"])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  }, 8, [\"model\"])\n                ])\n              ], 64))\n            : _createCommentVNode(\"\", true),\n          (currentFunction.value === 'addNewFriend')\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                _createElementVNode(\"div\", _hoisted_25, [\n                  _cache[63] || (_cache[63] = _createElementVNode(\"span\", null, \"\", -1)),\n                  _createElementVNode(\"div\", _hoisted_26, [\n                    _createVNode(_component_el_button, {\n                      type: \"primary\",\n                      onClick: showImportDialog\n                    }, {\n                      default: _withCtx(() => [...(_cache[61] || (_cache[61] = [\n                        _createTextVNode(\"  \", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_button, {\n                      type: \"info\",\n                      onClick: showFriendList\n                    }, {\n                      default: _withCtx(() => [...(_cache[62] || (_cache[62] = [\n                        _createTextVNode(\"  \", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_27, \"  \" + _toDisplayString(todayAddedCount.value) + \"  \" + _toDisplayString(remainingCount.value) + \"  \", 1),\n                (addFriendExecutionTime.value)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [\n                      _createVNode(_component_el_icon, null, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(InfoFilled))\n                        ]),\n                        _: 1\n                      }),\n                      _createElementVNode(\"span\", null, _toDisplayString(addFriendExecutionTime.value), 1)\n                    ]))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"div\", _hoisted_29, [\n                  _createVNode(_component_el_form, {\n                    model: addFriendConfig.value,\n                    \"label-width\": \"120px\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input_number, {\n                            modelValue: addFriendConfig.value.maxFriendsPerDay,\n                            \"onUpdate:modelValue\": _cache[33] || (_cache[33] = ($event: any) => ((addFriendConfig.value.maxFriendsPerDay) = $event)),\n                            min: 1,\n                            max: 100,\n                            step: 1\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"()\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input_number, {\n                            modelValue: addFriendConfig.value.interval,\n                            \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event: any) => ((addFriendConfig.value.interval) = $event)),\n                            min: 1,\n                            max: 120,\n                            step: 5\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input_number, {\n                            modelValue: addFriendConfig.value.batchSize,\n                            \"onUpdate:modelValue\": _cache[35] || (_cache[35] = ($event: any) => ((addFriendConfig.value.batchSize) = $event)),\n                            min: 1,\n                            max: 10,\n                            step: 1\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_input, {\n                            modelValue: addFriendConfig.value.verifyMessage,\n                            \"onUpdate:modelValue\": _cache[36] || (_cache[36] = ($event: any) => ((addFriendConfig.value.verifyMessage) = $event)),\n                            type: \"textarea\",\n                            rows: 2,\n                            placeholder: \"\"\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_el_form_item, { label: \"\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_checkbox, {\n                            modelValue: addFriendConfig.value.multiCycleEnabled,\n                            \"onUpdate:modelValue\": _cache[37] || (_cache[37] = ($event: any) => ((addFriendConfig.value.multiCycleEnabled) = $event)),\n                            onChange: onMultiCycleToggle,\n                            disabled: addFriendConfig.value.enabled\n                          }, {\n                            default: _withCtx(() => [...(_cache[64] || (_cache[64] = [\n                              _createTextVNode(\"  \", -1)\n                            ]))]),\n                            _: 1\n                          }, 8, [\"modelValue\", \"disabled\"])\n                        ]),\n                        _: 1\n                      }),\n                      (addFriendConfig.value.multiCycleEnabled)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: _normalizeClass([\"multi-cycle-box\", { disabled: addFriendConfig.value.enabled }]),\n                            \"aria-disabled\": \"addFriendConfig.enabled\"\n                          }, [\n                            _cache[65] || (_cache[65] = _createElementVNode(\"div\", { class: \"multi-cycle-tip\" }, \"\", -1)),\n                            _createVNode(_component_el_checkbox_group, {\n                              modelValue: addFriendConfig.value.selectedAccounts,\n                              \"onUpdate:modelValue\": _cache[38] || (_cache[38] = ($event: any) => ((addFriendConfig.value.selectedAccounts) = $event))\n                            }, {\n                              default: _withCtx(() => [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(activeInstances.value, (inst) => {\n                                  return (_openBlock(), _createBlock(_component_el_checkbox, {\n                                    key: inst.account_id,\n                                    label: inst.account_id,\n                                    class: \"instance-item\",\n                                    disabled: addFriendConfig.value.enabled\n                                  }, {\n                                    default: _withCtx(() => [\n                                      _createTextVNode(_toDisplayString(inst.nickname), 1)\n                                    ]),\n                                    _: 2\n                                  }, 1032, [\"label\", \"disabled\"]))\n                                }), 128))\n                              ]),\n                              _: 1\n                            }, 8, [\"modelValue\"])\n                          ], 2))\n                        : _createCommentVNode(\"\", true),\n                      _createVNode(_component_el_form_item, null, {\n                        default: _withCtx(() => [\n                          _createVNode(CosmicSwitch, {\n                            modelValue: addFriendConfig.value.enabled,\n                            \"onUpdate:modelValue\": _cache[39] || (_cache[39] = ($event: any) => ((addFriendConfig.value.enabled) = $event)),\n                            loading: isRunning.value,\n                            \"active-text\": \"\",\n                            \"inactive-text\": \"\",\n                            onChange: handleAddFriendSwitchChange\n                          }, null, 8, [\"modelValue\", \"loading\"])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  }, 8, [\"model\"])\n                ])\n              ], 64))\n            : _createCommentVNode(\"\", true),\n          (currentFunction.value === 'autoFollow')\n            ? (_openBlock(), _createBlock(AutoFollowTaskList, {\n                key: 4,\n                ref_key: \"autoFollowTaskListRef\",\n                ref: autoFollowTaskListRef\n              }, null, 512))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"log-section\", { 'hidden': !isLogVisible.value }])\n        }, [\n          _cache[70] || (_cache[70] = _createElementVNode(\"div\", { class: \"section-title\" }, \"\", -1)),\n          _createElementVNode(\"div\", _hoisted_30, [\n            _createVNode(_component_el_scrollbar, null, {\n              default: _withCtx(() => [\n                (currentFunction.value === 'comment')\n                  ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                      (momentLogs.value.length > 0)\n                        ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(momentLogs.value, (log) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                              key: log.id,\n                              class: \"log-item moment-log\"\n                            }, [\n                              _createElementVNode(\"div\", _hoisted_31, _toDisplayString(formatTimestamp(log.timestamp)), 1),\n                              _createElementVNode(\"div\", _hoisted_32, [\n                                _createElementVNode(\"div\", _hoisted_33, [\n                                  _createVNode(_component_el_icon, null, {\n                                    default: _withCtx(() => [\n                                      _createVNode(_unref(User))\n                                    ]),\n                                    _: 1\n                                  }),\n                                  _createElementVNode(\"span\", null, _toDisplayString(log.publisher), 1)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_34, _toDisplayString(log.content), 1),\n                                _createElementVNode(\"div\", _hoisted_35, [\n                                  (log.type.includes('like'))\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_36, \" \"))\n                                    : _createCommentVNode(\"\", true),\n                                  (log.type.includes('comment') && log.comment_content && log.comment_content.trim() !== '')\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_37, [\n                                        _createElementVNode(\"span\", _hoisted_38, \"AI\" + _toDisplayString(log.comment_content), 1)\n                                      ]))\n                                    : _createCommentVNode(\"\", true)\n                                ])\n                              ])\n                            ]))\n                          }), 128))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_39, [...(_cache[66] || (_cache[66] = [\n                            _createElementVNode(\"img\", {\n                              src: \"/icon/empty.svg\",\n                              alt: \"\",\n                              class: \"empty-icon\"\n                            }, null, -1),\n                            _createElementVNode(\"div\", { class: \"empty-text\" }, \"\", -1)\n                          ]))]))\n                    ], 64))\n                  : (currentFunction.value === 'activate')\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        (filteredLogs.value.length > 0)\n                          ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(filteredLogs.value, (log) => {\n                              return (_openBlock(), _createElementBlock(\"div\", {\n                                key: log.id,\n                                class: \"log-item task-log\"\n                              }, [\n                                _createElementVNode(\"div\", _hoisted_40, [\n                                  _createElementVNode(\"div\", _hoisted_41, [\n                                    _createElementVNode(\"span\", _hoisted_42, _toDisplayString(new Date(log.timestamp).toLocaleString()), 1),\n                                    _createVNode(_component_el_tag, {\n                                      type: getStatusType(log.status),\n                                      size: \"small\"\n                                    }, {\n                                      default: _withCtx(() => [\n                                        _createTextVNode(_toDisplayString(getStatusText(log.status)), 1)\n                                      ]),\n                                      _: 2\n                                    }, 1032, [\"type\"])\n                                  ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_43, [\n                                  _createElementVNode(\"div\", _hoisted_44, [\n                                    (log.progress !== undefined)\n                                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_45, \"  \" + _toDisplayString(log.total) + \"  \" + _toDisplayString(log.progress) + \"  \", 1))\n                                      : _createCommentVNode(\"\", true),\n                                    _createElementVNode(\"div\", _hoisted_46, \" \" + _toDisplayString(log.params?.contentType === 'agent' ? '' : ''), 1),\n                                    (log.params?.scheduleTime)\n                                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47, \" \" + _toDisplayString(formatScheduleTime(log.params.scheduleTime)), 1))\n                                      : _createCommentVNode(\"\", true)\n                                  ]),\n                                  (log.error)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_48, [\n                                        _createVNode(_component_el_icon, null, {\n                                          default: _withCtx(() => [\n                                            _createVNode(_unref(Warning))\n                                          ]),\n                                          _: 1\n                                        }),\n                                        _createElementVNode(\"span\", null, _toDisplayString(log.error), 1)\n                                      ]))\n                                    : _createCommentVNode(\"\", true)\n                                ])\n                              ]))\n                            }), 128))\n                          : (_openBlock(), _createElementBlock(\"div\", _hoisted_49, [...(_cache[67] || (_cache[67] = [\n                              _createElementVNode(\"img\", {\n                                src: \"/icon/empty.svg\",\n                                alt: \"\",\n                                class: \"empty-icon\"\n                              }, null, -1),\n                              _createElementVNode(\"div\", { class: \"empty-text\" }, \"\", -1)\n                            ]))]))\n                      ], 64))\n                    : (currentFunction.value === 'addFriend')\n                      ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                          (friendLogs.value.length > 0)\n                            ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(friendLogs.value, (log) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                  key: log.task_id,\n                                  class: \"log-item friend-log\"\n                                }, [\n                                  _createElementVNode(\"div\", _hoisted_50, [\n                                    _createElementVNode(\"div\", _hoisted_51, [\n                                      _createElementVNode(\"span\", _hoisted_52, _toDisplayString(formatTimestamp(log.time)), 1),\n                                      _createVNode(_component_el_tag, {\n                                        type: getStatusType(log.status),\n                                        size: \"small\"\n                                      }, {\n                                        default: _withCtx(() => [\n                                          _createTextVNode(_toDisplayString(getStatusText(log.status)), 1)\n                                        ]),\n                                        _: 2\n                                      }, 1032, [\"type\"])\n                                    ])\n                                  ]),\n                                  _createElementVNode(\"div\", _hoisted_53, [\n                                    _createElementVNode(\"div\", _hoisted_54, [\n                                      _createElementVNode(\"div\", _hoisted_55, \"  \" + _toDisplayString(log.processed_count) + \"  \", 1),\n                                      (log.tag)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_56, [\n                                            _createVNode(_component_el_icon, null, {\n                                              default: _withCtx(() => [\n                                                _createVNode(_unref(PriceTag))\n                                              ]),\n                                              _: 1\n                                            }),\n                                            _createElementVNode(\"span\", null, \": \" + _toDisplayString(log.tag), 1)\n                                          ]))\n                                        : _createCommentVNode(\"\", true)\n                                    ])\n                                  ])\n                                ]))\n                              }), 128))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_57, [...(_cache[68] || (_cache[68] = [\n                                _createElementVNode(\"img\", {\n                                  src: \"/icon/empty.svg\",\n                                  alt: \"\",\n                                  class: \"empty-icon\"\n                                }, null, -1),\n                                _createElementVNode(\"div\", { class: \"empty-text\" }, \"\", -1)\n                              ]))]))\n                        ], 64))\n                      : (currentFunction.value === 'addNewFriend')\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                            (addFriendLogs.value.length > 0)\n                              ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(addFriendLogs.value, (log) => {\n                                  return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: log.task_id,\n                                    class: \"log-item friend-log\"\n                                  }, [\n                                    _createElementVNode(\"div\", _hoisted_58, [\n                                      _createElementVNode(\"div\", _hoisted_59, [\n                                        _createElementVNode(\"span\", _hoisted_60, _toDisplayString(formatTimestamp(log.time)), 1)\n                                      ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_61, [\n                                      _createElementVNode(\"div\", _hoisted_62, [\n                                        _createElementVNode(\"div\", _hoisted_63, [\n                                          _createElementVNode(\"span\", null, \" \" + _toDisplayString(log.attempt_count) + \"  \" + _toDisplayString(log.processed_count) + \" \", 1)\n                                        ]),\n                                        (log.tag)\n                                          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_64, [\n                                              _createElementVNode(\"span\", _hoisted_65, \"\" + _toDisplayString(log.tag), 1)\n                                            ]))\n                                          : _createCommentVNode(\"\", true)\n                                      ])\n                                    ])\n                                  ]))\n                                }), 128))\n                              : (_openBlock(), _createElementBlock(\"div\", _hoisted_66, [...(_cache[69] || (_cache[69] = [\n                                  _createElementVNode(\"img\", {\n                                    src: \"/icon/empty.svg\",\n                                    alt: \"\",\n                                    class: \"empty-icon\"\n                                  }, null, -1),\n                                  _createElementVNode(\"div\", { class: \"empty-text\" }, \"\", -1)\n                                ]))]))\n                          ], 64))\n                        : (currentFunction.value === 'autoFollow')\n                          ? (_openBlock(), _createBlock(AutoFollowLogs, {\n                              key: 4,\n                              ref_key: \"autoFollowLogsRef\",\n                              ref: autoFollowLogsRef\n                            }, null, 512))\n                          : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            })\n          ])\n        ], 2)\n      ]),\n      _createVNode(ImportFriendListDialog, {\n        visible: importDialogVisible.value,\n        \"onUpdate:visible\": _cache[40] || (_cache[40] = ($event: any) => ((importDialogVisible).value = $event)),\n        cozeAgents: cozeAgents.value,\n        onImport: handleImportFriendList,\n        onImportByAgent: handleImportByAgent\n      }, null, 8, [\"visible\", \"cozeAgents\"])\n    ]),\n    _createVNode(FriendListDialog, {\n      visible: friendListVisible.value,\n      \"onUpdate:visible\": _cache[41] || (_cache[41] = ($event: any) => ((friendListVisible).value = $event)),\n      onRefresh: loadRemainingCount\n    }, null, 8, [\"visible\"]),\n    _createVNode(_component_el_dialog, {\n      title: \"\",\n      modelValue: authDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[44] || (_cache[44] = ($event: any) => ((authDialogVisible).value = $event)),\n      width: \"400px\"\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_67, [\n          _createVNode(_component_el_alert, {\n            title: \"\",\n            type: \"info\",\n            description: \"\",\n            closable: false,\n            \"show-icon\": \"\"\n          }),\n          _createElementVNode(\"div\", _hoisted_68, [\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              onClick: openAuthUrl\n            }, {\n              default: _withCtx(() => [...(_cache[71] || (_cache[71] = [\n                _createTextVNode(\"\", -1)\n              ]))]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              onClick: _cache[42] || (_cache[42] = ($event: any) => (authDialogVisible.value = false))\n            }, {\n              default: _withCtx(() => [...(_cache[72] || (_cache[72] = [\n                _createTextVNode(\"\", -1)\n              ]))]),\n              _: 1\n            }),\n            (hasClickedAuth.value)\n              ? (_openBlock(), _createBlock(_component_el_button, {\n                  key: 0,\n                  type: \"success\",\n                  onClick: _cache[43] || (_cache[43] = ($event: any) => (authDialogVisible.value = false))\n                }, {\n                  default: _withCtx(() => [...(_cache[73] || (_cache[73] = [\n                    _createTextVNode(\"\", -1)\n                  ]))]),\n                  _: 1\n                }))\n              : _createCommentVNode(\"\", true)\n          ])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: tagDialogVisible.value,\n      \"onUpdate:modelValue\": _cache[46] || (_cache[46] = ($event: any) => ((tagDialogVisible).value = $event)),\n      title: \"\",\n      width: \"500px\",\n      onClose: cancelTagSelection,\n      class: \"tag-selection-dialog\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_72, [\n          _createVNode(_component_el_button, {\n            onClick: resetTagSelection,\n            class: \"reset-btn\"\n          }, {\n            default: _withCtx(() => [...(_cache[74] || (_cache[74] = [\n              _createTextVNode(\"\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createElementVNode(\"div\", _hoisted_73, [\n            _createVNode(_component_el_button, { onClick: cancelTagSelection }, {\n              default: _withCtx(() => [...(_cache[75] || (_cache[75] = [\n                _createTextVNode(\"\", -1)\n              ]))]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              onClick: confirmTagSelection\n            }, {\n              default: _withCtx(() => [...(_cache[76] || (_cache[76] = [\n                _createTextVNode(\"\", -1)\n              ]))]),\n              _: 1\n            })\n          ])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_69, [\n          _createVNode(_component_el_checkbox_group, {\n            modelValue: tempSelectedTags.value,\n            \"onUpdate:modelValue\": _cache[45] || (_cache[45] = ($event: any) => ((tempSelectedTags).value = $event)),\n            class: \"tag-checkbox-group\"\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(userTags.value, (tag) => {\n                return (_openBlock(), _createBlock(_component_el_checkbox, {\n                  key: tag.id,\n                  label: tag.id,\n                  class: \"tag-checkbox-item\"\n                }, {\n                  default: _withCtx(() => [\n                    _createElementVNode(\"span\", _hoisted_70, _toDisplayString(tag.name), 1),\n                    _createElementVNode(\"span\", _hoisted_71, \"(\" + _toDisplayString(tag.count) + \")\", 1)\n                  ]),\n                  _: 2\n                }, 1032, [\"label\"]))\n              }), 128))\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n  <div class=\"auto-sop-container\">\r\n    <!--  -->\r\n    <div class=\"function-section\">\r\n      <div class=\"section-title\"></div>\r\n      <div class=\"function-list\">\r\n        <div class=\"function-item\" \r\n          :class=\"{ active: currentFunction === 'comment' }\"\r\n          @click=\"switchFunction('comment')\"\r\n          data-function=\"comment\">\r\n          <div class=\"function-icon\">\r\n            <img \r\n              :src=\"getIconPath('comment')\" \r\n              class=\"icon\" \r\n              :class=\"{ 'active-icon': currentFunction === 'comment' }\"\r\n              @error=\"handleImageError\"\r\n              @load=\"handleImageLoad\"\r\n              alt=\"\"\r\n            >\r\n          </div>\r\n          <div class=\"function-tooltip\"></div>\r\n        </div>\r\n\r\n        <div class=\"function-item\"\r\n          :class=\"{ active: currentFunction === 'activate' }\"\r\n          @click=\"switchFunction('activate')\"\r\n          data-function=\"activate\">\r\n          <div class=\"function-icon\">\r\n            <img \r\n              :src=\"getIconPath('activate')\" \r\n              class=\"icon\" \r\n              :class=\"{ 'active-icon': currentFunction === 'activate' }\"\r\n              @error=\"handleImageError\"\r\n              @load=\"handleImageLoad\"\r\n              alt=\"\"\r\n            >\r\n          </div>\r\n          <div class=\"function-tooltip\"></div>\r\n        </div>\r\n        \r\n        <div class=\"function-item\"\r\n          :class=\"{ active: currentFunction === 'addFriend' }\"\r\n          @click=\"switchFunction('addFriend')\"\r\n          data-function=\"addFriend\">\r\n          <div class=\"function-icon\">\r\n            <img \r\n              :src=\"getIconPath('addFriend')\" \r\n              class=\"icon\" \r\n              :class=\"{ 'active-icon': currentFunction === 'addFriend' }\"\r\n              @error=\"handleImageError\"\r\n              @load=\"handleImageLoad\"\r\n              alt=\"\"\r\n            >\r\n          </div>\r\n          <div class=\"function-tooltip\"></div>\r\n        </div>\r\n\r\n        <div class=\"function-item\"\r\n          :class=\"{ active: currentFunction === 'addNewFriend' }\"\r\n          @click=\"switchFunction('addNewFriend')\"\r\n          data-function=\"addNewFriend\">\r\n          <div class=\"function-icon\">\r\n            <img \r\n              :src=\"getIconPath('addNewFriend')\" \r\n              class=\"icon\" \r\n              :class=\"{ 'active-icon': currentFunction === 'addNewFriend' }\"\r\n              @error=\"handleImageError\"\r\n              @load=\"handleImageLoad\"\r\n              alt=\"\"\r\n            >\r\n          </div>\r\n          <div class=\"function-tooltip\"></div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"function-item\"\r\n          :class=\"{ active: currentFunction === 'autoFollow' }\"\r\n          @click=\"switchFunction('autoFollow')\"\r\n          data-function=\"autoFollow\">\r\n          <div class=\"function-icon\">\r\n            <img \r\n              :src=\"getIconPath('autoFollow')\" \r\n              class=\"icon\" \r\n              :class=\"{ 'active-icon': currentFunction === 'autoFollow' }\"\r\n              @error=\"handleImageError\"\r\n              @load=\"handleImageLoad\"\r\n              alt=\"\"\r\n            >\r\n          </div>\r\n          <div class=\"function-tooltip\"></div>\r\n        </div>\r\n\r\n        <!-- <div class=\"function-item\"\r\n          :class=\"{ active: currentFunction === 'chatAnalysis' }\"\r\n          @click=\"switchFunction('chatAnalysis')\"\r\n          data-function=\"chatAnalysis\">\r\n          <div class=\"function-icon\">\r\n            <img \r\n              :src=\"getIconPath('chatAnalysis')\" \r\n              class=\"icon\" \r\n              :class=\"{ 'active-icon': currentFunction === 'chatAnalysis' }\"\r\n              @error=\"handleImageError\"\r\n              @load=\"handleImageLoad\"\r\n              alt=\"\"\r\n            >\r\n          </div>\r\n          <div class=\"function-tooltip\"></div>\r\n        </div> -->\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"content-wrapper\">\r\n      <div class=\"config-section\">   \r\n        <template v-if=\"currentFunction === 'activate'\">\r\n          <MassSendingPanel \r\n            :greeting-groups=\"greetingGroups\"\r\n            :current-instance-nickname=\"currentInstanceNickname\"\r\n          />\r\n        </template>\r\n        <template v-if=\"currentFunction === 'comment'\">\r\n          <div class=\"section-title\"></div>\r\n          <div class=\"config-content\">\r\n            <el-form :model=\"commentConfig\" label-width=\"120px\">\r\n              <el-form-item label=\"\">\r\n                <el-input-number \r\n                  v-model=\"commentConfig.commentLimit\" \r\n                  :min=\"1\" \r\n                  :max=\"1000\"\r\n                  placeholder=\"\"\r\n                  v-tooltip=\"''\"\r\n                />\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                <el-input-number \r\n                  v-model=\"commentConfig.perFriendLimit\" \r\n                  :min=\"1\" \r\n                  :max=\"10\"\r\n                  placeholder=\"\"\r\n                  v-tooltip=\"''\"\r\n                />\r\n              </el-form-item>\r\n              <el-form-item label=\"()\">\r\n                <el-input-number\r\n                  v-model=\"commentConfig.checkInterval\"\r\n                  :min=\"1\"\r\n                  :max=\"1440\"\r\n                  :default-value=\"120\"\r\n                  placeholder=\"\"\r\n                  v-tooltip=\"''\"\r\n                />\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                <el-select v-model=\"commentConfig.reachLastPosition\" placeholder=\"\">\r\n                  <el-option label=\"\" value=\"stop\" />\r\n                  <el-option label=\"\" value=\"skip\" />\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                <el-select v-model=\"commentConfig.interactionMode\" placeholder=\"\">\r\n                  <el-option label=\"\" value=\"like_only\" />\r\n                  <el-option label=\"\" value=\"comment_only\" />\r\n                  <el-option label=\"&\" value=\"like_and_comment\" />\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item label=\"()\">\r\n                <el-button \r\n                  type=\"default\" \r\n                  plain \r\n                  @click=\"openTagDialog\"\r\n                  style=\"\r\n                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n                    border: none;\r\n                    color: white;\r\n                    padding: 8px 16px;\r\n                    border-radius: 6px;\r\n                    font-weight: 500;\r\n                    transition: all 0.3s ease;\r\n                    box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);\r\n                  \"\r\n                  @mouseenter=\"$event.target.style.transform = 'translateY(-1px)'; $event.target.style.boxShadow = '0 4px 8px rgba(102, 126, 234, 0.4)'\"\r\n                  @mouseleave=\"$event.target.style.transform = 'translateY(0)'; $event.target.style.boxShadow = '0 2px 4px rgba(102, 126, 234, 0.3)'\"\r\n                >\r\n                  <i class=\"el-icon-price-tag\" style=\"margin-right: 4px;\"></i>\r\n                  \r\n                </el-button>\r\n              </el-form-item>\r\n\r\n              <!--  -->\r\n              <el-form-item v-if=\"commentConfig.selectedTagNames.length > 0\" label=\"\">\r\n                <div style=\"\r\n                  background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);\r\n                  border: 1px solid #e1bee7;\r\n                  padding: 6px 8px;\r\n                  border-radius: 8px;\r\n                  color: #4a148c;\r\n                  font-weight: 500;\r\n                  box-shadow: 0 2px 6px rgba(74, 20, 140, 0.1);\r\n                  position: relative;\r\n                  overflow: hidden;\r\n                \">\r\n                  \r\n                  <div style=\"position: relative; z-index: 1;\">\r\n                    <i class=\"el-icon-collection-tag\" style=\"margin-right: 6px; color: #7b1fa2;\"></i>\r\n                    <span style=\"font-size: 13px; color: #7b1fa2; margin-right: 6px;\"></span>\r\n                    <span v-if=\"commentConfig.selectedTagNames.length <= 3\" style=\"font-size: 13px;\">\r\n                      {{ commentConfig.selectedTagNames.join('') }}\r\n                    </span>\r\n                    <span v-else style=\"font-size: 13px;\">\r\n                      {{ commentConfig.selectedTagNames.slice(0, 3).join('') }}...{{ commentConfig.selectedTagNames.length }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </el-form-item>\r\n              <el-form-item label=\"\" class=\"custom-label-form-item last-form-item\">\r\n                <el-select \r\n                  v-model=\"commentConfig.agentId\" \r\n                  placeholder=\"\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"agent in cozeAgents\"\r\n                    :key=\"agent.botId\"\r\n                    :label=\"agent.name\"\r\n                    :value=\"agent.botId\"\r\n                  />\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item label=\"\" class=\"align-right-form-item\">\r\n                <el-checkbox v-model=\"commentConfig.multiCycleEnabled\" @change=\"onCommentMultiCycleToggle\" :disabled=\"commentConfig.enabled\">\r\n                  \r\n                </el-checkbox>\r\n              </el-form-item>\r\n              <div v-if=\"commentConfig.multiCycleEnabled\" class=\"multi-cycle-box\" :class=\"{ disabled: commentConfig.enabled }\" aria-disabled=\"commentConfig.enabled\">\r\n                <div class=\"multi-cycle-tip\"></div>\r\n                <el-checkbox-group v-model=\"commentConfig.selectedAccounts\">\r\n                  <el-checkbox\r\n                    v-for=\"inst in activeInstances\"\r\n                    :key=\"inst.account_id\"\r\n                    :label=\"inst.account_id\"\r\n                    class=\"instance-item\"\r\n                    :disabled=\"commentConfig.enabled\"\r\n                  >\r\n                    {{ inst.nickname }}\r\n                  </el-checkbox>\r\n                </el-checkbox-group>\r\n              </div>\r\n              <el-form-item>\r\n                <div class=\"comment-action\">\r\n                  <cosmic-switch\r\n                    v-model=\"commentConfig.enabled\"\r\n                    :loading=\"isRunning\"\r\n                    @change=\"handleSwitchChange\"\r\n                    active-text=\"\"\r\n                    inactive-text=\"\"\r\n                  />\r\n                </div>\r\n              </el-form-item>\r\n            </el-form>\r\n            <!--  -->\r\n            <div v-if=\"commentConfig.enabled\" class=\"comment-tip\">\r\n              <el-icon><InfoFilled /></el-icon>\r\n              <span>shift</span>\r\n            </div>\r\n          </div>\r\n        </template>\r\n\r\n        <!--  -->\r\n        <template v-if=\"currentFunction === 'addFriend'\">\r\n          <div class=\"section-title\"></div>\r\n          <!--  -->\r\n          <div class=\"config-tip\" v-if=\"friendRequestExecutionTime\">\r\n            <el-icon><InfoFilled /></el-icon>\r\n            <span>{{ friendRequestExecutionTime }}</span>\r\n          </div>\r\n            <div class=\"config-content\">\r\n            <el-form :model=\"friendConfig\" label-width=\"120px\">\r\n              <el-form-item label=\"\">\r\n                <el-input-number \r\n                  v-model=\"friendConfig.maxFriendsPerDay\" \r\n                  :min=\"1\" \r\n                  :max=\"100\"\r\n                  :step=\"1\"\r\n                />\r\n              </el-form-item>\r\n              \r\n              <el-form-item label=\"()\">\r\n                <el-input-number \r\n                  v-model=\"friendConfig.checkInterval\" \r\n                  :min=\"5\" \r\n                  :max=\"120\"\r\n                  :step=\"5\"\r\n                />\r\n              </el-form-item>\r\n              \r\n              <el-form-item label=\"\">\r\n                <el-input-number \r\n                  v-model=\"friendConfig.maxProcessPerTime\" \r\n                  :min=\"1\" \r\n                  :max=\"20\"\r\n                  :step=\"1\"\r\n                />\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                <el-select \r\n                  v-model=\"friendConfig.greetingGroupId\" \r\n                  placeholder=\"\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"group in greetingGroups\"\r\n                    :key=\"group.id\"\r\n                    :label=\"group.name\"\r\n                    :value=\"group.id\"\r\n                  />\r\n                </el-select>\r\n              </el-form-item>\r\n              <!--  -->\r\n              <el-form-item label=\"\">\r\n                <el-select \r\n                  v-model=\"friendConfig.targetGroup\" \r\n                  placeholder=\"\"\r\n                  filterable\r\n                  @focus=\"loadGroupList\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"group in groupList\"\r\n                    :key=\"group.name\"\r\n                    :label=\"group.name\"\r\n                    :value=\"group.name\"\r\n                  />\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-form-item label=\"\" class=\"friend-tag-input\">\r\n                <el-input \r\n                  v-model=\"friendConfig.tag\"\r\n                  placeholder=\"\"\r\n                  :maxlength=\"20\"\r\n                  @input=\"validateTag\"\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item>\r\n                <cosmic-switch\r\n                  v-model=\"friendConfig.enabled\"\r\n                  :loading=\"isRunning\"\r\n                  active-text=\"\"\r\n                  inactive-text=\"\"\r\n                  @change=\"handleFriendSwitchChange\"\r\n                />\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </template>\r\n        <template v-if=\"currentFunction === 'addNewFriend'\">\r\n          <div class=\"section-title\">\r\n            <span></span>\r\n            <div class=\"button-group\">\r\n              <el-button type=\"primary\" @click=\"showImportDialog\">\r\n                \r\n              </el-button>\r\n              <el-button type=\"info\" @click=\"showFriendList\">\r\n                \r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"remaining-count\">\r\n             {{ todayAddedCount }}  {{ remainingCount }} \r\n          </div>\r\n          <!--  -->\r\n          <div class=\"config-tip\" v-if=\"addFriendExecutionTime\">\r\n            <el-icon><InfoFilled /></el-icon>\r\n            <span>{{ addFriendExecutionTime }}</span>\r\n          </div>\r\n          <div class=\"config-content\">\r\n            <el-form :model=\"addFriendConfig\" label-width=\"120px\">\r\n              <el-form-item label=\"\">\r\n                <el-input-number \r\n                  v-model=\"addFriendConfig.maxFriendsPerDay\" \r\n                  :min=\"1\" \r\n                  :max=\"100\"\r\n                  :step=\"1\"\r\n                />\r\n              </el-form-item>\r\n              \r\n              <el-form-item label=\"()\">\r\n                <el-input-number \r\n                  v-model=\"addFriendConfig.interval\" \r\n                  :min=\"1\" \r\n                  :max=\"120\"\r\n                  :step=\"5\"\r\n                />\r\n              </el-form-item>\r\n              \r\n              <el-form-item label=\"\">\r\n                <el-input-number \r\n                  v-model=\"addFriendConfig.batchSize\" \r\n                  :min=\"1\" \r\n                  :max=\"10\"\r\n                  :step=\"1\"\r\n                />\r\n              </el-form-item>\r\n              <!--  -->\r\n              <el-form-item label=\"\">\r\n                <el-input\r\n                  v-model=\"addFriendConfig.verifyMessage\"\r\n                  type=\"textarea\"\r\n                  :rows=\"2\"\r\n                  placeholder=\"\"\r\n                />\r\n              </el-form-item>\r\n              <el-form-item label=\"\">\r\n                <el-checkbox v-model=\"addFriendConfig.multiCycleEnabled\" @change=\"onMultiCycleToggle\" :disabled=\"addFriendConfig.enabled\">\r\n                  \r\n                </el-checkbox>\r\n              </el-form-item>\r\n              <div v-if=\"addFriendConfig.multiCycleEnabled\" class=\"multi-cycle-box\" :class=\"{ disabled: addFriendConfig.enabled }\" aria-disabled=\"addFriendConfig.enabled\">\r\n                <div class=\"multi-cycle-tip\"></div>\r\n                <!-- <div v-if=\"addFriendConfig.enabled\" class=\"multi-cycle-lock-tip\"></div> -->\r\n                <el-checkbox-group v-model=\"addFriendConfig.selectedAccounts\">\r\n                  <el-checkbox\r\n                    v-for=\"inst in activeInstances\"\r\n                    :key=\"inst.account_id\"\r\n                    :label=\"inst.account_id\"\r\n                    class=\"instance-item\"\r\n                    :disabled=\"addFriendConfig.enabled\"\r\n                  >\r\n                    {{ inst.nickname}}\r\n                  </el-checkbox>\r\n                </el-checkbox-group>\r\n              </div>\r\n\r\n              <el-form-item>\r\n                <cosmic-switch\r\n                  v-model=\"addFriendConfig.enabled\"\r\n                  :loading=\"isRunning\"\r\n                  active-text=\"\"\r\n                  inactive-text=\"\"\r\n                  @change=\"handleAddFriendSwitchChange\"\r\n                />\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </template>\r\n\r\n        <!--  -->\r\n        <template v-if=\"currentFunction === 'autoFollow'\">\r\n          <AutoFollowTaskList ref=\"autoFollowTaskListRef\" />\r\n        </template>\r\n\r\n\r\n      </div>\r\n      <!--  -->\r\n      <div class=\"log-section\" :class=\"{ 'hidden': !isLogVisible }\">\r\n        <div class=\"section-title\"></div>\r\n        <div class=\"log-content\">\r\n          <el-scrollbar>\r\n                <!--  -->\r\n                <template v-if=\"currentFunction === 'comment'\">\r\n                  <template v-if=\"momentLogs.length > 0\">\r\n                    <div v-for=\"log in momentLogs\" :key=\"log.id\" class=\"log-item moment-log\">\r\n                      <div class=\"log-time\">{{ formatTimestamp(log.timestamp) }}</div>\r\n                      <div class=\"log-info\">\r\n                        <div class=\"publisher\">\r\n                          <el-icon><User /></el-icon>\r\n                          <span> {{ log.publisher }}</span>\r\n                        </div>\r\n                        <div class=\"moment-content\">\r\n                          {{ log.content }}\r\n                        </div>\r\n                        <div class=\"comment-info\">\r\n                          <template v-if=\"log.type.includes('like')\">\r\n                            <span class=\"like-action\"> </span>\r\n                          </template>\r\n                          <template v-if=\"log.type.includes('comment') && log.comment_content && log.comment_content.trim() !== ''\">\r\n                            <span class=\"comment-action\">\r\n                              <!-- <el-icon><ChatDotRound /></el-icon> -->\r\n                              <span class=\"comment-text\">AI{{ log.comment_content }}</span>\r\n                            </span>\r\n                          </template>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </template>\r\n                  <template v-else>\r\n                    <div class=\"empty-state\">\r\n                      <img src=\"/icon/empty.svg\" alt=\"\" class=\"empty-icon\" />\r\n                      <div class=\"empty-text\"></div>\r\n                    </div>\r\n                  </template>\r\n                </template>\r\n            \r\n            <!--  -->\r\n            <template v-else-if=\"currentFunction === 'activate'\">\r\n              <template v-if=\"filteredLogs.length > 0\">\r\n                <div v-for=\"log in filteredLogs\" :key=\"log.id\" class=\"log-item task-log\">\r\n                  <div class=\"log-header\">\r\n                    <div class=\"log-status-time\">\r\n                      <span class=\"log-time\">{{ new Date(log.timestamp).toLocaleString() }}</span>\r\n                      <el-tag :type=\"getStatusType(log.status)\" size=\"small\">\r\n                        {{ getStatusText(log.status) }}\r\n                      </el-tag>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"log-info\">\r\n                    <div class=\"task-details\">\r\n                      <div class=\"task-progress\" v-if=\"log.progress !== undefined\">\r\n                         {{ log.total }}  {{ log.progress }} \r\n                      </div>\r\n                      <div class=\"task-group\">\r\n                        {{ log.params?.contentType === 'agent' ? '' : '' }}\r\n                      </div>\r\n                      <div class=\"task-schedule\" v-if=\"log.params?.scheduleTime\">\r\n                        {{ formatScheduleTime(log.params.scheduleTime) }}\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"task-error\" v-if=\"log.error\">\r\n                      <el-icon><Warning /></el-icon>\r\n                      <span>{{ log.error }}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </template>\r\n              <template v-else>\r\n                <div class=\"empty-state\">\r\n                  <img src=\"/icon/empty.svg\" alt=\"\" class=\"empty-icon\" />\r\n                  <div class=\"empty-text\"></div>\r\n                </div>\r\n              </template>\r\n            </template>\r\n\r\n            <!--  -->\r\n            <template v-else-if=\"currentFunction === 'addFriend'\">\r\n              <template v-if=\"friendLogs.length > 0\">\r\n                <div v-for=\"log in friendLogs\" :key=\"log.task_id\" class=\"log-item friend-log\">\r\n                  <div class=\"log-header\">\r\n                    <div class=\"log-status-time\">\r\n                      <span class=\"log-time\">{{ formatTimestamp(log.time) }}</span>\r\n                      <el-tag :type=\"getStatusType(log.status)\" size=\"small\">\r\n                        {{ getStatusText(log.status) }}\r\n                      </el-tag>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"log-info\">\r\n                    <div class=\"task-details\">\r\n                      <div class=\"friend-count\">\r\n                         {{ log.processed_count }} \r\n                      </div>\r\n                      <div class=\"friend-tag\" v-if=\"log.tag\">\r\n                        <el-icon><PriceTag /></el-icon>\r\n                        <span>: {{ log.tag }}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </template>\r\n              <template v-else>\r\n                <div class=\"empty-state\">\r\n                  <img src=\"/icon/empty.svg\" alt=\"\" class=\"empty-icon\" />\r\n                  <div class=\"empty-text\"></div>\r\n                </div>\r\n              </template>\r\n            </template>\r\n\r\n            <!--  -->\r\n            <template v-else-if=\"currentFunction === 'addNewFriend'\">\r\n              <template v-if=\"addFriendLogs.length > 0\">\r\n                <div v-for=\"log in addFriendLogs\" :key=\"log.task_id\" class=\"log-item friend-log\">\r\n                  <div class=\"log-header\">\r\n                    <div class=\"log-status-time\">\r\n                      <span class=\"log-time\">{{ formatTimestamp(log.time) }}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"log-info\">\r\n                    <div class=\"task-details\">\r\n                      <div class=\"friend-info\">\r\n                        <span> {{ log.attempt_count }}  {{ log.processed_count }} </span>\r\n                      </div>\r\n                      <div class=\"friend-tags\" v-if=\"log.tag\">\r\n                        <span class=\"greeting-text\">{{ log.tag }}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </template>\r\n              <template v-else>\r\n                <div class=\"empty-state\">\r\n                  <img src=\"/icon/empty.svg\" alt=\"\" class=\"empty-icon\" />\r\n                  <div class=\"empty-text\"></div>\r\n                </div>\r\n              </template>\r\n            </template>\r\n\r\n            <!--  -->\r\n            <template v-else-if=\"currentFunction === 'autoFollow'\">\r\n              <AutoFollowLogs ref=\"autoFollowLogsRef\" />\r\n            </template>\r\n\r\n          </el-scrollbar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <import-friend-list-dialog\r\n      v-model:visible=\"importDialogVisible\"\r\n      :cozeAgents=\"cozeAgents\"\r\n      @import=\"handleImportFriendList\"\r\n      @importByAgent=\"handleImportByAgent\"\r\n    />\r\n  </div>\r\n  <FriendListDialog\r\n    v-model:visible=\"friendListVisible\"\r\n    @refresh=\"loadRemainingCount\"/>\r\n    <!--  -->\r\n    <el-dialog\r\n      title=\"\"\r\n      v-model=\"authDialogVisible\"\r\n      width=\"400px\"\r\n    >\r\n      <div class=\"auth-dialog-content\">\r\n        <el-alert\r\n          title=\"\"\r\n          type=\"info\"\r\n          description=\"\"\r\n          :closable=\"false\"\r\n          show-icon\r\n        />\r\n        <div class=\"auth-actions\">\r\n          <el-button type=\"primary\" @click=\"openAuthUrl\"></el-button>\r\n          <el-button @click=\"authDialogVisible = false\"></el-button>\r\n          <el-button v-if=\"hasClickedAuth\" type=\"success\" @click=\"authDialogVisible = false\"></el-button>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n    <!--  -->\r\n    <el-dialog\r\n      v-model=\"tagDialogVisible\"\r\n      title=\"\"\r\n      width=\"500px\"\r\n      @close=\"cancelTagSelection\"\r\n      class=\"tag-selection-dialog\"\r\n    >\r\n      <div class=\"tag-selection-content\">\r\n        <el-checkbox-group v-model=\"tempSelectedTags\" class=\"tag-checkbox-group\">\r\n          <el-checkbox \r\n            v-for=\"tag in userTags\" \r\n            :key=\"tag.id\" \r\n            :label=\"tag.id\"\r\n            class=\"tag-checkbox-item\"\r\n          >\r\n            <span class=\"tag-name\">{{ tag.name }}</span>\r\n            <span class=\"tag-count\">({{ tag.count }})</span>\r\n          </el-checkbox>\r\n        </el-checkbox-group>\r\n      </div>\r\n      <template #footer>\r\n        <div class=\"dialog-footer-custom\">\r\n          <el-button @click=\"resetTagSelection\" class=\"reset-btn\"></el-button>\r\n          <div class=\"action-buttons\">\r\n            <el-button @click=\"cancelTagSelection\"></el-button>\r\n            <el-button type=\"primary\" @click=\"confirmTagSelection\"></el-button>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref,onMounted,computed,onUnmounted ,watch, onActivated} from 'vue'\r\nimport {User, Warning,PriceTag, InfoFilled} from '@element-plus/icons-vue'\r\nimport FriendListDialog from '@/components/sop/FriendListDialog.vue'\r\nimport ImportFriendListDialog from '@/components/sop/ImportFriendListDialog.vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { getConfig, saveConfig } from '@/api/config'\r\nimport type { CozeAgent } from '@/types/coze' \r\nimport {getTaskLogs,toggleAutoAddFriend,getFriendRequestLogs,getRemainingFriendCount,\r\n  toggleAutoAddNewFriend,importFriendList,toggleAutoComment,importFriendListByAgent,getAddFriendLogs} from '@/api/autosop'\r\nimport MassSendingPanel from '@/components/sop/MassSendingPanel.vue'\r\nimport AutoFollowTaskList from '@/components/AutoFollowTaskList.vue'\r\nimport AutoFollowLogs from '@/components/AutoFollowLogs.vue'\r\nimport { getContactTags ,getGroups, Tag} from '@/api/contact'\r\nimport { useRoute } from 'vue-router'\r\nimport CosmicSwitch from '@/components/ui/CosmicSwitch.vue'\r\nimport { useSvgLoader } from '@/composables/useSvgLoader'\r\nimport { getActiveInstances, type Instance } from '@/api/moments'\r\nconst route = useRoute()\r\nconst groupList = ref<any[]>([])\r\n// \r\nconst commentConfig = ref({\r\n  commentLimit: 10,\r\n  perFriendLimit: 2,\r\n  autoLike: false,\r\n  interactionMode:'like_and_comment',\r\n  checkInterval: 120, // 120\r\n  reachLastPosition: 'stop', // \r\n  blacklist: '',\r\n  agentId: '',\r\n  enabled: false,\r\n  multiCycleEnabled: false,\r\n  selectedAccounts: [] as string[],\r\n  selectedTags:[] as string[], // ID\r\n  selectedTagNames: [] as string[] // \r\n})\r\nconst addFriendConfig = ref({\r\n  maxFriendsPerDay: 10,\r\n  interval: 30,\r\n  batchSize: 1,\r\n  targetGroup: '',\r\n  verifyMessage:'',\r\n  enabled: false,\r\n  multiCycleEnabled: false,\r\n  selectedAccounts: [] as string[]\r\n})\r\nconst restTimeSettings = ref<RestTimeSettings>({\r\n  startTime: 0,\r\n  endTime: 28,\r\n  selectedTasks: []\r\n})\r\nconst addFriendLogs = ref<AddFriendLog[]>([])\r\nconst remainingCount = ref(0)\r\nconst todayAddedCount = ref(0)\r\nconst importDialogVisible = ref(false)\r\nconst friendListVisible = ref(false)\r\n// \r\n// const showCountdown = ref(false)\r\n// \r\nconst autoFollowTaskListRef = ref()\r\nconst autoFollowLogsRef = ref()\r\n// \r\nconst createChatCollectionVisible = ref(false)\r\nconst chatCollectionTasks = ref<ChatCollectionTask[]>([])\r\n// \r\ninterface LogParams {\r\n  content?: string\r\n  scheduleTime?: string\r\n  contentType?: string\r\n  progress?: number\r\n  total?: number\r\n  greetingGroupId?: string\r\n  timestamp?: string\r\n}\r\ninterface RestTimeSettings {\r\n  startTime: number\r\n  endTime: number\r\n  selectedTasks: string[]\r\n}\r\ninterface AddFriendLog {\r\n  task_id: string\r\n  time: string  // \r\n  processed_count: number  // \r\n  attempt_count: number  // \r\n  tag: string  // \r\n}\r\ninterface MomentLog {\r\n  type: string[]\r\n  publisher: string\r\n  content: string\r\n  publish_time: string\r\n  comment_content: string\r\n  timestamp: string\r\n}\r\ninterface GreetingGroup {\r\n  id: string\r\n  name: string\r\n  greetings: Array<{\r\n    type: 'text' | 'file'\r\n    content: string\r\n    filePath?: string\r\n  }>\r\n}\r\n// \r\ninterface MomentLog {\r\n  id: string;\r\n  timestamp: string;\r\n  publisher: string;\r\n  content: string;\r\n  comment_content: string;\r\n}\r\n\r\n// \r\nexport interface FriendConfig {\r\n  maxFriendsPerDay: number\r\n  checkInterval: number\r\n  maxProcessPerTime: number\r\n  greetingGroupId: string\r\n  targetGroup:string\r\n  tag: string\r\n  enabled: boolean\r\n}\r\n// \r\ninterface FriendLog {\r\n  task_id: string\r\n  time: string\r\n  processed_count: number\r\n  tag?: string\r\n  status: string\r\n  error?: string\r\n}\r\n\r\n// \r\ninterface ChatCollectionTask {\r\n  id: string\r\n  agentId: string\r\n  agentName?: string\r\n  status: 'pending' | 'running' | 'completed' | 'failed' | 'cancelled'\r\n  scheduleTime?: string\r\n  createTime?: string\r\n  processedSessions?: number\r\n  totalSessions?: number\r\n  maxSessions?: number\r\n  error?: string\r\n}\r\n// SVG\r\nconst { getIconPath, handleImageLoad, handleImageError, preloadImages } = useSvgLoader({\r\n  comment: {\r\n    path: '/icon/wechat_moment.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  activate: {\r\n    path: '/icon/activate_icon.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  addFriend: {\r\n    path: '/icon/friend_request.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  addNewFriend: {\r\n    path: '/icon/add_new_friend_icon.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  autoFollow: {\r\n    path: '/icon/follow_up_icon.svg',\r\n    fallback: '/icon/empty.svg'\r\n  },\r\n  chatAnalysis: {\r\n    path: '/icon/collect_message.svg',\r\n    fallback: '/icon/empty.svg'\r\n  }\r\n})\r\n\r\n// \r\nconst friendConfig = ref<FriendConfig>({\r\n  maxFriendsPerDay: 100,\r\n  checkInterval: 10,\r\n  maxProcessPerTime: 5,\r\n  tag: '',\r\n  targetGroup:'',\r\n  greetingGroupId: '',\r\n  enabled: false\r\n})\r\nconst showImportDialog = () => {\r\n  importDialogVisible.value = true\r\n}\r\n// \r\nconst authDialogVisible = ref(false)\r\nconst authUrl = ref('')\r\nconst hasClickedAuth = ref(false)\r\n// \r\nconst openAuthUrl = () => {\r\n  if (authUrl.value) {\r\n    window.open(authUrl.value, '_blank')\r\n    hasClickedAuth.value = true\r\n  }\r\n}\r\n// \r\nconst friendRequestExecutionTime = computed(() => {\r\n  if (!restTimeSettings.value.selectedTasks.includes('')) {\r\n    return null // \r\n  }\r\n  return formatExecutionTime(restTimeSettings.value.startTime, restTimeSettings.value.endTime)\r\n})\r\n\r\nconst addFriendExecutionTime = computed(() => {\r\n  if (!restTimeSettings.value.selectedTasks.includes('')) {\r\n    return null // \r\n  }\r\n  return formatExecutionTime(restTimeSettings.value.startTime, restTimeSettings.value.endTime)\r\n})\r\n\r\n// \r\nconst formatExecutionTime = (startTime: number, endTime: number) => {\r\n  const formatInterval = (interval: number) => {\r\n    const hour = Math.floor(interval / 4)\r\n    const minute = (interval % 4) * 15\r\n    return `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`\r\n  }\r\n  \r\n  const startTimeStr = formatInterval(startTime)\r\n  const endTimeStr = formatInterval(endTime)\r\n  \r\n  if (startTime <= endTime) {\r\n    return `${startTimeStr}-${endTimeStr}`\r\n  } else {\r\n    return `${startTimeStr}-${endTimeStr}`\r\n  }\r\n}\r\n\r\n// \r\nconst loadRestTimeSettings = async () => {\r\n  try {\r\n    const result = await getConfig('rest_time_settings')\r\n    if (result.success && result.data?.rest_time_settings) {\r\n      restTimeSettings.value = {\r\n        startTime: result.data.rest_time_settings.startTime || 0,\r\n        endTime: result.data.rest_time_settings.endTime || 28,\r\n        selectedTasks: result.data.rest_time_settings.selectedTasks || []\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n// \r\nconst handleImportByAgent = async (agentId: string) => {\r\n  try {\r\n    ElMessage.info('...')\r\n    const result = await importFriendListByAgent(agentId)\r\n    \r\n    // \r\n    if (result.needsAuth && result.authUrl) {\r\n      authUrl.value = result.authUrl\r\n      authDialogVisible.value = true\r\n      return\r\n    }\r\n    \r\n    if (result.success) {\r\n      ElMessage.success(`${result.count}${result.remaining}`)\r\n      remainingCount.value = result.remaining\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error(`: ${error instanceof Error ? error.message : ''}`)\r\n  }\r\n}\r\nconst showFriendList = () => {\r\n  friendListVisible.value = true\r\n}\r\nconst saveAddFriendConfig = () => {\r\n  try {\r\n    localStorage.setItem('addFriendConfig', JSON.stringify(addFriendConfig.value))\r\n    saveSopCache('addFriendConfig')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n// \r\nconst loadGroupList = async () => {\r\n  if (groupList.value.length === 0) {\r\n    try {\r\n      groupList.value = await getGroups()\r\n    } catch (error) {\r\n      console.error(':', error)\r\n      ElMessage.error('')\r\n    }\r\n  }\r\n}\r\nconst activeInstances = ref<Instance[]>([])\r\nconst loadActiveInstancesForAddFriend = async () => {\r\n  try {\r\n    const result = await getActiveInstances()\r\n    if (result.success) {\r\n      activeInstances.value = result.instances || []\r\n      if (addFriendConfig.value.multiCycleEnabled && addFriendConfig.value.selectedAccounts.length === 0 && activeInstances.value.length > 0) {\r\n        addFriendConfig.value.selectedAccounts = [activeInstances.value[0].account_id]\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.error(':', e)\r\n  }\r\n}\r\nconst onMultiCycleToggle = async (val: any) => {\r\n  if (addFriendConfig.value.enabled) {\r\n    return\r\n  }\r\n  if (Boolean(val)) {\r\n    await loadActiveInstancesForAddFriend()\r\n    if (addFriendConfig.value.selectedAccounts.length === 0 && activeInstances.value.length > 0) {\r\n      addFriendConfig.value.selectedAccounts = [activeInstances.value[0].account_id]\r\n    }\r\n  }\r\n  saveAddFriendConfig()\r\n}\r\n\r\nconst loadActiveInstancesForComment = async () => {\r\n  try {\r\n    const result = await getActiveInstances()\r\n    if (result.success) {\r\n      activeInstances.value = result.instances || []\r\n      if (commentConfig.value.multiCycleEnabled && commentConfig.value.selectedAccounts.length === 0 && activeInstances.value.length > 0) {\r\n        commentConfig.value.selectedAccounts = [activeInstances.value[0].account_id]\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.error(':', e)\r\n  }\r\n}\r\n\r\nconst onCommentMultiCycleToggle = async (val: any) => {\r\n  if (commentConfig.value.enabled) {\r\n    return\r\n  }\r\n  if (Boolean(val)) {\r\n    await loadActiveInstancesForComment()\r\n    if (commentConfig.value.selectedAccounts.length === 0 && activeInstances.value.length > 0) {\r\n      commentConfig.value.selectedAccounts = [activeInstances.value[0].account_id]\r\n    }\r\n  }\r\n  saveCommentConfig()\r\n}\r\nconst handleAddFriendSwitchChange = async (val: string | number | boolean) => {\r\n  const value = Boolean(val)  // \r\n  try {\r\n    const result = await toggleAutoAddNewFriend(value, addFriendConfig.value)\r\n    if (result.success) {\r\n      ElMessage.success(value ? '' : '')\r\n    } else {\r\n      addFriendConfig.value.enabled = !value\r\n      ElMessage.error(result.error || '')\r\n    }\r\n    saveAddFriendConfig()//\r\n  } catch (error) {\r\n    addFriendConfig.value.enabled = !value\r\n    ElMessage.error('')\r\n    saveAddFriendConfig()\r\n  }\r\n}\r\nconst handleImportFriendList = async (fileData: any) => {\r\n  try {\r\n    const result = await importFriendList(fileData)\r\n    if (result.success) {\r\n      ElMessage.success('')\r\n      await loadRemainingCount()\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('')\r\n    console.error(\"\",error)\r\n  }\r\n}\r\nconst handleSwitchChange = async (value: boolean) => {\r\n  try {\r\n    await toggleAutoComment(value, value ? commentConfig.value : {})\r\n    saveCommentConfig()\r\n    ElMessage.success(`${value ? '' : ''}`)\r\n  } catch (error) {\r\n    ElMessage.error(`${value ? '' : ''}`)\r\n    commentConfig.value.enabled = !value\r\n    saveCommentConfig()\r\n  }\r\n}\r\n\r\n// \r\nconst validateTag = (value: string) => {\r\n  const regex = /^[a-zA-Z0-9\\u4e00-\\u9fa5]+$/\r\n  if (value && !regex.test(value)) {\r\n    friendConfig.value.tag = value.replace(/[^a-zA-Z0-9\\u4e00-\\u9fa5]/g, '')\r\n    ElMessage.warning('')\r\n  }\r\n}\r\nconst userTags = ref<Tag[]>([])\r\nconst tagDialogVisible = ref(false)\r\nconst tempSelectedTags = ref<string[]>([])\r\n// \r\nconst openTagDialog = async () => {\r\n  try {\r\n    userTags.value = await getContactTags()\r\n    tempSelectedTags.value = [...commentConfig.value.selectedTags]\r\n    tagDialogVisible.value = true\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst resetTagSelection = () => {\r\n  tempSelectedTags.value = []\r\n  commentConfig.value.selectedTags = []\r\n  commentConfig.value.selectedTagNames = []\r\n  saveCommentConfig()\r\n  ElMessage.success('')\r\n}\r\n// \r\nconst confirmTagSelection = () => {\r\n  commentConfig.value.selectedTags = [...tempSelectedTags.value]\r\n  commentConfig.value.selectedTagNames = tempSelectedTags.value.map(tagId => {\r\n    const tag = userTags.value.find(t => t.id === tagId)\r\n    return tag ? tag.name : tagId\r\n  })\r\n  tagDialogVisible.value = false\r\n  saveCommentConfig()\r\n}\r\n\r\n// \r\nconst cancelTagSelection = () => {\r\n  tempSelectedTags.value = [...commentConfig.value.selectedTags]\r\n  tagDialogVisible.value = false\r\n}\r\n// \r\nconst loadUserTags = async () => {\r\n  try {\r\n    userTags.value = await getContactTags()\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst getStatusText = (status: string) => {\r\n  const statusMap: Record<string, string> = {\r\n    'pending': '',\r\n    'running': '',\r\n    'completed': '',\r\n    'failed': '',\r\n    'cancelled': ''\r\n  }\r\n  return statusMap[status] || status\r\n}\r\n// \r\nconst getStatusType = (status: string): 'success' | 'warning' | 'info' | 'primary' | 'danger' => {\r\n  const statusMap: Record<string, 'success' | 'warning' | 'info' | 'primary' | 'danger'> = {\r\n    'pending': 'info',\r\n    'running': 'warning',\r\n    'completed': 'success',\r\n    'failed': 'danger',\r\n    'cancelled': 'info'\r\n  }\r\n  return statusMap[status] || 'info'\r\n}\r\n\r\n// \r\nconst formatScheduleTime = (time: string) => {\r\n  try {\r\n    return new Date(time).toLocaleString('zh-CN', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })\r\n  } catch (error) {\r\n    return ''\r\n  }\r\n}\r\nconst friendLogs = ref<FriendLog[]>([])\r\n// \r\nconst loadFriendLogs = async () => {\r\n  try {\r\n    const logs = await getFriendRequestLogs()\r\n    friendLogs.value = logs\r\n    console.debug(':', logs)\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n//  filteredLogs computed \r\nconst filteredLogs = computed(() => {\r\n  if (currentFunction.value === 'addFriend') {\r\n    return friendLogs.value.map(log => ({\r\n      id: log.task_id,\r\n      timestamp: log.time,\r\n      processed_count: log.processed_count,\r\n      tag: log.tag,\r\n      status: log.status || 'completed',\r\n      type: 'friend_request',\r\n      error: log.error,\r\n      progress: log.processed_count,\r\n      total: undefined,\r\n      params: {\r\n        content: ` ${log.processed_count} `,\r\n        scheduleTime: undefined,\r\n        progress: log.processed_count,\r\n        total: undefined,\r\n        greetingGroupId: undefined\r\n      } as LogParams\r\n    }))\r\n  } else if (currentFunction.value === 'comment') {\r\n    return momentLogs.value.map((log: MomentLog) => ({\r\n      id: log.timestamp,\r\n      timestamp: new Date(log.timestamp).getTime(),\r\n      taskType: 'comment',\r\n      status: 'completed',\r\n      publisher: log.publisher,\r\n      content: log.content,\r\n      comment_content: log.comment_content,\r\n      description: `${log.publisher} `,\r\n      progress: undefined,\r\n      total: undefined,\r\n      params: {\r\n        content: log.content,\r\n        scheduleTime: undefined,\r\n        progress: undefined,\r\n        total: undefined,\r\n        greetingGroupId: undefined\r\n      } as LogParams,\r\n      error: null\r\n    }))\r\n  } else if (currentFunction.value === 'activate') {\r\n    console.debug(\"\",taskLogs.value)\r\n    return taskLogs.value.map(log => ({\r\n      ...log,\r\n      progress: log.params?.progress,\r\n      total: log.params?.total,\r\n      params: {\r\n        content: log.params?.content || '',\r\n        scheduleTime: log.params?.scheduleTime,\r\n        contentType: log.params?.contentType,\r\n        progress: log.params?.progress,\r\n        total: log.params?.total,\r\n        greetingGroupId: log.params?.greetingGroupId\r\n      } as LogParams\r\n    }))\r\n  } else if (currentFunction.value === 'chatAnalysis') {\r\n    console.debug(\"\", taskLogs.value)\r\n    return taskLogs.value.map(log => ({\r\n      ...log,\r\n      params: {\r\n        total: log.params?.total || 0,\r\n        progress: log.params?.progress || 0\r\n      } as LogParams\r\n    }))\r\n  }\r\n  return taskLogs.value\r\n})\r\n// \r\nconst momentLogs = ref<MomentLog[]>([])\r\n// \r\nconst loadMomentLogs = async () => {\r\n  try {\r\n    const response = await fetch('/api/moment/interactions')\r\n    const result = await response.json()\r\n    if (result.success) {\r\n      console.debug(':', result)\r\n      momentLogs.value = result.data || []\r\n    } else {\r\n      console.error(':', result.error)\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\nconst currentFunction = ref('comment')\r\nconst isRunning = ref(false)\r\n// const activateTasks = ref<ActivateTask[]>([])\r\n// const userTags = ref<UserTag[]>([])\r\nconst greetingGroups = ref<GreetingGroup[]>([])\r\nconst taskLogs = ref<LogItem[]>([])\r\n\r\n// \r\nconst loadTaskLogs = async () => {\r\n  try {\r\n    const response = await getTaskLogs()\r\n    taskLogs.value = response;\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    taskLogs.value = []\r\n  }\r\n}\r\n\r\ninterface LogItem {\r\n  id: string\r\n  timestamp: number\r\n  taskType: string\r\n  description: string\r\n  status: string\r\n  progress?: number\r\n  total?: number\r\n  error?: string | null\r\n  publisher?: string\r\n  content?: string\r\n  comment_content?: string\r\n  params?: {\r\n    content?: string\r\n    scheduleTime?: string\r\n    progress?: number\r\n    total?: number\r\n    greetingGroupId?: string\r\n    contentType?: string\r\n  }\r\n}\r\n\r\n// \r\nconst loadGreetingGroups = async () => {\r\n  try {\r\n    const result = await getConfig('greeting_config')\r\n    if (result?.data?.greeting_config?.greeting_config) {\r\n      const config = result.data.greeting_config.greeting_config\r\n      greetingGroups.value = config.map((group: any) => ({\r\n        id: group.name,\r\n        name: group.name,\r\n        greetings: Array.isArray(group.greetings) ? group.greetings : [] //  greetings \r\n      }))\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\n// \r\nconst handleFriendSwitchChange = async (val: string | number | boolean) => {\r\n  const originalValue = friendConfig.value.enabled  // \r\n  const value = Boolean(val)\r\n  \r\n  try {\r\n    const result = await toggleAutoAddFriend(value, friendConfig.value)\r\n    if (result.success) {\r\n      ElMessage.success(value ? '3' : '')\r\n      friendConfig.value.enabled = value  // \r\n      localStorage.setItem('friendConfig', JSON.stringify(friendConfig.value))\r\n      saveSopCache('friendConfig')\r\n    } else {\r\n      // \r\n      friendConfig.value.enabled = originalValue\r\n      friendConfig.value = { ...friendConfig.value }\r\n      ElMessage.error(result.error || '')\r\n    }\r\n  } catch (error) {\r\n    // \r\n    friendConfig.value.enabled = originalValue\r\n    friendConfig.value = { ...friendConfig.value }\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n// \r\nconst isLogVisible = ref(window.innerWidth > 650)\r\nconst handleResize = () => {\r\n  isLogVisible.value = window.innerWidth > 650\r\n}\r\nonMounted(async () => {\r\n  //\r\n  await loadCozeAgents()\r\n  // await loadTaskLogs()\r\n  await loadMomentLogs()\r\n  await loadUserTags()\r\n  await loadGreetingGroups()\r\n  await loadCommentConfig()\r\n\r\n\r\n  await loadFriendConfig()\r\n  await loadAddNewFriendConfig()\r\n  await loadRestTimeSettings()\r\n  handleResize() \r\n  // SVG\r\n  await preloadImages()\r\n  window.addEventListener('resize', handleResize)\r\n  await loadActiveInstancesForAddFriend()\r\n  await loadActiveInstances()\r\n})\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', handleResize);\r\n})\r\n\r\nconst loadActiveInstances = async () => {\r\n  try {\r\n    const result = await getActiveInstances()\r\n    if (result.success) {\r\n      activeInstances.value = result.instances || []\r\n    }\r\n  } catch (e) {\r\n    console.error(':', e)\r\n  }\r\n}\r\n\r\nonActivated(() => {\r\n  loadActiveInstances()\r\n})\r\n\r\nconst currentInstanceNickname = computed(() => {\r\n  const list = activeInstances.value || []\r\n  const active = list.find(i => i.is_active)\r\n  return active ? active.nickname : (list[0]?.nickname || '')\r\n})\r\n\r\n// \r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result.success && result.data) {\r\n      const agents = Array.isArray(result.data) ? result.data : \r\n                    Array.isArray(result.data.agents) ? result.data.agents : []\r\n      \r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n      \r\n      // \r\n      const defaultAgent = cozeAgents.value.find(agent => agent.isDefault)\r\n      if (defaultAgent) {\r\n        commentConfig.value.agentId = defaultAgent.botId\r\n      } else if (cozeAgents.value.length > 0) {\r\n        commentConfig.value.agentId = cozeAgents.value[0].botId\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst loadCommentConfig = async () => {\r\n  try {\r\n    // \r\n    const savedConfig = localStorage.getItem('commentConfig')\r\n    if (savedConfig) {\r\n      commentConfig.value = JSON.parse(savedConfig)\r\n      return\r\n    }\r\n    await loadSopCache()\r\n    if (sopCache.value?.commentConfig) {\r\n      const cachedConfig = sopCache.value.commentConfig\r\n      //  selectedAccounts\r\n      const { selectedAccounts, ...restConfig } = cachedConfig\r\n      commentConfig.value = { \r\n        ...commentConfig.value,\r\n        ...restConfig,\r\n        enabled: false\r\n      }\r\n      return\r\n    }\r\n    const result = await getConfig('moment_settings')\r\n    if (result.success && result.data?.moment_settings) {\r\n      commentConfig.value = {\r\n        commentLimit: result.data.moment_settings.commentLimit,\r\n        perFriendLimit: result.data.moment_settings.perFriendLimit || 2,\r\n        autoLike: result.data.moment_settings.autoLike,\r\n        interactionMode: result.data.moment_settings.interactionMode || 'like_and_comment',\r\n        blacklist: result.data.moment_settings.blacklist || '',\r\n        agentId: result.data.moment_settings.agentId || commentConfig.value.agentId,\r\n        checkInterval:120,\r\n        reachLastPosition: 'stop',\r\n        enabled: false,\r\n        multiCycleEnabled: commentConfig.value.multiCycleEnabled || false,\r\n        selectedAccounts: Array.isArray(commentConfig.value.selectedAccounts) ? commentConfig.value.selectedAccounts : [],\r\n        selectedTags: [],//\r\n        selectedTagNames: []\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n// SOP\r\nconst sopCache = ref<any>(null)\r\nconst loadSopCache = async () => {\r\n  try {\r\n    if (!sopCache.value) {\r\n      const res = await getConfig('sop_cache')\r\n      if (res.success) {\r\n        sopCache.value = res.data || {}\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.error('SOP:', e)\r\n  }\r\n}\r\nconst saveSopCache = async (key: 'commentConfig' | 'addFriendConfig' | 'friendConfig') => {\r\n  try {\r\n    const res = await getConfig('sop_cache')\r\n    const base = (res.success && res.data) ? res.data : {}\r\n    \r\n    //  selectedAccounts\r\n    let configToCache = {}\r\n    if (key === 'commentConfig') {\r\n      const { selectedAccounts, ...rest } = commentConfig.value\r\n      configToCache = rest\r\n    } else {\r\n      configToCache = key === 'addFriendConfig' ? addFriendConfig.value : friendConfig.value\r\n    }\r\n\r\n    const payload = {\r\n      commentConfig: {\r\n        ...(base.commentConfig || {}),\r\n        ...(key === 'commentConfig' ? configToCache : {}),\r\n        enabled: false\r\n      },\r\n      addFriendConfig: {\r\n        ...(base.addFriendConfig || {}),\r\n        ...(key === 'addFriendConfig' ? addFriendConfig.value : {}),\r\n        enabled: false\r\n      },\r\n      friendConfig: {\r\n        ...(base.friendConfig || {}),\r\n        ...(key === 'friendConfig' ? friendConfig.value : {}),\r\n        enabled: false\r\n      }\r\n    }\r\n    await saveConfig('sop_cache', payload)\r\n  } catch (e) {\r\n    console.error('SOP:', e)\r\n  }\r\n}\r\n// \r\nconst saveCommentConfig = () => {\r\n  try {\r\n    localStorage.setItem('commentConfig', JSON.stringify(commentConfig.value))\r\n    saveSopCache('commentConfig')\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst switchFunction = (func: string) => {\r\n  console.debug(':', func)\r\n  currentFunction.value = func\r\n  \r\n  if (func === 'addFriend') {\r\n    loadFriendLogs()\r\n  } else if (func === 'activate') {\r\n    loadTaskLogs()\r\n  } else if (func === 'addNewFriend') {\r\n    loadAddFriendLogs()\r\n    loadRemainingCount()\r\n  } else if (func === 'chatAnalysis') {\r\n    loadTaskLogs()\r\n  }\r\n}\r\n\r\n// \r\nconst loadAddFriendLogs = async () => {\r\n  try {\r\n    const logs = await getAddFriendLogs()\r\n    addFriendLogs.value = logs\r\n  } catch (error) {\r\n    console.error(':', error)\r\n    ElMessage.error('')\r\n  }\r\n}\r\n\r\nconst loadRemainingCount = async () => {\r\n  try {\r\n    const result = await getRemainingFriendCount()\r\n    if (typeof result === 'object' && result !== null) {\r\n      remainingCount.value = result.remaining\r\n      todayAddedCount.value = result.today_added || 0\r\n    } else {\r\n      // \r\n      remainingCount.value = Number(result)\r\n      todayAddedCount.value = 0\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst loadFriendConfig = async () => {\r\n  try {\r\n    const savedConfig = localStorage.getItem('friendConfig')\r\n    if (savedConfig) {\r\n      friendConfig.value = JSON.parse(savedConfig)\r\n      return\r\n    }\r\n    await loadSopCache()\r\n    if (sopCache.value?.friendConfig) {\r\n      friendConfig.value = { ...friendConfig.value, ...sopCache.value.friendConfig, enabled: false }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\nconst loadAddNewFriendConfig = async () => {\r\n  try {\r\n    const savedConfig = localStorage.getItem('addFriendConfig')\r\n    if (savedConfig) {\r\n      addFriendConfig.value = JSON.parse(savedConfig)\r\n      return\r\n    }\r\n    await loadSopCache()\r\n    if (sopCache.value?.addFriendConfig) {\r\n      addFriendConfig.value = { ...addFriendConfig.value, ...sopCache.value.addFriendConfig, enabled: false }\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error)\r\n  }\r\n}\r\n\r\n// \r\nconst formatTimestamp = (timestamp: string | undefined) => {\r\n  try {\r\n    if (!timestamp) {\r\n      return ''\r\n    }\r\n\r\n    //  Z UTC \r\n    const timeStr = timestamp.endsWith('Z') ? \r\n      timestamp : \r\n      timestamp + (timestamp.includes('T') ? 'Z' : '')\r\n\r\n    //  UTC  UTC \r\n    const date = new Date(timeStr)\r\n    const utcYear = date.getUTCFullYear()\r\n    const utcMonth = String(date.getUTCMonth() + 1).padStart(2, '0')\r\n    const utcDay = String(date.getUTCDate()).padStart(2, '0')\r\n    const utcHours = String(date.getUTCHours()).padStart(2, '0')\r\n    const utcMinutes = String(date.getUTCMinutes()).padStart(2, '0')\r\n    const utcSeconds = String(date.getUTCSeconds()).padStart(2, '0')\r\n\r\n    return `${utcYear}-${utcMonth}-${utcDay} ${utcHours}:${utcMinutes}:${utcSeconds}`\r\n  } catch (error) {\r\n    console.error(':', error, 'timestamp:', timestamp)\r\n    return timestamp || ''\r\n  }\r\n}\r\n\r\nwatch(\r\n  () => route.query.function,\r\n  (newValue) => {\r\n    console.debug(\"AutoSOP==>watch\", newValue)\r\n    console.debug(\"AutoSOP:\", {\r\n      value: newValue,\r\n      type: typeof newValue,\r\n      isString: typeof newValue === 'string',\r\n      isValid: ['comment', 'activate', 'addFriend', 'autofollow'].includes(newValue as string)\r\n    })\r\n    \r\n    if (newValue && typeof newValue === 'string' && ['comment', 'activate', 'addFriend', 'autofollow'].includes(newValue)) {\r\n      console.debug('AutoSOP')\r\n      try {\r\n        console.debug(':', currentFunction.value)\r\n        // autofollowautoFollow\r\n        const targetFunction = newValue === 'autofollow' ? 'autoFollow' : newValue\r\n        currentFunction.value = targetFunction\r\n        console.debug('AutoSOP:', currentFunction.value)\r\n        \r\n        if (newValue === 'addFriend') {\r\n          console.debug('AutoSOP')\r\n          loadFriendLogs()\r\n        } else if (newValue === 'activate') {\r\n          console.debug('AutoSOP')\r\n          loadTaskLogs()\r\n        } else if (newValue === 'autofollow') {\r\n          console.debug('AutoSOP')\r\n          // \r\n        }\r\n      } catch (error) {\r\n        console.error('AutoSOP:', error)\r\n      }\r\n    } else {\r\n      console.debug('AutoSOP')\r\n    }\r\n  },\r\n  { immediate: true }\r\n)\r\n</script>\r\n\r\n<style scoped>\r\n.auto-sop-container {\r\n  display: flex;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n.task-list {\r\n  margin-bottom: 8px;\r\n  border-radius: 4px;\r\n  padding: 0;\r\n}\r\n\r\n.task-item {\r\n  padding: 6px;\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  margin-bottom: 6px;\r\n  border-radius: 6px;\r\n  background: #f8f9fa;\r\n  border: 1px solid #e4e7ed;\r\n}\r\n\r\n.task-time {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n  margin-right: 10px; /*  */\r\n}\r\n\r\n\r\n.task-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n.task-schedule{\r\n  font-size: 14px;\r\n}\r\n.switch-label {\r\n  margin-left: 8px;\r\n  vertical-align: middle;\r\n}\r\n\r\n.task-tags, .task-group {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 14px;\r\n}\r\n.tag-list {\r\n  display: flex;\r\n  gap: 4px;\r\n  flex-wrap: wrap;\r\n}\r\n.label {\r\n  color: #909399;\r\n  min-width: 70px;\r\n  font-size: 14px;\r\n}\r\n.group-name {\r\n  color: #606266;\r\n}\r\n.el-button {\r\n    margin-left: auto;  /*  */\r\n  }\r\n\r\n.task-progress {\r\n  color: #409EFF;\r\n  font-size: 14px;\r\n}\r\n\r\n.multi-cycle-box {\r\n  padding: 8px;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 6px;\r\n  background: #f8f9fa;\r\n}\r\n.multi-cycle-tip {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  color: #909399;\r\n  font-size: 13px;\r\n  line-height: 18px;\r\n  padding: 6px 8px;\r\n  background-color: #f5f7fa;\r\n  border-left: 3px solid var(--el-color-primary);\r\n  border-radius: 4px;\r\n  margin-bottom: 10px;\r\n}\r\n.multi-cycle-lock-tip {\r\n  color: #909399;\r\n  font-size: 12px;\r\n  margin-bottom: 8px;\r\n}\r\n.multi-cycle-box.disabled {\r\n  pointer-events: none;\r\n  opacity: 0.6;\r\n}\r\n.instance-item {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 6px 10px;\r\n  margin-right: 8px;\r\n  margin-bottom: 8px;\r\n  border: 1px solid #e4e7ed;\r\n  border-radius: 6px;\r\n  background-color: #fff;\r\n}\r\n\r\n.align-right-form-item .el-form-item__content {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.task-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding-top: 8px;\r\n}\r\n.greeting-group-box {\r\n  margin-top: 4px;\r\n  padding: 2px 4px;\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  background-color: #fff;\r\n}\r\n.greeting-label {\r\n  color: #606266;\r\n  font-size: 13px;\r\n}\r\n.new-task-form {\r\n  padding: 16px;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 4px;\r\n}\r\n\r\n.day-select {\r\n  margin-right: 12px;\r\n  width: 100px;\r\n}\r\n\r\n.time-picker {\r\n  width: 120px;\r\n}\r\n.function-section {\r\n  width: 80px;\r\n  position: relative;\r\n  z-index: 1000;\r\n  background-color: #f5f7fa;\r\n  flex-shrink: 0;\r\n  .function-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 16px;\r\n    padding: 16px;\r\n  }\r\n\r\n  .function-item {\r\n    position: relative;\r\n    width: 48px;\r\n    height: 48px;\r\n    border-radius: 12px;\r\n    background-color: var(--el-bg-color);\r\n    cursor: pointer;\r\n    transition: all 0.3s ease;\r\n    \r\n    &:hover {\r\n      background-color: var(--el-color-primary);\r\n      transform: translateX(4px);\r\n      \r\n      .function-tooltip {\r\n        opacity: 1;\r\n        visibility: visible;\r\n        transform: translateX(0);\r\n        background-color: #2c3e50;\r\n        z-index: 1000;\r\n      }\r\n      \r\n      .function-icon {\r\n        color: #fff;\r\n      }\r\n    }\r\n    \r\n    &.active {\r\n      background-color: var(--el-color-primary);\r\n      \r\n      .function-icon {\r\n        color: #fff;\r\n      }\r\n    }\r\n\r\n    .function-icon {\r\n      width: 100%;\r\n      height: 100%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      color: var(--el-text-color-regular);\r\n      transition: color 0.3s ease;\r\n      \r\n      .el-icon {\r\n        font-size: 24px;\r\n      }\r\n      .icon {\r\n        width: 24px !important;\r\n        height: 24px !important;\r\n        flex-shrink: 0;\r\n        }\r\n      \r\n      .check-icon, .plus-icon {\r\n        position: absolute;\r\n        font-size: 12px;\r\n        right: 8px;\r\n        bottom: 8px;\r\n      }\r\n    }\r\n\r\n    .function-tooltip {\r\n      position: absolute;\r\n      left: calc(100% + 8px);\r\n      top: 50%;\r\n      transform: translateX(-10px) translateY(-50%);\r\n      background-color: var(--el-color-primary);\r\n      color: #eaf0f7;\r\n      padding: 6px 12px;\r\n      border-radius: 6px;\r\n      font-size: 14px;\r\n      white-space: nowrap;\r\n      opacity: 0;\r\n      visibility: hidden;\r\n      transition: all 0.3s ease;\r\n      z-index: 100;\r\n      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n      \r\n      &::before {\r\n        content: '';\r\n        position: absolute;\r\n        left: -4px;\r\n        top: 50%;\r\n        transform: translateY(-50%) rotate(45deg);\r\n        width: 8px;\r\n        height: 8px;\r\n        background-color: var(--el-color-primary);\r\n      }\r\n    }\r\n  }\r\n}\r\n.function-section .section-title,\r\n.config-section .section-title,\r\n.log-section .section-title {\r\n  height: 48px;\r\n  line-height: 48px;\r\n}\r\n.config-section .section-title,\r\n.log-section .section-title {\r\n  margin: 0 0 16px;\r\n}\r\n.section-title .el-button {\r\n  margin: 0;\r\n}\r\n.content-wrapper {\r\n  flex: 1;\r\n  display: flex;\r\n  overflow: hidden;\r\n  width: 100%;\r\n}\r\n.config-section {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  width: 100%;\r\n  max-width: none;\r\n  margin: 0;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n}\r\n.log-section {\r\n  flex: 1; \r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: calc(100vh - 70px);\r\n  z-index: 1;\r\n  /*  */\r\n  transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;\r\n  transform: translateX(0);\r\n  opacity: 1;\r\n}\r\n:deep(.el-form-item__label) {\r\n  text-align: left;\r\n  justify-content: flex-start;\r\n}\r\n\r\n:deep(.el-form-item__content) {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-left: auto !important;\r\n}\r\n.file-upload {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.selected-file {\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n\r\n.config-content {\r\n  width: 100%;\r\n  padding: 10px;\r\n  overflow-y: auto;\r\n}\r\n.config-group {\r\n  margin-bottom: 24px;\r\n  padding: 16px;\r\n  border: 1px solid #ebeef5;\r\n  border-radius: 4px;\r\n}\r\n:deep(.el-form) {\r\n  width: 100%;\r\n}\r\n\r\n.config-group h4 {\r\n  margin: 0 0 16px;\r\n  color: #303133;\r\n}\r\n\r\n.greeting-list {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.greeting-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  margin-bottom: 8px;\r\n  padding: 8px;\r\n  background: #f5f7fa;\r\n  border-radius: 4px;\r\n}\r\n\r\n.greeting-content {\r\n  flex: 1;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.separator {\r\n  margin: 0 8px;\r\n}\r\n\r\n.section-title {\r\n  height: 48px;\r\n  line-height: 48px;\r\n  padding: 0 16px;\r\n  background-color: #f5f7fa;\r\n  border-bottom: 1px solid #e4e7ed;\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n  color: #303133;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 8px;\r\n}\r\n.section-title .button-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n}\r\n.section-title .button-group .el-button {\r\n  margin: 0;\r\n}\r\n.function-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n.function-item {\r\n  position: relative;\r\n  padding: 16px 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n.function-item:hover {\r\n  background-color: #ecf5ff;\r\n}\r\n.dialog-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n}\r\n.function-item.active {\r\n  background-color: #ecf5ff;\r\n  border-right: 2px solid #409eff;\r\n}\r\n\r\n.function-icon {\r\n  font-size: 24px;\r\n  color: #606266;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.function-name {\r\n  font-size: 14px;\r\n}\r\n\r\n.log-content {\r\n  flex: 1;\r\n  overflow: hidden; /*  */\r\n  padding: 6px;\r\n}\r\n.el-scrollbar {\r\n  height: 100%; /*  */\r\n}\r\n.log-item {\r\n  margin-bottom: 16px;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\r\n  overflow: hidden;\r\n}\r\n\r\n.task-header {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n\r\n.log-time {\r\n  color: #909399;\r\n  font-size: 13px;\r\n  margin-right: 6px;\r\n  margin-left: 8px; /*  */\r\n}\r\n\r\n\r\n.log-info {\r\n  padding: 8px;\r\n}\r\n\r\n.log-type {\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n}\r\n/*  */\r\n.moment-log .log-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n}\r\n.publisher {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 2px;\r\n  color: #409EFF;\r\n}\r\n/*  SVG  */\r\n.function-icon img.icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  transition: filter 0.3s ease;\r\n}\r\n/*  SVG  */\r\n.function-icon img.icon {\r\n  filter: invert(20%) sepia(10%) saturate(368%) hue-rotate(202deg) brightness(95%) contrast(87%);\r\n}\r\n/*  SVG  */\r\n.function-item:hover .function-icon img.icon {\r\n  filter: invert(100%) sepia(0%) saturate(0%) hue-rotate(93deg) brightness(103%) contrast(103%);\r\n}\r\n\r\n/*  SVG  */\r\n.function-icon img.icon.active-icon {\r\n  filter: invert(100%) sepia(0%) saturate(0%) hue-rotate(93deg) brightness(103%) contrast(103%);\r\n}\r\n.moment-content {\r\n  background: #f5f7fa;\r\n  padding: 4px;\r\n  border-radius: 6px;\r\n  color: #606266;\r\n  margin: 4px 0;\r\n  display: -webkit-box;\r\n  line-clamp: 3;\r\n  -webkit-line-clamp: 3;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  word-break: break-word;\r\n}\r\n\r\n.comment-info {\r\n  margin-top: 4px;\r\n  \r\n  .action-items {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 4px;\r\n    align-items: center;\r\n  }\r\n\r\n  .like-action {\r\n    color: #ff4949;\r\n    display: inline-flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .comment-action {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    margin-top: 4px;\r\n    gap: 4px;\r\n    \r\n    .comment-text {\r\n      word-break: break-word;\r\n    }\r\n  }\r\n}\r\n.comment-action,\r\n:deep(.el-form-item:last-child .el-form-item__content) {\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 100%;\r\n  margin-top: 20px;\r\n}\r\n.log-type.like {\r\n  background: #e1f3d8;\r\n  color: #67c23a;\r\n}\r\n\r\n.log-type.comment {\r\n  background: #fdf6ec;\r\n  color: #e6a23c;\r\n}\r\n\r\n.log-type.info {\r\n  background: #ecf5ff;\r\n  color: #409eff;\r\n}\r\n\r\n.log-type.error {\r\n  background: #fef0f0;\r\n  color: #f56c6c;\r\n}\r\n\r\n.log-message {\r\n  font-size: 14px;\r\n  color: #606266;\r\n  line-height: 1.5;\r\n}\r\n.auth-dialog-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.auth-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 16px;\r\n  margin-top: 20px;\r\n}\r\n.action-bar {\r\n  padding: 20px;\r\n  border-top: 1px solid #eee;\r\n  text-align: center;\r\n}\r\n.comment-tip {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 12px 16px;\r\n  margin: 20px 0;\r\n  background-color: #f4f4f5;\r\n  border-radius: 4px;\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n.plus-icon {\r\n  position: absolute;\r\n  right: -4px;\r\n  bottom: -4px;\r\n  font-size: 12px;\r\n}\r\n.comment-tip .el-icon {\r\n  font-size: 16px;\r\n  color: #909399;\r\n}\r\n.task-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n}\r\n/*  el-scrollbar  */\r\n:deep(.el-scrollbar__bar) {\r\n  opacity: 0;\r\n  transition: opacity 0.3s;\r\n}\r\n.config-section {\r\n  scrollbar-width: none; /* Firefox */\r\n  -ms-overflow-style: none; /* IE and Edge */\r\n}\r\n\r\n.config-section::-webkit-scrollbar {\r\n  display: none; /* Chrome, Safari, Opera */\r\n}\r\n/*  */\r\n.config-section:hover :deep(.el-scrollbar__bar) {\r\n  opacity: 1;\r\n}\r\n:deep(.el-scrollbar__wrap::-webkit-scrollbar) {\r\n  display: none; /* Chrome, Safari, Opera */\r\n}\r\n:deep(.el-scrollbar__wrap) {\r\n  scrollbar-width: none; /* Firefox */\r\n  -ms-overflow-style: none; /* IE and Edge */\r\n}\r\n\r\n.task-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px; /* 4px */\r\n}\r\n.task-row {\r\n  padding-left: 10px; /*  */\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n.task-tag {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n.create-task-btn {\r\n  margin-right: 8px;  /*  */\r\n}\r\n.task-log {\r\n  border-radius: 8px;\r\n  border: 1px solid #e4e7ed;\r\n  padding: 6px;\r\n}\r\n/*  */\r\n.task-log .log-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  margin-top: 4px;\r\n}\r\n\r\n\r\n.task-error {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: #f56c6c;\r\n  margin-top: 8px;\r\n}\r\n\r\n.el-icon {\r\n  vertical-align: middle;\r\n}\r\n.greeting-text {\r\n  color: #606266;\r\n  font-size: 13px;\r\n  margin-top: 4px;\r\n  display: block;\r\n}\r\n\r\n.friend-info {\r\n  font-weight: 500;\r\n  font-size: 13px;\r\n  color: #303133;\r\n}\r\n.friend-log {\r\n  margin-bottom: 12px;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  background: #f8f9fa;\r\n  border: 1px solid #e4e7ed;\r\n}\r\n.friend-count {\r\n  font-size: 14px;\r\n  color: #409EFF;\r\n  margin-bottom: 8px;\r\n}\r\n.friend-tag {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n  color: #67c23a;\r\n  font-size: 13px;\r\n}\r\n.config-tip {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 12px 16px;\r\n  margin-bottom: 20px;\r\n  background-color: #f4f4f5;\r\n  border-radius: 4px;\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n.config-tip .el-icon {\r\n  color: #909399;\r\n  font-size: 16px;\r\n}\r\n.friend-tag-input :deep(.el-input) {\r\n  margin-right: 10px;\r\n}\r\n.comment-action {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n:deep(.el-input), \r\n:deep(.el-input-number),\r\n:deep(.el-select) {\r\n  width: 100%;\r\n  max-width: 300px;\r\n}\r\n.remaining-count {\r\n  text-align: center;\r\n  font-weight: bold;\r\n  padding: 15px 0;\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n  margin: 15px 0;\r\n}\r\n:deep(.last-form-item .el-form-item__content) {\r\n  margin: 0 !important;\r\n  padding-right: 0 !important;\r\n  width: 100% !important;\r\n  box-sizing: border-box !important;\r\n}\r\n.check-icon {\r\n  position: absolute;\r\n  right: -2px;\r\n  bottom: -2px;\r\n  font-size: 12px;\r\n  color: var(--el-color-success);\r\n}\r\n.log-section.hidden {\r\n  transform: translateX(100%);\r\n  opacity: 0;\r\n  /*  */\r\n  pointer-events: none;\r\n}\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60px 20px;\r\n  text-align: center;\r\n}\r\n\r\n.empty-icon {\r\n  width: 80px;\r\n  height: 80px;\r\n  margin-bottom: 16px;\r\n  opacity: 0.6;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 14px;\r\n  color: #909399;\r\n  line-height: 1.5;\r\n}\r\n/*  */\r\n.tag-selection-dialog :deep(.el-dialog) {\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);\r\n}\r\n\r\n.tag-selection-dialog :deep(.el-dialog__header) {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border-radius: 12px 12px 0 0;\r\n  padding: 20px 24px;\r\n}\r\n\r\n.tag-selection-dialog :deep(.el-dialog__title) {\r\n  color: white;\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n}\r\n\r\n.tag-selection-dialog :deep(.el-dialog__headerbtn .el-dialog__close) {\r\n  color: white;\r\n  font-size: 18px;\r\n}\r\n\r\n.tag-selection-dialog :deep(.el-dialog__body) {\r\n  padding: 24px;\r\n  background: #fafbfc;\r\n}\r\n\r\n.tag-selection-content {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  padding-right: 8px;\r\n  /*  */\r\n  scrollbar-width: none; /* Firefox */\r\n  -ms-overflow-style: none; /* IE and Edge */\r\n}\r\n\r\n.tag-selection-content::-webkit-scrollbar {\r\n  display: none; /* Chrome, Safari and Opera */\r\n}\r\n\r\n.tag-checkbox-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.tag-checkbox-item {\r\n  background: white;\r\n  border: 1px solid #e1e8ed;\r\n  border-radius: 8px;\r\n  padding: 12px 16px;\r\n  margin: 0;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n.tag-checkbox-item:hover {\r\n  border-color: #667eea;\r\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.tag-checkbox-item :deep(.el-checkbox__input.is-checked .el-checkbox__inner) {\r\n  background-color: #667eea;\r\n  border-color: #667eea;\r\n}\r\n\r\n.tag-checkbox-item :deep(.el-checkbox__input.is-checked + .el-checkbox__label) {\r\n  color: #667eea;\r\n  font-weight: 500;\r\n}\r\n\r\n.tag-name {\r\n  font-weight: 500;\r\n  color: #2c3e50;\r\n}\r\n\r\n.tag-count {\r\n  color: #7f8c8d;\r\n  font-size: 14px;\r\n  margin-left: 4px;\r\n}\r\n\r\n.dialog-footer-custom {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 16px 0 0 0;\r\n  border-top: 1px solid #e1e8ed;\r\n  margin-top: 16px;\r\n  gap: 10px;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-left: auto;\r\n}\r\n\r\n.reset-btn {\r\n  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  padding: 8px 16px;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.reset-btn:hover {\r\n  background: linear-gradient(135deg, #ee5a24 0%, #ff6b6b 100%);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);\r\n}\r\n\r\n.action-buttons .el-button {\r\n  border-radius: 6px;\r\n  padding: 8px 20px;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.action-buttons .el-button--primary {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border: none;\r\n}\r\n\r\n.action-buttons .el-button--primary:hover {\r\n  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.action-buttons .el-button:not(.el-button--primary) {\r\n  background: white;\r\n  border: 1px solid #dcdfe6;\r\n  color: #606266;\r\n}\r\n\r\n.action-buttons .el-button:not(.el-button--primary):hover {\r\n  border-color: #c0c4cc;\r\n  background: #f5f7fa;\r\n  transform: translateY(-1px);\r\n}\r\n@media screen and (max-width: 650px) {\r\n  .log-section {\r\n    position: fixed;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\r\n    z-index: 100;\r\n    box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);\r\n    /*  */\r\n    width: 300px; /*  */\r\n  }\r\n  \r\n  .log-section.hidden {\r\n    transform: translateX(100%);\r\n  }\r\n}\r\n</style>","import script from \"./AutoSOP.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AutoSOP.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AutoSOP.vue?vue&type=style&index=0&id=6d38101f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6d38101f\"]])\n\nexport default __exports__","import { API_BASE_URL, headers } from './config'\r\n\r\nexport interface LicenseInfo {\r\n    valid: boolean;\r\n    message: string;\r\n    data?: {\r\n      machine_code: string;\r\n      activated_at: string;\r\n      license_info: any;\r\n    };\r\n}\r\n\r\nexport interface ActivateRequest {\r\n    activation_code: string;\r\n    machine_code: string;\r\n}\r\n\r\nexport const activateLicense = async (params: ActivateRequest): Promise<LicenseInfo> => {\r\n  try {\r\n    console.log(':', params);\r\n    const response = await fetch(`${API_BASE_URL}/api/license/activate`, {\r\n      method: 'POST',\r\n      headers: {\r\n        ...headers,\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify(params)\r\n    });\r\n    \r\n    console.log(':', response.status);\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => null);\r\n      console.error(':', errorData);\r\n      throw new Error(errorData?.detail || `: ${response.status}`);\r\n    }\r\n    \r\n    const result = await response.json();\r\n    console.log(':', result);\r\n    return result as LicenseInfo;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    throw new Error(error instanceof Error ? error.message : '');\r\n  }\r\n};\r\n\r\nexport const getMachineCode = async (): Promise<string> => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/license/machine-code`, {\r\n        method: 'GET',\r\n        headers,\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => null);\r\n        throw new Error(errorData?.detail || '');\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log(':', data);\r\n      \r\n      if (!data.machine_code) {\r\n        throw new Error('');\r\n      }\r\n      \r\n      return data.machine_code;\r\n    } catch (error) {\r\n      console.error(':', error);\r\n      throw error;\r\n    }\r\n};\r\n\r\nexport const verifyLicense = async (): Promise<LicenseInfo> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/license/verify`, {\r\n      method: 'GET',\r\n      headers: {\r\n        ...headers,\r\n        'Accept': 'application/json'\r\n      },\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => null);\r\n      throw new Error(errorData?.detail || `: ${response.status}`);\r\n    }\r\n    \r\n    const result = await response.json();\r\n    console.log(':', result);\r\n    return result as LicenseInfo;\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    throw new Error(error instanceof Error ? error.message : '');\r\n  }\r\n};","import { defineStore } from 'pinia'\r\nimport { verifyLicense } from '@/api/license'\r\nimport type { LicenseInfo } from '@/api/license'\r\n\r\nexport const useLicenseStore = defineStore('license', {\r\n  state: () => ({\r\n    isValid: false,\r\n    isVerified: false,\r\n    licenseInfo: null as LicenseInfo['data'] | null,\r\n    lastVerifyTime: 0\r\n  }),\r\n  getters: {\r\n    isLicenseValid: (state) => state.isValid && state.isVerified\r\n  },\r\n  actions: {\r\n    async verifyLicenseOnce() {\r\n      // 24\r\n      const now = Date.now()\r\n      if (this.isVerified && (now - this.lastVerifyTime < 24 * 60 * 60 * 1000)) {\r\n        return this.isValid\r\n      }\r\n      \r\n      try {\r\n        const result = await verifyLicense()\r\n        this.isValid = result.valid\r\n        this.licenseInfo = result.data || null\r\n        this.isVerified = true\r\n        this.lastVerifyTime = now\r\n        return this.isValid\r\n      } catch (error) {\r\n        console.error(':', error)\r\n        this.isValid = false\r\n        this.isVerified = true\r\n        this.lastVerifyTime = now\r\n        return false\r\n      }\r\n    }\r\n  }\r\n})","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"license-container\" }\nconst _hoisted_2 = { class: \"license-content\" }\n\nimport { ref, onMounted, } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { activateLicense, verifyLicense,getMachineCode } from '@/api/license';\r\nimport { useLicenseStore } from '@/store/license';\r\nimport { ElMessage } from 'element-plus';  // \r\n\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'LicenseView',\n  setup(__props) {\n\r\nconst router = useRouter();\r\nconst licenseStore = useLicenseStore();\r\nconst loading = ref(false);\r\nconst isActivated = ref(false);\r\nconst errorMessage = ref('');\r\nconst activationInfo = ref('');\r\n\r\nconst machineCode = ref('');\r\nconst form = ref({\r\n  activationCode: ''\r\n});\r\n\r\n// \r\nconst fetchMachineCode = async () => {  // \r\n  try {\r\n    machineCode.value = await getMachineCode();  //  API \r\n  } catch (error) {\r\n    console.error(':', error);\r\n    errorMessage.value = error instanceof Error ? error.message : '';\r\n  }\r\n};\r\n\r\n// \r\nconst copyMachineCode = () => {\r\n  navigator.clipboard.writeText(machineCode.value)\r\n    .then(() => {\r\n      ElMessage.success('');\r\n    })\r\n    .catch(() => {\r\n      ElMessage.error('');\r\n    });\r\n};\r\n\r\nconst handleGoHome = async () => {\r\n  try {\r\n    await router.push('/startup');\r\n  } catch (routerError) {\r\n    console.error('location:', routerError);\r\n    window.location.href = '/startup';\r\n  }\r\n};\r\n\r\nconst handleActivate = async () => {\r\n  if (!form.value.activationCode) {\r\n    errorMessage.value = '';\r\n    return;\r\n  }\r\n  \r\n  loading.value = true;\r\n  errorMessage.value = '';\r\n  \r\n  try {\r\n      const result = await activateLicense({\r\n        activation_code: form.value.activationCode,\r\n        machine_code: machineCode.value\r\n      });\r\n      \r\n                // \r\n      if (result.valid || result.message === '') {\r\n        try {\r\n          // \r\n          let licenseData = result.data?.license_info;\r\n          \r\n          if (!licenseData) {\r\n            // \r\n            const verifyResult = await verifyLicense();\r\n            console.log(':', verifyResult);\r\n            \r\n            if (verifyResult?.valid) {\r\n              licenseData = verifyResult.data;\r\n            } else {\r\n              throw new Error(verifyResult?.message || '');\r\n            }\r\n          }\r\n\r\n          if (licenseData) {\r\n            // store\r\n            licenseStore.$patch({\r\n              isValid: true,\r\n              isVerified: true,\r\n              licenseInfo: licenseData,\r\n              lastVerifyTime: Date.now()\r\n            });\r\n\r\n            isActivated.value = true;\r\n            activationInfo.value = '...';\r\n            ElMessage.success('');\r\n            \r\n            setTimeout(() => {\r\n              handleGoHome();\r\n            }, 1000);\r\n          }\r\n        } catch (verifyError) {\r\n          console.error(':', verifyError);\r\n          errorMessage.value = verifyError instanceof Error ? verifyError.message : '';\r\n        }\r\n      } else {\r\n        errorMessage.value = result.message;\r\n      }\r\n    } catch (error) {\r\n      errorMessage.value = error instanceof Error ? error.message : '';\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n};\r\nconst checkLicense = async () => {\r\n    try {\r\n    const result = await verifyLicense();\r\n    if (result.valid) {\r\n      // store\r\n      licenseStore.$patch({\r\n        isValid: true,\r\n        isVerified: true,\r\n        licenseInfo: result.data,\r\n        lastVerifyTime: Date.now()\r\n      });\r\n\r\n      isActivated.value = true;\r\n      activationInfo.value = `: ${new Date(result.data?.activated_at || '').toLocaleString()}`;\r\n      // \r\n      setTimeout(() => handleGoHome(), 1500);\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    errorMessage.value = '';\r\n  }\r\n};\r\nonMounted(async () => {\r\n  await fetchMachineCode();  // \r\n  console.log(\"...\");\r\n  \r\n  checkLicense();\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_result = _resolveComponent(\"el-result\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_el_card, { class: \"license-card\" }, {\n      header: _withCtx(() => [...(_cache[1] || (_cache[1] = [\n        _createElementVNode(\"div\", { class: \"card-header\" }, [\n          _createElementVNode(\"span\", null, \"\")\n        ], -1)\n      ]))]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_2, [\n          (!isActivated.value)\n            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                _createVNode(_component_el_alert, {\n                  type: \"info\",\n                  title: `: ${machineCode.value || '...'}`,\n                  class: \"mb-3\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_button, {\n                      type: \"text\",\n                      onClick: copyMachineCode\n                    }, {\n                      default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n                        _createTextVNode(\"  \", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"title\"]),\n                (errorMessage.value)\n                  ? (_openBlock(), _createBlock(_component_el_alert, {\n                      key: 0,\n                      title: errorMessage.value,\n                      type: \"error\",\n                      \"show-icon\": \"\",\n                      class: \"mb-3\"\n                    }, null, 8, [\"title\"]))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_el_form, {\n                  model: form.value,\n                  \"label-width\": \"100px\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_form_item, { label: \"\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_input, {\n                          modelValue: form.value.activationCode,\n                          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((form.value.activationCode) = $event)),\n                          placeholder: \"\"\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_form_item, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_el_button, {\n                          type: \"primary\",\n                          loading: loading.value,\n                          onClick: handleActivate\n                        }, {\n                          default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                            _createTextVNode(\"  \", -1)\n                          ]))]),\n                          _: 1\n                        }, 8, [\"loading\"])\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"model\"])\n              ], 64))\n            : (_openBlock(), _createBlock(_component_el_result, {\n                key: 1,\n                icon: \"success\",\n                title: \"\",\n                \"sub-title\": activationInfo.value\n              }, {\n                extra: _withCtx(() => [\n                  _createVNode(_component_el_button, {\n                    type: \"primary\",\n                    onClick: handleGoHome\n                  }, {\n                    default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                      _createTextVNode(\"\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"sub-title\"]))\n        ])\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"license-container\">\r\n    <el-card class=\"license-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span></span>\r\n        </div>\r\n      </template>\r\n      \r\n      <div class=\"license-content\">\r\n        <template v-if=\"!isActivated\">\r\n          <!--  -->\r\n          <el-alert\r\n            type=\"info\"\r\n            :title=\"`: ${machineCode || '...'}`\"\r\n            class=\"mb-3\"\r\n          >\r\n            <el-button type=\"text\" @click=\"copyMachineCode\">\r\n              \r\n            </el-button>\r\n          </el-alert>\r\n          \r\n          <el-alert\r\n            v-if=\"errorMessage\"\r\n            :title=\"errorMessage\"\r\n            type=\"error\"\r\n            show-icon\r\n            class=\"mb-3\"\r\n          />\r\n          \r\n          <el-form :model=\"form\" label-width=\"100px\">\r\n            <el-form-item label=\"\">\r\n              <el-input\r\n                v-model=\"form.activationCode\"\r\n                placeholder=\"\"\r\n              />\r\n            </el-form-item>\r\n            \r\n            <el-form-item>\r\n              <el-button \r\n                type=\"primary\" \r\n                :loading=\"loading\"\r\n                @click=\"handleActivate\"\r\n              >\r\n                \r\n              </el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </template>\r\n        \r\n        <template v-else>\r\n          <el-result\r\n            icon=\"success\"\r\n            title=\"\"\r\n            :sub-title=\"activationInfo\"\r\n          >\r\n            <template #extra>\r\n              <el-button type=\"primary\" @click=\"handleGoHome\"></el-button>\r\n            </template>\r\n          </el-result>\r\n        </template>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { activateLicense, verifyLicense,getMachineCode } from '@/api/license';\r\nimport { useLicenseStore } from '@/store/license';\r\nimport { ElMessage } from 'element-plus';  // \r\n\r\n\r\nconst router = useRouter();\r\nconst licenseStore = useLicenseStore();\r\nconst loading = ref(false);\r\nconst isActivated = ref(false);\r\nconst errorMessage = ref('');\r\nconst activationInfo = ref('');\r\n\r\nconst machineCode = ref('');\r\nconst form = ref({\r\n  activationCode: ''\r\n});\r\n\r\n// \r\nconst fetchMachineCode = async () => {  // \r\n  try {\r\n    machineCode.value = await getMachineCode();  //  API \r\n  } catch (error) {\r\n    console.error(':', error);\r\n    errorMessage.value = error instanceof Error ? error.message : '';\r\n  }\r\n};\r\n\r\n// \r\nconst copyMachineCode = () => {\r\n  navigator.clipboard.writeText(machineCode.value)\r\n    .then(() => {\r\n      ElMessage.success('');\r\n    })\r\n    .catch(() => {\r\n      ElMessage.error('');\r\n    });\r\n};\r\n\r\nconst handleGoHome = async () => {\r\n  try {\r\n    await router.push('/startup');\r\n  } catch (routerError) {\r\n    console.error('location:', routerError);\r\n    window.location.href = '/startup';\r\n  }\r\n};\r\n\r\nconst handleActivate = async () => {\r\n  if (!form.value.activationCode) {\r\n    errorMessage.value = '';\r\n    return;\r\n  }\r\n  \r\n  loading.value = true;\r\n  errorMessage.value = '';\r\n  \r\n  try {\r\n      const result = await activateLicense({\r\n        activation_code: form.value.activationCode,\r\n        machine_code: machineCode.value\r\n      });\r\n      \r\n                // \r\n      if (result.valid || result.message === '') {\r\n        try {\r\n          // \r\n          let licenseData = result.data?.license_info;\r\n          \r\n          if (!licenseData) {\r\n            // \r\n            const verifyResult = await verifyLicense();\r\n            console.log(':', verifyResult);\r\n            \r\n            if (verifyResult?.valid) {\r\n              licenseData = verifyResult.data;\r\n            } else {\r\n              throw new Error(verifyResult?.message || '');\r\n            }\r\n          }\r\n\r\n          if (licenseData) {\r\n            // store\r\n            licenseStore.$patch({\r\n              isValid: true,\r\n              isVerified: true,\r\n              licenseInfo: licenseData,\r\n              lastVerifyTime: Date.now()\r\n            });\r\n\r\n            isActivated.value = true;\r\n            activationInfo.value = '...';\r\n            ElMessage.success('');\r\n            \r\n            setTimeout(() => {\r\n              handleGoHome();\r\n            }, 1000);\r\n          }\r\n        } catch (verifyError) {\r\n          console.error(':', verifyError);\r\n          errorMessage.value = verifyError instanceof Error ? verifyError.message : '';\r\n        }\r\n      } else {\r\n        errorMessage.value = result.message;\r\n      }\r\n    } catch (error) {\r\n      errorMessage.value = error instanceof Error ? error.message : '';\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n};\r\nconst checkLicense = async () => {\r\n    try {\r\n    const result = await verifyLicense();\r\n    if (result.valid) {\r\n      // store\r\n      licenseStore.$patch({\r\n        isValid: true,\r\n        isVerified: true,\r\n        licenseInfo: result.data,\r\n        lastVerifyTime: Date.now()\r\n      });\r\n\r\n      isActivated.value = true;\r\n      activationInfo.value = `: ${new Date(result.data?.activated_at || '').toLocaleString()}`;\r\n      // \r\n      setTimeout(() => handleGoHome(), 1500);\r\n    }\r\n  } catch (error) {\r\n    console.error(':', error);\r\n    errorMessage.value = '';\r\n  }\r\n};\r\nonMounted(async () => {\r\n  await fetchMachineCode();  // \r\n  console.log(\"...\");\r\n  \r\n  checkLicense();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.license-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.license-card {\r\n  width: 500px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.license-content {\r\n  padding: 20px 0;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 20px;\r\n}\r\n</style>","import script from \"./LicenseView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./LicenseView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./LicenseView.vue?vue&type=style&index=0&id=77fa1de1&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-77fa1de1\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"task-main-info\" }\nconst _hoisted_2 = { class: \"task-header\" }\nconst _hoisted_3 = { class: \"task-title\" }\nconst _hoisted_4 = { class: \"task-grid\" }\nconst _hoisted_5 = { class: \"info-value\" }\nconst _hoisted_6 = { class: \"info-value\" }\nconst _hoisted_7 = { class: \"info-value sent\" }\nconst _hoisted_8 = { class: \"info-value\" }\nconst _hoisted_9 = { class: \"task-rule\" }\n\ninterface TaskItem {\r\n  id: string\r\n  name: string\r\n  createdAt: string\r\n  account: string\r\n  sentCount: number\r\n  nextRunAt: string\r\n  ruleDesc: string\r\n}\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TaskList',\n  props: {\n    tasks: {}\n  },\n  emits: [\"cancel\"],\n  setup(__props: any) {\n\r\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_empty = _resolveComponent(\"el-empty\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    (__props.tasks.length === 0)\n      ? (_openBlock(), _createBlock(_component_el_empty, {\n          key: 0,\n          description: \"\"\n        }))\n      : (_openBlock(true), _createElementBlock(_Fragment, { key: 1 }, _renderList(__props.tasks, (task) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            key: task.id,\n            class: \"task-item\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_1, [\n              _createElementVNode(\"div\", _hoisted_2, [\n                _createElementVNode(\"div\", _hoisted_3, [\n                  _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"status-dot\" }, null, -1)),\n                  _createTextVNode(\" \" + _toDisplayString(task.name), 1)\n                ]),\n                _createVNode(_component_el_button, {\n                  class: \"cancel-btn\",\n                  type: \"danger\",\n                  plain: \"\",\n                  onClick: ($event: any) => (_ctx.$emit('cancel', task.id))\n                }, {\n                  default: _withCtx(() => [...(_cache[1] || (_cache[1] = [\n                    _createTextVNode(\"\", -1)\n                  ]))]),\n                  _: 1\n                }, 8, [\"onClick\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"div\", null, [\n                  _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"info-label\" }, \"\", -1)),\n                  _createElementVNode(\"span\", _hoisted_5, _toDisplayString(task.createdAt), 1)\n                ]),\n                _createElementVNode(\"div\", null, [\n                  _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"info-label\" }, \"\", -1)),\n                  _createElementVNode(\"span\", _hoisted_6, _toDisplayString(task.account), 1)\n                ]),\n                _createElementVNode(\"div\", null, [\n                  _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"info-label\" }, \"\", -1)),\n                  _createElementVNode(\"span\", _hoisted_7, \" \" + _toDisplayString(task.sentCount) + \" \", 1)\n                ]),\n                _createElementVNode(\"div\", null, [\n                  _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"info-label\" }, \"\", -1)),\n                  _createElementVNode(\"span\", _hoisted_8, _toDisplayString(task.nextRunAt), 1)\n                ])\n              ]),\n              _createElementVNode(\"div\", _hoisted_9, \"\" + _toDisplayString(task.ruleDesc), 1)\n            ])\n          ]))\n        }), 128))\n  ]))\n}\n}\n\n})","<template>\r\n  <div>\r\n    <el-empty v-if=\"tasks.length === 0\" description=\"\" />\r\n    <div v-else v-for=\"task in tasks\" :key=\"task.id\" class=\"task-item\">\r\n      <div class=\"task-main-info\">\r\n        <div class=\"task-header\">\r\n          <div class=\"task-title\">\r\n            <span class=\"status-dot\"></span>\r\n            {{ task.name }}\r\n          </div>\r\n          <el-button class=\"cancel-btn\" type=\"danger\" plain @click=\"$emit('cancel', task.id)\"></el-button>\r\n        </div>\r\n        <div class=\"task-grid\">\r\n          <div>\r\n            <span class=\"info-label\"></span>\r\n            <span class=\"info-value\">{{ task.createdAt }}</span>\r\n          </div>\r\n          <div>\r\n            <span class=\"info-label\"></span>\r\n            <span class=\"info-value\">{{ task.account }}</span>\r\n          </div>\r\n          <div>\r\n            <span class=\"info-label\"></span>\r\n            <span class=\"info-value sent\"> {{ task.sentCount }} </span>\r\n          </div>\r\n          <div>\r\n            <span class=\"info-label\"></span>\r\n            <span class=\"info-value\">{{ task.nextRunAt }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"task-rule\">{{ task.ruleDesc }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\ninterface TaskItem {\r\n  id: string\r\n  name: string\r\n  createdAt: string\r\n  account: string\r\n  sentCount: number\r\n  nextRunAt: string\r\n  ruleDesc: string\r\n}\r\n\r\ndefineProps<{ tasks: TaskItem[] }>()\r\ndefineEmits<{ (e: 'cancel', id: string): void }>()\r\n</script>\r\n\r\n<style scoped>\r\n.task-item {\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 8px;\r\n  padding: 10px 15px;\r\n  margin-bottom: 16px;\r\n  background: #fff;\r\n}\r\n\r\n.task-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.task-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.cancel-btn {\r\n  min-width: 92px;\r\n}\r\n\r\n.status-dot {\r\n  width: 8px;\r\n  height: 8px;\r\n  background: #10b981;\r\n  border-radius: 50%;\r\n  display: inline-block;\r\n  margin-right: 8px;\r\n}\r\n\r\n.task-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  gap: 16px;\r\n  font-size: 13px;\r\n  color: #6b7280;\r\n  margin-top: 12px;\r\n}\r\n\r\n.info-label {\r\n  display: block;\r\n  font-size: 12px;\r\n  margin-bottom: 2px;\r\n  color: #9ca3af;\r\n}\r\n\r\n.info-value {\r\n  color: #1f2937;\r\n  font-weight: 500;\r\n}\r\n\r\n.sent {\r\n  color: #059669;\r\n}\r\n\r\n.task-rule {\r\n  margin-top: 8px;\r\n  background: #f9fafb;\r\n  padding: 8px 12px;\r\n  border-radius: 4px;\r\n  font-size: 13px;\r\n  color: #4b5563;\r\n  border-left: 3px solid #3b82f6;\r\n}\r\n</style>\r\n","import script from \"./TaskList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TaskList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TaskList.vue?vue&type=style&index=0&id=11835d24&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-11835d24\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { class: \"card\" }\nconst _hoisted_2 = { class: \"stepper\" }\nconst _hoisted_3 = { key: 0 }\nconst _hoisted_4 = { class: \"form-group\" }\nconst _hoisted_5 = { class: \"form-content\" }\nconst _hoisted_6 = { class: \"form-group\" }\nconst _hoisted_7 = { class: \"form-content\" }\nconst _hoisted_8 = { class: \"mode-row\" }\nconst _hoisted_9 = {\n  key: 1,\n  class: \"range-row\"\n}\nconst _hoisted_10 = {\n  key: 0,\n  class: \"interval-hint\"\n}\nconst _hoisted_11 = { class: \"form-group\" }\nconst _hoisted_12 = { class: \"form-content\" }\nconst _hoisted_13 = {\n  key: 0,\n  class: \"week-wrap\"\n}\nconst _hoisted_14 = { class: \"btn-row\" }\nconst _hoisted_15 = { key: 1 }\nconst _hoisted_16 = { class: \"form-group\" }\nconst _hoisted_17 = { class: \"form-content\" }\nconst _hoisted_18 = {\n  key: 0,\n  class: \"select-left\"\n}\nconst _hoisted_19 = {\n  key: 1,\n  class: \"select-left\"\n}\nconst _hoisted_20 = {\n  key: 2,\n  class: \"select-actions\"\n}\nconst _hoisted_21 = { class: \"group-preview\" }\nconst _hoisted_22 = {\n  key: 0,\n  class: \"group-hint\"\n}\nconst _hoisted_23 = {\n  key: 1,\n  class: \"group-count\"\n}\nconst _hoisted_24 = {\n  key: 2,\n  class: \"group-list\"\n}\nconst _hoisted_25 = [\"onClick\"]\nconst _hoisted_26 = { class: \"form-group\" }\nconst _hoisted_27 = { class: \"form-content\" }\nconst _hoisted_28 = { class: \"form-group\" }\nconst _hoisted_29 = { class: \"form-content\" }\nconst _hoisted_30 = { class: \"account-option\" }\nconst _hoisted_31 = { class: \"nickname\" }\nconst _hoisted_32 = { class: \"account-id\" }\nconst _hoisted_33 = { class: \"btn-row\" }\n\nimport { ref } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nimport { selectMomentFolder, openFolder, getActiveInstances, type Instance, createMomentPostTask } from '@/api/moments'\r\nimport { computed } from 'vue'\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CreateTaskWizard',\n  emits: [\"created\", \"cancel\"],\n  setup(__props, { emit: __emit }) {\n\r\nconst step = ref<1 | 2>(1)\r\n\r\nconst form = ref({\r\n  name: '',\r\n  execMode: 'fixed',\r\n  fixedTime: '',\r\n  rangeStart: '',\r\n  rangeEnd: '',\r\n  cycle: 'weekly',\r\n  materialFolder: '',\r\n  publishMode: 'sequence',\r\n  account: '',\r\n  postCount: 3\r\n})\r\nconst groupList = ref<string[]>([])\r\nconst activeInstances = ref<Instance[]>([])\r\n\r\nconst weeks = ref([\r\n  { label: '', value: '1', checked: true },\r\n  { label: '', value: '2', checked: true },\r\n  { label: '', value: '3', checked: true },\r\n  { label: '', value: '4', checked: true },\r\n  { label: '', value: '5', checked: true },\r\n  { label: '', value: '6', checked: false },\r\n  { label: '', value: '0', checked: false }\r\n])\r\n\r\nconst goStep = (target: 1 | 2) => {\r\n  if (target === 2 && form.value.execMode === 'range') {\r\n    const startMin = timeToMinutes(form.value.rangeStart)\r\n    const endMin = timeToMinutes(form.value.rangeEnd)\r\n    const count = Number(form.value.postCount) || 0\r\n    if (startMin != null && endMin != null && endMin > startMin && count > 0) {\r\n      const M = endMin - startMin\r\n      const interval = Math.floor(M / (count + 1))\r\n      if (interval < 15) {\r\n        ElMessage.error('15')\r\n        return\r\n      }\r\n    }\r\n  }\r\n  step.value = target\r\n  if (target === 2 && activeInstances.value.length === 0) {\r\n    loadActiveInstances()\r\n  }\r\n}\r\n\r\nconst selectFolder = async () => {\r\n  const res = await selectMomentFolder()\r\n  if (res.success && res.selected) {\r\n    form.value.materialFolder = res.selected\r\n    groupList.value = res.groups || []\r\n  }\r\n}\r\n\r\nconst clearSelection = () => {\r\n  form.value.materialFolder = ''\r\n  groupList.value = []\r\n}\r\n\r\nconst openGroup = async (name: string) => {\r\n  if (!form.value.materialFolder) return\r\n  const path = `${form.value.materialFolder}/${name}`\r\n  await openFolder(path)\r\n}\r\n\r\n// const choosePlan = async (name: string) => {\r\n//   form.value.materialFolder = `${basePath.value}/${name}`\r\n//   planDialogVisible.value = false\r\n//   const res = await listMomentGroups(name)\r\n//   groupList.value = res.success ? res.groups : []\r\n// }\r\nconst folderName = computed(() => {\r\n  if (!form.value.materialFolder) return ''\r\n  const parts = form.value.materialFolder.split(/\\\\|\\//)\r\n  return parts[parts.length - 1] || ''\r\n})\r\nconst emit = __emit\r\n\r\nconst formatTime = (val: unknown): string | undefined => {\r\n  if (!val) return undefined\r\n  if (val instanceof Date) {\r\n    const h = `${val.getHours()}`.padStart(2, '0')\r\n    const m = `${val.getMinutes()}`.padStart(2, '0')\r\n    return `${h}:${m}`\r\n  }\r\n  if (typeof val === 'string') return val\r\n  return undefined\r\n}\r\n\r\nconst submit = async () => {\r\n  const weekDays = weeks.value.filter(w => w.checked).map(w => w.value)\r\n  const payload = {\r\n    name: form.value.name,\r\n    execMode: form.value.execMode as 'fixed' | 'range',\r\n    fixedTime: formatTime(form.value.fixedTime),\r\n    rangeStart: formatTime(form.value.rangeStart),\r\n    rangeEnd: formatTime(form.value.rangeEnd),\r\n    postCount: form.value.postCount,\r\n    cycle: form.value.cycle as 'daily' | 'weekly',\r\n    weekDays,\r\n    materialFolder: form.value.materialFolder,\r\n    publishMode: form.value.publishMode as 'sequence' | 'random',\r\n    account: form.value.account\r\n  }\r\n  const res = await createMomentPostTask(payload)\r\n  if (res.success) {\r\n    ElMessage.success('')\r\n    emit('created')\r\n  } else {\r\n    ElMessage.error(res.error || '')\r\n  }\r\n}\r\n\r\nconst onSelectModuleClick = () => {\r\n  if (!form.value.materialFolder) {\r\n    selectFolder()\r\n  }\r\n}\r\n\r\nconst selectedWeekCount = computed(() => weeks.value.filter(w => w.checked).length)\r\nconst hasValidTime = computed(() => {\r\n  if (form.value.execMode === 'fixed') {\r\n    return !!form.value.fixedTime\r\n  }\r\n  return !!form.value.rangeStart && !!form.value.rangeEnd\r\n})\r\nconst canGoNext = computed(() => {\r\n  const nameOk = !!form.value.name && form.value.name.trim().length > 0\r\n  const weeklyOk = form.value.cycle === 'daily' || selectedWeekCount.value > 0\r\n  return nameOk && hasValidTime.value && weeklyOk\r\n})\r\n\r\nconst handleWeekChange = (w: { label: string; value: string; checked: boolean }) => {\r\n  if (form.value.cycle !== 'weekly') return\r\n  if (!w.checked && selectedWeekCount.value === 0) {\r\n    w.checked = true\r\n    ElMessage.warning('')\r\n  }\r\n}\r\n\r\nconst timeToMinutes = (val: unknown): number | null => {\r\n  if (!val) return null\r\n  if (val instanceof Date) {\r\n    return val.getHours() * 60 + val.getMinutes()\r\n  }\r\n  if (typeof val === 'string') {\r\n    const parts = val.split(':')\r\n    if (parts.length === 2) {\r\n      const h = Number(parts[0])\r\n      const m = Number(parts[1])\r\n      if (!isNaN(h) && !isNaN(m)) return h * 60 + m\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nconst intervalText = computed(() => {\r\n  if (form.value.execMode !== 'range') return ''\r\n  const startMin = timeToMinutes(form.value.rangeStart)\r\n  const endMin = timeToMinutes(form.value.rangeEnd)\r\n  const count = Number(form.value.postCount) || 0\r\n  if (startMin == null || endMin == null || endMin <= startMin || count <= 0) return ''\r\n  const M = endMin - startMin\r\n  const interval = Math.floor(M / (count + 1))\r\n  if (interval <= 0) return ''\r\n  return ` ${interval}  `\r\n})\r\n\r\nconst loadActiveInstances = async () => {\r\n  try {\r\n    const data = await getActiveInstances()\r\n    if (data.success) {\r\n      activeInstances.value = data.instances\r\n      if (data.instances.length === 1) {\r\n        form.value.account = data.instances[0].account_id\r\n      } else if (data.instances.length > 1) {\r\n        const act = data.instances.find(i => i.is_active)\r\n        if (act) form.value.account = act.account_id\r\n      }\r\n    }\r\n  } catch {}\r\n}\r\n\r\nconst canSubmit = computed(() => {\r\n  const hasFolder = !!form.value.materialFolder\r\n  const hasMaterials = groupList.value.length > 0\r\n  const hasAccount = !!form.value.account\r\n  return hasFolder && hasMaterials && hasAccount\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_radio = _resolveComponent(\"el-radio\")!\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\")!\n  const _component_el_time_picker = _resolveComponent(\"el-time-picker\")!\n  const _component_el_input_number = _resolveComponent(\"el-input-number\")!\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_Close = _resolveComponent(\"Close\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"step-line\" }, null, -1)),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"step-item\", { active: step.value === 1 }])\n      }, [...(_cache[12] || (_cache[12] = [\n        _createElementVNode(\"div\", { class: \"step-circle\" }, \"1\", -1),\n        _createElementVNode(\"div\", null, \"\", -1)\n      ]))], 2),\n      _createElementVNode(\"div\", {\n        class: _normalizeClass([\"step-item\", { active: step.value === 2 }])\n      }, [...(_cache[13] || (_cache[13] = [\n        _createElementVNode(\"div\", { class: \"step-circle\" }, \"2\", -1),\n        _createElementVNode(\"div\", null, \"\", -1)\n      ]))], 2)\n    ]),\n    (step.value === 1)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, [\n            _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"form-label\" }, \"\", -1)),\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createVNode(_component_el_input, {\n                modelValue: form.value.name,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((form.value.name) = $event)),\n                placeholder: \"1201-\",\n                style: {\"width\":\"100%\"}\n              }, null, 8, [\"modelValue\"])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_6, [\n            _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"form-label\" }, \"\", -1)),\n            _createElementVNode(\"div\", _hoisted_7, [\n              _createVNode(_component_el_radio_group, {\n                modelValue: form.value.execMode,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((form.value.execMode) = $event))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_radio, { label: \"fixed\" }, {\n                    default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n                      _createTextVNode(\"\", -1)\n                    ]))]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_radio, { label: \"range\" }, {\n                    default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                      _createTextVNode(\"()\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"]),\n              _createElementVNode(\"div\", _hoisted_8, [\n                (form.value.execMode === 'fixed')\n                  ? (_openBlock(), _createBlock(_component_el_time_picker, {\n                      key: 0,\n                      modelValue: form.value.fixedTime,\n                      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((form.value.fixedTime) = $event)),\n                      placeholder: \"\",\n                      format: \"HH:mm\"\n                    }, null, 8, [\"modelValue\"]))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                      _createVNode(_component_el_time_picker, {\n                        modelValue: form.value.rangeStart,\n                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((form.value.rangeStart) = $event)),\n                        placeholder: \"\",\n                        format: \"HH:mm\",\n                        class: \"time-input\",\n                        style: {\"width\":\"120px\"}\n                      }, null, 8, [\"modelValue\"]),\n                      _cache[18] || (_cache[18] = _createElementVNode(\"span\", { class: \"range-sep\" }, \"\", -1)),\n                      _createVNode(_component_el_time_picker, {\n                        modelValue: form.value.rangeEnd,\n                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((form.value.rangeEnd) = $event)),\n                        placeholder: \"\",\n                        format: \"HH:mm\",\n                        class: \"time-input\",\n                        style: {\"width\":\"120px\"}\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_el_input_number, {\n                        modelValue: form.value.postCount,\n                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((form.value.postCount) = $event)),\n                        min: 1,\n                        max: 30,\n                        \"controls-position\": \"right\",\n                        placeholder: \"\",\n                        step: 1,\n                        class: \"post-count\",\n                        style: {\"width\":\"82px\"}\n                      }, null, 8, [\"modelValue\"]),\n                      _cache[19] || (_cache[19] = _createElementVNode(\"span\", { class: \"count-unit\" }, \"\", -1)),\n                      (intervalText.value)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString(intervalText.value), 1))\n                        : _createCommentVNode(\"\", true)\n                    ]))\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_11, [\n            _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"form-label\" }, \"\", -1)),\n            _createElementVNode(\"div\", _hoisted_12, [\n              _createVNode(_component_el_radio_group, {\n                modelValue: form.value.cycle,\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((form.value.cycle) = $event))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_radio, { label: \"daily\" }, {\n                    default: _withCtx(() => [...(_cache[21] || (_cache[21] = [\n                      _createTextVNode(\"\", -1)\n                    ]))]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_radio, { label: \"weekly\" }, {\n                    default: _withCtx(() => [...(_cache[22] || (_cache[22] = [\n                      _createTextVNode(\"\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"]),\n              (form.value.cycle === 'weekly')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(weeks.value, (w) => {\n                      return (_openBlock(), _createBlock(_component_el_checkbox, {\n                        key: w.value,\n                        modelValue: w.checked,\n                        \"onUpdate:modelValue\": ($event: any) => ((w.checked) = $event),\n                        onChange: ($event: any) => (handleWeekChange(w))\n                      }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(w.label), 1)\n                        ]),\n                        _: 2\n                      }, 1032, [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"]))\n                    }), 128))\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_14, [\n            _createVNode(_component_el_button, {\n              onClick: _cache[7] || (_cache[7] = ($event: any) => (_ctx.$emit('cancel')))\n            }, {\n              default: _withCtx(() => [...(_cache[24] || (_cache[24] = [\n                _createTextVNode(\"\", -1)\n              ]))]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              disabled: !canGoNext.value,\n              onClick: _cache[8] || (_cache[8] = ($event: any) => (goStep(2)))\n            }, {\n              default: _withCtx(() => [...(_cache[25] || (_cache[25] = [\n                _createTextVNode(\"\", -1)\n              ]))]),\n              _: 1\n            }, 8, [\"disabled\"])\n          ])\n        ]))\n      : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n          _createElementVNode(\"div\", _hoisted_16, [\n            _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"form-label\" }, \"\", -1)),\n            _createElementVNode(\"div\", _hoisted_17, [\n              _createElementVNode(\"div\", {\n                class: _normalizeClass(['select-module', !form.value.materialFolder ? 'unselected' : 'selected']),\n                onClick: onSelectModuleClick\n              }, [\n                (!form.value.materialFolder)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, \"\"))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_19, \" \" + _toDisplayString(folderName.value), 1)),\n                (form.value.materialFolder)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                      _createVNode(_component_el_button, {\n                        size: \"small\",\n                        type: \"danger\",\n                        plain: \"\",\n                        onClick: clearSelection\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_icon, null, {\n                            default: _withCtx(() => [\n                              _createVNode(_component_Close)\n                            ]),\n                            _: 1\n                          })\n                        ]),\n                        _: 1\n                      })\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ], 2),\n              _createElementVNode(\"div\", _hoisted_21, [\n                (!form.value.materialFolder)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, \"\"))\n                  : (_openBlock(), _createElementBlock(\"div\", _hoisted_23, \" \" + _toDisplayString(groupList.value.length) + \" \", 1)),\n                (form.value.materialFolder)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(groupList.value, (g) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                          class: \"group-item\",\n                          key: g,\n                          onClick: ($event: any) => (openGroup(g))\n                        }, _toDisplayString(g), 9, _hoisted_25))\n                      }), 128))\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_26, [\n            _cache[29] || (_cache[29] = _createElementVNode(\"div\", { class: \"form-label\" }, \"\", -1)),\n            _createElementVNode(\"div\", _hoisted_27, [\n              _createVNode(_component_el_radio_group, {\n                modelValue: form.value.publishMode,\n                \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((form.value.publishMode) = $event))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_radio, { label: \"sequence\" }, {\n                    default: _withCtx(() => [...(_cache[27] || (_cache[27] = [\n                      _createTextVNode(\"\", -1)\n                    ]))]),\n                    _: 1\n                  }),\n                  _createVNode(_component_el_radio, { label: \"random\" }, {\n                    default: _withCtx(() => [...(_cache[28] || (_cache[28] = [\n                      _createTextVNode(\"\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_28, [\n            _cache[30] || (_cache[30] = _createElementVNode(\"div\", { class: \"form-label\" }, \"\", -1)),\n            _createElementVNode(\"div\", _hoisted_29, [\n              _createVNode(_component_el_select, {\n                modelValue: form.value.account,\n                \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((form.value.account) = $event)),\n                placeholder: \"\"\n              }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(activeInstances.value, (inst) => {\n                    return (_openBlock(), _createBlock(_component_el_option, {\n                      key: inst.account_id,\n                      label: inst.nickname,\n                      value: inst.account_id\n                    }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"span\", _hoisted_30, [\n                          _createElementVNode(\"span\", _hoisted_31, _toDisplayString(inst.nickname), 1),\n                          _createElementVNode(\"span\", _hoisted_32, _toDisplayString(inst.account_id), 1)\n                        ])\n                      ]),\n                      _: 2\n                    }, 1032, [\"label\", \"value\"]))\n                  }), 128))\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_33, [\n            _createVNode(_component_el_button, {\n              onClick: _cache[11] || (_cache[11] = ($event: any) => (goStep(1)))\n            }, {\n              default: _withCtx(() => [...(_cache[31] || (_cache[31] = [\n                _createTextVNode(\"\", -1)\n              ]))]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              disabled: !canSubmit.value,\n              onClick: submit\n            }, {\n              default: _withCtx(() => [...(_cache[32] || (_cache[32] = [\n                _createTextVNode(\"\", -1)\n              ]))]),\n              _: 1\n            }, 8, [\"disabled\"])\n          ])\n        ]))\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"card\">\r\n    <div class=\"stepper\">\r\n      <div class=\"step-line\"></div>\r\n      <div class=\"step-item\" :class=\"{ active: step === 1 }\">\r\n        <div class=\"step-circle\">1</div>\r\n        <div></div>\r\n      </div>\r\n      <div class=\"step-item\" :class=\"{ active: step === 2 }\">\r\n        <div class=\"step-circle\">2</div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"step === 1\">\r\n      <div class=\"form-group\">\r\n        <div class=\"form-label\"></div>\r\n        <div class=\"form-content\">\r\n          <el-input v-model=\"form.name\" placeholder=\"1201-\" style=\"width: 100%\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <div class=\"form-label\"></div>\r\n        <div class=\"form-content\">\r\n          <el-radio-group v-model=\"form.execMode\">\r\n            <el-radio label=\"fixed\"></el-radio>\r\n            <el-radio label=\"range\">()</el-radio>\r\n          </el-radio-group>\r\n          <div class=\"mode-row\">\r\n            <el-time-picker\r\n              v-if=\"form.execMode === 'fixed'\"\r\n              v-model=\"form.fixedTime\"\r\n              placeholder=\"\"\r\n              format=\"HH:mm\"\r\n            />\r\n            <div v-else class=\"range-row\">\r\n              <el-time-picker v-model=\"form.rangeStart\" placeholder=\"\" format=\"HH:mm\" class=\"time-input\" style=\"width: 120px\" />\r\n              <span class=\"range-sep\"></span>\r\n              <el-time-picker v-model=\"form.rangeEnd\" placeholder=\"\" format=\"HH:mm\" class=\"time-input\" style=\"width: 120px\" />\r\n              <el-input-number v-model=\"form.postCount\" :min=\"1\" :max=\"30\" controls-position=\"right\" placeholder=\"\" :step=\"1\" class=\"post-count\" style=\"width: 82px\" />\r\n              <span class=\"count-unit\"></span>\r\n              <span v-if=\"intervalText\" class=\"interval-hint\">{{ intervalText }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <div class=\"form-label\"></div>\r\n        <div class=\"form-content\">\r\n          <el-radio-group v-model=\"form.cycle\">\r\n            <el-radio label=\"daily\"></el-radio>\r\n            <el-radio label=\"weekly\"></el-radio>\r\n          </el-radio-group>\r\n          <div class=\"week-wrap\" v-if=\"form.cycle === 'weekly'\">\r\n            <el-checkbox v-for=\"w in weeks\" :key=\"w.value\" v-model=\"w.checked\" @change=\"handleWeekChange(w)\">{{ w.label }}</el-checkbox>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"btn-row\">\r\n        <el-button @click=\"$emit('cancel')\"></el-button>\r\n        <el-button type=\"primary\" :disabled=\"!canGoNext\" @click=\"goStep(2)\"></el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else>\r\n      <div class=\"form-group\">\r\n        <div class=\"form-label\"></div>\r\n        <div class=\"form-content\">\r\n          <div :class=\"['select-module', !form.materialFolder ? 'unselected' : 'selected']\" @click=\"onSelectModuleClick\">\r\n            <div v-if=\"!form.materialFolder\" class=\"select-left\"></div>\r\n            <div v-else class=\"select-left\">\r\n              {{ folderName }}\r\n            </div>\r\n            <div v-if=\"form.materialFolder\" class=\"select-actions\">\r\n              <el-button size=\"small\" type=\"danger\" plain @click=\"clearSelection\">\r\n                <el-icon><Close /></el-icon>\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          <div class=\"group-preview\">\r\n            <div class=\"group-hint\" v-if=\"!form.materialFolder\"></div>\r\n            <div v-else class=\"group-count\"> {{ groupList.length }} </div>\r\n            <div class=\"group-list\" v-if=\"form.materialFolder\">\r\n              <div class=\"group-item\" v-for=\"g in groupList\" :key=\"g\" @click=\"openGroup(g)\">\r\n                {{ g }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <div class=\"form-label\"></div>\r\n        <div class=\"form-content\">\r\n          <el-radio-group v-model=\"form.publishMode\">\r\n            <el-radio label=\"sequence\"></el-radio>\r\n            <el-radio label=\"random\"></el-radio>\r\n          </el-radio-group>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <div class=\"form-label\"></div>\r\n        <div class=\"form-content\">\r\n          <el-select v-model=\"form.account\" placeholder=\"\">\r\n            <el-option v-for=\"inst in activeInstances\" :key=\"inst.account_id\" :label=\"inst.nickname\" :value=\"inst.account_id\">\r\n              <span class=\"account-option\">\r\n                <span class=\"nickname\">{{ inst.nickname }}</span>\r\n                <span class=\"account-id\">{{ inst.account_id }}</span>\r\n              </span>\r\n            </el-option>\r\n          </el-select>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"btn-row\">\r\n        <el-button @click=\"goStep(1)\"></el-button>\r\n        <el-button type=\"primary\" :disabled=\"!canSubmit\" @click=\"submit\"></el-button>\r\n      </div>\r\n    </div>\r\n    <!-- <el-dialog v-model=\"planDialogVisible\" title=\"\" width=\"30%\">\r\n      <div>\r\n        <el-empty v-if=\"plans.length === 0\" description=\"data/moment_material \" />\r\n        <el-button v-for=\"p in plans\" :key=\"p\" style=\"margin-bottom:8px\" @click=\"choosePlan(p)\">{{ p }}</el-button>\r\n      </div>\r\n      <template #footer>\r\n        <el-button @click=\"planDialogVisible = false\"></el-button>\r\n      </template>\r\n    </el-dialog> -->\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nimport { selectMomentFolder, openFolder, getActiveInstances, type Instance, createMomentPostTask } from '@/api/moments'\r\nimport { computed } from 'vue'\r\nconst step = ref<1 | 2>(1)\r\n\r\nconst form = ref({\r\n  name: '',\r\n  execMode: 'fixed',\r\n  fixedTime: '',\r\n  rangeStart: '',\r\n  rangeEnd: '',\r\n  cycle: 'weekly',\r\n  materialFolder: '',\r\n  publishMode: 'sequence',\r\n  account: '',\r\n  postCount: 3\r\n})\r\nconst groupList = ref<string[]>([])\r\nconst activeInstances = ref<Instance[]>([])\r\n\r\nconst weeks = ref([\r\n  { label: '', value: '1', checked: true },\r\n  { label: '', value: '2', checked: true },\r\n  { label: '', value: '3', checked: true },\r\n  { label: '', value: '4', checked: true },\r\n  { label: '', value: '5', checked: true },\r\n  { label: '', value: '6', checked: false },\r\n  { label: '', value: '0', checked: false }\r\n])\r\n\r\nconst goStep = (target: 1 | 2) => {\r\n  if (target === 2 && form.value.execMode === 'range') {\r\n    const startMin = timeToMinutes(form.value.rangeStart)\r\n    const endMin = timeToMinutes(form.value.rangeEnd)\r\n    const count = Number(form.value.postCount) || 0\r\n    if (startMin != null && endMin != null && endMin > startMin && count > 0) {\r\n      const M = endMin - startMin\r\n      const interval = Math.floor(M / (count + 1))\r\n      if (interval < 15) {\r\n        ElMessage.error('15')\r\n        return\r\n      }\r\n    }\r\n  }\r\n  step.value = target\r\n  if (target === 2 && activeInstances.value.length === 0) {\r\n    loadActiveInstances()\r\n  }\r\n}\r\n\r\nconst selectFolder = async () => {\r\n  const res = await selectMomentFolder()\r\n  if (res.success && res.selected) {\r\n    form.value.materialFolder = res.selected\r\n    groupList.value = res.groups || []\r\n  }\r\n}\r\n\r\nconst clearSelection = () => {\r\n  form.value.materialFolder = ''\r\n  groupList.value = []\r\n}\r\n\r\nconst openGroup = async (name: string) => {\r\n  if (!form.value.materialFolder) return\r\n  const path = `${form.value.materialFolder}/${name}`\r\n  await openFolder(path)\r\n}\r\n\r\n// const choosePlan = async (name: string) => {\r\n//   form.value.materialFolder = `${basePath.value}/${name}`\r\n//   planDialogVisible.value = false\r\n//   const res = await listMomentGroups(name)\r\n//   groupList.value = res.success ? res.groups : []\r\n// }\r\nconst folderName = computed(() => {\r\n  if (!form.value.materialFolder) return ''\r\n  const parts = form.value.materialFolder.split(/\\\\|\\//)\r\n  return parts[parts.length - 1] || ''\r\n})\r\nconst emit = defineEmits<{ (e: 'created'): void; (e: 'cancel'): void }>()\r\n\r\nconst formatTime = (val: unknown): string | undefined => {\r\n  if (!val) return undefined\r\n  if (val instanceof Date) {\r\n    const h = `${val.getHours()}`.padStart(2, '0')\r\n    const m = `${val.getMinutes()}`.padStart(2, '0')\r\n    return `${h}:${m}`\r\n  }\r\n  if (typeof val === 'string') return val\r\n  return undefined\r\n}\r\n\r\nconst submit = async () => {\r\n  const weekDays = weeks.value.filter(w => w.checked).map(w => w.value)\r\n  const payload = {\r\n    name: form.value.name,\r\n    execMode: form.value.execMode as 'fixed' | 'range',\r\n    fixedTime: formatTime(form.value.fixedTime),\r\n    rangeStart: formatTime(form.value.rangeStart),\r\n    rangeEnd: formatTime(form.value.rangeEnd),\r\n    postCount: form.value.postCount,\r\n    cycle: form.value.cycle as 'daily' | 'weekly',\r\n    weekDays,\r\n    materialFolder: form.value.materialFolder,\r\n    publishMode: form.value.publishMode as 'sequence' | 'random',\r\n    account: form.value.account\r\n  }\r\n  const res = await createMomentPostTask(payload)\r\n  if (res.success) {\r\n    ElMessage.success('')\r\n    emit('created')\r\n  } else {\r\n    ElMessage.error(res.error || '')\r\n  }\r\n}\r\n\r\nconst onSelectModuleClick = () => {\r\n  if (!form.value.materialFolder) {\r\n    selectFolder()\r\n  }\r\n}\r\n\r\nconst selectedWeekCount = computed(() => weeks.value.filter(w => w.checked).length)\r\nconst hasValidTime = computed(() => {\r\n  if (form.value.execMode === 'fixed') {\r\n    return !!form.value.fixedTime\r\n  }\r\n  return !!form.value.rangeStart && !!form.value.rangeEnd\r\n})\r\nconst canGoNext = computed(() => {\r\n  const nameOk = !!form.value.name && form.value.name.trim().length > 0\r\n  const weeklyOk = form.value.cycle === 'daily' || selectedWeekCount.value > 0\r\n  return nameOk && hasValidTime.value && weeklyOk\r\n})\r\n\r\nconst handleWeekChange = (w: { label: string; value: string; checked: boolean }) => {\r\n  if (form.value.cycle !== 'weekly') return\r\n  if (!w.checked && selectedWeekCount.value === 0) {\r\n    w.checked = true\r\n    ElMessage.warning('')\r\n  }\r\n}\r\n\r\nconst timeToMinutes = (val: unknown): number | null => {\r\n  if (!val) return null\r\n  if (val instanceof Date) {\r\n    return val.getHours() * 60 + val.getMinutes()\r\n  }\r\n  if (typeof val === 'string') {\r\n    const parts = val.split(':')\r\n    if (parts.length === 2) {\r\n      const h = Number(parts[0])\r\n      const m = Number(parts[1])\r\n      if (!isNaN(h) && !isNaN(m)) return h * 60 + m\r\n    }\r\n  }\r\n  return null\r\n}\r\n\r\nconst intervalText = computed(() => {\r\n  if (form.value.execMode !== 'range') return ''\r\n  const startMin = timeToMinutes(form.value.rangeStart)\r\n  const endMin = timeToMinutes(form.value.rangeEnd)\r\n  const count = Number(form.value.postCount) || 0\r\n  if (startMin == null || endMin == null || endMin <= startMin || count <= 0) return ''\r\n  const M = endMin - startMin\r\n  const interval = Math.floor(M / (count + 1))\r\n  if (interval <= 0) return ''\r\n  return ` ${interval}  `\r\n})\r\n\r\nconst loadActiveInstances = async () => {\r\n  try {\r\n    const data = await getActiveInstances()\r\n    if (data.success) {\r\n      activeInstances.value = data.instances\r\n      if (data.instances.length === 1) {\r\n        form.value.account = data.instances[0].account_id\r\n      } else if (data.instances.length > 1) {\r\n        const act = data.instances.find(i => i.is_active)\r\n        if (act) form.value.account = act.account_id\r\n      }\r\n    }\r\n  } catch {}\r\n}\r\n\r\nconst canSubmit = computed(() => {\r\n  const hasFolder = !!form.value.materialFolder\r\n  const hasMaterials = groupList.value.length > 0\r\n  const hasAccount = !!form.value.account\r\n  return hasFolder && hasMaterials && hasAccount\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\r\n  padding: 24px;\r\n}\r\n\r\n.stepper {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 24px;\r\n  position: relative;\r\n}\r\n.step-item { z-index: 1; text-align: center; width: 160px; }\r\n.step-circle { width: 32px; height: 32px; background: #e5e7eb; color: #6b7280; border-radius: 50%; margin: 0 auto 8px; line-height: 32px; font-weight: 600; }\r\n.step-item.active .step-circle { background: #3b82f6; color: #fff; }\r\n.step-line { position: absolute; top: 15px; left: 50%; transform: translateX(-50%); width: 160px; height: 2px; background: #e5e7eb; z-index: 0; }\r\n\r\n.form-group { margin-bottom: 20px; display: flex; }\r\n.form-label { width: 120px; text-align: right; padding-right: 20px; padding-top: 8px; color: #6b7280; font-size: 14px; }\r\n.form-content { flex: 1; max-width: 100%; min-width: 0; }\r\n.mode-row { margin-top: 8px; }\r\n.range-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }\r\n.time-input { width: 120px !important; }\r\n:deep(.time-input .el-input__wrapper) { width: 100% !important; }\r\n.post-count { width: 72px; }\r\n.count-unit { color: #6b7280; font-size: 13px; }\r\n.interval-hint { color: #ef4444; font-size: 12px; }\r\n.select-module.unselected { cursor: pointer; }\r\n.range-sep { color: #9ca3af; }\r\n\r\n.week-wrap { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }\r\n\r\n.material-preview { margin-top: 10px; background: #fff; border: 1px solid #e5e7eb; border-radius: 4px; }\r\n.material-row { padding: 8px 12px; border-bottom: 1px solid #f3f4f6; font-size: 13px; }\r\n.material-row:last-child { border-bottom: none; }\r\n\r\n.btn-row { margin-top: 20px; display: flex; gap: 12px; }\r\n.select-module {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  background: #1f2937;\r\n  color: #fff;\r\n  border-radius: 10px;\r\n  padding: 10px 14px;\r\n  margin-bottom: 12px;\r\n}\r\n.select-module.unselected { cursor: pointer; opacity: 0.92; }\r\n.select-left { font-size: 14px; font-weight: 600; }\r\n.select-actions { display: flex; gap: 8px; }\r\n\r\n.group-preview { background: #f5f6f8; border-radius: 8px; padding: 12px; }\r\n.group-hint { color: #6b7280; font-size: 13px; }\r\n.group-count { color: #374151; font-size: 13px; margin-bottom: 8px; }\r\n.group-list { max-height: 240px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }\r\n.group-item { background: #eef2f7; border-radius: 10px; padding: 10px 12px; font-size: 13px; color: #374151; cursor: pointer; transition: all .2s ease; }\r\n.group-item:hover { background: #e2e8f0; }\r\n.account-option { display: flex; justify-content: space-between; align-items: center; }\r\n.nickname { font-weight: 600; }\r\n.account-id { font-size: 12px; color: #1890ff; background: rgba(24, 144, 255, 0.1); padding: 2px 6px; border-radius: 4px; }\r\n</style>\r\n","import script from \"./CreateTaskWizard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CreateTaskWizard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CreateTaskWizard.vue?vue&type=style&index=0&id=4675d005&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4675d005\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"empty\"\n}\nconst _hoisted_2 = {\n  key: 1,\n  class: \"log-list\"\n}\nconst _hoisted_3 = { class: \"log-header\" }\nconst _hoisted_4 = { class: \"plan\" }\nconst _hoisted_5 = { class: \"time\" }\nconst _hoisted_6 = [\"title\"]\nconst _hoisted_7 = { class: \"footer\" }\n\nimport { computed } from 'vue'\r\nimport { openFolder, type MomentPostLog } from '@/api/moments'\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MomentLogsDialog',\n  props: {\n    visible: { type: Boolean },\n    logs: {}\n  },\n  emits: [\"update:visible\"],\n  setup(__props: any, { emit: __emit }) {\n\r\nconst props = __props\r\nconst emit = __emit\r\n\r\nconst visible = computed({\r\n  get: () => props.visible,\r\n  set: (v: boolean) => emit('update:visible', v)\r\n})\r\n\r\nconst formattedLogs = computed(() => props.logs.map(l => {\r\n  const d = new Date(l.timestamp)\r\n  const time = `${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')} ${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`\r\n  const parts = l.folder_path.split(/\\\\|\\//)\r\n  const planName = parts.length >= 2 ? parts[parts.length - 2] : l.folder_path\r\n  return { ...l, time, planName }\r\n}))\r\n\r\nconst close = () => emit('update:visible', false)\r\nconst openMaterial = async (path: string) => { await openFolder(path) }\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: visible.value,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((visible).value = $event)),\n    title: \"\",\n    width: \"620px\"\n  }, {\n    footer: _withCtx(() => [\n      _createVNode(_component_el_button, { onClick: close }, {\n        default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n          _createTextVNode(\"\", -1)\n        ]))]),\n        _: 1\n      })\n    ]),\n    default: _withCtx(() => [\n      _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"subtitle\" }, \"48\", -1)),\n      (__props.logs.length === 0)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"\"))\n        : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(formattedLogs.value, (item) => {\n              return (_openBlock(), _createElementBlock(\"div\", {\n                key: item.id,\n                class: \"log-item\"\n              }, [\n                _createElementVNode(\"div\", _hoisted_3, [\n                  _createElementVNode(\"div\", _hoisted_4, _toDisplayString(item.planName), 1),\n                  _createElementVNode(\"div\", _hoisted_5, _toDisplayString(item.time), 1),\n                  _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"status\", item.status === 'success' ? 'ok' : 'fail'])\n                  }, _toDisplayString(item.status === 'success' ? '' : ''), 3)\n                ]),\n                _createElementVNode(\"div\", {\n                  class: \"text\",\n                  title: item.text\n                }, _toDisplayString(item.text), 9, _hoisted_6),\n                _createElementVNode(\"div\", _hoisted_7, [\n                  _createElementVNode(\"span\", null, \"\" + _toDisplayString(item.account), 1),\n                  _createVNode(_component_el_button, {\n                    link: \"\",\n                    type: \"primary\",\n                    onClick: ($event: any) => (openMaterial(item.folder_path))\n                  }, {\n                    default: _withCtx(() => [...(_cache[1] || (_cache[1] = [\n                      _createTextVNode(\"\", -1)\n                    ]))]),\n                    _: 1\n                  }, 8, [\"onClick\"])\n                ])\n              ]))\n            }), 128))\n          ]))\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog v-model=\"visible\" title=\"\" width=\"620px\">\r\n    <div class=\"subtitle\">48</div>\r\n    <div v-if=\"logs.length === 0\" class=\"empty\"></div>\r\n    <div v-else class=\"log-list\">\r\n      <div v-for=\"item in formattedLogs\" :key=\"item.id\" class=\"log-item\">\r\n        <div class=\"log-header\">\r\n          <div class=\"plan\">{{ item.planName }}</div>\r\n          <div class=\"time\">{{ item.time }}</div>\r\n          <div class=\"status\" :class=\"item.status === 'success' ? 'ok' : 'fail'\">{{ item.status === 'success' ? '' : '' }}</div>\r\n        </div>\r\n        <div class=\"text\" :title=\"item.text\">{{ item.text }}</div>\r\n        <div class=\"footer\">\r\n          <span>{{ item.account }}</span>\r\n          <el-button link type=\"primary\" @click=\"openMaterial(item.folder_path)\"></el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <template #footer>\r\n      <el-button @click=\"close\"></el-button>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from 'vue'\r\nimport { openFolder, type MomentPostLog } from '@/api/moments'\r\n\r\nconst props = defineProps<{ visible: boolean; logs: MomentPostLog[] }>()\r\nconst emit = defineEmits<{ (e: 'update:visible', val: boolean): void }>()\r\n\r\nconst visible = computed({\r\n  get: () => props.visible,\r\n  set: (v: boolean) => emit('update:visible', v)\r\n})\r\n\r\nconst formattedLogs = computed(() => props.logs.map(l => {\r\n  const d = new Date(l.timestamp)\r\n  const time = `${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')} ${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`\r\n  const parts = l.folder_path.split(/\\\\|\\//)\r\n  const planName = parts.length >= 2 ? parts[parts.length - 2] : l.folder_path\r\n  return { ...l, time, planName }\r\n}))\r\n\r\nconst close = () => emit('update:visible', false)\r\nconst openMaterial = async (path: string) => { await openFolder(path) }\r\n</script>\r\n\r\n<style scoped>\r\n.subtitle { color: #6b7280; font-size: 13px; margin-bottom: 10px; }\r\n.empty { color: #9ca3af; font-size: 13px; padding: 16px; text-align: center; }\r\n.log-list { display: flex; flex-direction: column; gap: 12px; }\r\n.log-item { border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; background: #fff; }\r\n.log-header { display: grid; grid-template-columns: 1fr 120px 90px; align-items: center; gap: 8px; margin-bottom: 8px; }\r\n.plan { font-weight: 600; color: #111827; }\r\n.time { color: #6b7280; font-size: 13px; }\r\n.status { justify-self: end; font-size: 12px; border-radius: 12px; padding: 2px 8px; }\r\n.status.ok { color: #10b981; background: rgba(16,185,129,0.12); }\r\n.status.fail { color: #ef4444; background: rgba(239,68,68,0.12); }\r\n.text { background: #f3f4f6; border-radius: 6px; padding: 8px; color: #374151; font-size: 13px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }\r\n.footer { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; color: #6b7280; font-size: 13px; }\r\n</style>","import script from \"./MomentLogsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MomentLogsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MomentLogsDialog.vue?vue&type=style&index=0&id=64dcd870&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-64dcd870\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, normalizeClass as _normalizeClass, vShow as _vShow, withDirectives as _withDirectives, createBlock as _createBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"moments-container\" }\nconst _hoisted_2 = { class: \"page-header\" }\nconst _hoisted_3 = { class: \"title-wrap\" }\nconst _hoisted_4 = { class: \"title-line\" }\nconst _hoisted_5 = { class: \"inline-stat\" }\nconst _hoisted_6 = { class: \"actions\" }\nconst _hoisted_7 = { class: \"content-grid\" }\nconst _hoisted_8 = { class: \"mini-sidebar\" }\nconst _hoisted_9 = { class: \"main-section\" }\n\nimport { ref, computed, onMounted } from 'vue'\r\nimport { ElMessageBox, ElMessage } from 'element-plus'\r\nimport TaskList from '@/components/moments/TaskList.vue'\r\nimport CreateTaskWizard from '@/components/moments/CreateTaskWizard.vue'\r\nimport { getMomentPostTasks, cancelMomentPostTask, getMomentPostLogs, type MomentPostLog } from '@/api/moments'\r\nimport MomentLogsDialog from '@/components/moments/MomentLogsDialog.vue'\r\n\r\ninterface TaskItem {\r\n  id: string\r\n  name: string\r\n  createdAt: string\r\n  account: string\r\n  sentCount: number\r\n  nextRunAt: string\r\n  ruleDesc: string\r\n}\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{ name: 'MomentsView' },\n  __name: 'MomentsView',\n  setup(__props) {\n\r\n\r\n\r\nconst activeView = ref<'list' | 'create'>('list')\r\n\r\nconst tasks = ref<TaskItem[]>([])\r\nconst logsVisible = ref(false)\r\nconst logs = ref<MomentPostLog[]>([])\r\nconst wizardKey = ref(0)\r\n\r\nconst todayCount = computed(() => {\r\n  const now = new Date()\r\n  const y = now.getFullYear(), m = now.getMonth(), d = now.getDate()\r\n  return logs.value.filter(l => {\r\n    if (l.status !== 'success') return false\r\n    const t = new Date(l.timestamp)\r\n    return t.getFullYear() === y && t.getMonth() === m && t.getDate() === d\r\n  }).length\r\n})\r\n\r\nconst switchView = (view: 'list' | 'create') => {\r\n  activeView.value = view\r\n  if (view === 'list') {\r\n    loadTasks()\r\n  }\r\n}\r\n\r\nconst handleCancelTask = async (taskId: string) => {\r\n  try {\r\n    await ElMessageBox.confirm('', '', { type: 'warning' })\r\n    const res = await cancelMomentPostTask(taskId)\r\n    if (res.success) {\r\n      tasks.value = tasks.value.filter(t => t.id !== taskId)\r\n      ElMessage.success('')\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch {}\r\n}\r\n\r\nconst handleTaskCreated = () => {\r\n  ElMessage.success('')\r\n  activeView.value = 'list'\r\n  loadTasks()\r\n  wizardKey.value++\r\n}\r\n\r\nconst loadTasks = async () => {\r\n  try {\r\n    const res = await getMomentPostTasks()\r\n    if (res.success) {\r\n      tasks.value = res.tasks\r\n    }\r\n  } catch {}\r\n}\r\n\r\nonMounted(() => {\r\n  loadTasks()\r\n  loadLogs()\r\n})\r\n\r\nconst loadLogs = async () => {\r\n  try {\r\n    const res = await getMomentPostLogs()\r\n    if (res.success) {\r\n      logs.value = res.logs\r\n    }\r\n  } catch {}\r\n}\r\n\r\nconst openLogs = async () => {\r\n  await loadLogs()\r\n  logsVisible.value = true\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"page-title\" }, \"\", -1)),\n          _createElementVNode(\"div\", _hoisted_5, \"\" + _toDisplayString(todayCount.value) + \" \", 1)\n        ]),\n        _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"page-subtitle\" }, \" 4.0 \", -1))\n      ]),\n      _createElementVNode(\"div\", _hoisted_6, [\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          plain: \"\",\n          onClick: openLogs\n        }, {\n          default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n            _createTextVNode(\"\", -1)\n          ]))]),\n          _: 1\n        })\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createElementVNode(\"aside\", _hoisted_8, [\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"icon-btn\", { active: activeView.value === 'list' }]),\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (switchView('list'))),\n          \"data-title\": \"\"\n        }, [...(_cache[6] || (_cache[6] = [\n          _createElementVNode(\"svg\", {\n            width: \"20\",\n            height: \"20\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            \"stroke-width\": \"2\",\n            viewBox: \"0 0 24 24\"\n          }, [\n            _createElementVNode(\"path\", { d: \"M4 6h16M4 12h16M4 18h16\" })\n          ], -1)\n        ]))], 2),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"icon-btn\", { active: activeView.value === 'create' }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (switchView('create'))),\n          \"data-title\": \"\"\n        }, [...(_cache[7] || (_cache[7] = [\n          _createElementVNode(\"svg\", {\n            width: \"20\",\n            height: \"20\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            \"stroke-width\": \"2\",\n            viewBox: \"0 0 24 24\"\n          }, [\n            _createElementVNode(\"path\", { d: \"M12 4v16m8-8H4\" })\n          ], -1)\n        ]))], 2)\n      ]),\n      _createElementVNode(\"section\", _hoisted_9, [\n        _withDirectives(_createVNode(TaskList, {\n          tasks: tasks.value,\n          onCancel: handleCancelTask\n        }, null, 8, [\"tasks\"]), [\n          [_vShow, activeView.value === 'list']\n        ]),\n        _withDirectives((_openBlock(), _createBlock(CreateTaskWizard, {\n          key: wizardKey.value,\n          onCreated: handleTaskCreated\n        })), [\n          [_vShow, activeView.value === 'create']\n        ]),\n        _createVNode(MomentLogsDialog, {\n          visible: logsVisible.value,\n          \"onUpdate:visible\": _cache[2] || (_cache[2] = ($event: any) => ((logsVisible).value = $event)),\n          logs: logs.value\n        }, null, 8, [\"visible\", \"logs\"])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"moments-container\">\r\n    <div class=\"page-header\">\r\n      <div class=\"title-wrap\">\r\n        <div class=\"title-line\">\r\n          <div class=\"page-title\"></div>\r\n          <div class=\"inline-stat\">{{ todayCount }} </div>\r\n        </div>\r\n        <div class=\"page-subtitle\"> 4.0 </div>\r\n      </div>\r\n      <div class=\"actions\">\r\n        <el-button type=\"primary\" plain @click=\"openLogs\"></el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"content-grid\">\r\n      <aside class=\"mini-sidebar\">\r\n        <div class=\"icon-btn\" :class=\"{ active: activeView === 'list' }\" @click=\"switchView('list')\" data-title=\"\">\r\n          <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\"><path d=\"M4 6h16M4 12h16M4 18h16\"></path></svg>\r\n        </div>\r\n        <div class=\"icon-btn\" :class=\"{ active: activeView === 'create' }\" @click=\"switchView('create')\" data-title=\"\">\r\n          <svg width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\"><path d=\"M12 4v16m8-8H4\"></path></svg>\r\n        </div>\r\n      </aside>\r\n\r\n      <section class=\"main-section\">\r\n        <TaskList v-show=\"activeView === 'list'\" :tasks=\"tasks\" @cancel=\"handleCancelTask\" />\r\n        <CreateTaskWizard :key=\"wizardKey\" v-show=\"activeView === 'create'\" @created=\"handleTaskCreated\" />\r\n        <MomentLogsDialog v-model:visible=\"logsVisible\" :logs=\"logs\" />\r\n      </section>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { ElMessageBox, ElMessage } from 'element-plus'\r\nimport TaskList from '@/components/moments/TaskList.vue'\r\nimport CreateTaskWizard from '@/components/moments/CreateTaskWizard.vue'\r\nimport { getMomentPostTasks, cancelMomentPostTask, getMomentPostLogs, type MomentPostLog } from '@/api/moments'\r\nimport MomentLogsDialog from '@/components/moments/MomentLogsDialog.vue'\r\n\r\ndefineOptions({ name: 'MomentsView' })\r\n\r\ninterface TaskItem {\r\n  id: string\r\n  name: string\r\n  createdAt: string\r\n  account: string\r\n  sentCount: number\r\n  nextRunAt: string\r\n  ruleDesc: string\r\n}\r\n\r\nconst activeView = ref<'list' | 'create'>('list')\r\n\r\nconst tasks = ref<TaskItem[]>([])\r\nconst logsVisible = ref(false)\r\nconst logs = ref<MomentPostLog[]>([])\r\nconst wizardKey = ref(0)\r\n\r\nconst todayCount = computed(() => {\r\n  const now = new Date()\r\n  const y = now.getFullYear(), m = now.getMonth(), d = now.getDate()\r\n  return logs.value.filter(l => {\r\n    if (l.status !== 'success') return false\r\n    const t = new Date(l.timestamp)\r\n    return t.getFullYear() === y && t.getMonth() === m && t.getDate() === d\r\n  }).length\r\n})\r\n\r\nconst switchView = (view: 'list' | 'create') => {\r\n  activeView.value = view\r\n  if (view === 'list') {\r\n    loadTasks()\r\n  }\r\n}\r\n\r\nconst handleCancelTask = async (taskId: string) => {\r\n  try {\r\n    await ElMessageBox.confirm('', '', { type: 'warning' })\r\n    const res = await cancelMomentPostTask(taskId)\r\n    if (res.success) {\r\n      tasks.value = tasks.value.filter(t => t.id !== taskId)\r\n      ElMessage.success('')\r\n    } else {\r\n      ElMessage.error('')\r\n    }\r\n  } catch {}\r\n}\r\n\r\nconst handleTaskCreated = () => {\r\n  ElMessage.success('')\r\n  activeView.value = 'list'\r\n  loadTasks()\r\n  wizardKey.value++\r\n}\r\n\r\nconst loadTasks = async () => {\r\n  try {\r\n    const res = await getMomentPostTasks()\r\n    if (res.success) {\r\n      tasks.value = res.tasks\r\n    }\r\n  } catch {}\r\n}\r\n\r\nonMounted(() => {\r\n  loadTasks()\r\n  loadLogs()\r\n})\r\n\r\nconst loadLogs = async () => {\r\n  try {\r\n    const res = await getMomentPostLogs()\r\n    if (res.success) {\r\n      logs.value = res.logs\r\n    }\r\n  } catch {}\r\n}\r\n\r\nconst openLogs = async () => {\r\n  await loadLogs()\r\n  logsVisible.value = true\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.moments-container {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);\r\n  overflow: hidden;\r\n}\r\n\r\n.page-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 15px;\r\n  background: white;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\r\n}\r\n.title-wrap { display: flex; flex-direction: column; align-items: flex-start; gap: 6px; }\r\n.title-line { display: flex; align-items: center; gap: 12px; }\r\n.inline-stat { background: #dbeafe; color: #1e40af; padding: 4px 10px; border-radius: 14px; font-size: 13px; font-weight: 500; }\r\n.actions { display: flex; align-items: center; }\r\n\r\n.page-title {\r\n  font-size: 22px;\r\n  font-weight: 600;\r\n  color: #1f2937;\r\n}\r\n\r\n.page-subtitle {\r\n  font-size: 13px;\r\n  color: #f59e0b;\r\n  margin-top: 4px;\r\n  display: block;\r\n}\r\n\r\n.stat-badge {\r\n  background: #dbeafe;\r\n  color: #1e40af;\r\n  padding: 6px 16px;\r\n  border-radius: 20px;\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n}\r\n\r\n.content-grid {\r\n  display: flex;\r\n  gap: 12px;\r\n  flex: 1;\r\n  overflow: hidden;\r\n  padding: 12px;\r\n}\r\n\r\n.mini-sidebar {\r\n  width: 64px;\r\n  background: #ffffff;\r\n  border-right: 1px solid #e5e7eb;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  padding: 20px 12px 0;\r\n  box-shadow: 1px 0 6px rgba(0,0,0,0.02);\r\n}\r\n.icon-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 0 auto 20px;\r\n  cursor: pointer;\r\n  color: #6b7280;\r\n  font-size: 20px;\r\n  transition: all 0.2s;\r\n  position: relative;\r\n}\r\n.icon-btn:hover {\r\n  background-color: #f3f4f6;\r\n  color: #3b82f6;\r\n}\r\n.icon-btn.active {\r\n  background-color: #eff6ff;\r\n  color: #3b82f6;\r\n  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.1);\r\n}\r\n.icon-btn::after {\r\n  content: attr(data-title);\r\n  position: absolute;\r\n  left: 50px;\r\n  background: rgba(0,0,0,0.8);\r\n  color: #fff;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  white-space: nowrap;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  transition: opacity 0.2s;\r\n  pointer-events: none;\r\n}\r\n.icon-btn:hover::after { opacity: 1; visibility: visible; }\r\n\r\n.main-section {\r\n  flex: 1;\r\n  background: transparent;\r\n}\r\n</style>","import script from \"./MomentsView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MomentsView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MomentsView.vue?vue&type=style&index=0&id=10fa749c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-10fa749c\"]])\n\nexport default __exports__","import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router'\r\nimport StartupPage from '../views/StartupPage.vue'\r\nimport MultiWelcomePage from '../views/MultiWelcomePage.vue'\r\nimport AiChatNew from '../views/AiChatNew.vue'\r\nimport Settings from '../views/SettingsPage.vue'  // \r\nimport AutoSOP from '../views/AutoSOP.vue'\r\nimport LicenseView from '@/views/LicenseView.vue'\r\nimport Moments from '../views/MomentsView.vue'\r\nimport { useLicenseStore } from '@/store/license'\r\nconst isNarrowScreen = () => window.innerWidth < 650\r\nconst routes: Array<RouteRecordRaw> = [\r\n  {\r\n    path: '/license',\r\n    name: 'License',\r\n    component: LicenseView\r\n  },\r\n  {\r\n    path: '/',\r\n    redirect: '/startup'\r\n  },\r\n  {\r\n    path: '/startup',\r\n    name: 'StartupPage',\r\n    component: StartupPage\r\n  },\r\n  {\r\n    path: '/welcome',\r\n    name: 'WelcomePage',\r\n    component: MultiWelcomePage,\r\n    meta: { requiresStartup: true }\r\n  },\r\n  {\r\n    path: '/ai-chat',\r\n    name: 'AiChat',\r\n    component: AiChatNew,\r\n    meta: { requiresStartup: true,\r\n      shouldHideRightPanel: isNarrowScreen\r\n     }\r\n  },\r\n  {\r\n    path: '/customer-management',\r\n    name: 'CustomerManagement',\r\n    component: () => import('../views/CustomerManagement.vue'),\r\n    meta: { requiresStartup: true }\r\n  },\r\n  {\r\n    path: '/moments',\r\n    name: 'Moments',\r\n    component: Moments,\r\n    meta: { requiresStartup: true }\r\n  },\r\n  {\r\n    path: '/settings',\r\n    name: 'Settings',\r\n    component: Settings,\r\n    meta: { requiresStartup: true }\r\n  },\r\n  {\r\n    path: '/auto-add',\r\n    name: 'AutoSOP',\r\n    component: AutoSOP,\r\n    meta: { requiresStartup: true,\r\n      shouldHideRightPanel: isNarrowScreen\r\n     },\r\n    props: (route) => ({\r\n      activeFunction: route.params.activeFunction\r\n    })\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(''),\r\n  routes\r\n})\r\n// \r\nrouter.beforeEach(async (to, from, next) => {\r\n  // \r\n  // console.debug('before:', to.path)\r\n    // \r\n    if (to.name === 'License') {\r\n      next();\r\n      return;\r\n    }\r\n    \r\n    // storeAPI\r\n    const licenseStore = useLicenseStore()\r\n    if (!licenseStore.isLicenseValid) {\r\n      // \r\n      if (!licenseStore.isVerified) {\r\n        const isValid = await licenseStore.verifyLicenseOnce()\r\n        if (!isValid) {\r\n          next('/license')\r\n          return\r\n        }\r\n      } else {\r\n        // \r\n        next('/license')\r\n        return\r\n      }\r\n    }\r\n    next()\r\n});\r\nrouter.afterEach((to) => {\r\n  console.debug('after:', to.path)\r\n})\r\nexport default router","import { createApp } from 'vue'\r\nimport { createPinia } from 'pinia'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport ElementPlus from 'element-plus'\r\nimport 'element-plus/dist/index.css'\r\nimport zhCn from 'element-plus/es/locale/lang/zh-cn'\r\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue'\r\nimport { wsClient } from '@/utils/websocket'\r\nimport { useConfigStore } from './store/config'\r\nimport { useThemeStore } from './store/theme'\r\n\r\nconst app = createApp(App)\r\nconst pinia = createPinia()\r\napp.use(pinia)  //  Pinia\r\nconst configStore = useConfigStore()\r\nconst themeStore = useThemeStore()\r\n//  WebSocket \r\nconst initWebSocket = () => {\r\n  //  wsClient \r\n  if (!wsClient) {\r\n    console.error('WebSocket client initialization failed')\r\n    return\r\n  }\r\n  console.log(\"websocket....success\")\r\n  \r\n  //  WebSocket \r\n  window.addEventListener('ws-error', (event: Event) => {\r\n    console.error('WebSocket error:', (event as CustomEvent).detail)\r\n  })\r\n\r\n  // \r\n  document.addEventListener('visibilitychange', () => {\r\n    if (document.visibilityState === 'visible') {\r\n      console.log(' WebSocket ...')\r\n      wsClient.checkConnection()\r\n    }\r\n  })\r\n\r\n  // \r\n  window.addEventListener('online', () => {\r\n    console.log(' WebSocket...')\r\n    wsClient.checkConnection()\r\n  })\r\n}\r\n\r\n//  DOM  WebSocket\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n  initWebSocket()\r\n})\r\n// \r\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\r\n  app.component(key, component)\r\n}\r\ninitWebSocket()\r\n// \r\nawait configStore.loadConfig()\r\nthemeStore.initTheme()\r\napp.use(ElementPlus, {\r\n  locale: zhCn\r\n})\r\n\r\napp.use(ElementPlus)\r\napp.use(router)\r\napp.use(store)\r\napp.mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var hasSymbol = typeof Symbol === \"function\";\nvar webpackQueues = hasSymbol ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = hasSymbol ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = hasSymbol ? Symbol(\"webpack error\") : \"__webpack_error__\";\n\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tvar handle = (deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}\n\tvar done = (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue))\n\tbody(handle, done);\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + \"097d1742\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"css/\" + chunkId + \".\" + \"8a66e94a\" + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"webot:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = (chunkId, fullhref, oldTag, resolve, reject) => {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tif (__webpack_require__.nc) {\n\t\tlinkTag.nonce = __webpack_require__.nc;\n\t}\n\tvar onLinkComplete = (event) => {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && event.type;\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + errorType + \": \" + realHref + \")\");\n\t\t\terr.name = \"ChunkLoadError\";\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tif (linkTag.parentNode) linkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = (href, fullhref) => {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = (chunkId) => {\n\treturn new Promise((resolve, reject) => {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.miniCss = (chunkId, promises) => {\n\tvar cssChunks = {\"618\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, (e) => {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr\n\n// no prefetching\n\n// no preloaded","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwebot\"] = self[\"webpackChunkwebot\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(9220)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["getContacts","async","tag","keyword","accountId","params","URLSearchParams","append","response","fetch","API_BASE_URL","toString","headers","ok","error","json","Error","detail","data","result","Array","isArray","map","contact","id","String","name","wxid","tags","avatar","undefined","is_new","filter","length","console","inviteFriendsToGroup","method","body","JSON","stringify","debug","msg","message","getGroups","groups","setGroupTagBatch","catch","getContactTags","getGroupTags","syncGroups","requestBody","type","account_id","syncContacts","getAutoFollowTasksByStartDate","date","agentId","tasks","batchCancelAutoFollowTasks","task_ids","taskIds","batchUpdateAutoFollowAgent","agent_id","createStore","state","userInfo","isLoggedIn","getters","getUserInfo","mutations","SET_USER_INFO","CLEAR_USER_INFO","actions","setUserInfo","commit","logout","modules","defaultConfig","theme","primary","menuBackground","menuTextColor","menuActiveTextColor","menuHoverBackground","gradientStart","gradientEnd","navbar","items","index","text","useConfigStore","defineStore","config","isLoaded","loadConfig","this","WebSocketClient","ws","reconnectAttempts","maxReconnectAttempts","reconnectTimeout","isReconnecting","heartbeatInterval","heartbeatTimeout","constructor","connect","checkConnection","readyState","WebSocket","OPEN","window","location","host","onopen","startHeartbeat","onmessage","event","parse","clearTimeout","handleMessage","onclose","code","reason","stopHeartbeat","reconnect","onerror","setInterval","send","setTimeout","warn","clearInterval","delay","Math","pow","min","handleMassSendingTasks","task_id","handleTaskStatus","dispatchEvent","CustomEvent","handleSchedulerStatus","handleTaskProgress","handleAutoReplyTask","wsClient","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","key","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_defineComponent","__name","props","visible","Boolean","default","modelValue","greetingGroups","selectedFriends","selectedGroups","wechatNickname","isFromSOP","emits","setup","__props","emit","__emit","dialogWidth","computed","windowWidth","innerWidth","formatSelectedTargets","parts","friendText","join","slice","push","groupText","ref","cozeAgents","loadGreetingGroups","getConfig","greeting_config","value","group","greetings","ElMessage","loadCozeAgents","success","agents","agent","botId","dialogVisible","get","set","val","userTags","handleTimeChange","time","hours","getHours","minutes","getMinutes","now","Date","taskForm","getFullYear","getMonth","getDate","getLocalISOString","tzOffset","getTimezoneOffset","diff","pad","n","floor","abs","padStart","getSeconds","disabledDate","today","setHours","maxDate","setDate","getTime","timeType","scheduleDate","dayOffset","tagIds","contentType","greetingGroupId","sendInterval","autoGrouping","batchSize","loadUserTags","handleCreate","warning","submitData","selectedTime","scheduleDateTime","handleResize","nextTick","onMounted","addEventListener","onUnmounted","removeEventListener","_ctx","_cache","_component_el_alert","_resolveComponent","_component_el_icon","_component_el_input","_component_el_form_item","_component_el_switch","_component_el_input_number","_component_el_radio","_component_el_radio_group","_component_el_date_picker","_component_el_time_picker","_component_el_checkbox","_component_el_checkbox_group","_component_el_option","_component_el_select","_component_el_form","_component_el_button","_component_el_dialog","_openBlock","_createBlock","$event","title","width","top","footer","_withCtx","_createElementVNode","_createVNode","onClick","_createTextVNode","_","closable","_createElementBlock","_Fragment","_createCommentVNode","model","label","_unref","Avatar","readonly","placeholder","Files","max","step","size","Clock","Calendar","format","locale","zhCn","onChange","User","_toDisplayString","PriceTag","_renderList","ChatLineRound","__exports__","origin","saveConfig","configType","credentials","errorText","status","statusText","checkVersion","currentVersion","current_version","getVersionNotify","saveVersionNotify","downloadUpdate","reconnectWeChat","instanceId","instance_id","initializeMultipleWechat","mode","timestamp","autoConfigWechat41","stopNarrator","getAllInstances","switchActiveInstance","getLicenseInfo","unbindLicense","activation_code","checkConnectionStatus","getCurrentUser","getServerTime","defaultChannel","brandConfig","channel_id","ename","logo","contactType","qrcodeUrl","copyright","channel_ailink","channel_moji","channel_vanta","channel_xiaoxin","channel_zoyu","channel_interstellar","channel_healo","channel_xipapa","channel_yunt","channel_ycat","channel_nutri","channel_wsy","channel_ruixiao","channel_lichuang","channel_refresh","channel_tange","channel_aiboss","channel_relaxai","channel_yysay","channel_xlc","channel_Ant","channel_stan","channel_linkc","channel_astrai","channel_xiaoxiao","channel_xw","channel_dacore","channel_yun","channel_wanxiao","channel_zhipu","channel_atom","channel_shaozi","channel_xlai","channel_anlun","channel_busi","channel_super","alias","channel_allwise","channel_xunyi","channel_aiok","getBrandConfig","channel","localStorage","getItem","_useCssVars","menuActiveBackground","configStore","themeStore","useThemeStore","availableWidth","router","afterEach","to","activeIndex","path","substring","currentTheme","start","end","lighten","inject","route","useRoute","useRouter","handleSelect","hexToRgb","hex","h","replace","r","parseInt","g","b","rgbToHex","toHex","v","ratio","lr","round","lg","lb","_component_el_menu_item","_component_el_menu","_Transition","style","_normalizeStyle","backgroundColor","src","alt","onSelect","ellipsis","item","expose","__expose","reconnecting","handleReconnect","show","loading","isStartupPage","isAgentPage","startsWith","includes","reconnectDialog","provide","showReconnectDialog","onErrorCaptured","err","instance","info","log","_component_router_view","NavBar","Component","_resolveDynamicComponent","ReconnectDialog","ref_key","isInitialized","cssVariables","rgb","primary50","primaryHover","darken","applyTheme","root","document","documentElement","Object","entries","forEach","property","setProperty","initTheme","dr","dg","db","uploadFile","MAX_SIZE","file","formData","FormData","getTaskLogs","createMassSendingTask","taskData","cancelMassSendingTask","taskId","cancelAllMassSendingTasks","getMassSendingTasks","toggleAutoAddFriend","enabled","settings","maxFriendsPerDay","maxProcessPerTime","targetGroup","checkInterval","toggleAutoComment","getFriendRequestLogs","importFriendList","count","remaining","importFriendListByAgent","needsAuth","authUrl","errorMsg","authUrlMatch","match","syncFriendListByApi","getAddFriendLogs","getRemainingFriendCount","today_added","toggleAutoAddNewFriend","interval","verifyMessage","multiCycleEnabled","accountIds","selectedAccounts","getFriendList","deleteFriendFromList","batchDeleteFriendFromList","wxids","exportFriendListPath","url","openLocalFolder","createBatchAutoFollowTasks","getAutoFollowTasks","cancelAutoFollowTask","getAutoFollowLogs","API_KEY","checkAgentExists","res","encodeURIComponent","exists","e","initializing","progress","progressStatus","progressText","showEnvConfigDialog","showConfigCompleteDialog","agentName","autoConfigRunning","autoConfigSteps","updateProgress","query","isAgent","goAgentLogin","handleMultiStartup","setItem","nickname","instances","startAutoConfig","launchAppAfterConfig","_component_el_progress","_component_el_card","header","version","percentage","WarningFilled","disabled","_normalizeClass","done","useUserStore","lastFetchTime","isFetching","fetchUserInfo","force","Promise","resolve","clearUserInfo","SvgLoader","static","loadStatus","preloadedImages","globalFallback","retryCount","maxRetries","getInstance","registerConfig","setGlobalFallback","getPath","iconName","iconConfig","fallback","handleLoad","img","target","getIconNameFromSrc","handleError","currentRetries","fallbackPath","fileName","split","pop","endsWith","preloadImages","iconNames","namesToLoad","keys","promises","Image","onload","all","checkAvailability","getLoadStatus","resetRetryCount","useSvgLoader","svgLoader","isReady","getIconPath","handleImageLoad","handleImageError","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","refresh","update","activeInstanceId","currentInstance","find","inst","friendCount","groupCount","isConnected","onlineStatus","userStore","unbindDialogVisible","confirmDialogVisible","machineCode","activationCode","updateDialogVisible","updateInfo","needs_update","latest_version","download_url","changelog","is_mandatory","release_date","updating","updateChecked","customerServiceDialogVisible","handleQrcodeError","saveQrcode","link","createElement","href","download","appendChild","click","removeChild","showCustomerServiceDialog","copyContactInfo","navigator","clipboard","writeText","then","showUnbindDialog","machine_code","executeUnbind","checkStatus","connected","user_info","loadInstances","handleSwitchInstance","is_active","friend_count","group_count","$state","account_info","is_connected","activeInstance","initializeMultiInstances","manualCheckUpdate","formatChangelog","formatDate","dateStr","toLocaleDateString","progressFormat","startUpdate","progressInterval","timeoutPromise","reject","race","logFile","log_file","test","checkForUpdates","notifyResult","notifiedVersions","notified_versions","currentAccountId","cachedAccountId","forceRefresh","isRefreshing","refreshInstances","initSuccess","iso","authority_time","server_time","serverMs","localMs","timeSkewSeconds","showTimeWarning","timeEnd","onError","args","onLoad","_createStaticVNode","maxlength","innerHTML","getSuspendedSessions","unsuspendSession","sessionName","session_name","getHistorySessions","getHistoryMessages","sessionId","URL","searchParams","messages","chatType","getStatsData","logs","targetName","content","todayTimestamp","yesterday","yesterdayTimestamp","todayLogs","yesterdayLogs","uniqueUsers","Set","sessionCount","yesterdayUniqueUsers","yesterdaySessionCount","messageCount","yesterdayMessageCount","sessionIncrease","messageIncrease","totalChars","savedHours","parseFloat","toFixed","hourlyRate","savedMoney","startChatMonitor","confirmAutoReply","stopChatMonitor","getLatestSessions","startTime","getChatMessages","sendChatMessage","user","createAutoReplyTask","updateManualReviewStatus","getMonitorStatus","staff","isEdit","contactTags","groupTags","hasGroupStaff","getPlatformIconExtension","platform","staffForm","selectedTags","keywords","readGroupMember","watch","newVal","staffData","immediate","resetTags","saveStaff","trim","clearable","isEditMode","currentStaff","otherStaffs","staffList","editingIndex","some","activeCollapse","commonConfig","groupAtOnly","colleagueNamesToIgnore","filterWords","autoGreeting","fileRecognition","fileTypes","filePath","whitelist","names","list","filterWordInputVisible","filterWordInputValue","filterWordInputRef","staffDialogVisible","counter","Map","t","from","saveStrategy","namesList","getChatTypeTagType","addFilterWord","focus","confirmFilterWord","removeFilterWord","splice","showAddStaffDialog","editStaff","deleteStaff","handleStaffSave","getChatTypeText","getTagsText","tagNames","tagId","_component_el_empty","_component_el_tag","_component_el_tooltip","_component_el_collapse_item","_component_el_collapse","Plus","description","placement","effect","Edit","Delete","rows","word","onClose","onKeyup","_withKeys","onBlur","QuestionFilled","StaffDialog","onSave","errorDetail","handleClose","handleCopyError","center","color","TaskStatus","TaskPriority","TaskQueue","taskLogs","messageNumLock","lastAutoReplies","loadTaskLogs","maxConcurrent","processing","getQueueLength","task","PENDING","PROCESSING","sortedTasks","sort","a","priority","createTime","markTaskAsCancelled","CANCELLED","lastError","messageNum","addTask","waitLock","existingTask","userName","newTask","random","substr","processNextTask","getNextTask","FAILED","add","processTask","COMPLETED","endTime","isGroupChat","isGroup","addTaskLog","delete","unshift","cleanOldLogs","twentyFourHoursAgo","taskHandler","setTaskHandler","handler","hasDuplicateTask","getTaskMessageNum","getTaskStatus","cancelTask","cleanCompletedTasks","getQueueStats","stats","total","pending","completed","failed","cancelled","recordAutoReply","isAutoReplyMessage","lastReply","taskQueue","loadLogs","handleDialogOpen","filteredLogs","formatTime","dayjs","_component_el_table_column","_component_el_table","onOpen","prop","row","expanded","accountList","getAccountStatusLabel","account","hasError","sync_status","ai_status","handleConfirm","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","height","viewBox","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","isSending","logDialogVisible","autoReplyEnabled","messageInput","currentChat","clearCache","refreshingChat","isInitialLoad","isInputting","currentProcessingName","strategyDialogVisible","selectedStrategy","isGenerating","isProcessingChat","chatList","refreshing","isNarrowScreen","statsExpanded","activeTab","currentTaskId","pendingReply","countdownTimer","countdown","isAutoSending","manualReviewEnabled","suspendedList","refreshingSuspended","refreshingHistory","loadingHistory","collapsedGroups","historySessions","statsData","groupedHistoryList","session","account_nickname","sessions","unique_id","formatSuspendedTime","month","day","refreshSuspendedList","confirmUnsuspend","ElMessageBox","confirm","confirmButtonText","cancelButtonText","refreshHistoryList","accId","newTab","handleManualReviewChange","messageCache","lastMessageTimes","monitorStatusHandler","running","newIsNarrow","taskSessionHandler","refreshStatsData","sessionListHandler","processedList","lastMessage","lastTime","unread","existingList","mergedList","newSession","existingIndex","findIndex","existing","timeA","timeB","toggleStatsPanel","fetchHistorySessions","selectHistoryChat","chatMessages","scrollToBottom","checkMonitorStatus","manual_review_enabled","pendingReplyHandler","handlePendingReply","errorDialogVisible","errorTitle","errorContent","handleErrorTask","scene","requestAnimationFrame","clearPendingReply","refreshCurrentChat","showLogDialog","handleRefresh","fetchSessionList","showStrategyDialog","generateAIResponse","handleStrategyChange","strategyType","showAccountStatusDialog","accountStatusList","handleAccountStatusConfirm","handleAutoReplyChange","manualReview","accounts","errorData","container","querySelector","scrollTop","scrollHeight","deep","handleInputFocus","clearMessageCache","clear","selectChat","chat","isManualSelect","sendMessage","sendMessageByHand","action","final_content","startCountdown","processedSession","uniqueId","targetChat","ai_reply","timeout","duration","countdownOverlayRef","circleProgress","initialTime","circleStrokeDasharray","circumference","PI","dashLength","groupedChatList","values","groupedHistorySessions","seconds","classList","autoConfirmReply","cancelPendingReply","copyMessageInput","_component_el_avatar","_component_el_tab_pane","_component_el_tabs","_withDirectives","_vModelCheckbox","plain","StatsPanel","circle","Refresh","active","icon","_withModifiers","suspended_at","isSelf","isTimeMessage","sender","voice_text","cx","cy","fill","stroke","transform","onFocus","DocumentCopy","AIStaffConfig","ReplyLogDialog","AccountStatusDialog","onConfirm","CommonErrorDialog","agentFormRef","agentForm","isDefault","safeAgents","agentRules","required","trigger","validator","rule","callback","checkBotIdExists","resetFields","handleAdd","validate","valid","newAgent","updatedAgents","rules","onKeydown","testExternalApiConnection","identifier","getExternalApiSettings","testAgent","emitter","activeGroup","groupDialogVisible","greetingDialogVisible","currentGroupIndex","newGroup","newGreeting","prompt","getTagType","getTypeLabel","saveGreetingConfig","showAddGroupDialog","addGroup","removeGroup","showAddGreetingDialog","groupIndex","on","newConfig","off","addGreeting","greetingData","removeGreeting","greetingIndex","getGreetingContent","greeting","handleSelectFile","input","accept","onchange","files","filename","filepath","totalIntervals","difySettings","baseUrl","testAgentDialogVisible","testAgentForm","clearCacheDialogVisible","clearingCache","phraseInputVisible","phraseInputValue","phraseInputRef","showTestAgentDialog","defaultAgent","externalApiSettings","testingConnection","connectionStatus","autoSaveDifySettings","debounce","autoSaveCozeSettings","cozeSettings","tokenLastUpdated","toISOString","token","navItems","formatId","activeSection","contentRef","isScrollingProgrammatically","scrollToSection","sectionId","element","getElementById","offset","elementPosition","getBoundingClientRect","pageYOffset","offsetPosition","scrollTo","behavior","handleScroll","sections","viewportHeight","innerHeight","currentSection","minDistance","Infinity","section","rect","distance","feishuSettings","appId","appSecret","phone","initialCozeToken","initialCozeTokenLastUpdated","momentSettings","commentLimit","perFriendLimit","autoLike","interactionMode","blacklist","chatHistorySettings","autoSave","includeContext","contextCount","includeUserInfo","messageMerge","transferConfig","phrases","notifyWechat","testing","beforeEach","next","loadSettings","saveFeishuSettings","feishu_settings","handleFeishuAppIdBlur","handleFeishuSecretBlur","handleFeishuPhoneInput","handleFeishuPhoneBlur","addPhraseItem","confirmPhrase","saveChatHistorySettings","removePhraseItem","testCozeAgent","selectedAgent","saveMomentSettings","moment_settings","setDefaultAgent","restTimeSettings","selectedTasks","isDragging","timelineRef","startTimeDisplay","endTimeDisplay","taskOptions","intervalToTime","timeToInterval","timeStr","Number","getPosition","disabledRange","handleTaskToggle","taskName","saveRestTimeSettings","handleMouseDown","preventDefault","handleMouseMove","x","clientX","left","handleMouseUp","handleStartTimeChange","handleEndTimeChange","rest_time_settings","formatIdentifierDisplay","repeat","parseIdentifierInput","handleIdentifierChange","trimmedValue","testApiConnection","chat_history_settings","deleteAgent","modelSettings","platformConfigs","apiKey","modelName","agentConfigVisible","showAgentConfig","agentsResult","cozeResult","modelResult","momentResult","greetingResult","chatHistoryResult","feishuConfig","difyResult","apiResult","uniqueAgents","has","defaultAgents","coze_settings","savedSettings","model_settings","onBeforeMount","mitt","getPlatformIdLabel","daysTokenBound","lastUpdated","current","lastUpdatedStartOfDay","currentStartOfDay","diffTime","diffDays","showClearCacheDialog","handleClearCacheDialogClose","clearCozeCache","restTimeResult","_component_Delete","_component_InfoFilled","_vShow","onInput","CozeAgentConfig","GreetingConfig","phrase","formatter","parser","Connection","SuccessFilled","CircleCloseFilled","prepend","range","onMousedown","i","checked","friendList","allFriendList","selectedStatus","selectedTag","tagOptions","s","filteredFriendList","loadFriendList","applyFilters","handleDelete","handleBatchDelete","handleExport","showCancelButton","dirPath","lastSlash","lastIndexOf","folder","getStatusType","statusMap","getStatusText","filterable","TEMPLATE_URL","uploading","fileList","importType","selectedAgentId","apiIdentifier","copyTemplateUrl","formatApiIdentifier","getButtonText","loadApiSettings","beforeUpload","isExcel","handleFileChange","raw","handleUpload","errorMessage","_component_el_upload","InfoFilled","tip","currentInstanceNickname","activateTasks","createTaskVisible","pendingTaskCount","showCreateTaskDialog","formatTaskTime","toLocaleString","year","hour","minute","getTaskStatusType","scheduled","paused","getTaskStatusText","formatSelectedFriends","friends","formatTasks","p","task_params","sendTime","next_run_time","schedule_time","tagName","greetingGroupName","loadMassSendingTasks","runningTasks","pendingTasks","handleCreateTask","payload","handleCancelAllTasks","handleTaskStatusUpdate","taskUpdate","_component_el_scrollbar","CreateTaskDialog","onCreate","cancelingTasks","filterAgentId","filterDate","filterPanel","selectedCount","isBatchCanceling","isBatchModifyDialogVisible","selectedAgentIdForModify","isAllSelected","every","selected","updateSelectedCount","toggleEditMode","resetFilters","resetSelection","loadTasks","applyFilter","handleFilterChange","batchCancelTasks","task_info","batchModifyTasks","loadAgents","getAgentName","handleCancelTask","friend_info","handleSettings","formatNextTime","confirmBatchModify","closeBatchModifyDialog","created_at","schedule_info","next_fire_time","task_config","execution_stats","execution_count","total_success","CONTENT_LIMIT","expandedItems","formatLogTime","getDisplayContent","itemId","cleanContent","isExpanded","shouldShowToggle","toggleContent","getStatusClass","friend_name","friend_wxid","execution_time","message_content","uuidv4","localValue","handleChange","for","service","axios","create","baseURL","interceptors","use","request","selectMomentFolder","openFolder","getActiveInstances","createMomentPostTask","getMomentPostTasks","cancelMomentPostTask","getMomentPostLogs","_hoisted_73","groupList","commentConfig","reachLastPosition","selectedTagNames","addFriendConfig","addFriendLogs","remainingCount","todayAddedCount","importDialogVisible","friendListVisible","autoFollowTaskListRef","autoFollowLogsRef","comment","activate","addFriend","addNewFriend","autoFollow","chatAnalysis","friendConfig","showImportDialog","authDialogVisible","hasClickedAuth","openAuthUrl","open","friendRequestExecutionTime","formatExecutionTime","addFriendExecutionTime","formatInterval","startTimeStr","endTimeStr","loadRestTimeSettings","handleImportByAgent","showFriendList","saveAddFriendConfig","saveSopCache","loadGroupList","activeInstances","loadActiveInstancesForAddFriend","onMultiCycleToggle","loadActiveInstancesForComment","onCommentMultiCycleToggle","saveCommentConfig","handleAddFriendSwitchChange","handleImportFriendList","fileData","loadRemainingCount","handleSwitchChange","validateTag","regex","tagDialogVisible","tempSelectedTags","openTagDialog","resetTagSelection","confirmTagSelection","cancelTagSelection","formatScheduleTime","friendLogs","loadFriendLogs","currentFunction","processed_count","scheduleTime","momentLogs","taskType","publisher","comment_content","loadMomentLogs","isRunning","handleFriendSwitchChange","originalValue","isLogVisible","loadCommentConfig","loadFriendConfig","loadAddNewFriendConfig","loadActiveInstances","onActivated","savedConfig","loadSopCache","sopCache","cachedConfig","restConfig","base","configToCache","rest","switchFunction","func","loadAddFriendLogs","formatTimestamp","utcYear","getUTCFullYear","utcMonth","getUTCMonth","utcDay","getUTCDate","utcHours","getUTCHours","utcMinutes","getUTCMinutes","utcSeconds","getUTCSeconds","function","newValue","isString","isValid","targetFunction","_directive_tooltip","_resolveDirective","MassSendingPanel","onMouseenter","boxShadow","onMouseleave","CosmicSwitch","AutoFollowTaskList","Warning","attempt_count","AutoFollowLogs","ImportFriendListDialog","onImport","onImportByAgent","FriendListDialog","onRefresh","activateLicense","getMachineCode","verifyLicense","useLicenseStore","isVerified","licenseInfo","lastVerifyTime","isLicenseValid","verifyLicenseOnce","licenseStore","isActivated","activationInfo","form","fetchMachineCode","copyMachineCode","handleGoHome","routerError","handleActivate","licenseData","license_info","verifyResult","$patch","verifyError","checkLicense","activated_at","_component_el_result","extra","$emit","createdAt","sentCount","nextRunAt","ruleDesc","execMode","fixedTime","rangeStart","rangeEnd","cycle","materialFolder","publishMode","postCount","weeks","goStep","startMin","timeToMinutes","endMin","M","selectFolder","clearSelection","openGroup","folderName","m","submit","weekDays","w","onSelectModuleClick","selectedWeekCount","hasValidTime","canGoNext","nameOk","weeklyOk","handleWeekChange","isNaN","intervalText","act","canSubmit","hasFolder","hasMaterials","hasAccount","_component_Close","formattedLogs","l","d","folder_path","planName","close","openMaterial","activeView","logsVisible","wizardKey","todayCount","y","switchView","view","handleTaskCreated","openLogs","TaskList","onCancel","CreateTaskWizard","onCreated","MomentLogsDialog","routes","component","LicenseView","redirect","StartupPage","MultiWelcomePage","meta","requiresStartup","AiChatNew","shouldHideRightPanel","Moments","Settings","AutoSOP","activeFunction","createRouter","history","createWebHistory","app","createApp","App","pinia","createPinia","initWebSocket","visibilityState","ElementPlusIconsVue","ElementPlus","store","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","hasSymbol","Symbol","webpackQueues","webpackExports","webpackError","resolveQueue","queue","fn","wrapDeps","deps","dep","obj","ret","hasAwait","currentDeps","outerResolve","depQueues","promise","rej","handle","getResult","fnQueue","q","deferred","O","chunkIds","notFulfilled","fulfilled","j","getter","__esModule","definition","o","defineProperty","enumerable","f","chunkId","reduce","u","miniCssF","globalThis","Function","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","doneFns","parentNode","bind","head","toStringTag","nmd","paths","children","createStylesheet","fullhref","oldTag","linkTag","rel","nonce","onLinkComplete","errorType","realHref","insertBefore","nextSibling","findStylesheet","existingLinkTags","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","installedChunks","installedChunkData","loadingEnded","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}