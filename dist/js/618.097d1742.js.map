{"version":3,"file":"js/618.097d1742.js","mappings":"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","sources":["webpack://webot/./src/components/SelectedTargetsPanel.vue?8d83","webpack://webot/./src/components/SelectedTargetsPanel.vue","webpack://webot/./src/components/SelectedTargetsPanel.vue?66e4","webpack://webot/./src/api/syncContacts.ts","webpack://webot/./src/components/OperationsPanel.vue?d2e4","webpack://webot/./src/components/OperationsPanel.vue","webpack://webot/./src/components/OperationsPanel.vue?c2bc","webpack://webot/./src/components/CountdownDialog.vue?585d","webpack://webot/./src/components/CountdownDialog.vue","webpack://webot/./src/components/CountdownDialog.vue?54a5","webpack://webot/./src/components/SyncContactsDialog.vue?85a1","webpack://webot/./src/components/SyncContactsDialog.vue","webpack://webot/./src/components/SyncContactsDialog.vue?354b","webpack://webot/./src/components/AutoFollowConfigDialog.vue?b17a","webpack://webot/./src/components/AutoFollowConfigDialog.vue","webpack://webot/./src/components/AutoFollowConfigDialog.vue?789d","webpack://webot/./src/views/CustomerManagement.vue?dd21","webpack://webot/./src/views/CustomerManagement.vue","webpack://webot/./src/views/CustomerManagement.vue?49ea"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { class: \"selected-targets-panel\" }\nconst _hoisted_2 = { class: \"panel-header\" }\nconst _hoisted_3 = { class: \"header-actions\" }\nconst _hoisted_4 = { class: \"panel-content\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"empty-state\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"selections-container\"\n}\nconst _hoisted_7 = {\n  key: 0,\n  class: \"selection-group\"\n}\nconst _hoisted_8 = { class: \"group-header\" }\nconst _hoisted_9 = { class: \"group-title\" }\nconst _hoisted_10 = { class: \"count-badge\" }\nconst _hoisted_11 = { class: \"selected-items horizontal-items\" }\nconst _hoisted_12 = { class: \"item-name\" }\nconst _hoisted_13 = {\n  key: 0,\n  class: \"more-items\"\n}\nconst _hoisted_14 = { class: \"more-text\" }\nconst _hoisted_15 = {\n  key: 1,\n  class: \"selection-group\"\n}\nconst _hoisted_16 = { class: \"group-header\" }\nconst _hoisted_17 = { class: \"group-title\" }\nconst _hoisted_18 = { class: \"count-badge\" }\nconst _hoisted_19 = { class: \"selected-items horizontal-items\" }\nconst _hoisted_20 = { class: \"item-name\" }\nconst _hoisted_21 = {\n  key: 0,\n  class: \"more-items\"\n}\nconst _hoisted_22 = { class: \"more-text\" }\n\nimport { computed } from 'vue'\r\nimport { Close } from '@element-plus/icons-vue'\r\n\r\n// Props\r\ninterface Props {\r\n  selectedFriends: string[]\r\n  selectedGroups: string[]\r\n}\r\n\r\nconst maxDisplayItems = 5\r\n\r\n// 计算属性\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SelectedTargetsPanel',\n  props: {\n    selectedFriends: { default: () => [] },\n    selectedGroups: { default: () => [] }\n  },\n  emits: [\"remove-friend\", \"remove-group\", \"clear-all\", \"set-group-tag\"],\n  setup(__props: any, { emit: __emit }) {\n\r\nconst props = __props\r\n\r\n// Emits\r\nconst emit = __emit\r\n\r\n// 常量\r\nconst hasSelections = computed(() => {\r\n  return props.selectedFriends.length > 0 || props.selectedGroups.length > 0\r\n})\r\n\r\nconst canSetGroupTag = computed(() => {\r\n  return props.selectedGroups.length > 0 && props.selectedFriends.length === 0\r\n})\r\n\r\nconst displayedFriends = computed(() => {\r\n  return props.selectedFriends.slice(0, maxDisplayItems)\r\n})\r\n\r\nconst displayedGroups = computed(() => {\r\n  return props.selectedGroups.slice(0, maxDisplayItems)\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[4] || (_cache[4] = _createElementVNode(\"h3\", { class: \"panel-title\" }, \"选择目标\", -1)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          plain: \"\",\n          size: \"small\",\n          class: \"set-group-tag-btn\",\n          disabled: !canSetGroupTag.value,\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('set-group-tag')))\n        }, {\n          default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n            _createTextVNode(\" 设置群标签 \", -1)\n          ]))]),\n          _: 1\n        }, 8, [\"disabled\"]),\n        _createVNode(_component_el_button, {\n          type: \"text\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.$emit('clear-all'))),\n          class: \"clear-all-btn\",\n          size: \"small\"\n        }, {\n          default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n            _createTextVNode(\" 清空 \", -1)\n          ]))]),\n          _: 1\n        })\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      (!hasSelections.value)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[5] || (_cache[5] = [\n            _createElementVNode(\"div\", { class: \"empty-icon\" }, \"📋\", -1),\n            _createElementVNode(\"div\", { class: \"empty-text\" }, \"选择好友或群聊\", -1),\n            _createElementVNode(\"div\", { class: \"empty-hint\" }, \"进行批量操作\", -1)\n          ]))]))\n        : _createCommentVNode(\"\", true),\n      (hasSelections.value)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n            (__props.selectedFriends.length > 0)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                  _createElementVNode(\"div\", _hoisted_8, [\n                    _createElementVNode(\"div\", _hoisted_9, [\n                      _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"title-text\" }, \"已选择的好友\", -1)),\n                      _createElementVNode(\"span\", _hoisted_10, _toDisplayString(__props.selectedFriends.length), 1)\n                    ])\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_11, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedFriends.value, (friend) => {\n                      return (_openBlock(), _createElementBlock(\"div\", {\n                        key: friend,\n                        class: \"selected-item friend-item\"\n                      }, [\n                        _createElementVNode(\"span\", _hoisted_12, _toDisplayString(friend), 1)\n                      ]))\n                    }), 128)),\n                    (__props.selectedFriends.length > maxDisplayItems)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                          _createElementVNode(\"span\", _hoisted_14, \"...等\" + _toDisplayString(__props.selectedFriends.length) + \"人\", 1)\n                        ]))\n                      : _createCommentVNode(\"\", true)\n                  ])\n                ]))\n              : _createCommentVNode(\"\", true),\n            (__props.selectedGroups.length > 0)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                  _createElementVNode(\"div\", _hoisted_16, [\n                    _createElementVNode(\"div\", _hoisted_17, [\n                      _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"title-text\" }, \"已选择的群聊\", -1)),\n                      _createElementVNode(\"span\", _hoisted_18, _toDisplayString(__props.selectedGroups.length), 1)\n                    ])\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_19, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedGroups.value, (group) => {\n                      return (_openBlock(), _createElementBlock(\"div\", {\n                        key: group,\n                        class: \"selected-item group-item\"\n                      }, [\n                        _createElementVNode(\"span\", _hoisted_20, _toDisplayString(group), 1)\n                      ]))\n                    }), 128)),\n                    (__props.selectedGroups.length > maxDisplayItems)\n                      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                          _createElementVNode(\"span\", _hoisted_22, \"...等\" + _toDisplayString(__props.selectedGroups.length) + \"个群\", 1)\n                        ]))\n                      : _createCommentVNode(\"\", true)\n                  ])\n                ]))\n              : _createCommentVNode(\"\", true)\n          ]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"selected-targets-panel\">\r\n    <div class=\"panel-header\">\r\n      <h3 class=\"panel-title\">选择目标</h3>\r\n      <div class=\"header-actions\">\r\n        <el-button\r\n          type=\"primary\"\r\n          plain\r\n          size=\"small\"\r\n          class=\"set-group-tag-btn\"\r\n          :disabled=\"!canSetGroupTag\"\r\n          @click=\"$emit('set-group-tag')\"\r\n        >\r\n          设置群标签\r\n        </el-button>\r\n        <el-button\r\n          type=\"text\"\r\n          @click=\"$emit('clear-all')\"\r\n          class=\"clear-all-btn\"\r\n          size=\"small\"\r\n        >\r\n          清空\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"panel-content\">\r\n      <!-- 空状态 -->\r\n      <div v-if=\"!hasSelections\" class=\"empty-state\">\r\n        <div class=\"empty-icon\">📋</div>\r\n        <div class=\"empty-text\">选择好友或群聊</div>\r\n        <div class=\"empty-hint\">进行批量操作</div>\r\n      </div>\r\n\r\n      <!-- 水平布局的选择区域 -->\r\n      <div v-if=\"hasSelections\" class=\"selections-container\">\r\n        <!-- 已选择的好友 -->\r\n        <div v-if=\"selectedFriends.length > 0\" class=\"selection-group\">\r\n          <div class=\"group-header\">\r\n            <div class=\"group-title\">\r\n              <span class=\"title-text\">已选择的好友</span>\r\n              <span class=\"count-badge\">{{ selectedFriends.length }}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"selected-items horizontal-items\">\r\n            <div\r\n              v-for=\"friend in displayedFriends\"\r\n              :key=\"friend\"\r\n              class=\"selected-item friend-item\"\r\n            >\r\n              <span class=\"item-name\">{{ friend }}</span>\r\n            </div>\r\n            \r\n            <!-- 显示更多好友的省略提示 -->\r\n            <div v-if=\"selectedFriends.length > maxDisplayItems\" class=\"more-items\">\r\n              <span class=\"more-text\">...等{{ selectedFriends.length }}人</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 已选择的群聊 -->\r\n        <div v-if=\"selectedGroups.length > 0\" class=\"selection-group\">\r\n          <div class=\"group-header\">\r\n            <div class=\"group-title\">\r\n              <span class=\"title-text\">已选择的群聊</span>\r\n              <span class=\"count-badge\">{{ selectedGroups.length }}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"selected-items horizontal-items\">\r\n            <div\r\n              v-for=\"group in displayedGroups\"\r\n              :key=\"group\"\r\n              class=\"selected-item group-item\"\r\n            >\r\n              <span class=\"item-name\">{{ group }}</span>\r\n            </div>\r\n            \r\n            <!-- 显示更多群聊的省略提示 -->\r\n            <div v-if=\"selectedGroups.length > maxDisplayItems\" class=\"more-items\">\r\n              <span class=\"more-text\">...等{{ selectedGroups.length }}个群</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed } from 'vue'\r\nimport { Close } from '@element-plus/icons-vue'\r\n\r\n// Props\r\ninterface Props {\r\n  selectedFriends: string[]\r\n  selectedGroups: string[]\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  selectedFriends: () => [],\r\n  selectedGroups: () => []\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits<{\r\n  'remove-friend': [name: string]\r\n  'remove-group': [name: string]\r\n  'clear-all': []\r\n  'set-group-tag': []\r\n}>()\r\n\r\n// 常量\r\nconst maxDisplayItems = 5\r\n\r\n// 计算属性\r\nconst hasSelections = computed(() => {\r\n  return props.selectedFriends.length > 0 || props.selectedGroups.length > 0\r\n})\r\n\r\nconst canSetGroupTag = computed(() => {\r\n  return props.selectedGroups.length > 0 && props.selectedFriends.length === 0\r\n})\r\n\r\nconst displayedFriends = computed(() => {\r\n  return props.selectedFriends.slice(0, maxDisplayItems)\r\n})\r\n\r\nconst displayedGroups = computed(() => {\r\n  return props.selectedGroups.slice(0, maxDisplayItems)\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.selected-targets-panel {\r\n  background: white;\r\n  border-radius: 16px;\r\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  height: 100%;\r\n  border: 1px solid #e5e7eb;\r\n}\r\n\r\n.panel-header {\r\n  height: 48px;\r\n  padding: 0 12px;\r\n  border-bottom: 1px solid #e5e7eb;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n}\r\n\r\n.panel-title {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.set-group-tag-btn {\r\n  font-size: 12px;\r\n}\r\n\r\n.clear-all-btn {\r\n  color: #ff4d4f;\r\n  padding: 4px 8px;\r\n  font-size: 12px;\r\n}\r\n\r\n.clear-all-btn:hover {\r\n  background-color: rgba(255, 77, 79, 0.1);\r\n  color: #ff4d4f;\r\n}\r\n\r\n.panel-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 10px;\r\n}\r\n\r\n.selection-group {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.selection-group:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.group-header {\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.group-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.title-text {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.count-badge {\r\n  background: linear-gradient(135deg, #1890ff, #096dd9);\r\n  color: white;\r\n  font-size: 12px;\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n  font-weight: 600;\r\n  min-width: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.selected-items {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.selections-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  width: 100%;\r\n}\r\n\r\n.horizontal-items {\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n  width: 100%;\r\n}\r\n\r\n.horizontal-items .selected-item {\r\n  flex: 0 0 auto;\r\n  min-width: 120px;\r\n  max-width: 200px;\r\n}\r\n\r\n.selected-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  background-color: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.selected-item:hover {\r\n  background-color: #e9ecef;\r\n  border-color: #dee2e6;\r\n}\r\n\r\n.friend-item {\r\n  border-left: 3px solid #1890ff;\r\n}\r\n\r\n.group-item {\r\n  border-left: 3px solid #52c41a;\r\n}\r\n\r\n.item-name {\r\n  font-size: 14px;\r\n  color: #333;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  text-align: center;\r\n}\r\n\r\n.more-items {\r\n  padding: 8px 12px;\r\n  text-align: center;\r\n  background-color: #f0f0f0;\r\n  border-radius: 8px;\r\n  border: 1px dashed #d9d9d9;\r\n}\r\n\r\n.more-text {\r\n  font-size: 12px;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media screen and (max-width: 1200px) {\r\n  .selected-targets-panel {\r\n    width: 260px;\r\n  }\r\n  \r\n  .panel-content {\r\n    padding: 10px 10px;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 480px) {\r\n  .selected-targets-panel {\r\n    width: 100%;\r\n    max-height: 200px;\r\n    order: 2;\r\n  }\r\n  \r\n  .panel-header {\r\n    padding: 12px 12px;\r\n  }\r\n  \r\n  .panel-content {\r\n    padding: 10px 10px;\r\n  }\r\n  \r\n  .selected-items {\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    gap: 6px;\r\n  }\r\n  \r\n  .selected-item {\r\n    flex: 0 0 auto;\r\n    max-width: calc(50% - 3px);\r\n  }\r\n}\r\n\r\n/* 滚动条样式 */\r\n.panel-content::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb {\r\n  background: #c1c1c1;\r\n}\r\n\r\n/* 空状态样式 */\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n  min-height: 200px;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\r\n  opacity: 0.6;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 16px;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n  font-weight: 500;\r\n}\r\n\r\n.empty-hint {\r\n  font-size: 14px;\r\n  color: #999;\r\n  line-height: 1.4;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb {\r\n  background: #c1c1c1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb:hover {\r\n  background: #a8a8a8;\r\n}\r\n</style>\r\n","import script from \"./SelectedTargetsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SelectedTargetsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SelectedTargetsPanel.vue?vue&type=style&index=0&id=61d7d18a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-61d7d18a\"]])\n\nexport default __exports__","import { API_BASE_URL, headers } from './config'\r\n\r\n// 自动同步通讯录请求接口\r\nexport interface SyncContactsRequest {\r\n  sync_items: string[]        // 同步项：['friend', 'group']\r\n  sync_frequency: number      // 同步频率（天）\r\n  time_range_start: string    // 开始时间 HH:mm\r\n  time_range_end: string      // 结束时间 HH:mm\r\n  enabled: boolean            // 是否启用\r\n}\r\n\r\n// 自动同步通讯录任务信息（匹配后端返回的数据结构）\r\nexport interface SyncContactsTask {\r\n  id: string\r\n  type: string\r\n  status: string\r\n  next_run_time?: string\r\n  params?: {\r\n    task_info?: {\r\n      task_id: string\r\n      task_type: string\r\n      created_at: string\r\n      updated_at: string\r\n    }\r\n    sync_config?: {\r\n      sync_items: string[]\r\n      sync_frequency: number\r\n      time_range_start: string\r\n      time_range_end: string\r\n      start_date: string\r\n    }\r\n    execution_stats?: {\r\n      execution_count: number\r\n      last_execution_time: string\r\n      total_success: number\r\n      total_failed: number\r\n    }\r\n    task_status?: string\r\n    execution_history?: any[]\r\n    schedule_id?: string\r\n  }\r\n}\r\n\r\n// 兼容旧接口的任务信息（用于向后兼容）\r\nexport interface LegacySyncContactsTask {\r\n  task_id: string\r\n  sync_items: string[]\r\n  sync_frequency: number\r\n  time_range_start: string\r\n  time_range_end: string\r\n  enabled: boolean\r\n  next_execution_time?: string\r\n  created_at: string\r\n  updated_at: string\r\n}\r\n\r\n// 创建自动同步通讯录任务\r\nexport const createSyncContactsTask = async (request: SyncContactsRequest): Promise<any> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/sync-contacts`, {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(request)\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.error || '创建自动同步任务失败')\r\n    }\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error('创建自动同步任务失败:', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// 获取当前自动同步通讯录任务状态（单个任务）\r\nexport const getSyncContactsTaskStatus = async (): Promise<SyncContactsTask | null> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/sync-contacts/status`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.error || '获取自动同步任务状态失败')\r\n    }\r\n    \r\n    const result = await response.json()\r\n    return result.task || null\r\n  } catch (error) {\r\n    console.error('获取自动同步任务状态失败:', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// 获取自动同步通讯录任务信息\r\nexport const getSyncContactsTaskInfo = async (taskId: string): Promise<SyncContactsTask | null> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/sync-contacts/${taskId}`, {\r\n      method: 'GET',\r\n      headers\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.error || '获取自动同步任务信息失败')\r\n    }\r\n    \r\n    const result = await response.json()\r\n    return result.task || null\r\n  } catch (error) {\r\n    console.error('获取自动同步任务信息失败:', error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// 取消自动同步通讯录任务\r\nexport const cancelSyncContactsTask = async (taskId: string): Promise<any> => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/tasks/sync-contacts/${taskId}/cancel`, {\r\n      method: 'POST',\r\n      headers\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      const error = await response.json()\r\n      throw new Error(error.error || '取消自动同步任务失败')\r\n    }\r\n    \r\n    return await response.json()\r\n  } catch (error) {\r\n    console.error('取消自动同步任务失败:', error)\r\n    throw error\r\n  }\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"operations-panel\" }\nconst _hoisted_2 = { class: \"panel-content\" }\nconst _hoisted_3 = { class: \"horizontal-operations\" }\nconst _hoisted_4 = { class: \"mass-send-section\" }\nconst _hoisted_5 = [\"disabled\"]\nconst _hoisted_6 = { class: \"batch-operations-section\" }\nconst _hoisted_7 = { class: \"batch-buttons\" }\nconst _hoisted_8 = [\"disabled\"]\nconst _hoisted_9 = [\"disabled\"]\nconst _hoisted_10 = { class: \"settings-section\" }\nconst _hoisted_11 = { class: \"settings-content\" }\nconst _hoisted_12 = {\n  key: 0,\n  class: \"settings-status\"\n}\nconst _hoisted_13 = {\n  key: 0,\n  class: \"operation-tips\"\n}\n\nimport { computed, ref, onMounted } from 'vue'\r\nimport { getSyncContactsTaskStatus } from '@/api/syncContacts'\r\n\r\n// Props\r\ninterface Props {\r\n  selectedFriends: string[]\r\n  selectedGroups: string[]\r\n}\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'OperationsPanel',\n  props: {\n    selectedFriends: { default: () => [] },\n    selectedGroups: { default: () => [] }\n  },\n  emits: [\"mass-send\", \"batch-group\", \"auto-follow\", \"batch-tag\", \"delete\", \"open-settings\"],\n  setup(__props: any, { emit: __emit }) {\n\r\nconst props = __props\r\n\r\n// Emits\r\nconst emit = __emit\r\n\r\n// 自动同步状态\r\nconst autoSyncEnabled = ref(false)\r\n\r\n// 检查自动同步状态\r\nconst checkAutoSyncStatus = async () => {\r\n  try {\r\n    const activeTask = await getSyncContactsTaskStatus()\r\n    autoSyncEnabled.value = !!activeTask\r\n  } catch (error) {\r\n    console.error('查询自动同步状态失败:', error)\r\n    autoSyncEnabled.value = false\r\n  }\r\n}\r\n\r\n// 计算属性\r\nconst hasSelections = computed(() => {\r\n  return props.selectedFriends.length > 0 || props.selectedGroups.length > 0\r\n})\r\n\r\nconst hasFriends = computed(() => props.selectedFriends.length > 0)\r\nconst hasGroups = computed(() => props.selectedGroups.length > 0)\r\nconst hasBothTypes = computed(() => hasFriends.value && hasGroups.value)\r\n\r\n// 操作按钮可用性\r\nconst canMassSend = computed(() => hasSelections.value)\r\nconst canBatchGroup = computed(() => hasFriends.value && !hasGroups.value)\r\nconst canAutoFollow = computed(() => hasFriends.value && !hasGroups.value)\r\nconst canBatchTag = computed(() => hasFriends.value && !hasGroups.value)\r\nconst canDelete = computed(() => hasSelections.value)\r\n\r\nconst allOperationsAvailable = computed(() => {\r\n  return !hasBothTypes.value\r\n})\r\n\r\nconst operationTip = computed(() => {\r\n  if (hasBothTypes.value) {\r\n    return '部分操作仅支持好友'\r\n  }\r\n  if (hasGroups.value && !hasFriends.value) {\r\n    return '部分操作仅支持好友'\r\n  }\r\n  return ''\r\n})\r\n\r\n// 组件挂载时检查自动同步状态\r\nonMounted(() => {\r\n  checkAutoSyncStatus()\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"panel-header\" }, [\n      _createElementVNode(\"h3\", { class: \"panel-title\" }, \"批量操作\")\n    ], -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createElementVNode(\"button\", {\n            disabled: !canMassSend.value,\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('mass-send'))),\n            class: \"action-btn action-btn-primary\"\n          }, [...(_cache[4] || (_cache[4] = [\n            _createElementVNode(\"svg\", {\n              class: \"action-btn-icon\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              \"stroke-width\": \"2\"\n            }, [\n              _createElementVNode(\"path\", { d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" }),\n              _createElementVNode(\"path\", { d: \"M8 10h8M8 14h4\" })\n            ], -1),\n            _createElementVNode(\"span\", { class: \"action-btn-text\" }, \"群发消息\", -1)\n          ]))], 8, _hoisted_5)\n        ]),\n        _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"vertical-divider\" }, null, -1)),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createElementVNode(\"button\", {\n              disabled: !canBatchGroup.value,\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.$emit('batch-group'))),\n              class: \"action-btn action-btn-secondary batch-btn\"\n            }, [...(_cache[5] || (_cache[5] = [\n              _createElementVNode(\"svg\", {\n                class: \"action-btn-icon\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                \"stroke-width\": \"2\"\n              }, [\n                _createElementVNode(\"path\", { d: \"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z\" })\n              ], -1),\n              _createElementVNode(\"span\", { class: \"action-btn-text\" }, \"批量拉群\", -1)\n            ]))], 8, _hoisted_8),\n            _createElementVNode(\"button\", {\n              disabled: !canAutoFollow.value,\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.$emit('auto-follow'))),\n              class: \"action-btn action-btn-secondary batch-btn\"\n            }, [...(_cache[6] || (_cache[6] = [\n              _createElementVNode(\"svg\", {\n                class: \"action-btn-icon\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                \"stroke-width\": \"2\"\n              }, [\n                _createElementVNode(\"path\", { d: \"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\" }),\n                _createElementVNode(\"circle\", {\n                  cx: \"12\",\n                  cy: \"7\",\n                  r: \"4\"\n                })\n              ], -1),\n              _createElementVNode(\"span\", { class: \"action-btn-text\" }, \"自动跟单\", -1)\n            ]))], 8, _hoisted_9)\n          ])\n        ]),\n        _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"vertical-divider\" }, null, -1)),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.$emit('open-settings'))),\n            class: \"settings-btn\"\n          }, [\n            _createElementVNode(\"div\", _hoisted_11, [\n              _cache[8] || (_cache[8] = _createStaticVNode(\"<div class=\\\"settings-icon-title\\\" data-v-1d5534de><svg class=\\\"settings-icon\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"2\\\" data-v-1d5534de><circle cx=\\\"12\\\" cy=\\\"12\\\" r=\\\"3\\\" data-v-1d5534de></circle><path d=\\\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\\\" data-v-1d5534de></path></svg><span class=\\\"settings-title\\\" data-v-1d5534de>设置</span></div>\", 1)),\n              (autoSyncEnabled.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [...(_cache[7] || (_cache[7] = [\n                    _createElementVNode(\"span\", { class: \"status-text\" }, \"自动同步\", -1)\n                  ]))]))\n                : _createCommentVNode(\"\", true)\n            ])\n          ])\n        ])\n      ]),\n      (hasSelections.value && !allOperationsAvailable.value)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n            _createVNode(_component_el_alert, {\n              title: operationTip.value,\n              type: \"info\",\n              closable: false,\n              \"show-icon\": \"\",\n              class: \"tip-alert\"\n            }, null, 8, [\"title\"])\n          ]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"operations-panel\">\r\n    <div class=\"panel-header\">\r\n      <h3 class=\"panel-title\">批量操作</h3>\r\n    </div>\r\n\r\n    <div class=\"panel-content\">\r\n      <!-- 水平布局的操作区域 -->\r\n      <div class=\"horizontal-operations\">\r\n        <!-- 群发消息区域 -->\r\n        <div class=\"mass-send-section\">\r\n          <button\r\n            :disabled=\"!canMassSend\"\r\n            @click=\"$emit('mass-send')\"\r\n            class=\"action-btn action-btn-primary\"\r\n          >\r\n            <svg class=\"action-btn-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n              <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"/>\r\n              <path d=\"M8 10h8M8 14h4\"/>\r\n            </svg>\r\n            <span class=\"action-btn-text\">群发消息</span>\r\n          </button>\r\n        </div>\r\n\r\n        <!-- 分割线 -->\r\n        <div class=\"vertical-divider\"></div>\r\n\r\n        <!-- 批量操作区域 -->\r\n        <div class=\"batch-operations-section\">\r\n          <div class=\"batch-buttons\">\r\n            <button\r\n              :disabled=\"!canBatchGroup\"\r\n              @click=\"$emit('batch-group')\"\r\n              class=\"action-btn action-btn-secondary batch-btn\"\r\n            >\r\n              <svg class=\"action-btn-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                <path d=\"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z\"/>\r\n              </svg>\r\n              <span class=\"action-btn-text\">批量拉群</span>\r\n            </button>\r\n\r\n            <button\r\n              :disabled=\"!canAutoFollow\"\r\n              @click=\"$emit('auto-follow')\"\r\n              class=\"action-btn action-btn-secondary batch-btn\"\r\n            >\r\n              <svg class=\"action-btn-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"/>\r\n                <circle cx=\"12\" cy=\"7\" r=\"4\"/>\r\n              </svg>\r\n              <span class=\"action-btn-text\">自动跟单</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 分割线 -->\r\n        <div class=\"vertical-divider\"></div>\r\n\r\n        <!-- 通讯录设置区域 -->\r\n        <div class=\"settings-section\">\r\n          <button\r\n            @click=\"$emit('open-settings')\"\r\n            class=\"settings-btn\"\r\n          >\r\n            <div class=\"settings-content\">\r\n              <div class=\"settings-icon-title\">\r\n                <svg class=\"settings-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                  <circle cx=\"12\" cy=\"12\" r=\"3\"/>\r\n                  <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"/>\r\n                </svg>\r\n                <span class=\"settings-title\">设置</span>\r\n              </div>\r\n              <div v-if=\"autoSyncEnabled\" class=\"settings-status\">\r\n                <span class=\"status-text\">自动同步</span>\r\n              </div>\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 操作提示 -->\r\n      <div v-if=\"hasSelections && !allOperationsAvailable\" class=\"operation-tips\">\r\n        <el-alert\r\n          :title=\"operationTip\"\r\n          type=\"info\"\r\n          :closable=\"false\"\r\n          show-icon\r\n          class=\"tip-alert\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref, onMounted } from 'vue'\r\nimport { getSyncContactsTaskStatus } from '@/api/syncContacts'\r\n\r\n// Props\r\ninterface Props {\r\n  selectedFriends: string[]\r\n  selectedGroups: string[]\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  selectedFriends: () => [],\r\n  selectedGroups: () => []\r\n})\r\n\r\n// Emits\r\nconst emit = defineEmits<{\r\n  'mass-send': []\r\n  'batch-group': []\r\n  'auto-follow': []\r\n  'batch-tag': []\r\n  'delete': []\r\n  'open-settings': []\r\n}>()\r\n\r\n// 自动同步状态\r\nconst autoSyncEnabled = ref(false)\r\n\r\n// 检查自动同步状态\r\nconst checkAutoSyncStatus = async () => {\r\n  try {\r\n    const activeTask = await getSyncContactsTaskStatus()\r\n    autoSyncEnabled.value = !!activeTask\r\n  } catch (error) {\r\n    console.error('查询自动同步状态失败:', error)\r\n    autoSyncEnabled.value = false\r\n  }\r\n}\r\n\r\n// 计算属性\r\nconst hasSelections = computed(() => {\r\n  return props.selectedFriends.length > 0 || props.selectedGroups.length > 0\r\n})\r\n\r\nconst hasFriends = computed(() => props.selectedFriends.length > 0)\r\nconst hasGroups = computed(() => props.selectedGroups.length > 0)\r\nconst hasBothTypes = computed(() => hasFriends.value && hasGroups.value)\r\n\r\n// 操作按钮可用性\r\nconst canMassSend = computed(() => hasSelections.value)\r\nconst canBatchGroup = computed(() => hasFriends.value && !hasGroups.value)\r\nconst canAutoFollow = computed(() => hasFriends.value && !hasGroups.value)\r\nconst canBatchTag = computed(() => hasFriends.value && !hasGroups.value)\r\nconst canDelete = computed(() => hasSelections.value)\r\n\r\nconst allOperationsAvailable = computed(() => {\r\n  return !hasBothTypes.value\r\n})\r\n\r\nconst operationTip = computed(() => {\r\n  if (hasBothTypes.value) {\r\n    return '部分操作仅支持好友'\r\n  }\r\n  if (hasGroups.value && !hasFriends.value) {\r\n    return '部分操作仅支持好友'\r\n  }\r\n  return ''\r\n})\r\n\r\n// 组件挂载时检查自动同步状态\r\nonMounted(() => {\r\n  checkAutoSyncStatus()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.operations-panel {\r\n  background: white;\r\n  border-radius: 16px;\r\n  padding: 0;\r\n  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.06);\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.panel-header {\r\n  height: 48px;\r\n  padding: 0 12px;\r\n  border-bottom: 1px solid #e5e7eb;\r\n  display: flex;\r\n  align-items: center;\r\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.panel-title {\r\n  margin: 0;\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: #1f2937;\r\n}\r\n\r\n.panel-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  min-height: 0;\r\n  padding: 0 16px 16px 16px;\r\n}\r\n\r\n/* 滚动条样式 */\r\n.panel-content::-webkit-scrollbar {\r\n  width: 4px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-track {\r\n  background: transparent;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb {\r\n  background: #d1d5db;\r\n  border-radius: 2px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb:hover {\r\n  background: #9ca3af;\r\n}\r\n\r\n/* 水平布局的操作区域 */\r\n.horizontal-operations {\r\n  display: flex;\r\n  align-items: stretch;\r\n  gap: 12px;\r\n  margin-bottom: 16px;\r\n  width: 100%;\r\n}\r\n\r\n/* 群发消息区域 */\r\n.mass-send-section {\r\n  flex: 0 0 auto;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.mass-send-section .action-btn {\r\n  padding: 20px 12px;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  min-width: 80px;\r\n  min-height: 80px;\r\n}\r\n\r\n.mass-send-section .action-btn-icon {\r\n  width: 28px;\r\n  height: 28px;\r\n}\r\n\r\n/* 批量操作区域 */\r\n.batch-operations-section {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.batch-buttons {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  align-items: stretch;\r\n  width: 100%;\r\n  height: 100%;\r\n  justify-content: center;\r\n}\r\n\r\n/* 通讯录设置区域 */\r\n.settings-section {\r\n  flex: 0 0 auto;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n/* 垂直分割线 */\r\n.vertical-divider {\r\n  width: 1px;\r\n  background: #e5e7eb;\r\n  align-self: stretch;\r\n  margin: 8px 0;\r\n}\r\n\r\n.operations-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0;\r\n}\r\n\r\n.action-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 8px;\r\n}\r\n\r\n.action-btn {\r\n  padding: 8px 10px;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.25s ease;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 4px;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.action-btn::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  width: 0;\r\n  height: 0;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255, 0.3);\r\n  transform: translate(-50%, -50%);\r\n  transition: width 0.6s, height 0.6s;\r\n}\r\n\r\n.action-btn:hover::before {\r\n  width: 300px;\r\n  height: 300px;\r\n}\r\n\r\n.action-btn:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.action-btn-primary {\r\n  background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);\r\n  color: white;\r\n  box-shadow: 0 4px 12px rgba(30, 58, 138, 0.25);\r\n  grid-column: span 2;\r\n}\r\n\r\n.action-btn-primary:hover {\r\n  box-shadow: 0 6px 20px rgba(30, 58, 138, 0.35);\r\n}\r\n\r\n.action-btn-secondary {\r\n  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\r\n  color: #0c4a6e;\r\n  border: 1px solid #bae6fd;\r\n}\r\n\r\n.action-btn-secondary:hover {\r\n  background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);\r\n  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);\r\n}\r\n\r\n/* 批量操作按钮特殊样式 */\r\n.batch-btn {\r\n  flex: 1;\r\n  flex-direction: row !important;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 8px !important;\r\n  min-height: 0;\r\n  padding: 12px 16px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\n.batch-btn .action-btn-icon {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.batch-btn .action-btn-text {\r\n  white-space: nowrap;\r\n}\r\n\r\n.action-btn-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n}\r\n\r\n.action-btn-text {\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.action-btn:disabled {\r\n  background: #f5f5f5;\r\n  color: #bfbfbf;\r\n  border-color: #d9d9d9;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.action-btn:disabled::before {\r\n  display: none;\r\n}\r\n\r\n.divider {\r\n  height: 1px;\r\n  background: #e5e7eb;\r\n  margin: 20px 0;\r\n}\r\n\r\n.operation-tips {\r\n  margin-top: 8px;\r\n}\r\n\r\n.tip-alert {\r\n  border-radius: 8px;\r\n}\r\n\r\n.tip-alert :deep(.el-alert__content) {\r\n  font-size: 12px;\r\n}\r\n\r\n.no-selection-tip {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 200px;\r\n}\r\n\r\n.empty-state {\r\n  margin: 0;\r\n}\r\n\r\n.empty-state :deep(.el-empty__description) {\r\n  color: #999;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 设置按钮区域 */\r\n.settings-btn {\r\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 8px;\r\n  padding: 16px 10px;\r\n  cursor: pointer;\r\n  transition: all 0.25s ease;\r\n  display: block;\r\n  min-width: 75px;\r\n  min-height: 80px;\r\n}\r\n\r\n.settings-btn:hover {\r\n  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\r\n  border-color: #cbd5e1;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.settings-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6px;\r\n  align-items: center;\r\n  text-align: center;\r\n}\r\n\r\n.settings-icon-title {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.settings-icon {\r\n  width: 20px;\r\n  height: 20px;\r\n  color: #64748b;\r\n}\r\n\r\n.settings-title {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #334155;\r\n}\r\n\r\n.settings-status {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 6px;\r\n}\r\n\r\n.status-text {\r\n  font-size: 12px;\r\n  color: #16a34a;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-dot {\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 50%;\r\n  background: #22c55e;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media screen and (max-width: 1200px) {\r\n  .operations-panel {\r\n    width: 240px;\r\n  }\r\n  \r\n  .panel-content {\r\n    padding: 0 10px 10px 10px;\r\n  }\r\n  \r\n  .operation-btn {\r\n    height: 44px;\r\n    font-size: 13px;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 480px) {\r\n  .operations-panel {\r\n    width: 100%;\r\n    order: 3;\r\n  }\r\n  \r\n  .operation-buttons {\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 8px;\r\n  }\r\n  \r\n  .operation-btn {\r\n    height: 40px;\r\n    font-size: 12px;\r\n  }\r\n  \r\n  .operation-btn span {\r\n    display: none;\r\n  }\r\n  \r\n  .no-selection-tip {\r\n    grid-column: 1 / -1;\r\n    min-height: 120px;\r\n  }\r\n}\r\n\r\n/* 滚动条样式 */\r\n.panel-content::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb {\r\n  background: #c1c1c1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb:hover {\r\n  background: #a8a8a8;\r\n}\r\n</style>","import script from \"./OperationsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./OperationsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./OperationsPanel.vue?vue&type=style&index=0&id=1d5534de&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1d5534de\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"countdown-content\" }\nconst _hoisted_2 = { class: \"countdown-message\" }\nconst _hoisted_3 = { class: \"countdown-number\" }\n\nimport { ref, watch } from 'vue'\r\n  \r\n  interface Props {\r\n    modelValue: boolean\r\n    countdown?: number\r\n    message?: string\r\n  }\r\n  \r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CountdownDialog',\n  props: {\n    modelValue: { type: Boolean },\n    countdown: {},\n    message: {}\n  },\n  emits: ['update:modelValue', 'finish'],\n  setup(__props: any, { emit: __emit }) {\n\r\n  const props = __props\r\n  const emit = __emit\r\n  \r\n  const visible = ref(false)\r\n  const currentCount = ref(props.countdown || 5)\r\n  \r\n  watch(() => props.modelValue, (newVal) => {\r\n    visible.value = newVal\r\n    if (newVal) {\r\n      startCountdown()\r\n    }\r\n  })\r\n  \r\n  const startCountdown = () => {\r\n    currentCount.value = props.countdown || 5\r\n    const timer = setInterval(() => {\r\n      currentCount.value--\r\n      if (currentCount.value <= 0) {\r\n        clearInterval(timer)\r\n        visible.value = false\r\n        emit('update:modelValue', false)\r\n        emit('finish')\r\n      }\r\n    }, 1000)\r\n  }\r\n  \nreturn (_ctx: any,_cache: any) => {\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: visible.value,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((visible).value = $event)),\n    \"show-close\": false,\n    \"close-on-click-modal\": false,\n    \"close-on-press-escape\": false,\n    width: \"400px\",\n    class: \"countdown-dialog\"\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, _toDisplayString(__props.message), 1),\n        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(currentCount.value), 1),\n        _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"countdown-tip\" }, \"秒后开始执行，请确保微信窗口打开\", -1))\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\r\n    <el-dialog\r\n      v-model=\"visible\"\r\n      :show-close=\"false\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      width=\"400px\"\r\n      class=\"countdown-dialog\"\r\n    >\r\n      <div class=\"countdown-content\">\r\n        <div class=\"countdown-message\">{{ message }}</div>\r\n        <div class=\"countdown-number\">{{ currentCount }}</div>\r\n        <div class=\"countdown-tip\">秒后开始执行，请确保微信窗口打开</div>\r\n      </div>\r\n    </el-dialog>\r\n  </template>\r\n  \r\n  <script setup lang=\"ts\">\r\n  import { ref, watch } from 'vue'\r\n  \r\n  interface Props {\r\n    modelValue: boolean\r\n    countdown?: number\r\n    message?: string\r\n  }\r\n  \r\n  const props = defineProps<Props>()\r\n  const emit = defineEmits(['update:modelValue', 'finish'])\r\n  \r\n  const visible = ref(false)\r\n  const currentCount = ref(props.countdown || 5)\r\n  \r\n  watch(() => props.modelValue, (newVal) => {\r\n    visible.value = newVal\r\n    if (newVal) {\r\n      startCountdown()\r\n    }\r\n  })\r\n  \r\n  const startCountdown = () => {\r\n    currentCount.value = props.countdown || 5\r\n    const timer = setInterval(() => {\r\n      currentCount.value--\r\n      if (currentCount.value <= 0) {\r\n        clearInterval(timer)\r\n        visible.value = false\r\n        emit('update:modelValue', false)\r\n        emit('finish')\r\n      }\r\n    }, 1000)\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .countdown-dialog :deep(.el-dialog__header) {\r\n    display: none;\r\n  }\r\n  \r\n  .countdown-content {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding: 20px;\r\n  }\r\n  \r\n  .countdown-message {\r\n    font-size: 18px;\r\n    margin-bottom: 20px;\r\n    color: #409EFF;\r\n  }\r\n  \r\n  .countdown-number {\r\n    font-size: 60px;\r\n    font-weight: bold;\r\n    color: #409EFF;\r\n    margin: 20px 0;\r\n  }\r\n  \r\n  .countdown-tip {\r\n    font-size: 14px;\r\n    color: #666;\r\n  }\r\n  </style>","import script from \"./CountdownDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CountdownDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CountdownDialog.vue?vue&type=style&index=0&id=68a0851c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-68a0851c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"warning-section\" }\nconst _hoisted_2 = { class: \"sync-section\" }\nconst _hoisted_3 = { class: \"section-content\" }\nconst _hoisted_4 = { class: \"account-selector\" }\nconst _hoisted_5 = { class: \"sync-buttons\" }\nconst _hoisted_6 = { class: \"auto-sync-section\" }\nconst _hoisted_7 = { class: \"section-content\" }\nconst _hoisted_8 = { class: \"sync-items-config\" }\nconst _hoisted_9 = { class: \"sync-frequency-config\" }\nconst _hoisted_10 = { class: \"time-range-config\" }\nconst _hoisted_11 = {\n  key: 0,\n  class: \"next-execution-time\"\n}\nconst _hoisted_12 = { class: \"execution-time\" }\nconst _hoisted_13 = { class: \"auto-sync-toggle\" }\nconst _hoisted_14 = { class: \"dialog-footer\" }\n\nimport { ref, watch, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport CountdownDialog from './CountdownDialog.vue'\r\nimport { \r\n  createSyncContactsTask, \r\n  getSyncContactsTaskStatus,\r\n  cancelSyncContactsTask,\r\n  SyncContactsRequest,\r\n} from '@/api/syncContacts'\r\n\r\ninterface Account {\r\n  account_id: string\r\n  nickname: string\r\n}\r\n\r\ninterface Props {\r\n  modelValue: boolean\r\n  accounts: Account[]\r\n  defaultAccountId?: string\r\n}\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SyncContactsDialog',\n  props: {\n    modelValue: { type: Boolean },\n    accounts: {},\n    defaultAccountId: {}\n  },\n  emits: ['update:modelValue', 'sync'],\n  setup(__props: any, { emit: __emit }) {\n\r\nconst props = __props\r\nconst emit = __emit\r\n\r\nconst visible = ref(false)\r\nconst selectedAccountId = ref('')\r\nconst showCountdown = ref(false)\r\nconst countdownMessage = ref('')\r\nconst syncType = ref<'friend' | 'group'>('friend')\r\n\r\n// 自动同步相关\r\nconst autoSyncEnabled = ref(false)\r\nconst autoSyncStartTime = ref(new Date(2024, 0, 1, 2, 0)) // 默认凌晨2点\r\nconst autoSyncEndTime = ref(new Date(2024, 0, 1, 4, 0))   // 默认凌晨4点\r\nconst syncItems = ref(['group']) // 默认勾选群聊\r\nconst syncFrequency = ref(7) // 默认7天\r\nconst nextExecutionTime = ref('')\r\n\r\n// 开始时间变化后自动联动设置结束时间为开始时间+2小时（处理跨天）\r\nconst updateAutoEndTime = () => {\r\n  if (autoSyncEnabled.value) return\r\n  const start = autoSyncStartTime.value\r\n  if (!start) return\r\n  const end = new Date(start)\r\n  end.setHours(end.getHours() + 2)\r\n  autoSyncEndTime.value = end\r\n}\r\n\r\nwatch(autoSyncStartTime, () => {\r\n  updateAutoEndTime()\r\n})\r\n\r\nwatch(() => props.modelValue, (newVal) => {\r\n  visible.value = newVal\r\n  if (newVal && props.accounts.length > 0) {\r\n    // 默认选择传入的账号ID；若未传入则选择第一个账号\r\n    const passedId = props.defaultAccountId\r\n    const exists = passedId && props.accounts.some(acc => acc.account_id === passedId)\r\n    selectedAccountId.value = exists ? (passedId as string) : props.accounts[0].account_id\r\n    // 查询自动同步状态\r\n    checkAutoSyncStatus()\r\n  }\r\n})\r\n\r\nwatch(visible, (newVal) => {\r\n  emit('update:modelValue', newVal)\r\n})\r\n\r\n// 查询自动同步状态\r\nconst checkAutoSyncStatus = async () => {\r\n  try {\r\n    const activeTask = await getSyncContactsTaskStatus()\r\n    console.log('获取到的任务状态:', activeTask)\r\n    \r\n    if (activeTask) {\r\n      autoSyncEnabled.value = true\r\n      \r\n      // 从 params.sync_config 中获取配置信息\r\n      const syncConfig = activeTask.params?.sync_config || {} as {\r\n        sync_items?: string[]\r\n        sync_frequency?: number\r\n        time_range_start?: string\r\n        time_range_end?: string\r\n        start_date?: string\r\n      }\r\n      syncItems.value = syncConfig.sync_items || ['group']\r\n      syncFrequency.value = syncConfig.sync_frequency || 7\r\n      \r\n      // 设置时间段\r\n      if (syncConfig.time_range_start && syncConfig.time_range_end) {\r\n        const [startHour, startMinute] = syncConfig.time_range_start.split(':')\r\n        const [endHour, endMinute] = syncConfig.time_range_end.split(':')\r\n        autoSyncStartTime.value = new Date(2024, 0, 1, parseInt(startHour), parseInt(startMinute))\r\n        autoSyncEndTime.value = new Date(2024, 0, 1, parseInt(endHour), parseInt(endMinute))\r\n      }\r\n      \r\n      // 设置下次执行时间\r\n      if (activeTask.next_run_time) {\r\n        // 格式化显示时间\r\n        const nextTime = new Date(activeTask.next_run_time)\r\n        nextExecutionTime.value = nextTime.toLocaleString('zh-CN', {\r\n          year: 'numeric',\r\n          month: '2-digit',\r\n          day: '2-digit',\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          second: '2-digit'\r\n        })\r\n      } else {\r\n        nextExecutionTime.value = ''\r\n      }\r\n    } else {\r\n      autoSyncEnabled.value = false\r\n      nextExecutionTime.value = ''\r\n    }\r\n  } catch (error) {\r\n    console.error('查询自动同步状态失败:', error)\r\n    autoSyncEnabled.value = false\r\n    nextExecutionTime.value = ''\r\n  }\r\n}\r\n\r\n// 处理自动同步开关\r\nconst handleAutoSyncToggle = async (val: string | number | boolean) => {\r\n  const enabled = Boolean(val)\r\n  if (enabled) {\r\n    // 开启自动同步\r\n    if (syncItems.value.length === 0) {\r\n      ElMessage.warning('请至少选择一个同步项')\r\n      autoSyncEnabled.value = false\r\n      return\r\n    }\r\n    \r\n    try {\r\n      const request: SyncContactsRequest = {\r\n        sync_items: syncItems.value,\r\n        sync_frequency: syncFrequency.value,\r\n        time_range_start: `${autoSyncStartTime.value.getHours().toString().padStart(2, '0')}:${autoSyncStartTime.value.getMinutes().toString().padStart(2, '0')}`,\r\n        time_range_end: `${autoSyncEndTime.value.getHours().toString().padStart(2, '0')}:${autoSyncEndTime.value.getMinutes().toString().padStart(2, '0')}`,\r\n        enabled: true\r\n      }\r\n      \r\n      const result = await createSyncContactsTask(request)\r\n      \r\n      if (result.success) {\r\n        ElMessage.success('自动同步已开启')\r\n        nextExecutionTime.value = result.next_execution_time || ''\r\n        // 重新查询状态\r\n        await checkAutoSyncStatus()\r\n      } else {\r\n        ElMessage.error(result.error || '开启自动同步失败')\r\n        autoSyncEnabled.value = false\r\n      }\r\n    } catch (error: any) {\r\n      console.error('开启自动同步失败:', error)\r\n      ElMessage.error(`开启自动同步失败: ${error.message || '未知错误'}`)\r\n      autoSyncEnabled.value = false\r\n    }\r\n  } else {\r\n    // 关闭自动同步 - 取消当前活跃的任务\r\n    try {\r\n      const activeTask = await getSyncContactsTaskStatus()\r\n      \r\n      if (activeTask) {\r\n        await cancelSyncContactsTask(activeTask.id)\r\n        ElMessage.success('自动同步已关闭')\r\n      } else {\r\n        ElMessage.info('没有找到活跃的自动同步任务')\r\n      }\r\n      \r\n      nextExecutionTime.value = ''\r\n      // 重新查询状态\r\n      await checkAutoSyncStatus()\r\n    } catch (error: any) {\r\n      console.error('关闭自动同步失败:', error)\r\n      ElMessage.error(`关闭自动同步失败: ${error.message || '未知错误'}`)\r\n      autoSyncEnabled.value = true\r\n    }\r\n  }\r\n}\r\n\r\nconst handleSync = (type: 'friend' | 'group') => {\r\n  if (!selectedAccountId.value) {\r\n    return\r\n  }\r\n  \r\n  syncType.value = type\r\n  countdownMessage.value = type === 'friend' ? '准备同步好友数据' : '准备同步群聊数据'\r\n  \r\n  // 关闭设置弹窗\r\n  visible.value = false\r\n  \r\n  // 显示倒计时弹窗\r\n  showCountdown.value = true\r\n}\r\n\r\nconst executeSync = () => {\r\n  emit('sync', {\r\n    accountId: selectedAccountId.value,\r\n    type: syncType.value\r\n  })\r\n}\r\n\r\nconst handleClose = () => {\r\n  visible.value = false\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_alert = _resolveComponent(\"el-alert\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_checkbox = _resolveComponent(\"el-checkbox\")!\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\")!\n  const _component_el_input_number = _resolveComponent(\"el-input-number\")!\n  const _component_el_time_picker = _resolveComponent(\"el-time-picker\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_el_dialog, {\n      modelValue: visible.value,\n      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((visible).value = $event)),\n      title: \"同步通讯录\",\n      width: \"500px\",\n      \"close-on-click-modal\": false,\n      class: \"sync-contacts-dialog\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_14, [\n          _createVNode(_component_el_button, { onClick: handleClose }, {\n            default: _withCtx(() => [...(_cache[26] || (_cache[26] = [\n              _createTextVNode(\"关闭\", -1)\n            ]))]),\n            _: 1\n          })\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_1, [\n          _createVNode(_component_el_alert, {\n            type: \"info\",\n            \"show-icon\": \"\",\n            closable: false,\n            class: \"warning-banner\"\n          }, {\n            default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n              _createElementVNode(\"span\", { class: \"warning-text\" }, \"所有微信通讯录数据均保存本地，绝不会上传服务器\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_alert, {\n            type: \"warning\",\n            \"show-icon\": \"\",\n            closable: false,\n            class: \"warning-banner\"\n          }, {\n            default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n              _createElementVNode(\"span\", { class: \"warning-text\" }, \"建议7天同步一次好友(注意：好友标签中不要有空格)\", -1)\n            ]))]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"section-header\" }, [\n            _createElementVNode(\"h4\", null, \"手动同步\")\n          ], -1)),\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"div\", _hoisted_4, [\n              _cache[12] || (_cache[12] = _createElementVNode(\"label\", { class: \"selector-label\" }, \"账号：\", -1)),\n              _createVNode(_component_el_select, {\n                modelValue: selectedAccountId.value,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedAccountId).value = $event)),\n                placeholder: \"请选择账号\",\n                style: {\"width\":\"200px\"}\n              }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.accounts, (account) => {\n                    return (_openBlock(), _createBlock(_component_el_option, {\n                      key: account.account_id,\n                      label: account.nickname,\n                      value: account.account_id\n                    }, null, 8, [\"label\", \"value\"]))\n                  }), 128))\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                onClick: _cache[1] || (_cache[1] = ($event: any) => (handleSync('friend'))),\n                disabled: !selectedAccountId.value\n              }, {\n                default: _withCtx(() => [...(_cache[13] || (_cache[13] = [\n                  _createTextVNode(\" 同步好友 \", -1)\n                ]))]),\n                _: 1\n              }, 8, [\"disabled\"]),\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                onClick: _cache[2] || (_cache[2] = ($event: any) => (handleSync('group'))),\n                disabled: !selectedAccountId.value\n              }, {\n                default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                  _createTextVNode(\" 同步群聊 \", -1)\n                ]))]),\n                _: 1\n              }, 8, [\"disabled\"])\n            ])\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"section-header\" }, [\n            _createElementVNode(\"h4\", null, \"自动同步\")\n          ], -1)),\n          _createElementVNode(\"div\", _hoisted_7, [\n            _createElementVNode(\"div\", _hoisted_8, [\n              _cache[18] || (_cache[18] = _createElementVNode(\"label\", null, \"同 步 项：\", -1)),\n              _createVNode(_component_el_checkbox_group, {\n                modelValue: syncItems.value,\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((syncItems).value = $event)),\n                disabled: autoSyncEnabled.value\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_checkbox, {\n                    label: \"friend\",\n                    disabled: autoSyncEnabled.value\n                  }, {\n                    default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n                      _createTextVNode(\"好友\", -1)\n                    ]))]),\n                    _: 1\n                  }, 8, [\"disabled\"]),\n                  _createVNode(_component_el_checkbox, {\n                    label: \"group\",\n                    disabled: autoSyncEnabled.value\n                  }, {\n                    default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                      _createTextVNode(\"群聊\", -1)\n                    ]))]),\n                    _: 1\n                  }, 8, [\"disabled\"])\n                ]),\n                _: 1\n              }, 8, [\"modelValue\", \"disabled\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_9, [\n              _cache[19] || (_cache[19] = _createElementVNode(\"label\", null, \"同步频率：\", -1)),\n              _cache[20] || (_cache[20] = _createElementVNode(\"span\", null, \"每隔\", -1)),\n              _createVNode(_component_el_input_number, {\n                modelValue: syncFrequency.value,\n                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((syncFrequency).value = $event)),\n                min: 2,\n                max: 30,\n                step: 1,\n                disabled: autoSyncEnabled.value,\n                \"controls-position\": \"right\"\n              }, null, 8, [\"modelValue\", \"disabled\"]),\n              _cache[21] || (_cache[21] = _createElementVNode(\"span\", null, \"天\", -1))\n            ]),\n            _createElementVNode(\"div\", _hoisted_10, [\n              _cache[22] || (_cache[22] = _createElementVNode(\"label\", null, \"时 间 段：\", -1)),\n              _createVNode(_component_el_time_picker, {\n                modelValue: autoSyncStartTime.value,\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((autoSyncStartTime).value = $event)),\n                format: \"HH:mm\",\n                placeholder: \"开始时间\",\n                disabled: autoSyncEnabled.value,\n                style: {\"width\":\"100px\"}\n              }, null, 8, [\"modelValue\", \"disabled\"]),\n              _cache[23] || (_cache[23] = _createElementVNode(\"span\", { style: {\"margin\":\"0 8px\"} }, \"至\", -1)),\n              _createVNode(_component_el_time_picker, {\n                modelValue: autoSyncEndTime.value,\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((autoSyncEndTime).value = $event)),\n                format: \"HH:mm\",\n                placeholder: \"结束时间\",\n                disabled: autoSyncEnabled.value,\n                style: {\"width\":\"100px\"}\n              }, null, 8, [\"modelValue\", \"disabled\"])\n            ]),\n            (autoSyncEnabled.value && nextExecutionTime.value)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                  _cache[24] || (_cache[24] = _createElementVNode(\"label\", null, \"下次执行时间：\", -1)),\n                  _createElementVNode(\"span\", _hoisted_12, _toDisplayString(nextExecutionTime.value), 1)\n                ]))\n              : _createCommentVNode(\"\", true),\n            _createElementVNode(\"div\", _hoisted_13, [\n              _createVNode(_component_el_switch, {\n                modelValue: autoSyncEnabled.value,\n                \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((autoSyncEnabled).value = $event)),\n                \"active-text\": \"已启用\",\n                \"inactive-text\": \"已关闭\",\n                onChange: handleAutoSyncToggle\n              }, null, 8, [\"modelValue\"])\n            ])\n          ])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(CountdownDialog, {\n      modelValue: showCountdown.value,\n      \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((showCountdown).value = $event)),\n      countdown: 3,\n      message: countdownMessage.value,\n      onFinish: executeSync\n    }, null, 8, [\"modelValue\", \"message\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    v-model=\"visible\"\r\n    title=\"同步通讯录\"\r\n    width=\"500px\"\r\n    :close-on-click-modal=\"false\"\r\n    class=\"sync-contacts-dialog\"\r\n  >\r\n    <!-- 提示区域 -->\r\n    <div class=\"warning-section\">\r\n      <el-alert\r\n        type=\"info\"\r\n        show-icon\r\n        :closable=\"false\"\r\n        class=\"warning-banner\"\r\n      >\r\n        <span class=\"warning-text\">所有微信通讯录数据均保存本地，绝不会上传服务器</span>\r\n      </el-alert>\r\n      \r\n      <el-alert\r\n        type=\"warning\"\r\n        show-icon\r\n        :closable=\"false\"\r\n        class=\"warning-banner\"\r\n      >\r\n        <span class=\"warning-text\">建议7天同步一次好友(注意：好友标签中不要有空格)</span>\r\n      </el-alert>\r\n    </div>\r\n\r\n    <!-- 同步区域 -->\r\n    <div class=\"sync-section\">\r\n      <div class=\"section-header\">\r\n        <h4>手动同步</h4>\r\n      </div>\r\n      <div class=\"section-content\">\r\n        <div class=\"account-selector\">\r\n          <label class=\"selector-label\">账号：</label>\r\n          <el-select\r\n            v-model=\"selectedAccountId\"\r\n            placeholder=\"请选择账号\"\r\n            style=\"width: 200px\"\r\n          >\r\n            <el-option\r\n              v-for=\"account in accounts\"\r\n              :key=\"account.account_id\"\r\n              :label=\"account.nickname\"\r\n              :value=\"account.account_id\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n\r\n        <div class=\"sync-buttons\">\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"handleSync('friend')\"\r\n            :disabled=\"!selectedAccountId\"\r\n          >\r\n            同步好友\r\n          </el-button>\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"handleSync('group')\"\r\n            :disabled=\"!selectedAccountId\"\r\n          >\r\n            同步群聊\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 自动同步区域 -->\r\n    <div class=\"auto-sync-section\">\r\n      <div class=\"section-header\">\r\n        <h4>自动同步</h4>\r\n      </div>\r\n      <div class=\"section-content\">\r\n        <!-- 同步项配置 -->\r\n        <div class=\"sync-items-config\">\r\n          <label>同  步  项：</label>\r\n          <el-checkbox-group v-model=\"syncItems\" :disabled=\"autoSyncEnabled\">\r\n            <el-checkbox label=\"friend\" :disabled=\"autoSyncEnabled\">好友</el-checkbox>\r\n            <el-checkbox label=\"group\" :disabled=\"autoSyncEnabled\">群聊</el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n        \r\n        <!-- 同步频率配置 -->\r\n        <div class=\"sync-frequency-config\">\r\n          <label>同步频率：</label>\r\n          <span>每隔</span>\r\n          <el-input-number\r\n            v-model=\"syncFrequency\"\r\n            :min=\"2\"\r\n            :max=\"30\"\r\n            :step=\"1\"\r\n            :disabled=\"autoSyncEnabled\"\r\n            controls-position=\"right\"\r\n          />\r\n          <span>天</span>\r\n        </div>\r\n        \r\n        <!-- 时间段配置 -->\r\n        <div class=\"time-range-config\">\r\n          <label>时  间  段：</label>\r\n          <el-time-picker\r\n            v-model=\"autoSyncStartTime\"\r\n            format=\"HH:mm\"\r\n            placeholder=\"开始时间\"\r\n            :disabled=\"autoSyncEnabled\"\r\n            style=\"width: 100px\"\r\n          />\r\n          <span style=\"margin: 0 8px\">至</span>\r\n          <el-time-picker\r\n            v-model=\"autoSyncEndTime\"\r\n            format=\"HH:mm\"\r\n            placeholder=\"结束时间\"\r\n            :disabled=\"autoSyncEnabled\"\r\n            style=\"width: 100px\"\r\n          />\r\n        </div>\r\n        \r\n        <!-- 下次执行时间显示 -->\r\n        <div v-if=\"autoSyncEnabled && nextExecutionTime\" class=\"next-execution-time\">\r\n          <label>下次执行时间：</label>\r\n          <span class=\"execution-time\">{{ nextExecutionTime }}</span>\r\n        </div>\r\n        \r\n        <!-- 开关控制 -->\r\n        <div class=\"auto-sync-toggle\">\r\n          <el-switch\r\n            v-model=\"autoSyncEnabled\"\r\n            active-text=\"已启用\"\r\n            inactive-text=\"已关闭\"\r\n            @change=\"handleAutoSyncToggle\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">关闭</el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n\r\n  <!-- 倒计时弹窗 -->\r\n  <countdown-dialog\r\n    v-model=\"showCountdown\"\r\n    :countdown=\"3\"\r\n    :message=\"countdownMessage\"\r\n    @finish=\"executeSync\"\r\n  />\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, watch, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport CountdownDialog from './CountdownDialog.vue'\r\nimport { \r\n  createSyncContactsTask, \r\n  getSyncContactsTaskStatus,\r\n  cancelSyncContactsTask,\r\n  SyncContactsRequest,\r\n} from '@/api/syncContacts'\r\n\r\ninterface Account {\r\n  account_id: string\r\n  nickname: string\r\n}\r\n\r\ninterface Props {\r\n  modelValue: boolean\r\n  accounts: Account[]\r\n  defaultAccountId?: string\r\n}\r\n\r\nconst props = defineProps<Props>()\r\nconst emit = defineEmits(['update:modelValue', 'sync'])\r\n\r\nconst visible = ref(false)\r\nconst selectedAccountId = ref('')\r\nconst showCountdown = ref(false)\r\nconst countdownMessage = ref('')\r\nconst syncType = ref<'friend' | 'group'>('friend')\r\n\r\n// 自动同步相关\r\nconst autoSyncEnabled = ref(false)\r\nconst autoSyncStartTime = ref(new Date(2024, 0, 1, 2, 0)) // 默认凌晨2点\r\nconst autoSyncEndTime = ref(new Date(2024, 0, 1, 4, 0))   // 默认凌晨4点\r\nconst syncItems = ref(['group']) // 默认勾选群聊\r\nconst syncFrequency = ref(7) // 默认7天\r\nconst nextExecutionTime = ref('')\r\n\r\n// 开始时间变化后自动联动设置结束时间为开始时间+2小时（处理跨天）\r\nconst updateAutoEndTime = () => {\r\n  if (autoSyncEnabled.value) return\r\n  const start = autoSyncStartTime.value\r\n  if (!start) return\r\n  const end = new Date(start)\r\n  end.setHours(end.getHours() + 2)\r\n  autoSyncEndTime.value = end\r\n}\r\n\r\nwatch(autoSyncStartTime, () => {\r\n  updateAutoEndTime()\r\n})\r\n\r\nwatch(() => props.modelValue, (newVal) => {\r\n  visible.value = newVal\r\n  if (newVal && props.accounts.length > 0) {\r\n    // 默认选择传入的账号ID；若未传入则选择第一个账号\r\n    const passedId = props.defaultAccountId\r\n    const exists = passedId && props.accounts.some(acc => acc.account_id === passedId)\r\n    selectedAccountId.value = exists ? (passedId as string) : props.accounts[0].account_id\r\n    // 查询自动同步状态\r\n    checkAutoSyncStatus()\r\n  }\r\n})\r\n\r\nwatch(visible, (newVal) => {\r\n  emit('update:modelValue', newVal)\r\n})\r\n\r\n// 查询自动同步状态\r\nconst checkAutoSyncStatus = async () => {\r\n  try {\r\n    const activeTask = await getSyncContactsTaskStatus()\r\n    console.log('获取到的任务状态:', activeTask)\r\n    \r\n    if (activeTask) {\r\n      autoSyncEnabled.value = true\r\n      \r\n      // 从 params.sync_config 中获取配置信息\r\n      const syncConfig = activeTask.params?.sync_config || {} as {\r\n        sync_items?: string[]\r\n        sync_frequency?: number\r\n        time_range_start?: string\r\n        time_range_end?: string\r\n        start_date?: string\r\n      }\r\n      syncItems.value = syncConfig.sync_items || ['group']\r\n      syncFrequency.value = syncConfig.sync_frequency || 7\r\n      \r\n      // 设置时间段\r\n      if (syncConfig.time_range_start && syncConfig.time_range_end) {\r\n        const [startHour, startMinute] = syncConfig.time_range_start.split(':')\r\n        const [endHour, endMinute] = syncConfig.time_range_end.split(':')\r\n        autoSyncStartTime.value = new Date(2024, 0, 1, parseInt(startHour), parseInt(startMinute))\r\n        autoSyncEndTime.value = new Date(2024, 0, 1, parseInt(endHour), parseInt(endMinute))\r\n      }\r\n      \r\n      // 设置下次执行时间\r\n      if (activeTask.next_run_time) {\r\n        // 格式化显示时间\r\n        const nextTime = new Date(activeTask.next_run_time)\r\n        nextExecutionTime.value = nextTime.toLocaleString('zh-CN', {\r\n          year: 'numeric',\r\n          month: '2-digit',\r\n          day: '2-digit',\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          second: '2-digit'\r\n        })\r\n      } else {\r\n        nextExecutionTime.value = ''\r\n      }\r\n    } else {\r\n      autoSyncEnabled.value = false\r\n      nextExecutionTime.value = ''\r\n    }\r\n  } catch (error) {\r\n    console.error('查询自动同步状态失败:', error)\r\n    autoSyncEnabled.value = false\r\n    nextExecutionTime.value = ''\r\n  }\r\n}\r\n\r\n// 处理自动同步开关\r\nconst handleAutoSyncToggle = async (val: string | number | boolean) => {\r\n  const enabled = Boolean(val)\r\n  if (enabled) {\r\n    // 开启自动同步\r\n    if (syncItems.value.length === 0) {\r\n      ElMessage.warning('请至少选择一个同步项')\r\n      autoSyncEnabled.value = false\r\n      return\r\n    }\r\n    \r\n    try {\r\n      const request: SyncContactsRequest = {\r\n        sync_items: syncItems.value,\r\n        sync_frequency: syncFrequency.value,\r\n        time_range_start: `${autoSyncStartTime.value.getHours().toString().padStart(2, '0')}:${autoSyncStartTime.value.getMinutes().toString().padStart(2, '0')}`,\r\n        time_range_end: `${autoSyncEndTime.value.getHours().toString().padStart(2, '0')}:${autoSyncEndTime.value.getMinutes().toString().padStart(2, '0')}`,\r\n        enabled: true\r\n      }\r\n      \r\n      const result = await createSyncContactsTask(request)\r\n      \r\n      if (result.success) {\r\n        ElMessage.success('自动同步已开启')\r\n        nextExecutionTime.value = result.next_execution_time || ''\r\n        // 重新查询状态\r\n        await checkAutoSyncStatus()\r\n      } else {\r\n        ElMessage.error(result.error || '开启自动同步失败')\r\n        autoSyncEnabled.value = false\r\n      }\r\n    } catch (error: any) {\r\n      console.error('开启自动同步失败:', error)\r\n      ElMessage.error(`开启自动同步失败: ${error.message || '未知错误'}`)\r\n      autoSyncEnabled.value = false\r\n    }\r\n  } else {\r\n    // 关闭自动同步 - 取消当前活跃的任务\r\n    try {\r\n      const activeTask = await getSyncContactsTaskStatus()\r\n      \r\n      if (activeTask) {\r\n        await cancelSyncContactsTask(activeTask.id)\r\n        ElMessage.success('自动同步已关闭')\r\n      } else {\r\n        ElMessage.info('没有找到活跃的自动同步任务')\r\n      }\r\n      \r\n      nextExecutionTime.value = ''\r\n      // 重新查询状态\r\n      await checkAutoSyncStatus()\r\n    } catch (error: any) {\r\n      console.error('关闭自动同步失败:', error)\r\n      ElMessage.error(`关闭自动同步失败: ${error.message || '未知错误'}`)\r\n      autoSyncEnabled.value = true\r\n    }\r\n  }\r\n}\r\n\r\nconst handleSync = (type: 'friend' | 'group') => {\r\n  if (!selectedAccountId.value) {\r\n    return\r\n  }\r\n  \r\n  syncType.value = type\r\n  countdownMessage.value = type === 'friend' ? '准备同步好友数据' : '准备同步群聊数据'\r\n  \r\n  // 关闭设置弹窗\r\n  visible.value = false\r\n  \r\n  // 显示倒计时弹窗\r\n  showCountdown.value = true\r\n}\r\n\r\nconst executeSync = () => {\r\n  emit('sync', {\r\n    accountId: selectedAccountId.value,\r\n    type: syncType.value\r\n  })\r\n}\r\n\r\nconst handleClose = () => {\r\n  visible.value = false\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.sync-contacts-dialog :deep(.el-dialog__body) {\r\n  padding: 20px;\r\n}\r\n\r\n.warning-section {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.warning-banner {\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.warning-banner:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.warning-text {\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.sync-section {\r\n  margin-bottom: 24px;\r\n  background: #ffffff;\r\n  border-radius: 8px;\r\n  border: 1px solid #e4e7ed;\r\n  overflow: hidden;\r\n}\r\n\r\n.auto-sync-section {\r\n  background: #ffffff;\r\n  border-radius: 8px;\r\n  border: 1px solid #e4e7ed;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 统一的模块标题样式 */\r\n.section-header {\r\n  height: 48px;\r\n  background: #f5f7fa;\r\n  border-bottom: 1px solid #e4e7ed;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 20px;\r\n}\r\n\r\n.section-header h4 {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  color: #303133;\r\n  font-weight: 600;\r\n}\r\n\r\n/* 模块内容区域 */\r\n.section-content {\r\n  padding: 20px;\r\n}\r\n\r\n.account-selector {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.selector-label {\r\n  font-weight: 500;\r\n  margin-right: 12px;\r\n  min-width: 40px;\r\n}\r\n\r\n.sync-buttons {\r\n  display: flex;\r\n  gap: 12px;\r\n  justify-content: center;\r\n}\r\n\r\n/* 同步项配置样式 */\r\n.sync-items-config {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  min-height: 32px;\r\n}\r\n\r\n.sync-items-config label {\r\n  font-weight: 500;\r\n  margin-right: 16px;\r\n  min-width: 60px;\r\n  color: #333;\r\n  font-size: 14px;\r\n}\r\n\r\n.sync-items-config :deep(.el-checkbox-group) {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.sync-items-config :deep(.el-checkbox) {\r\n  margin-right: 0;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* 同步频率配置样式 */\r\n.sync-frequency-config {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  min-height: 32px;\r\n}\r\n\r\n.sync-frequency-config label {\r\n  font-weight: 500;\r\n  margin-right: 16px;\r\n  min-width: 60px;\r\n  color: #333;\r\n  font-size: 14px;\r\n}\r\n\r\n.sync-frequency-config span {\r\n  margin: 0 8px;\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.sync-frequency-config :deep(.el-input-number) {\r\n  width: 100px !important;\r\n}\r\n\r\n.sync-frequency-config :deep(.el-input-number .el-input__inner) {\r\n  text-align: center;\r\n}\r\n\r\n/* 时间段配置样式 */\r\n.time-range-config {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  min-height: 32px;\r\n}\r\n\r\n.time-range-config label {\r\n  font-weight: 500;\r\n  margin-right: 16px;\r\n  min-width: 60px;\r\n  color: #333;\r\n  font-size: 14px;\r\n}\r\n\r\n.time-range-config span {\r\n  margin: 0 12px;\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.time-range-config :deep(.el-time-picker) {\r\n  width: 120px;\r\n}\r\n\r\n/* 下次执行时间显示样式 */\r\n.next-execution-time {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  min-height: 32px;\r\n  padding: 8px 12px;\r\n  background: #e8f4fd;\r\n  border-radius: 6px;\r\n  border-left: 4px solid #409eff;\r\n}\r\n\r\n.next-execution-time label {\r\n  font-weight: 500;\r\n  margin-right: 12px;\r\n  color: #333;\r\n  font-size: 14px;\r\n}\r\n\r\n.execution-time {\r\n  color: #409eff;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 开关控制样式 - 水平居中 */\r\n.auto-sync-toggle {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 8px;\r\n  padding-top: 16px;\r\n  border-top: 1px solid #e4e7ed;\r\n}\r\n\r\n.auto-sync-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n  gap: 16px;\r\n}\r\n\r\n.time-range {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.time-range label {\r\n  font-weight: 500;\r\n  min-width: 60px;\r\n}\r\n\r\n.dialog-footer {\r\n  text-align: center;\r\n}\r\n</style>\r\n","import script from \"./SyncContactsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SyncContactsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SyncContactsDialog.vue?vue&type=style&index=0&id=46261f00&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-46261f00\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"label-with-icon\" }\nconst _hoisted_2 = { class: \"item-content\" }\nconst _hoisted_3 = { class: \"label-with-icon\" }\nconst _hoisted_4 = { class: \"item-content\" }\nconst _hoisted_5 = { class: \"selected-friends\" }\nconst _hoisted_6 = { class: \"label-with-icon\" }\nconst _hoisted_7 = { class: \"label-with-icon\" }\nconst _hoisted_8 = { class: \"item-content\" }\nconst _hoisted_9 = { class: \"frequency-description\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"desc-text\"\n}\nconst _hoisted_11 = {\n  key: 1,\n  class: \"desc-text\"\n}\nconst _hoisted_12 = { class: \"label-with-icon\" }\nconst _hoisted_13 = { class: \"item-content\" }\nconst _hoisted_14 = { class: \"time-range-container\" }\nconst _hoisted_15 = { class: \"dialog-footer\" }\n\nimport { ref, computed, onMounted, PropType } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { useRouter } from 'vue-router'\r\nimport { getConfig } from '@/api/config'\r\nimport { Avatar, User, Calendar, Clock, AlarmClock } from '@element-plus/icons-vue'\r\n\r\ninterface CozeAgent {\r\n  botId: string\r\n  name: string\r\n  isDefault?: boolean\r\n}\r\n\r\ninterface ConfigFormData {\r\n  agentId: string\r\n  followFrequency: 'high' | 'medium'\r\n  startTime: Date\r\n  endTime: Date\r\n}\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AutoFollowConfigDialog',\n  props: {\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  modelValue: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  selectedFriends: {\r\n    type: Array as PropType<string[]>,\r\n    default: () => []\r\n  }\r\n},\n  emits: ['update:visible', 'update:modelValue', 'create'],\n  setup(__props, { emit: __emit }) {\n\r\nconst props = __props\r\n\r\nconst emit = __emit\r\nconst router = useRouter()\r\n\r\n// 响应式数据\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\nconst creating = ref(false)\r\n\r\n// 表单数据\r\nconst configForm = ref<ConfigFormData>({\r\n  agentId: '',\r\n  followFrequency: 'high',\r\n  startTime: new Date(2000, 1, 1, 8, 0), // 默认8:00\r\n  endTime: new Date(2000, 1, 1, 12, 0)   // 默认12:00\r\n})\r\n\r\n// 计算属性\r\nconst dialogWidth = computed(() => {\r\n  const windowWidth = window.innerWidth\r\n  if (windowWidth < 768) {\r\n    return '95%'\r\n  }\r\n  if (windowWidth < 1200) {\r\n    return '80%'\r\n  }\r\n  return '500px'\r\n})\r\n\r\nconst dialogVisible = computed({\r\n  get: () => props.visible || props.modelValue,\r\n  set: (val) => {\r\n    emit('update:visible', val)\r\n    emit('update:modelValue', val)\r\n  }\r\n})\r\n\r\nconst formatSelectedFriends = computed(() => {\r\n  if (props.selectedFriends.length <= 5) {\r\n    return props.selectedFriends.join('、')\r\n  }\r\n  return `${props.selectedFriends.slice(0, 5).join('、')}等${props.selectedFriends.length}个客户`\r\n})\r\n\r\n// 方法\r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result.success && result.data) {\r\n      const agents = Array.isArray(result.data) ? result.data : \r\n                    Array.isArray(result.data.agents) ? result.data.agents : []\r\n      \r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n      \r\n      // 设置默认智能体\r\n      const defaultAgent = cozeAgents.value.find(agent => agent.isDefault)\r\n      if (defaultAgent) {\r\n        configForm.value.agentId = defaultAgent.botId\r\n      } else if (cozeAgents.value.length > 0) {\r\n        configForm.value.agentId = cozeAgents.value[0].botId\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('加载智能体配置失败:', error)\r\n    ElMessage.error('加载智能体配置失败')\r\n  }\r\n}\r\n\r\nconst handleCreateAutoFollow = async () => {\r\n  try {\r\n    // 验证表单\r\n    if (!configForm.value.agentId) {\r\n      ElMessage.warning('请选择跟进智能体')\r\n      return\r\n    }\r\n\r\n    if (!configForm.value.startTime || !configForm.value.endTime) {\r\n      ElMessage.warning('请选择时间段')\r\n      return\r\n    }\r\n\r\n    // 验证时间范围\r\n    const startHour = configForm.value.startTime.getHours()\r\n    const startMinute = configForm.value.startTime.getMinutes()\r\n    const endHour = configForm.value.endTime.getHours()\r\n    const endMinute = configForm.value.endTime.getMinutes()\r\n\r\n    const startTimeInMinutes = startHour * 60 + startMinute\r\n    const endTimeInMinutes = endHour * 60 + endMinute\r\n\r\n    if (startTimeInMinutes >= endTimeInMinutes) {\r\n      ElMessage.warning('结束时间必须晚于开始时间')\r\n      return\r\n    }\r\n\r\n    creating.value = true\r\n\r\n    // 构建配置数据\r\n    const configData = {\r\n      agentId: configForm.value.agentId,\r\n      followFrequency: configForm.value.followFrequency,\r\n      timeRangeStart: `${startHour.toString().padStart(2, '0')}:${startMinute.toString().padStart(2, '0')}`,\r\n      timeRangeEnd: `${endHour.toString().padStart(2, '0')}:${endMinute.toString().padStart(2, '0')}`,\r\n      selectedFriends: props.selectedFriends\r\n    }\r\n\r\n    // 触发创建事件\r\n    emit('create', configData)\r\n    \r\n    // 关闭弹窗\r\n    dialogVisible.value = false\r\n\r\n  } catch (error) {\r\n    console.error('创建自动跟单任务失败:', error)\r\n    ElMessage.error('创建自动跟单任务失败')\r\n  } finally {\r\n    creating.value = false\r\n  }\r\n}\r\n\r\n// 生命周期\r\nonMounted(() => {\r\n  loadCozeAgents()\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_radio = _resolveComponent(\"el-radio\")!\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\")!\n  const _component_el_time_picker = _resolveComponent(\"el-time-picker\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    modelValue: dialogVisible.value,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((dialogVisible).value = $event)),\n    title: \"自动跟单配置\",\n    width: dialogWidth.value,\n    top: '10vh',\n    \"close-on-click-modal\": false,\n    class: \"auto-follow-config-dialog\"\n  }, {\n    footer: _withCtx(() => [\n      _createElementVNode(\"span\", _hoisted_15, [\n        _createVNode(_component_el_button, {\n          onClick: _cache[4] || (_cache[4] = ($event: any) => (dialogVisible.value = false))\n        }, {\n          default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n            _createTextVNode(\"取消\", -1)\n          ]))]),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: handleCreateAutoFollow,\n          loading: creating.value\n        }, {\n          default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n            _createTextVNode(\" 开启自动跟单 \", -1)\n          ]))]),\n          _: 1\n        }, 8, [\"loading\"])\n      ])\n    ]),\n    default: _withCtx(() => [\n      _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"dialog-subtitle\" }, \" 自动联系客户，释放AI生产力 \", -1)),\n      _createVNode(_component_el_form, {\n        model: configForm.value,\n        \"label-width\": \"100px\",\n        class: \"config-form\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_1, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(Avatar))\n                  ]),\n                  _: 1\n                }),\n                _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"跟进智能体：\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_2, [\n                _createVNode(_component_el_select, {\n                  modelValue: configForm.value.agentId,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((configForm.value.agentId) = $event)),\n                  placeholder: \"选择智能体\",\n                  class: \"select-full-width\"\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(cozeAgents.value, (agent) => {\n                      return (_openBlock(), _createBlock(_component_el_option, {\n                        key: agent.botId,\n                        label: agent.name,\n                        value: agent.botId\n                      }, null, 8, [\"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_3, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(User))\n                  ]),\n                  _: 1\n                }),\n                _cache[7] || (_cache[7] = _createElementVNode(\"span\", null, \"跟单客户：\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createElementVNode(\"div\", _hoisted_5, _toDisplayString(formatSelectedFriends.value), 1)\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_6, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(Calendar))\n                  ]),\n                  _: 1\n                }),\n                _cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"跟进周期：\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"item-content\" }, [\n                _createElementVNode(\"div\", { class: \"follow-period\" }, [\n                  _createElementVNode(\"span\", { class: \"period-text\" }, \"7\"),\n                  _createElementVNode(\"span\", { class: \"period-unit\" }, \"天\")\n                ])\n              ], -1))\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_7, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(Clock))\n                  ]),\n                  _: 1\n                }),\n                _cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"跟进频率：\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_8, [\n                _createVNode(_component_el_radio_group, {\n                  modelValue: configForm.value.followFrequency,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((configForm.value.followFrequency) = $event)),\n                  class: \"frequency-radio\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_radio, { label: \"high\" }, {\n                      default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n                        _createTextVNode(\"高频\", -1)\n                      ]))]),\n                      _: 1\n                    }),\n                    _createVNode(_component_el_radio, { label: \"medium\" }, {\n                      default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n                        _createTextVNode(\"中频\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"]),\n                _createElementVNode(\"div\", _hoisted_9, [\n                  (configForm.value.followFrequency === 'high')\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \" 每天跟进一次 \"))\n                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \" 前3天每天跟进一次，后面每隔一天跟进一次 \"))\n                ])\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { class: \"custom-label-form-item\" }, {\n            label: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_12, [\n                _createVNode(_component_el_icon, { class: \"label-icon\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(AlarmClock))\n                  ]),\n                  _: 1\n                }),\n                _cache[13] || (_cache[13] = _createElementVNode(\"span\", null, \"时间段：\", -1))\n              ])\n            ]),\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_13, [\n                _createElementVNode(\"div\", _hoisted_14, [\n                  _createVNode(_component_el_time_picker, {\n                    modelValue: configForm.value.startTime,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((configForm.value.startTime) = $event)),\n                    format: \"HH:mm\",\n                    placeholder: \"开始时间\",\n                    class: \"time-picker\"\n                  }, null, 8, [\"modelValue\"]),\n                  _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"time-separator\" }, \"—\", -1)),\n                  _createVNode(_component_el_time_picker, {\n                    modelValue: configForm.value.endTime,\n                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((configForm.value.endTime) = $event)),\n                    format: \"HH:mm\",\n                    placeholder: \"结束时间\",\n                    class: \"time-picker\"\n                  }, null, 8, [\"modelValue\"])\n                ])\n              ])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"model\"])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\", \"width\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    v-model=\"dialogVisible\"\r\n    title=\"自动跟单配置\"\r\n    :width=\"dialogWidth\"\r\n    :top=\"'10vh'\"\r\n    :close-on-click-modal=\"false\"\r\n    class=\"auto-follow-config-dialog\"\r\n  >\r\n    <!-- 副标题 -->\r\n    <div class=\"dialog-subtitle\">\r\n      自动联系客户，释放AI生产力\r\n    </div>\r\n\r\n    <el-form :model=\"configForm\" label-width=\"100px\" class=\"config-form\">\r\n      <!-- 跟进智能体 -->\r\n      <el-form-item class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><Avatar /></el-icon>\r\n            <span>跟进智能体：</span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <el-select \r\n            v-model=\"configForm.agentId\" \r\n            placeholder=\"选择智能体\" \r\n            class=\"select-full-width\"\r\n          >\r\n            <el-option\r\n              v-for=\"agent in cozeAgents\"\r\n              :key=\"agent.botId\"\r\n              :label=\"agent.name\"\r\n              :value=\"agent.botId\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <!-- 跟单客户 -->\r\n      <el-form-item class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><User /></el-icon>\r\n            <span>跟单客户：</span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <div class=\"selected-friends\">\r\n            {{ formatSelectedFriends }}\r\n          </div>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <!-- 跟进周期 -->\r\n      <el-form-item class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><Calendar /></el-icon>\r\n            <span>跟进周期：</span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <div class=\"follow-period\">\r\n            <span class=\"period-text\">7</span>\r\n            <span class=\"period-unit\">天</span>\r\n          </div>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <!-- 跟进频率 -->\r\n      <el-form-item class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><Clock /></el-icon>\r\n            <span>跟进频率：</span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <el-radio-group v-model=\"configForm.followFrequency\" class=\"frequency-radio\">\r\n            <el-radio label=\"high\">高频</el-radio>\r\n            <el-radio label=\"medium\">中频</el-radio>\r\n          </el-radio-group>\r\n          <div class=\"frequency-description\">\r\n            <span v-if=\"configForm.followFrequency === 'high'\" class=\"desc-text\">\r\n              每天跟进一次\r\n            </span>\r\n            <span v-else class=\"desc-text\">\r\n              前3天每天跟进一次，后面每隔一天跟进一次\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </el-form-item>\r\n\r\n      <!-- 时间选择 -->\r\n      <el-form-item class=\"custom-label-form-item\">\r\n        <template #label>\r\n          <div class=\"label-with-icon\">\r\n            <el-icon class=\"label-icon\"><AlarmClock /></el-icon>\r\n            <span>时间段：</span>\r\n          </div>\r\n        </template>\r\n        <div class=\"item-content\">\r\n          <div class=\"time-range-container\">\r\n            <el-time-picker\r\n              v-model=\"configForm.startTime\"\r\n              format=\"HH:mm\"\r\n              placeholder=\"开始时间\"\r\n              class=\"time-picker\"\r\n            />\r\n            <span class=\"time-separator\">—</span>\r\n            <el-time-picker\r\n              v-model=\"configForm.endTime\"\r\n              format=\"HH:mm\"\r\n              placeholder=\"结束时间\"\r\n              class=\"time-picker\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"handleCreateAutoFollow\"\r\n          :loading=\"creating\"\r\n        >\r\n          开启自动跟单\r\n        </el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, PropType } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { useRouter } from 'vue-router'\r\nimport { getConfig } from '@/api/config'\r\nimport { Avatar, User, Calendar, Clock, AlarmClock } from '@element-plus/icons-vue'\r\n\r\ninterface CozeAgent {\r\n  botId: string\r\n  name: string\r\n  isDefault?: boolean\r\n}\r\n\r\ninterface ConfigFormData {\r\n  agentId: string\r\n  followFrequency: 'high' | 'medium'\r\n  startTime: Date\r\n  endTime: Date\r\n}\r\n\r\nconst props = defineProps({\r\n  visible: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  modelValue: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  selectedFriends: {\r\n    type: Array as PropType<string[]>,\r\n    default: () => []\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['update:visible', 'update:modelValue', 'create'])\r\nconst router = useRouter()\r\n\r\n// 响应式数据\r\nconst cozeAgents = ref<CozeAgent[]>([])\r\nconst creating = ref(false)\r\n\r\n// 表单数据\r\nconst configForm = ref<ConfigFormData>({\r\n  agentId: '',\r\n  followFrequency: 'high',\r\n  startTime: new Date(2000, 1, 1, 8, 0), // 默认8:00\r\n  endTime: new Date(2000, 1, 1, 12, 0)   // 默认12:00\r\n})\r\n\r\n// 计算属性\r\nconst dialogWidth = computed(() => {\r\n  const windowWidth = window.innerWidth\r\n  if (windowWidth < 768) {\r\n    return '95%'\r\n  }\r\n  if (windowWidth < 1200) {\r\n    return '80%'\r\n  }\r\n  return '500px'\r\n})\r\n\r\nconst dialogVisible = computed({\r\n  get: () => props.visible || props.modelValue,\r\n  set: (val) => {\r\n    emit('update:visible', val)\r\n    emit('update:modelValue', val)\r\n  }\r\n})\r\n\r\nconst formatSelectedFriends = computed(() => {\r\n  if (props.selectedFriends.length <= 5) {\r\n    return props.selectedFriends.join('、')\r\n  }\r\n  return `${props.selectedFriends.slice(0, 5).join('、')}等${props.selectedFriends.length}个客户`\r\n})\r\n\r\n// 方法\r\nconst loadCozeAgents = async () => {\r\n  try {\r\n    const result = await getConfig('agents')\r\n    if (result.success && result.data) {\r\n      const agents = Array.isArray(result.data) ? result.data : \r\n                    Array.isArray(result.data.agents) ? result.data.agents : []\r\n      \r\n      cozeAgents.value = agents.filter((agent: CozeAgent) => agent.name && agent.botId)\r\n      \r\n      // 设置默认智能体\r\n      const defaultAgent = cozeAgents.value.find(agent => agent.isDefault)\r\n      if (defaultAgent) {\r\n        configForm.value.agentId = defaultAgent.botId\r\n      } else if (cozeAgents.value.length > 0) {\r\n        configForm.value.agentId = cozeAgents.value[0].botId\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('加载智能体配置失败:', error)\r\n    ElMessage.error('加载智能体配置失败')\r\n  }\r\n}\r\n\r\nconst handleCreateAutoFollow = async () => {\r\n  try {\r\n    // 验证表单\r\n    if (!configForm.value.agentId) {\r\n      ElMessage.warning('请选择跟进智能体')\r\n      return\r\n    }\r\n\r\n    if (!configForm.value.startTime || !configForm.value.endTime) {\r\n      ElMessage.warning('请选择时间段')\r\n      return\r\n    }\r\n\r\n    // 验证时间范围\r\n    const startHour = configForm.value.startTime.getHours()\r\n    const startMinute = configForm.value.startTime.getMinutes()\r\n    const endHour = configForm.value.endTime.getHours()\r\n    const endMinute = configForm.value.endTime.getMinutes()\r\n\r\n    const startTimeInMinutes = startHour * 60 + startMinute\r\n    const endTimeInMinutes = endHour * 60 + endMinute\r\n\r\n    if (startTimeInMinutes >= endTimeInMinutes) {\r\n      ElMessage.warning('结束时间必须晚于开始时间')\r\n      return\r\n    }\r\n\r\n    creating.value = true\r\n\r\n    // 构建配置数据\r\n    const configData = {\r\n      agentId: configForm.value.agentId,\r\n      followFrequency: configForm.value.followFrequency,\r\n      timeRangeStart: `${startHour.toString().padStart(2, '0')}:${startMinute.toString().padStart(2, '0')}`,\r\n      timeRangeEnd: `${endHour.toString().padStart(2, '0')}:${endMinute.toString().padStart(2, '0')}`,\r\n      selectedFriends: props.selectedFriends\r\n    }\r\n\r\n    // 触发创建事件\r\n    emit('create', configData)\r\n    \r\n    // 关闭弹窗\r\n    dialogVisible.value = false\r\n\r\n  } catch (error) {\r\n    console.error('创建自动跟单任务失败:', error)\r\n    ElMessage.error('创建自动跟单任务失败')\r\n  } finally {\r\n    creating.value = false\r\n  }\r\n}\r\n\r\n// 生命周期\r\nonMounted(() => {\r\n  loadCozeAgents()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.auto-follow-config-dialog :deep(.el-dialog__title) {\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.dialog-subtitle {\r\n  color: #666;\r\n  font-size: 14px;\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.config-form {\r\n  margin-top: 10px;\r\n}\r\n\r\n.custom-label-form-item {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.label-with-icon {\r\n  display: flex;\r\n  align-items: center;\r\n  white-space: nowrap;\r\n  min-width: 90px;\r\n}\r\n\r\n.label-icon {\r\n  margin-right: 8px;\r\n  font-size: 16px;\r\n  color: #409EFF;\r\n  align-items: center;\r\n  padding-top: 2px;\r\n  justify-content: center;\r\n}\r\n\r\n.item-content {\r\n  flex: 1;\r\n}\r\n\r\n.select-full-width {\r\n  width: 100%;\r\n}\r\n\r\n.selected-friends {\r\n  color: #606266;\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n  padding: 8px 12px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 4px;\r\n  border: 1px solid #dcdfe6;\r\n}\r\n\r\n.follow-period {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.period-text {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #409EFF;\r\n}\r\n\r\n.period-unit {\r\n  font-size: 14px;\r\n  color: #606266;\r\n}\r\n\r\n.frequency-radio {\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.frequency-description {\r\n  margin-top: 8px;\r\n}\r\n\r\n.desc-text {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  background-color: #f0f9ff;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  border-left: 3px solid #409EFF;\r\n}\r\n\r\n.time-range-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  flex-wrap: nowrap;\r\n}\r\n\r\n.time-picker {\r\n  width: 120px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.time-separator {\r\n  color: #606266;\r\n  font-weight: bold;\r\n  flex-shrink: 0;\r\n}\r\n\r\n:deep(.el-form-item__label) {\r\n  font-weight: bold;\r\n}\r\n\r\n:deep(.el-dialog) {\r\n  margin: 0 auto;\r\n  max-width: 500px;\r\n  min-width: 280px;\r\n}\r\n\r\n/* 在小屏幕上保持一行显示，但调整时间选择器宽度 */\r\n@media screen and (max-width: 768px) {\r\n  .time-picker {\r\n    width: 100px;\r\n  }\r\n  \r\n  .time-range-container {\r\n    gap: 8px;\r\n  }\r\n}\r\n</style>","import script from \"./AutoFollowConfigDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AutoFollowConfigDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AutoFollowConfigDialog.vue?vue&type=style&index=0&id=fee52d32&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fee52d32\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"customer-management-container\" }\nconst _hoisted_2 = { class: \"filter-bar\" }\nconst _hoisted_3 = { class: \"filter-content\" }\nconst _hoisted_4 = { class: \"tab-switch\" }\nconst _hoisted_5 = { class: \"filter-controls\" }\nconst _hoisted_6 = { class: \"account-option\" }\nconst _hoisted_7 = { class: \"nickname\" }\nconst _hoisted_8 = { class: \"account-id\" }\nconst _hoisted_9 = { class: \"content-grid\" }\nconst _hoisted_10 = { class: \"contact-list\" }\nconst _hoisted_11 = { class: \"list-header\" }\nconst _hoisted_12 = { class: \"search-box\" }\nconst _hoisted_13 = { class: \"list-count-row\" }\nconst _hoisted_14 = { class: \"list-count\" }\nconst _hoisted_15 = { class: \"list-content\" }\nconst _hoisted_16 = {\n  key: 0,\n  class: \"friends-list\"\n}\nconst _hoisted_17 = [\"onClick\"]\nconst _hoisted_18 = { class: \"friend-avatar\" }\nconst _hoisted_19 = { class: \"avatar-placeholder\" }\nconst _hoisted_20 = { class: \"friend-info\" }\nconst _hoisted_21 = { class: \"friend-name\" }\nconst _hoisted_22 = { class: \"friend-wxid\" }\nconst _hoisted_23 = {\n  key: 0,\n  class: \"friend-tags\"\n}\nconst _hoisted_24 = {\n  key: 0,\n  class: \"more-tags\"\n}\nconst _hoisted_25 = {\n  key: 1,\n  class: \"groups-list\"\n}\nconst _hoisted_26 = [\"onClick\"]\nconst _hoisted_27 = { class: \"group-avatar\" }\nconst _hoisted_28 = { class: \"avatar-placeholder group-avatar-bg\" }\nconst _hoisted_29 = { class: \"group-info\" }\nconst _hoisted_30 = { class: \"group-name\" }\nconst _hoisted_31 = {\n  key: 0,\n  class: \"friend-tags\"\n}\nconst _hoisted_32 = {\n  key: 2,\n  class: \"empty-state\"\n}\nconst _hoisted_33 = { class: \"empty-text\" }\nconst _hoisted_34 = { class: \"right-section\" }\nconst _hoisted_35 = { class: \"group-select-container\" }\nconst _hoisted_36 = { class: \"dialog-footer\" }\nconst _hoisted_37 = { class: \"set-group-tag-dialog\" }\nconst _hoisted_38 = { class: \"dialog-targets\" }\nconst _hoisted_39 = { class: \"dialog-input\" }\nconst _hoisted_40 = { class: \"dialog-footer\" }\n\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Search } from '@element-plus/icons-vue'\r\nimport SelectedTargetsPanel from '@/components/SelectedTargetsPanel.vue'\r\nimport OperationsPanel from '@/components/OperationsPanel.vue'\r\nimport CreateTaskDialog from '@/components/sop/CreateTaskDialog.vue'\r\nimport SyncContactsDialog from '@/components/SyncContactsDialog.vue'\r\nimport AutoFollowConfigDialog from '@/components/AutoFollowConfigDialog.vue'\r\nimport { getContacts, getContactTags, getGroupTags, getGroups, inviteFriendsToGroup, syncContacts, syncGroups, Contact, Tag, setGroupTagBatch } from '@/api/contact'\r\nimport { headers } from '@/api/config'\r\nimport { createMassSendingTask, MassSendingTaskRequest, createBatchAutoFollowTasks, BatchAutoFollowRequest } from '@/api/autosop'\r\nimport { useRouter } from 'vue-router'\r\n\r\n// 定义实例接口\r\ninterface Instance {\r\n  account_id: string\r\n  nickname: string\r\n  status?: string\r\n  is_active?: boolean\r\n}\r\n\r\n// 响应式数据\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CustomerManagement',\n  setup(__props) {\n\r\nconst router = useRouter()\r\nconst activeType = ref('friends') // 'friends' | 'groups'\r\nconst selectedAccountId = ref('')\r\nconst selectedTag = ref('__ALL__')\r\nconst searchKeyword = ref('')\r\nconst loading = ref(false)\r\n\r\n// 实例和数据\r\nconst activeInstances = ref<Instance[]>([])\r\nconst friendsList = ref<Contact[]>([])\r\nconst groupList = ref<Contact[]>([])\r\nconst tagList = ref<Tag[]>([])\r\n\r\n// 选中的目标\r\nconst selectedFriends = ref<string[]>([])\r\nconst selectedGroups = ref<string[]>([])\r\n\r\n// 弹窗状态\r\nconst showCreateDialog = ref(false)\r\nconst showGroupSelectDialog = ref(false)\r\nconst showSyncDialog = ref(false)\r\nconst showAutoFollowConfigDialog = ref(false)\r\nconst selectedTargetGroup = ref('')\r\nconst inviting = ref(false)\r\n\r\n// 计算属性\r\nconst filteredList = computed(() => {\r\n  let list = activeType.value === 'friends' ? friendsList.value : groupList.value\r\n  \r\n  // 关键词搜索\r\n  if (searchKeyword.value) {\r\n    list = list.filter(item => \r\n      item.name.toLowerCase().includes(searchKeyword.value.toLowerCase())\r\n    )\r\n  }\r\n  \r\n  // 标签筛选（仅好友）\r\n  if (selectedTag.value && selectedTag.value !== '__ALL__') {\r\n    if (activeType.value === 'friends') {\r\n      if (selectedTag.value === '未分组') {\r\n        list = list.filter(friend => !friend.tags || friend.tags.length === 0)\r\n      } else {\r\n        list = list.filter(friend => \r\n          friend.tags && friend.tags.includes(selectedTag.value)\r\n        )\r\n      }\r\n    } else {\r\n      if (selectedTag.value === '未分组') {\r\n        list = list.filter(group => !('tag' in group) || !group.tag)\r\n      } else {\r\n        list = list.filter(group => ('tag' in group) && group.tag === selectedTag.value)\r\n      }\r\n    }\r\n  }\r\n  \r\n  return list\r\n})\r\n\r\n// 全选状态计算属性\r\nconst isAllSelected = computed(() => {\r\n  const selectedList = activeType.value === 'friends' ? selectedFriends.value : selectedGroups.value\r\n  return filteredList.value.length > 0 && \r\n         filteredList.value.every(item => selectedList.includes(item.name))\r\n})\r\n\r\n// 方法\r\nconst loadActiveInstances = async () => {\r\n  try {\r\n    const response = await fetch('/api/instances/active', { headers })\r\n    const data = await response.json()\r\n    console.log('获取活跃实例:', data)\r\n    if (data.success) {\r\n      activeInstances.value = data.instances\r\n      // 如果只有一个实例，自动选择\r\n      if (data.instances.length === 1) {\r\n        selectedAccountId.value = data.instances[0].account_id\r\n      } else if (data.instances.length > 1) {\r\n        // 选择当前活跃的实例\r\n        const activeInstance = data.instances.find((inst: Instance) => inst.is_active)\r\n        if (activeInstance) {\r\n          selectedAccountId.value = activeInstance.account_id\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('获取活跃实例失败:', error)\r\n    ElMessage.error('获取微信实例失败')\r\n  }\r\n}\r\n\r\nconst loadFriends = async () => {\r\n  if (!selectedAccountId.value) return\r\n  \r\n  loading.value = true\r\n  try {\r\n    // 修正：使用 '__ALL__' 作为全部标签的哨兵值；'未分组' 也不直接传到后端\r\n    const tagParam = (selectedTag.value === '__ALL__' || selectedTag.value === '未分组') ? undefined : selectedTag.value\r\n    const response = await getContacts(tagParam, searchKeyword.value, selectedAccountId.value)\r\n    friendsList.value = response.map(friend => ({\r\n      ...friend,\r\n      is_new: friend.is_new || false,\r\n      last_updated: friend.last_updated\r\n    }))\r\n  } catch (error) {\r\n    console.error('获取好友列表失败:', error)\r\n    ElMessage.error('获取好友列表失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst loadGroups = async () => {\r\n  // if (!selectedAccountId.value) return\r\n  loading.value = true\r\n  try {\r\n    const response = await getGroups(searchKeyword.value, selectedAccountId.value)\r\n    groupList.value = response.map(group => {\r\n      return {\r\n        ...group,\r\n        id: group.name,\r\n        tag: group.tag\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error('获取群聊列表失败:', error)\r\n    ElMessage.error('获取群聊列表失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst loadTags = async () => {\r\n  if (!selectedAccountId.value) return\r\n  \r\n  try {\r\n    const response = activeType.value === 'friends'\r\n      ? await getContactTags(selectedAccountId.value)\r\n      : await getGroupTags(selectedAccountId.value)\r\n    tagList.value = (response || []).filter(tag => !(tag.name === '未分组' && (tag.count ?? 0) === 0))\r\n  } catch (error) {\r\n    console.error('获取标签列表失败:', error)\r\n  }\r\n}\r\n\r\nconst isSelected = (name: string) => {\r\n  if (activeType.value === 'friends') {\r\n    return selectedFriends.value.includes(name)\r\n  } else {\r\n    return selectedGroups.value.includes(name)\r\n  }\r\n}\r\n\r\nconst toggleSelection = (name: string, type: 'friend' | 'group') => {\r\n  if (type === 'friend') {\r\n    const index = selectedFriends.value.indexOf(name)\r\n    if (index > -1) {\r\n      selectedFriends.value.splice(index, 1)\r\n    } else {\r\n      selectedFriends.value.push(name)\r\n    }\r\n  } else {\r\n    const index = selectedGroups.value.indexOf(name)\r\n    if (index > -1) {\r\n      selectedGroups.value.splice(index, 1)\r\n    } else {\r\n      selectedGroups.value.push(name)\r\n    }\r\n  }\r\n}\r\n\r\nconst removeFriend = (name: string) => {\r\n  const index = selectedFriends.value.indexOf(name)\r\n  if (index > -1) {\r\n    selectedFriends.value.splice(index, 1)\r\n  }\r\n}\r\n\r\nconst removeGroup = (name: string) => {\r\n  const index = selectedGroups.value.indexOf(name)\r\n  if (index > -1) {\r\n    selectedGroups.value.splice(index, 1)\r\n  }\r\n}\r\n\r\nconst clearAllSelections = () => {\r\n  selectedFriends.value = []\r\n  selectedGroups.value = []\r\n}\r\n\r\n// 全选/取消全选方法\r\nconst toggleSelectAll = () => {\r\n  const selectedList = activeType.value === 'friends' ? selectedFriends.value : selectedGroups.value\r\n  if (isAllSelected.value) {\r\n    // 取消全选：清空当前类型的选择\r\n    if (activeType.value === 'friends') {\r\n      selectedFriends.value = []\r\n    } else {\r\n      selectedGroups.value = []\r\n    }\r\n  } else {\r\n    // 全选：选择当前筛选列表中的所有项目\r\n    const newSelections = filteredList.value.map(item => item.name)\r\n    if (activeType.value === 'friends') {\r\n      selectedFriends.value = newSelections\r\n    } else {\r\n      selectedGroups.value = newSelections\r\n    }\r\n  }\r\n}\r\n\r\n// 事件处理\r\nconst handleTypeChange = async () => {\r\n  // 切换好友/群聊时不清空已选择的目标，只重置筛选条件\r\n  selectedTag.value = '__ALL__'\r\n  searchKeyword.value = ''\r\n  console.log('activeType.value', activeType.value, selectedAccountId.value)\r\n  // 如果没有选择账号，尝试重新加载实例\r\n  // if (!selectedAccountId.value) {\r\n  //   await loadActiveInstances()\r\n  //   // 如果仍然没有账号，说明没有登录的微信实例\r\n\r\n  //   if (!selectedAccountId.value) {\r\n  //     ElMessage.warning('请先登录微信账号')\r\n  //     return\r\n  //   }\r\n  // }\r\n  \r\n  if (activeType.value === 'friends') {\r\n    await loadFriends()\r\n    await loadTags()\r\n  } else {\r\n    await loadGroups()\r\n    await loadTags()\r\n  }\r\n}\r\n\r\nconst handleAccountChange = () => {\r\n  // 只有切换账号时才清空已选择的目标\r\n  clearAllSelections()\r\n  selectedTag.value = '__ALL__'\r\n  searchKeyword.value = ''\r\n  \r\n  // 切换账号时总是重新加载标签列表，不管当前是好友还是群聊模式\r\n  loadTags()\r\n  \r\n  if (activeType.value === 'friends') {\r\n    loadFriends()\r\n  } else {\r\n    loadGroups()\r\n  }\r\n}\r\n\r\nconst handleTagChange = () => {\r\n  // 标签变化时不需要重新加载数据，只需要重新过滤\r\n}\r\n\r\nconst handleSearch = () => {\r\n  // 搜索时不需要重新加载数据，只需要重新过滤\r\n}\r\n\r\n// 操作处理\r\nconst handleMassSending = () => {\r\n  showCreateDialog.value = true\r\n}\r\n\r\nconst handleBatchInvite = () => {\r\n  if (selectedFriends.value.length === 0) {\r\n    ElMessage.warning('请先选择要拉群的好友')\r\n    return\r\n  }\r\n  \r\n  // 加载群聊列表用于选择\r\n  loadGroups().then(() => {\r\n    showGroupSelectDialog.value = true\r\n  })\r\n}\r\n\r\nconst handleAutoFollow = () => {\r\n  if (selectedFriends.value.length === 0) {\r\n    ElMessage.warning('请先选择要跟单的好友')\r\n    return\r\n  }\r\n\r\n  if (!selectedAccountId.value) {\r\n    ElMessage.warning('请先选择微信账号')\r\n    return\r\n  }\r\n\r\n  // 显示自动跟单配置弹窗\r\n  showAutoFollowConfigDialog.value = true\r\n}\r\n\r\nconst handleBatchTag = () => {\r\n  if (selectedGroups.value.length === 0 || selectedFriends.value.length > 0) {\r\n    ElMessage.warning('仅支持对选中的群聊批量设置标签')\r\n    return\r\n  }\r\n  openSetGroupTagDialog()\r\n}\r\n\r\nconst handleDeleteContacts = () => {\r\n  ElMessage.info('删除功能开发中...')\r\n}\r\n\r\nconst handleShowSettings = () => {\r\n  showSyncDialog.value = true\r\n}\r\n\r\nconst handleCreateTask = async (taskData: MassSendingTaskRequest) => {\r\n  try {\r\n    const requestData = {\r\n      ...taskData,\r\n      selectedFriends: [...selectedFriends.value, ...selectedGroups.value], // 合并为一个列表\r\n      selectedGroups: [], // 不再单独传递群聊列表\r\n      account_id: selectedAccountId.value\r\n    }\r\n    console.debug('创建任务请求数据:', requestData)\r\n    await createMassSendingTask(requestData)\r\n    ElMessage.success('任务创建成功')\r\n    // 重置选择状态\r\n    selectedFriends.value = []\r\n    selectedGroups.value = []\r\n    showCreateDialog.value = false\r\n    // 跳转到 AutoSOP 页面\r\n    router.push({\r\n      name: 'AutoSOP',\r\n      query: {\r\n        function: 'activate'\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error('创建任务失败:', error)\r\n    ElMessage.error('创建任务失败')\r\n  }\r\n}\r\n\r\nconst showSetGroupTagDialog = ref(false)\r\nconst inputGroupTag = ref('')\r\n\r\nconst openSetGroupTagDialog = () => {\r\n  inputGroupTag.value = ''\r\n  showSetGroupTagDialog.value = true\r\n}\r\n\r\nconst isValidTag = (s: string) => {\r\n  const t = s.trim()\r\n  if (!t) return false\r\n  return /^[\\u4e00-\\u9fffA-Za-z0-9]+$/.test(t)\r\n}\r\n\r\nconst canConfirmSetGroupTag = computed(() => {\r\n  const t = inputGroupTag.value.trim()\r\n  const len = t.length\r\n  return isValidTag(t) && len >= 1 && len <= 10 && selectedGroups.value.length > 0\r\n})\r\n\r\nconst groupTagDialogTargetsText = computed(() => {\r\n  const max = 5\r\n  const names = selectedGroups.value.slice(0, max).join('，')\r\n  if (selectedGroups.value.length > max) {\r\n    return `${names} 等${selectedGroups.value.length}个群`\r\n  }\r\n  return names\r\n})\r\n\r\nconst confirmSetGroupTag = async () => {\r\n  if (!selectedAccountId.value) {\r\n    ElMessage.error('请先选择微信账号')\r\n    return\r\n  }\r\n  const t = inputGroupTag.value.trim()\r\n  const len = t.length\r\n  if (!isValidTag(t) || len < 1 || len > 10) {\r\n    ElMessage.error('标签需为1-10个字符（支持中英文和数字）')\r\n    return\r\n  }\r\n  try {\r\n    const res = await setGroupTagBatch({\r\n      groups: selectedGroups.value,\r\n      tag: t,\r\n      account_id: selectedAccountId.value\r\n    })\r\n    if (res && res.success) {\r\n      ElMessage.success('已批量设置群标签')\r\n      showSetGroupTagDialog.value = false\r\n      await loadGroups()\r\n    } else {\r\n      ElMessage.error(res?.error || '设置群标签失败')\r\n    }\r\n  } catch (e) {\r\n    ElMessage.error('设置群标签失败')\r\n  }\r\n}\r\n\r\nconst handleCreateAutoFollowTask = async (configData: any) => {\r\n  try {\r\n    // 构建好友列表，包含 wxid 和 nickname\r\n    const friends = selectedFriends.value.map(friendName => {\r\n      const friend = friendsList.value.find(f => f.name === friendName)\r\n      return {\r\n        wxid: friend?.wxid || `wx_${friendName}`,\r\n        nickname: friendName\r\n      }\r\n    })\r\n\r\n    // 构建批量跟单请求\r\n    const batchRequest: BatchAutoFollowRequest = {\r\n      account_id: selectedAccountId.value,\r\n      friends: friends,\r\n      agent_id: configData.agentId,\r\n      follow_scenario: '新好友', // 使用默认场景\r\n      follow_days: 7, // 固定为7天\r\n      follow_frequency: configData.followFrequency === 'high' ? 'daily' : 'medium',\r\n      time_range_start: configData.timeRangeStart,\r\n      time_range_end: configData.timeRangeEnd\r\n    }\r\n\r\n    console.debug('批量创建自动跟单任务请求:', batchRequest)\r\n\r\n    // 调用后端接口\r\n    const result = await createBatchAutoFollowTasks(batchRequest)\r\n    \r\n    if (result.success) {\r\n      ElMessage.success(`成功为 ${selectedFriends.value.length} 个好友创建自动跟单任务`)\r\n      // 重置选择状态\r\n      selectedFriends.value = []\r\n      // 跳转到 AutoSOP 的自动跟单功能\r\n      router.push({\r\n        name: 'AutoSOP',\r\n        query: {\r\n          function: 'autofollow'\r\n        }\r\n      })\r\n    } else {\r\n      ElMessage.error(result.error || '创建自动跟单任务失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('创建自动跟单任务失败:', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '创建自动跟单任务失败')\r\n  }\r\n}\r\n\r\nconst confirmInviteToGroup = async () => {\r\n  if (!selectedTargetGroup.value) {\r\n    ElMessage.warning('请选择目标群聊')\r\n    return\r\n  }\r\n  showGroupSelectDialog.value = false\r\n  try {\r\n    inviting.value = true\r\n    const result = await inviteFriendsToGroup({\r\n      friends: selectedFriends.value,\r\n      targetGroup: selectedTargetGroup.value,\r\n      account_id: selectedAccountId.value\r\n    })\r\n    \r\n    if (result.success) {\r\n      ElMessage.success(`批量拉群成功，已邀请 ${result.data.invitedCount} 位好友`)\r\n      // 重置选择状态\r\n      selectedFriends.value = []\r\n      selectedTargetGroup.value = ''\r\n    } else {\r\n      ElMessage.error(result.error || '批量拉群失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('批量拉群失败:', error)\r\n    const msg = (error instanceof Error) ? error.message : (error as any)?.message || '批量拉群失败'\r\n    ElMessage.error(msg)\r\n  } finally {\r\n    inviting.value = false\r\n  }\r\n}\r\n\r\n// 生命周期\r\nonMounted(async () => {\r\n  await loadActiveInstances()\r\n  if (selectedAccountId.value) {\r\n    await loadFriends()\r\n    await loadGroups()  // 同时加载群聊数据\r\n    await loadTags()\r\n  }\r\n})\r\n\r\n// 监听账号变化\r\nwatch(selectedAccountId, () => {\r\n  if (selectedAccountId.value) {\r\n    loadFriends()\r\n    loadGroups()  // 总是加载群聊数据\r\n    loadTags()\r\n  }\r\n})\r\n\r\n// 监听activeType变化，确保切换时数据已加载（仅在数据为空时加载）\r\nwatch(activeType, () => {\r\n  if (selectedAccountId.value) {\r\n    if (activeType.value === 'friends' && friendsList.value.length === 0) {\r\n      loadFriends()\r\n    } else if (activeType.value === 'groups' && groupList.value.length === 0) {\r\n      loadGroups()\r\n    }\r\n  }\r\n})\r\n\r\n// 同步通讯录处理方法\r\nconst handleSync = async (syncData: { accountId: string, type: 'friend' | 'group' }) => {\r\n  try {\r\n    // 使用API层的接口\r\n    if (syncData.type === 'friend') {\r\n      await syncContacts(syncData.accountId)\r\n      ElMessage.success('好友同步成功')\r\n      await loadFriends()\r\n    } else {\r\n      await syncGroups(syncData.accountId)\r\n      ElMessage.success('群聊同步成功')\r\n      await loadGroups()\r\n    }\r\n  } catch (error: any) {\r\n    console.error('同步失败:', error)\r\n    ElMessage.error(`${syncData.type === 'friend' ? '好友' : '群聊'}同步失败: ${error?.message || '未知错误'}`)\r\n  }\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_radio_button = _resolveComponent(\"el-radio-button\")!\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n  const _directive_loading = _resolveDirective(\"loading\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _createVNode(_component_el_radio_group, {\n            modelValue: activeType.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((activeType).value = $event)),\n            onChange: handleTypeChange,\n            class: \"type-tabs\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_radio_button, { label: \"friends\" }, {\n                default: _withCtx(() => [...(_cache[13] || (_cache[13] = [\n                  _createTextVNode(\"好友\", -1)\n                ]))]),\n                _: 1\n              }),\n              _createVNode(_component_el_radio_button, { label: \"groups\" }, {\n                default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                  _createTextVNode(\"群聊\", -1)\n                ]))]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ]),\n        _createElementVNode(\"div\", _hoisted_5, [\n          (activeInstances.value.length > 1)\n            ? (_openBlock(), _createBlock(_component_el_select, {\n                key: 0,\n                modelValue: selectedAccountId.value,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedAccountId).value = $event)),\n                placeholder: \"选择微信账号\",\n                onChange: handleAccountChange,\n                class: \"account-select\",\n                size: \"default\"\n              }, {\n                default: _withCtx(() => [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(activeInstances.value, (instance) => {\n                    return (_openBlock(), _createBlock(_component_el_option, {\n                      key: instance.account_id,\n                      label: instance.nickname,\n                      value: instance.account_id\n                    }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"span\", _hoisted_6, [\n                          _createElementVNode(\"span\", _hoisted_7, _toDisplayString(instance.nickname), 1),\n                          _createElementVNode(\"span\", _hoisted_8, _toDisplayString(instance.account_id), 1)\n                        ])\n                      ]),\n                      _: 2\n                    }, 1032, [\"label\", \"value\"]))\n                  }), 128))\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"]))\n            : _createCommentVNode(\"\", true),\n          _createVNode(_component_el_select, {\n            modelValue: selectedTag.value,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((selectedTag).value = $event)),\n            placeholder: \"选择标签\",\n            onChange: handleTagChange,\n            class: \"tag-select\",\n            size: \"default\",\n            \"popper-class\": 'tag-dropdown'\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_option, {\n                label: \"全部\",\n                value: \"__ALL__\"\n              }),\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(tagList.value, (tag) => {\n                return (_openBlock(), _createBlock(_component_el_option, {\n                  key: tag.id,\n                  label: `${tag.name} (${tag.count})`,\n                  value: tag.name\n                }, null, 8, [\"label\", \"value\"]))\n              }), 128))\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ])\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_9, [\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createElementVNode(\"div\", _hoisted_11, [\n          _createElementVNode(\"div\", _hoisted_12, [\n            _createVNode(_component_el_input, {\n              modelValue: searchKeyword.value,\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((searchKeyword).value = $event)),\n              placeholder: \"搜索好友或群聊\",\n              onInput: handleSearch,\n              clearable: \"\",\n              size: \"default\"\n            }, {\n              prefix: _withCtx(() => [\n                _createVNode(_component_el_icon, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(Search))\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_13, [\n            _createElementVNode(\"span\", _hoisted_14, _toDisplayString(activeType.value === 'friends' ? '好友' : '群聊') + \" (\" + _toDisplayString(filteredList.value.length) + \") \", 1),\n            _createVNode(_component_el_button, {\n              type: \"text\",\n              size: \"small\",\n              onClick: toggleSelectAll,\n              disabled: filteredList.value.length === 0\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(isAllSelected.value ? '取消全选' : '全选'), 1)\n              ]),\n              _: 1\n            }, 8, [\"disabled\"])\n          ])\n        ]),\n        _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n          (activeType.value === 'friends')\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredList.value, (friend) => {\n                  return (_openBlock(), _createElementBlock(\"div\", {\n                    key: friend.name,\n                    class: _normalizeClass([\"friend-item\", { 'selected': isSelected(friend.name) }]),\n                    onClick: ($event: any) => (toggleSelection(friend.name, 'friend'))\n                  }, [\n                    _createElementVNode(\"div\", _hoisted_18, [\n                      _createElementVNode(\"div\", _hoisted_19, _toDisplayString(friend.name.charAt(0)), 1)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_20, [\n                      _createElementVNode(\"div\", _hoisted_21, _toDisplayString(friend.name), 1),\n                      _createElementVNode(\"div\", _hoisted_22, _toDisplayString(friend.wxid || `wx_${friend.name}`), 1),\n                      (friend.tags && friend.tags.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(friend.tags.slice(0, 2), (tag) => {\n                              return (_openBlock(), _createBlock(_component_el_tag, {\n                                key: tag,\n                                size: \"small\",\n                                type: \"info\"\n                              }, {\n                                default: _withCtx(() => [\n                                  _createTextVNode(_toDisplayString(tag), 1)\n                                ]),\n                                _: 2\n                              }, 1024))\n                            }), 128)),\n                            (friend.tags.length > 2)\n                              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_24, \"+\" + _toDisplayString(friend.tags.length - 2), 1))\n                              : _createCommentVNode(\"\", true)\n                          ]))\n                        : _createCommentVNode(\"\", true)\n                    ])\n                  ], 10, _hoisted_17))\n                }), 128))\n              ]))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredList.value, (group) => {\n                  return (_openBlock(), _createElementBlock(\"div\", {\n                    key: group.name,\n                    class: _normalizeClass([\"group-item\", { 'selected': isSelected(group.name) }]),\n                    onClick: ($event: any) => (toggleSelection(group.name, 'group'))\n                  }, [\n                    _createElementVNode(\"div\", _hoisted_27, [\n                      _createElementVNode(\"div\", _hoisted_28, _toDisplayString(group.name.charAt(0)), 1)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_29, [\n                      _createElementVNode(\"div\", _hoisted_30, _toDisplayString(group.name), 1),\n                      (group.tag)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [\n                            _createVNode(_component_el_tag, {\n                              size: \"small\",\n                              type: \"info\"\n                            }, {\n                              default: _withCtx(() => [\n                                _createTextVNode(_toDisplayString(group.tag), 1)\n                              ]),\n                              _: 2\n                            }, 1024)\n                          ]))\n                        : _createCommentVNode(\"\", true)\n                    ])\n                  ], 10, _hoisted_26))\n                }), 128))\n              ])),\n          (filteredList.value.length === 0 && !loading.value)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, [\n                _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"empty-icon\" }, \"📭\", -1)),\n                _createElementVNode(\"div\", _hoisted_33, \"请先同步\" + _toDisplayString(activeType.value === 'friends' ? '好友' : '群聊') + \"数据\", 1)\n              ]))\n            : _createCommentVNode(\"\", true)\n        ])), [\n          [_directive_loading, loading.value]\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_34, [\n        _createVNode(SelectedTargetsPanel, {\n          \"selected-friends\": selectedFriends.value,\n          \"selected-groups\": selectedGroups.value,\n          onRemoveFriend: removeFriend,\n          onRemoveGroup: removeGroup,\n          onClearAll: clearAllSelections,\n          onSetGroupTag: openSetGroupTagDialog,\n          class: \"targets-panel\"\n        }, null, 8, [\"selected-friends\", \"selected-groups\"]),\n        _createVNode(OperationsPanel, {\n          \"selected-friends\": selectedFriends.value,\n          \"selected-groups\": selectedGroups.value,\n          onMassSend: handleMassSending,\n          onBatchGroup: handleBatchInvite,\n          onAutoFollow: handleAutoFollow,\n          onBatchTag: handleBatchTag,\n          onDelete: handleDeleteContacts,\n          onOpenSettings: handleShowSettings,\n          class: \"operations-panel\"\n        }, null, 8, [\"selected-friends\", \"selected-groups\"])\n      ])\n    ]),\n    _createVNode(CreateTaskDialog, {\n      modelValue: showCreateDialog.value,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((showCreateDialog).value = $event)),\n      \"selected-friends\": selectedFriends.value,\n      \"selected-groups\": selectedGroups.value,\n      \"wechat-nickname\": (activeInstances.value.find(inst => inst.account_id === selectedAccountId.value)?.nickname) || '',\n      \"is-from-sop\": false,\n      onCreate: handleCreateTask\n    }, null, 8, [\"modelValue\", \"selected-friends\", \"selected-groups\", \"wechat-nickname\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: showGroupSelectDialog.value,\n      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((showGroupSelectDialog).value = $event)),\n      title: \"选择目标群聊\",\n      width: \"50%\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_36, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[6] || (_cache[6] = ($event: any) => (showGroupSelectDialog.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n              _createTextVNode(\"取消\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: confirmInviteToGroup,\n            disabled: !selectedTargetGroup.value\n          }, {\n            default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n              _createTextVNode(\"确认\", -1)\n            ]))]),\n            _: 1\n          }, 8, [\"disabled\"])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_35, [\n          _createVNode(_component_el_select, {\n            modelValue: selectedTargetGroup.value,\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((selectedTargetGroup).value = $event)),\n            placeholder: \"请选择目标群聊\",\n            filterable: \"\",\n            style: {\"width\":\"100%\"}\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(groupList.value, (group) => {\n                return (_openBlock(), _createBlock(_component_el_option, {\n                  key: group.name,\n                  label: group.name,\n                  value: group.name\n                }, null, 8, [\"label\", \"value\"]))\n              }), 128))\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_component_el_dialog, {\n      modelValue: showSetGroupTagDialog.value,\n      \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((showSetGroupTagDialog).value = $event)),\n      title: \"设置群标签\",\n      width: \"500px\",\n      class: \"group-tag-dialog\"\n    }, {\n      footer: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_40, [\n          _createVNode(_component_el_button, {\n            onClick: _cache[9] || (_cache[9] = ($event: any) => (showSetGroupTagDialog.value = false))\n          }, {\n            default: _withCtx(() => [...(_cache[21] || (_cache[21] = [\n              _createTextVNode(\"取消\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            type: \"primary\",\n            disabled: !canConfirmSetGroupTag.value,\n            onClick: confirmSetGroupTag\n          }, {\n            default: _withCtx(() => [...(_cache[22] || (_cache[22] = [\n              _createTextVNode(\"确认\", -1)\n            ]))]),\n            _: 1\n          }, 8, [\"disabled\"])\n        ])\n      ]),\n      default: _withCtx(() => [\n        _createElementVNode(\"div\", _hoisted_37, [\n          _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"dialog-tip\" }, [\n            _createElementVNode(\"div\", null, \"批量设置群标签，以便绑定AI智能体进行回复\"),\n            _createElementVNode(\"div\", null, \"如果群聊已绑定标签，重新设置会直接覆盖~\")\n          ], -1)),\n          _createElementVNode(\"div\", _hoisted_38, [\n            _cache[18] || (_cache[18] = _createElementVNode(\"span\", { class: \"label\" }, \"群聊：\", -1)),\n            _createTextVNode(\" \" + _toDisplayString(groupTagDialogTargetsText.value), 1)\n          ]),\n          _createElementVNode(\"div\", _hoisted_39, [\n            _cache[19] || (_cache[19] = _createElementVNode(\"span\", { class: \"label\" }, \"标签：\", -1)),\n            _createVNode(_component_el_input, {\n              modelValue: inputGroupTag.value,\n              \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((inputGroupTag).value = $event)),\n              maxlength: \"10\",\n              \"show-word-limit\": \"\",\n              placeholder: \"请输入标签（1-10个字符，支持中英文/数字）\"\n            }, null, 8, [\"modelValue\"])\n          ])\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(SyncContactsDialog, {\n      modelValue: showSyncDialog.value,\n      \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((showSyncDialog).value = $event)),\n      accounts: activeInstances.value,\n      \"default-account-id\": selectedAccountId.value,\n      onSync: handleSync\n    }, null, 8, [\"modelValue\", \"accounts\", \"default-account-id\"]),\n    _createVNode(AutoFollowConfigDialog, {\n      modelValue: showAutoFollowConfigDialog.value,\n      \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((showAutoFollowConfigDialog).value = $event)),\n      \"selected-friends\": selectedFriends.value,\n      onCreate: handleCreateAutoFollowTask\n    }, null, 8, [\"modelValue\", \"selected-friends\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"customer-management-container\">\r\n    <!-- 顶部筛选区域 -->\r\n    <div class=\"filter-bar\">\r\n      <div class=\"filter-content\">\r\n        <!-- 左侧：好友/群聊切换 -->\r\n        <div class=\"tab-switch\">\r\n          <el-radio-group v-model=\"activeType\" @change=\"handleTypeChange\" class=\"type-tabs\">\r\n            <el-radio-button label=\"friends\">好友</el-radio-button>\r\n            <el-radio-button label=\"groups\">群聊</el-radio-button>\r\n          </el-radio-group>\r\n        </div>\r\n\r\n        <!-- 右侧：微信账号选择和标签筛选 -->\r\n        <div class=\"filter-controls\">\r\n          <!-- 微信账号选择 -->\r\n          <el-select\r\n            v-model=\"selectedAccountId\"\r\n            v-if=\"activeInstances.length > 1\"\r\n            placeholder=\"选择微信账号\"\r\n            @change=\"handleAccountChange\"\r\n            class=\"account-select\"\r\n            size=\"default\"\r\n          >\r\n            <el-option\r\n              v-for=\"instance in activeInstances\"\r\n              :key=\"instance.account_id\"\r\n              :label=\"instance.nickname\"\r\n              :value=\"instance.account_id\"\r\n            >\r\n              <span class=\"account-option\">\r\n                <span class=\"nickname\">{{ instance.nickname }}</span>\r\n                <span class=\"account-id\">{{ instance.account_id }}</span>\r\n              </span>\r\n            </el-option>\r\n          </el-select>\r\n\r\n          <!-- 标签筛选 -->\r\n          <el-select\r\n            v-model=\"selectedTag\"\r\n            placeholder=\"选择标签\"\r\n            @change=\"handleTagChange\"\r\n            class=\"tag-select\"\r\n            size=\"default\"\r\n            :popper-class=\"'tag-dropdown'\"\r\n          >\r\n            <el-option label=\"全部\" value=\"__ALL__\" />\r\n            <el-option\r\n              v-for=\"tag in tagList\"\r\n              :key=\"tag.id\"\r\n              :label=\"`${tag.name} (${tag.count})`\"\r\n              :value=\"tag.name\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 主要内容区域 -->\r\n    <div class=\"content-grid\">\r\n      <!-- 左侧：好友/群聊列表 -->\r\n      <div class=\"contact-list\">\r\n        <div class=\"list-header\">\r\n          <div class=\"search-box\">\r\n            <el-input\r\n              v-model=\"searchKeyword\"\r\n              placeholder=\"搜索好友或群聊\"\r\n              @input=\"handleSearch\"\r\n              clearable\r\n              size=\"default\"\r\n            >\r\n              <template #prefix>\r\n                <el-icon><Search /></el-icon>\r\n              </template>\r\n            </el-input>\r\n          </div>\r\n          <div class=\"list-count-row\">\r\n            <span class=\"list-count\">\r\n              {{ activeType === 'friends' ? '好友' : '群聊' }} ({{ filteredList.length }})\r\n            </span>\r\n            <el-button \r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"toggleSelectAll\"\r\n              :disabled=\"filteredList.length === 0\">\r\n              {{ isAllSelected ? '取消全选' : '全选' }}\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"list-content\" v-loading=\"loading\">\r\n          <!-- 好友列表 -->\r\n          <div v-if=\"activeType === 'friends'\" class=\"friends-list\">\r\n            <div\r\n              v-for=\"friend in filteredList\"\r\n              :key=\"friend.name\"\r\n              class=\"friend-item\"\r\n              :class=\"{ 'selected': isSelected(friend.name) }\"\r\n              @click=\"toggleSelection(friend.name, 'friend')\"\r\n            >\r\n              <div class=\"friend-avatar\">\r\n                <div class=\"avatar-placeholder\">\r\n                  {{ friend.name.charAt(0) }}\r\n                </div>\r\n                <!-- <div v-if=\"friend.is_new\" class=\"new-badge\">\r\n                  <img src=\"/icon/new_friend.png\" alt=\"新好友\" class=\"new-badge-icon\" />\r\n                </div> -->\r\n              </div>\r\n              <div class=\"friend-info\">\r\n                <div class=\"friend-name\">{{ friend.name }}</div>\r\n                <div class=\"friend-wxid\">{{ friend.wxid || `wx_${friend.name}` }}</div>\r\n                <div v-if=\"friend.tags && friend.tags.length > 0\" class=\"friend-tags\">\r\n                  <el-tag\r\n                    v-for=\"tag in friend.tags.slice(0, 2)\"\r\n                    :key=\"tag\"\r\n                    size=\"small\"\r\n                    type=\"info\"\r\n                  >\r\n                    {{ tag }}\r\n                  </el-tag>\r\n                  <span v-if=\"friend.tags.length > 2\" class=\"more-tags\">+{{ friend.tags.length - 2 }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 群聊列表 -->\r\n          <div v-else class=\"groups-list\">\r\n            <div\r\n              v-for=\"group in filteredList\"\r\n              :key=\"group.name\"\r\n              class=\"group-item\"\r\n              :class=\"{ 'selected': isSelected(group.name) }\"\r\n              @click=\"toggleSelection(group.name, 'group')\"\r\n            >\r\n              <div class=\"group-avatar\">\r\n                <div class=\"avatar-placeholder group-avatar-bg\">\r\n                  {{ group.name.charAt(0) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"group-info\">\r\n                <div class=\"group-name\">{{ group.name }}</div>\r\n                <div v-if=\"group.tag\" class=\"friend-tags\">\r\n                  <el-tag size=\"small\" type=\"info\">\r\n                    {{ group.tag }}\r\n                  </el-tag>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 空状态 -->\r\n          <div v-if=\"filteredList.length === 0 && !loading\" class=\"empty-state\">\r\n            <div class=\"empty-icon\">📭</div>\r\n            <div class=\"empty-text\">请先同步{{ activeType === 'friends' ? '好友' : '群聊' }}数据</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右侧：上下分布区域 -->\r\n      <div class=\"right-section\">\r\n        <!-- 上方：选中目标展示 -->\r\n        <SelectedTargetsPanel\r\n          :selected-friends=\"selectedFriends\"\r\n          :selected-groups=\"selectedGroups\"\r\n          @remove-friend=\"removeFriend\"\r\n          @remove-group=\"removeGroup\"\r\n          @clear-all=\"clearAllSelections\"\r\n          @set-group-tag=\"openSetGroupTagDialog\"\r\n          class=\"targets-panel\"\r\n        />\r\n\r\n        <!-- 下方：操作区域 -->\r\n        <OperationsPanel\r\n          :selected-friends=\"selectedFriends\"\r\n          :selected-groups=\"selectedGroups\"\r\n          @mass-send=\"handleMassSending\"\r\n          @batch-group=\"handleBatchInvite\"\r\n          @auto-follow=\"handleAutoFollow\"\r\n          @batch-tag=\"handleBatchTag\"\r\n          @delete=\"handleDeleteContacts\"\r\n          @open-settings=\"handleShowSettings\"\r\n          class=\"operations-panel\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 群发消息弹窗 -->\r\n    <CreateTaskDialog\r\n      v-model=\"showCreateDialog\"\r\n      :selected-friends=\"selectedFriends\"\r\n      :selected-groups=\"selectedGroups\"\r\n      :wechat-nickname=\"(activeInstances.find(inst => inst.account_id === selectedAccountId)?.nickname) || ''\"\r\n      :is-from-sop=\"false\"\r\n      @create=\"handleCreateTask\"\r\n    />\r\n\r\n    <!-- 批量拉群弹窗 -->\r\n    <el-dialog\r\n      v-model=\"showGroupSelectDialog\"\r\n      title=\"选择目标群聊\"\r\n      width=\"50%\"\r\n    >\r\n      <div class=\"group-select-container\">\r\n        <el-select\r\n          v-model=\"selectedTargetGroup\"\r\n          placeholder=\"请选择目标群聊\"\r\n          filterable\r\n          style=\"width: 100%\"\r\n        >\r\n          <el-option\r\n            v-for=\"group in groupList\"\r\n            :key=\"group.name\"\r\n            :label=\"group.name\"\r\n            :value=\"group.name\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"showGroupSelectDialog = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"confirmInviteToGroup\" :disabled=\"!selectedTargetGroup\">确认</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <el-dialog\r\n      v-model=\"showSetGroupTagDialog\"\r\n      title=\"设置群标签\"\r\n      width=\"500px\"\r\n      class=\"group-tag-dialog\"\r\n    >\r\n      <div class=\"set-group-tag-dialog\">\r\n        <div class=\"dialog-tip\">\r\n          <div>批量设置群标签，以便绑定AI智能体进行回复</div>\r\n          <div>如果群聊已绑定标签，重新设置会直接覆盖~</div>\r\n        </div>\r\n        <div class=\"dialog-targets\">\r\n          <span class=\"label\">群聊：</span>\r\n          {{ groupTagDialogTargetsText }}\r\n        </div>\r\n        <div class=\"dialog-input\">\r\n          <span class=\"label\">标签：</span>\r\n          <el-input\r\n            v-model=\"inputGroupTag\"\r\n            maxlength=\"10\"\r\n            show-word-limit\r\n            placeholder=\"请输入标签（1-10个字符，支持中英文/数字）\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"showSetGroupTagDialog = false\">取消</el-button>\r\n          <el-button type=\"primary\" :disabled=\"!canConfirmSetGroupTag\" @click=\"confirmSetGroupTag\">确认</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    <!-- 同步通讯录弹窗 -->\r\n    <sync-contacts-dialog\r\n      v-model=\"showSyncDialog\"\r\n      :accounts=\"activeInstances\"\r\n      :default-account-id=\"selectedAccountId\"\r\n      @sync=\"handleSync\"\r\n    />\r\n\r\n    <!-- 自动跟单配置弹窗 -->\r\n    <AutoFollowConfigDialog\r\n      v-model=\"showAutoFollowConfigDialog\"\r\n      :selected-friends=\"selectedFriends\"\r\n      @create=\"handleCreateAutoFollowTask\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Search } from '@element-plus/icons-vue'\r\nimport SelectedTargetsPanel from '@/components/SelectedTargetsPanel.vue'\r\nimport OperationsPanel from '@/components/OperationsPanel.vue'\r\nimport CreateTaskDialog from '@/components/sop/CreateTaskDialog.vue'\r\nimport SyncContactsDialog from '@/components/SyncContactsDialog.vue'\r\nimport AutoFollowConfigDialog from '@/components/AutoFollowConfigDialog.vue'\r\nimport { getContacts, getContactTags, getGroupTags, getGroups, inviteFriendsToGroup, syncContacts, syncGroups, Contact, Tag, setGroupTagBatch } from '@/api/contact'\r\nimport { headers } from '@/api/config'\r\nimport { createMassSendingTask, MassSendingTaskRequest, createBatchAutoFollowTasks, BatchAutoFollowRequest } from '@/api/autosop'\r\nimport { useRouter } from 'vue-router'\r\n\r\n// 定义实例接口\r\ninterface Instance {\r\n  account_id: string\r\n  nickname: string\r\n  status?: string\r\n  is_active?: boolean\r\n}\r\n\r\n// 响应式数据\r\nconst router = useRouter()\r\nconst activeType = ref('friends') // 'friends' | 'groups'\r\nconst selectedAccountId = ref('')\r\nconst selectedTag = ref('__ALL__')\r\nconst searchKeyword = ref('')\r\nconst loading = ref(false)\r\n\r\n// 实例和数据\r\nconst activeInstances = ref<Instance[]>([])\r\nconst friendsList = ref<Contact[]>([])\r\nconst groupList = ref<Contact[]>([])\r\nconst tagList = ref<Tag[]>([])\r\n\r\n// 选中的目标\r\nconst selectedFriends = ref<string[]>([])\r\nconst selectedGroups = ref<string[]>([])\r\n\r\n// 弹窗状态\r\nconst showCreateDialog = ref(false)\r\nconst showGroupSelectDialog = ref(false)\r\nconst showSyncDialog = ref(false)\r\nconst showAutoFollowConfigDialog = ref(false)\r\nconst selectedTargetGroup = ref('')\r\nconst inviting = ref(false)\r\n\r\n// 计算属性\r\nconst filteredList = computed(() => {\r\n  let list = activeType.value === 'friends' ? friendsList.value : groupList.value\r\n  \r\n  // 关键词搜索\r\n  if (searchKeyword.value) {\r\n    list = list.filter(item => \r\n      item.name.toLowerCase().includes(searchKeyword.value.toLowerCase())\r\n    )\r\n  }\r\n  \r\n  // 标签筛选（仅好友）\r\n  if (selectedTag.value && selectedTag.value !== '__ALL__') {\r\n    if (activeType.value === 'friends') {\r\n      if (selectedTag.value === '未分组') {\r\n        list = list.filter(friend => !friend.tags || friend.tags.length === 0)\r\n      } else {\r\n        list = list.filter(friend => \r\n          friend.tags && friend.tags.includes(selectedTag.value)\r\n        )\r\n      }\r\n    } else {\r\n      if (selectedTag.value === '未分组') {\r\n        list = list.filter(group => !('tag' in group) || !group.tag)\r\n      } else {\r\n        list = list.filter(group => ('tag' in group) && group.tag === selectedTag.value)\r\n      }\r\n    }\r\n  }\r\n  \r\n  return list\r\n})\r\n\r\n// 全选状态计算属性\r\nconst isAllSelected = computed(() => {\r\n  const selectedList = activeType.value === 'friends' ? selectedFriends.value : selectedGroups.value\r\n  return filteredList.value.length > 0 && \r\n         filteredList.value.every(item => selectedList.includes(item.name))\r\n})\r\n\r\n// 方法\r\nconst loadActiveInstances = async () => {\r\n  try {\r\n    const response = await fetch('/api/instances/active', { headers })\r\n    const data = await response.json()\r\n    console.log('获取活跃实例:', data)\r\n    if (data.success) {\r\n      activeInstances.value = data.instances\r\n      // 如果只有一个实例，自动选择\r\n      if (data.instances.length === 1) {\r\n        selectedAccountId.value = data.instances[0].account_id\r\n      } else if (data.instances.length > 1) {\r\n        // 选择当前活跃的实例\r\n        const activeInstance = data.instances.find((inst: Instance) => inst.is_active)\r\n        if (activeInstance) {\r\n          selectedAccountId.value = activeInstance.account_id\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('获取活跃实例失败:', error)\r\n    ElMessage.error('获取微信实例失败')\r\n  }\r\n}\r\n\r\nconst loadFriends = async () => {\r\n  if (!selectedAccountId.value) return\r\n  \r\n  loading.value = true\r\n  try {\r\n    // 修正：使用 '__ALL__' 作为全部标签的哨兵值；'未分组' 也不直接传到后端\r\n    const tagParam = (selectedTag.value === '__ALL__' || selectedTag.value === '未分组') ? undefined : selectedTag.value\r\n    const response = await getContacts(tagParam, searchKeyword.value, selectedAccountId.value)\r\n    friendsList.value = response.map(friend => ({\r\n      ...friend,\r\n      is_new: friend.is_new || false,\r\n      last_updated: friend.last_updated\r\n    }))\r\n  } catch (error) {\r\n    console.error('获取好友列表失败:', error)\r\n    ElMessage.error('获取好友列表失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst loadGroups = async () => {\r\n  // if (!selectedAccountId.value) return\r\n  loading.value = true\r\n  try {\r\n    const response = await getGroups(searchKeyword.value, selectedAccountId.value)\r\n    groupList.value = response.map(group => {\r\n      return {\r\n        ...group,\r\n        id: group.name,\r\n        tag: group.tag\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error('获取群聊列表失败:', error)\r\n    ElMessage.error('获取群聊列表失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst loadTags = async () => {\r\n  if (!selectedAccountId.value) return\r\n  \r\n  try {\r\n    const response = activeType.value === 'friends'\r\n      ? await getContactTags(selectedAccountId.value)\r\n      : await getGroupTags(selectedAccountId.value)\r\n    tagList.value = (response || []).filter(tag => !(tag.name === '未分组' && (tag.count ?? 0) === 0))\r\n  } catch (error) {\r\n    console.error('获取标签列表失败:', error)\r\n  }\r\n}\r\n\r\nconst isSelected = (name: string) => {\r\n  if (activeType.value === 'friends') {\r\n    return selectedFriends.value.includes(name)\r\n  } else {\r\n    return selectedGroups.value.includes(name)\r\n  }\r\n}\r\n\r\nconst toggleSelection = (name: string, type: 'friend' | 'group') => {\r\n  if (type === 'friend') {\r\n    const index = selectedFriends.value.indexOf(name)\r\n    if (index > -1) {\r\n      selectedFriends.value.splice(index, 1)\r\n    } else {\r\n      selectedFriends.value.push(name)\r\n    }\r\n  } else {\r\n    const index = selectedGroups.value.indexOf(name)\r\n    if (index > -1) {\r\n      selectedGroups.value.splice(index, 1)\r\n    } else {\r\n      selectedGroups.value.push(name)\r\n    }\r\n  }\r\n}\r\n\r\nconst removeFriend = (name: string) => {\r\n  const index = selectedFriends.value.indexOf(name)\r\n  if (index > -1) {\r\n    selectedFriends.value.splice(index, 1)\r\n  }\r\n}\r\n\r\nconst removeGroup = (name: string) => {\r\n  const index = selectedGroups.value.indexOf(name)\r\n  if (index > -1) {\r\n    selectedGroups.value.splice(index, 1)\r\n  }\r\n}\r\n\r\nconst clearAllSelections = () => {\r\n  selectedFriends.value = []\r\n  selectedGroups.value = []\r\n}\r\n\r\n// 全选/取消全选方法\r\nconst toggleSelectAll = () => {\r\n  const selectedList = activeType.value === 'friends' ? selectedFriends.value : selectedGroups.value\r\n  if (isAllSelected.value) {\r\n    // 取消全选：清空当前类型的选择\r\n    if (activeType.value === 'friends') {\r\n      selectedFriends.value = []\r\n    } else {\r\n      selectedGroups.value = []\r\n    }\r\n  } else {\r\n    // 全选：选择当前筛选列表中的所有项目\r\n    const newSelections = filteredList.value.map(item => item.name)\r\n    if (activeType.value === 'friends') {\r\n      selectedFriends.value = newSelections\r\n    } else {\r\n      selectedGroups.value = newSelections\r\n    }\r\n  }\r\n}\r\n\r\n// 事件处理\r\nconst handleTypeChange = async () => {\r\n  // 切换好友/群聊时不清空已选择的目标，只重置筛选条件\r\n  selectedTag.value = '__ALL__'\r\n  searchKeyword.value = ''\r\n  console.log('activeType.value', activeType.value, selectedAccountId.value)\r\n  // 如果没有选择账号，尝试重新加载实例\r\n  // if (!selectedAccountId.value) {\r\n  //   await loadActiveInstances()\r\n  //   // 如果仍然没有账号，说明没有登录的微信实例\r\n\r\n  //   if (!selectedAccountId.value) {\r\n  //     ElMessage.warning('请先登录微信账号')\r\n  //     return\r\n  //   }\r\n  // }\r\n  \r\n  if (activeType.value === 'friends') {\r\n    await loadFriends()\r\n    await loadTags()\r\n  } else {\r\n    await loadGroups()\r\n    await loadTags()\r\n  }\r\n}\r\n\r\nconst handleAccountChange = () => {\r\n  // 只有切换账号时才清空已选择的目标\r\n  clearAllSelections()\r\n  selectedTag.value = '__ALL__'\r\n  searchKeyword.value = ''\r\n  \r\n  // 切换账号时总是重新加载标签列表，不管当前是好友还是群聊模式\r\n  loadTags()\r\n  \r\n  if (activeType.value === 'friends') {\r\n    loadFriends()\r\n  } else {\r\n    loadGroups()\r\n  }\r\n}\r\n\r\nconst handleTagChange = () => {\r\n  // 标签变化时不需要重新加载数据，只需要重新过滤\r\n}\r\n\r\nconst handleSearch = () => {\r\n  // 搜索时不需要重新加载数据，只需要重新过滤\r\n}\r\n\r\n// 操作处理\r\nconst handleMassSending = () => {\r\n  showCreateDialog.value = true\r\n}\r\n\r\nconst handleBatchInvite = () => {\r\n  if (selectedFriends.value.length === 0) {\r\n    ElMessage.warning('请先选择要拉群的好友')\r\n    return\r\n  }\r\n  \r\n  // 加载群聊列表用于选择\r\n  loadGroups().then(() => {\r\n    showGroupSelectDialog.value = true\r\n  })\r\n}\r\n\r\nconst handleAutoFollow = () => {\r\n  if (selectedFriends.value.length === 0) {\r\n    ElMessage.warning('请先选择要跟单的好友')\r\n    return\r\n  }\r\n\r\n  if (!selectedAccountId.value) {\r\n    ElMessage.warning('请先选择微信账号')\r\n    return\r\n  }\r\n\r\n  // 显示自动跟单配置弹窗\r\n  showAutoFollowConfigDialog.value = true\r\n}\r\n\r\nconst handleBatchTag = () => {\r\n  if (selectedGroups.value.length === 0 || selectedFriends.value.length > 0) {\r\n    ElMessage.warning('仅支持对选中的群聊批量设置标签')\r\n    return\r\n  }\r\n  openSetGroupTagDialog()\r\n}\r\n\r\nconst handleDeleteContacts = () => {\r\n  ElMessage.info('删除功能开发中...')\r\n}\r\n\r\nconst handleShowSettings = () => {\r\n  showSyncDialog.value = true\r\n}\r\n\r\nconst handleCreateTask = async (taskData: MassSendingTaskRequest) => {\r\n  try {\r\n    const requestData = {\r\n      ...taskData,\r\n      selectedFriends: [...selectedFriends.value, ...selectedGroups.value], // 合并为一个列表\r\n      selectedGroups: [], // 不再单独传递群聊列表\r\n      account_id: selectedAccountId.value\r\n    }\r\n    console.debug('创建任务请求数据:', requestData)\r\n    await createMassSendingTask(requestData)\r\n    ElMessage.success('任务创建成功')\r\n    // 重置选择状态\r\n    selectedFriends.value = []\r\n    selectedGroups.value = []\r\n    showCreateDialog.value = false\r\n    // 跳转到 AutoSOP 页面\r\n    router.push({\r\n      name: 'AutoSOP',\r\n      query: {\r\n        function: 'activate'\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error('创建任务失败:', error)\r\n    ElMessage.error('创建任务失败')\r\n  }\r\n}\r\n\r\nconst showSetGroupTagDialog = ref(false)\r\nconst inputGroupTag = ref('')\r\n\r\nconst openSetGroupTagDialog = () => {\r\n  inputGroupTag.value = ''\r\n  showSetGroupTagDialog.value = true\r\n}\r\n\r\nconst isValidTag = (s: string) => {\r\n  const t = s.trim()\r\n  if (!t) return false\r\n  return /^[\\u4e00-\\u9fffA-Za-z0-9]+$/.test(t)\r\n}\r\n\r\nconst canConfirmSetGroupTag = computed(() => {\r\n  const t = inputGroupTag.value.trim()\r\n  const len = t.length\r\n  return isValidTag(t) && len >= 1 && len <= 10 && selectedGroups.value.length > 0\r\n})\r\n\r\nconst groupTagDialogTargetsText = computed(() => {\r\n  const max = 5\r\n  const names = selectedGroups.value.slice(0, max).join('，')\r\n  if (selectedGroups.value.length > max) {\r\n    return `${names} 等${selectedGroups.value.length}个群`\r\n  }\r\n  return names\r\n})\r\n\r\nconst confirmSetGroupTag = async () => {\r\n  if (!selectedAccountId.value) {\r\n    ElMessage.error('请先选择微信账号')\r\n    return\r\n  }\r\n  const t = inputGroupTag.value.trim()\r\n  const len = t.length\r\n  if (!isValidTag(t) || len < 1 || len > 10) {\r\n    ElMessage.error('标签需为1-10个字符（支持中英文和数字）')\r\n    return\r\n  }\r\n  try {\r\n    const res = await setGroupTagBatch({\r\n      groups: selectedGroups.value,\r\n      tag: t,\r\n      account_id: selectedAccountId.value\r\n    })\r\n    if (res && res.success) {\r\n      ElMessage.success('已批量设置群标签')\r\n      showSetGroupTagDialog.value = false\r\n      await loadGroups()\r\n    } else {\r\n      ElMessage.error(res?.error || '设置群标签失败')\r\n    }\r\n  } catch (e) {\r\n    ElMessage.error('设置群标签失败')\r\n  }\r\n}\r\n\r\nconst handleCreateAutoFollowTask = async (configData: any) => {\r\n  try {\r\n    // 构建好友列表，包含 wxid 和 nickname\r\n    const friends = selectedFriends.value.map(friendName => {\r\n      const friend = friendsList.value.find(f => f.name === friendName)\r\n      return {\r\n        wxid: friend?.wxid || `wx_${friendName}`,\r\n        nickname: friendName\r\n      }\r\n    })\r\n\r\n    // 构建批量跟单请求\r\n    const batchRequest: BatchAutoFollowRequest = {\r\n      account_id: selectedAccountId.value,\r\n      friends: friends,\r\n      agent_id: configData.agentId,\r\n      follow_scenario: '新好友', // 使用默认场景\r\n      follow_days: 7, // 固定为7天\r\n      follow_frequency: configData.followFrequency === 'high' ? 'daily' : 'medium',\r\n      time_range_start: configData.timeRangeStart,\r\n      time_range_end: configData.timeRangeEnd\r\n    }\r\n\r\n    console.debug('批量创建自动跟单任务请求:', batchRequest)\r\n\r\n    // 调用后端接口\r\n    const result = await createBatchAutoFollowTasks(batchRequest)\r\n    \r\n    if (result.success) {\r\n      ElMessage.success(`成功为 ${selectedFriends.value.length} 个好友创建自动跟单任务`)\r\n      // 重置选择状态\r\n      selectedFriends.value = []\r\n      // 跳转到 AutoSOP 的自动跟单功能\r\n      router.push({\r\n        name: 'AutoSOP',\r\n        query: {\r\n          function: 'autofollow'\r\n        }\r\n      })\r\n    } else {\r\n      ElMessage.error(result.error || '创建自动跟单任务失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('创建自动跟单任务失败:', error)\r\n    ElMessage.error(error instanceof Error ? error.message : '创建自动跟单任务失败')\r\n  }\r\n}\r\n\r\nconst confirmInviteToGroup = async () => {\r\n  if (!selectedTargetGroup.value) {\r\n    ElMessage.warning('请选择目标群聊')\r\n    return\r\n  }\r\n  showGroupSelectDialog.value = false\r\n  try {\r\n    inviting.value = true\r\n    const result = await inviteFriendsToGroup({\r\n      friends: selectedFriends.value,\r\n      targetGroup: selectedTargetGroup.value,\r\n      account_id: selectedAccountId.value\r\n    })\r\n    \r\n    if (result.success) {\r\n      ElMessage.success(`批量拉群成功，已邀请 ${result.data.invitedCount} 位好友`)\r\n      // 重置选择状态\r\n      selectedFriends.value = []\r\n      selectedTargetGroup.value = ''\r\n    } else {\r\n      ElMessage.error(result.error || '批量拉群失败')\r\n    }\r\n  } catch (error) {\r\n    console.error('批量拉群失败:', error)\r\n    const msg = (error instanceof Error) ? error.message : (error as any)?.message || '批量拉群失败'\r\n    ElMessage.error(msg)\r\n  } finally {\r\n    inviting.value = false\r\n  }\r\n}\r\n\r\n// 生命周期\r\nonMounted(async () => {\r\n  await loadActiveInstances()\r\n  if (selectedAccountId.value) {\r\n    await loadFriends()\r\n    await loadGroups()  // 同时加载群聊数据\r\n    await loadTags()\r\n  }\r\n})\r\n\r\n// 监听账号变化\r\nwatch(selectedAccountId, () => {\r\n  if (selectedAccountId.value) {\r\n    loadFriends()\r\n    loadGroups()  // 总是加载群聊数据\r\n    loadTags()\r\n  }\r\n})\r\n\r\n// 监听activeType变化，确保切换时数据已加载（仅在数据为空时加载）\r\nwatch(activeType, () => {\r\n  if (selectedAccountId.value) {\r\n    if (activeType.value === 'friends' && friendsList.value.length === 0) {\r\n      loadFriends()\r\n    } else if (activeType.value === 'groups' && groupList.value.length === 0) {\r\n      loadGroups()\r\n    }\r\n  }\r\n})\r\n\r\n// 同步通讯录处理方法\r\nconst handleSync = async (syncData: { accountId: string, type: 'friend' | 'group' }) => {\r\n  try {\r\n    // 使用API层的接口\r\n    if (syncData.type === 'friend') {\r\n      await syncContacts(syncData.accountId)\r\n      ElMessage.success('好友同步成功')\r\n      await loadFriends()\r\n    } else {\r\n      await syncGroups(syncData.accountId)\r\n      ElMessage.success('群聊同步成功')\r\n      await loadGroups()\r\n    }\r\n  } catch (error: any) {\r\n    console.error('同步失败:', error)\r\n    ElMessage.error(`${syncData.type === 'friend' ? '好友' : '群聊'}同步失败: ${error?.message || '未知错误'}`)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.customer-management-container {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n/* 顶部筛选区域 */\r\n.filter-bar {\r\n  background: white;\r\n  border-radius: 0;\r\n  padding: 20px 0;\r\n  margin: 0 -18px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\r\n  flex-shrink: 0;\r\n  width: calc(100% + 48px);\r\n}\r\n\r\n.filter-content {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 48px;\r\n}\r\n\r\n.type-tabs {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.type-tabs :deep(.el-radio-button__inner) {\r\n  border: none;\r\n  background: #f3f4f6;\r\n  color: #6b7280;\r\n  padding: 10px 24px;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  transition: all 0.25s ease;\r\n}\r\n\r\n.type-tabs :deep(.el-radio-button__inner:hover) {\r\n  background: #e5e7eb;\r\n  color: #374151;\r\n}\r\n\r\n.type-tabs :deep(.el-radio-button__original-radio:checked + .el-radio-button__inner) {\r\n  background: linear-gradient(135deg, #1e3a8a, #3b82f6);\r\n  color: white;\r\n  box-shadow: 0 4px 12px rgba(30, 58, 138, 0.25);\r\n}\r\n\r\n.filter-controls {\r\n  display: flex;\r\n  gap: 12px;\r\n  align-items: center;\r\n}\r\n\r\n.account-select, .tag-select {\r\n  min-width: 140px;\r\n}\r\n\r\n.account-select :deep(.el-input__wrapper),\r\n.tag-select :deep(.el-input__wrapper) {\r\n  background: white;\r\n  border: 1.5px solid #e5e7eb;\r\n  border-radius: 8px;\r\n  transition: all 0.25s ease;\r\n}\r\n\r\n.account-select :deep(.el-input__wrapper:hover),\r\n.tag-select :deep(.el-input__wrapper:hover) {\r\n  border-color: #1e3a8a;\r\n}\r\n\r\n.account-select :deep(.el-input__wrapper.is-focus),\r\n.tag-select :deep(.el-input__wrapper.is-focus) {\r\n  border-color: #3b82f6;\r\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.account-option {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.nickname {\r\n  font-weight: 500;\r\n}\r\n\r\n.account-id {\r\n  font-size: 12px;\r\n  color: #1890ff;\r\n  background: rgba(24, 144, 255, 0.1);\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  font-family: 'Courier New', monospace;\r\n}\r\n\r\n/* 主要内容区域 */\r\n.content-grid {\r\n  display: flex;\r\n  gap: 10px;\r\n  flex: 1;\r\n  overflow: hidden;\r\n  height: calc(100% - 80px);\r\n  width: 100%;\r\n  margin: 0;\r\n  padding: 10px;\r\n}\r\n\r\n/* 左侧联系人列表 - 严格占1/3宽度 */\r\n.contact-list {\r\n  background: white;\r\n  border-radius: 16px;\r\n  padding: 5px;\r\n  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.06);\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  width: 30%;\r\n  flex-shrink: 0;\r\n  min-width: 250px;\r\n  max-width: 35%;\r\n}\r\n\r\n/* 右侧区域 - 严格占2/3宽度，上下分布 */\r\n.right-section {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  height: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n/* 上方：选中目标展示 - 占右侧高度的60% */\r\n.targets-panel {\r\n  flex: 0 0 60%;\r\n  min-height: 200px;\r\n  width: 100%;\r\n}\r\n\r\n/* 下方：操作区域 - 占右侧高度的40% */\r\n.operations-panel {\r\n  flex: 1;\r\n  min-height: 150px;\r\n  width: 100%;\r\n}\r\n\r\n.list-header {\r\n  padding: 10px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.search-box {\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.list-count-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.list-count {\r\n  font-size: 14px;\r\n  color: #666;\r\n  font-weight: 500;\r\n}\r\n\r\n.list-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 10px;\r\n}\r\n\r\n/* 好友列表项 */\r\n.friend-item, .group-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 10px;\r\n  border-radius: 12px;\r\n  cursor: pointer;\r\n  transition: all 0.25s ease;\r\n  margin-bottom: 8px;\r\n  position: relative;\r\n  border: 1px solid transparent;\r\n  background: #fafbfc;\r\n}\r\n\r\n.friend-item:hover, .group-item:hover {\r\n  background: #f1f5f9;\r\n  border-color: #e2e8f0;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.friend-item.selected, .group-item.selected {\r\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(30, 58, 138, 0.08));\r\n  border: 1.5px solid #3b82f6;\r\n  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.15);\r\n}\r\n\r\n.friend-avatar, .group-avatar {\r\n  position: relative;\r\n  margin-right: 12px;\r\n}\r\n\r\n.avatar-placeholder {\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 12px;\r\n  background: linear-gradient(135deg, #667eea, #764ba2);\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  box-shadow: 0 2px 8px rgba(102, 126, 234, 0.25);\r\n}\r\n\r\n.group-avatar-bg {\r\n  background: linear-gradient(135deg, #7dd3fc, #3b82f6);\r\n  box-shadow: 0 2px 8px rgba(125, 211, 252, 0.25);\r\n}\r\n\r\n.new-badge {\r\n  position: absolute;\r\n  top: -6px;\r\n  right: -6px;\r\n  width: 20px;\r\n  height: 20px;\r\n  z-index: 2;\r\n}\r\n\r\n.new-badge-icon {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: contain;\r\n}\r\n\r\n.friend-info, .group-info {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.friend-name, .group-name {\r\n  font-weight: 500;\r\n  color: #333;\r\n  margin-bottom: 4px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.friend-wxid, .group-member-count {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-bottom: 4px;\r\n  font-family: 'Courier New', monospace;\r\n}\r\n\r\n.friend-tags {\r\n  display: flex;\r\n  gap: 4px;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.more-tags {\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n/* 空状态 */\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 10px;\r\n  color: #a0aec0;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 48px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 16px;\r\n}\r\n\r\n/* 弹窗样式 */\r\n.group-select-container {\r\n  padding: 10px 0;\r\n}\r\n\r\n.dialog-footer {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.set-group-tag-dialog .dialog-tip {\r\n  background: #f5f7fa;\r\n  color: #606266;\r\n  padding: 10px 12px;\r\n  border-radius: 6px;\r\n  margin-bottom: 12px;\r\n}\r\n.set-group-tag-dialog .dialog-targets {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  width: 100%;\r\n}\r\n.set-group-tag-dialog .dialog-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  width: 100%;\r\n}\r\n.set-group-tag-dialog .dialog-input .label {\r\n  min-width: 48px;\r\n  text-align: right;\r\n  color: #606266;\r\n  font-weight: bold;\r\n}\r\n.set-group-tag-dialog .dialog-targets .label {\r\n  min-width: 48px;\r\n  text-align: right;\r\n  color: #606266;\r\n  font-weight: bold;\r\n}\r\n\r\n/* 对齐现有弹窗与OperationsPanel的风格 */\r\n:deep(.el-dialog__header) {\r\n  padding-bottom: 20px;\r\n  margin-bottom: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n:deep(.el-dialog__title) {\r\n  font-weight: 600;\r\n  font-size: 16px;\r\n  color: #1f2937;\r\n  text-align: center;\r\n}\r\n:deep(.el-dialog__footer) {\r\n  padding-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n/* .set-group-tag-dialog :deep(.el-input__wrapper) {\r\n  box-shadow: 0 0 0 1px #dcdfe6 inset;\r\n}\r\n.set-group-tag-dialog :deep(.el-input__wrapper.is-focus) {\r\n  box-shadow: 0 0 0 1.5px #3b82f6 inset;\r\n} */\r\n.set-group-tag-dialog {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n.set-group-tag-dialog .dialog-tip {\r\n  background: #f5f7fa;\r\n  color: #606266;\r\n  padding: 12px;\r\n  border-radius: 8px;\r\n  line-height: 1.7;\r\n}\r\n.set-group-tag-dialog .dialog-input :deep(.el-input) {\r\n  flex: 1;\r\n}\r\n/* 标签下拉弹层样式优化，处理长标签展示 */\r\n:deep(.tag-dropdown) {\r\n  max-width: 420px;\r\n}\r\n:deep(.tag-dropdown .el-select-dropdown__item) {\r\n  white-space: normal;\r\n  word-break: break-word;\r\n}\r\n\r\n\r\n</style>\r\n","import script from \"./CustomerManagement.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CustomerManagement.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CustomerManagement.vue?vue&type=style&index=0&id=5f77041b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5f77041b\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","key","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","maxDisplayItems","_defineComponent","__name","props","selectedFriends","default","selectedGroups","emits","setup","__props","emit","__emit","hasSelections","computed","length","canSetGroupTag","displayedFriends","slice","displayedGroups","_ctx","_cache","_component_el_button","_resolveComponent","_openBlock","_createElementBlock","_createElementVNode","_createVNode","type","plain","size","disabled","value","onClick","$event","$emit","_withCtx","_createTextVNode","_","_createCommentVNode","_toDisplayString","_Fragment","_renderList","friend","group","__exports__","createSyncContactsTask","async","response","fetch","API_BASE_URL","method","headers","body","JSON","stringify","request","ok","error","json","Error","console","getSyncContactsTaskStatus","result","task","cancelSyncContactsTask","taskId","autoSyncEnabled","ref","checkAutoSyncStatus","activeTask","hasFriends","hasGroups","hasBothTypes","canMassSend","canBatchGroup","canAutoFollow","allOperationsAvailable","operationTip","onMounted","_component_el_alert","viewBox","fill","stroke","d","cx","cy","r","_createStaticVNode","title","closable","modelValue","Boolean","countdown","message","visible","currentCount","watch","newVal","startCountdown","timer","setInterval","clearInterval","_component_el_dialog","_createBlock","width","accounts","defaultAccountId","selectedAccountId","showCountdown","countdownMessage","syncType","autoSyncStartTime","Date","autoSyncEndTime","syncItems","syncFrequency","nextExecutionTime","updateAutoEndTime","start","end","setHours","getHours","passedId","exists","some","acc","account_id","log","syncConfig","params","sync_config","sync_items","sync_frequency","time_range_start","time_range_end","startHour","startMinute","split","endHour","endMinute","parseInt","next_run_time","nextTime","toLocaleString","year","month","day","hour","minute","second","handleAutoSyncToggle","enabled","val","ElMessage","warning","toString","padStart","getMinutes","success","next_execution_time","id","info","handleSync","executeSync","accountId","handleClose","_component_el_option","_component_el_select","_component_el_checkbox","_component_el_checkbox_group","_component_el_input_number","_component_el_time_picker","_component_el_switch","footer","placeholder","style","account","label","nickname","min","max","step","format","onChange","CountdownDialog","onFinish","Array","cozeAgents","useRouter","creating","configForm","agentId","followFrequency","startTime","endTime","dialogWidth","windowWidth","window","innerWidth","dialogVisible","get","set","formatSelectedFriends","join","loadCozeAgents","getConfig","data","agents","isArray","filter","agent","name","botId","defaultAgent","find","isDefault","handleCreateAutoFollow","startTimeInMinutes","endTimeInMinutes","configData","timeRangeStart","timeRangeEnd","_component_el_icon","_component_el_form_item","_component_el_radio","_component_el_radio_group","_component_el_form","top","loading","model","_unref","Avatar","User","Calendar","Clock","AlarmClock","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","router","activeType","selectedTag","searchKeyword","activeInstances","friendsList","groupList","tagList","showCreateDialog","showGroupSelectDialog","showSyncDialog","showAutoFollowConfigDialog","selectedTargetGroup","inviting","filteredList","list","item","toLowerCase","includes","tags","tag","isAllSelected","selectedList","every","loadActiveInstances","instances","activeInstance","inst","is_active","loadFriends","tagParam","undefined","getContacts","map","is_new","last_updated","loadGroups","getGroups","loadTags","getContactTags","getGroupTags","count","isSelected","toggleSelection","index","indexOf","splice","push","removeFriend","removeGroup","clearAllSelections","toggleSelectAll","newSelections","handleTypeChange","handleAccountChange","handleTagChange","handleSearch","handleMassSending","handleBatchInvite","then","handleAutoFollow","handleBatchTag","openSetGroupTagDialog","handleDeleteContacts","handleShowSettings","handleCreateTask","requestData","taskData","debug","createMassSendingTask","query","function","showSetGroupTagDialog","inputGroupTag","isValidTag","s","t","trim","test","canConfirmSetGroupTag","len","groupTagDialogTargetsText","names","confirmSetGroupTag","res","setGroupTagBatch","groups","e","handleCreateAutoFollowTask","friends","friendName","f","wxid","batchRequest","agent_id","follow_scenario","follow_days","follow_frequency","createBatchAutoFollowTasks","confirmInviteToGroup","inviteFriendsToGroup","targetGroup","invitedCount","msg","syncData","syncContacts","syncGroups","_component_el_radio_button","_component_el_input","_component_el_tag","_directive_loading","_resolveDirective","instance","onInput","clearable","prefix","Search","_withDirectives","_normalizeClass","charAt","SelectedTargetsPanel","onRemoveFriend","onRemoveGroup","onClearAll","onSetGroupTag","OperationsPanel","onMassSend","onBatchGroup","onAutoFollow","onBatchTag","onDelete","onOpenSettings","CreateTaskDialog","onCreate","filterable","maxlength","SyncContactsDialog","onSync","AutoFollowConfigDialog"],"ignoreList":[],"sourceRoot":""}